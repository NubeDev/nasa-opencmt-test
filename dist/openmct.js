!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.openmct=t()}(this,function(){var e,t,n;return function(i){function r(e,t){return S.call(e,t)}function o(e,t){var n,i,r,o,s,a,c,l,u,d,p,f,h=t&&t.split("/"),m=b.map,g=m&&m["*"]||{};if(e){for(e=e.split("/"),s=e.length-1,b.nodeIdCompat&&C.test(e[s])&&(e[s]=e[s].replace(C,"")),"."===e[0].charAt(0)&&h&&(f=h.slice(0,h.length-1),e=f.concat(e)),u=0;u<e.length;u++)if(p=e[u],"."===p)e.splice(u,1),u-=1;else if(".."===p){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((h||g)&&m){for(n=e.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(d=h.length;d>0;d-=1)if(r=m[h.slice(0,d).join("/")],r&&(r=r[i])){o=r,a=u;break}if(o)break;!c&&g&&g[i]&&(c=g[i],l=u)}!o&&c&&(o=c,a=l),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function s(e,t){return function(){var n=x.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),h.apply(i,n.concat([e,t]))}}function a(e){return function(t){return o(t,e)}}function c(e){return function(t){y[e]=t}}function l(e){if(r(v,e)){var t=v[e];delete v[e],w[e]=!0,f.apply(i,t)}if(!r(y,e)&&!r(w,e))throw new Error("No "+e);return y[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(e){return e?u(e):[]}function p(e){return function(){return b&&b.config&&b.config[e]||{}}}var f,h,m,g,y={},v={},b={},w={},S=Object.prototype.hasOwnProperty,x=[].slice,C=/\.js$/;m=function(e,t){var n,i=u(e),r=i[0],s=t[1];return e=i[1],r&&(r=o(r,s),n=l(r)),r?e=n&&n.normalize?n.normalize(e,a(s)):o(e,s):(e=o(e,s),i=u(e),r=i[0],e=i[1],r&&(n=l(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return s(e)},exports:function(e){var t=y[e];return"undefined"!=typeof t?t:y[e]={}},module:function(e){return{id:e,uri:"",exports:y[e],config:p(e)}}},f=function(e,t,n,o){var a,u,p,f,h,b,S,x=[],C=typeof n;if(o=o||e,b=d(o),"undefined"===C||"function"===C){for(t=!t.length&&n.length?["require","exports","module"]:t,h=0;h<t.length;h+=1)if(f=m(t[h],b),u=f.f,"require"===u)x[h]=g.require(e);else if("exports"===u)x[h]=g.exports(e),S=!0;else if("module"===u)a=x[h]=g.module(e);else if(r(y,u)||r(v,u)||r(w,u))x[h]=l(u);else{if(!f.p)throw new Error(e+" missing "+u);f.p.load(f.n,s(o,!0),c(u),{}),x[h]=y[u]}p=n?n.apply(y[e],x):void 0,e&&(a&&a.exports!==i&&a.exports!==y[e]?y[e]=a.exports:p===i&&S||(y[e]=p))}else e&&(y[e]=n)},e=t=h=function(e,t,n,r,o){if("string"==typeof e)return g[e]?g[e](t):l(m(e,d(t)).f);if(!e.splice){if(b=e,b.deps&&h(b.deps,b.callback),!t)return;t.splice?(e=t,t=n,n=null):e=i}return t=t||function(){},"function"==typeof n&&(n=r,r=o),r?f(i,e,t,n):setTimeout(function(){f(i,e,t,n)},4),h},h.config=function(e){return h(e)},e._defined=y,n=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(y,e)||r(v,e)||(v[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("bower_components/almond/almond.js",function(){}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof n&&n.amd?n("es6-promise",t):e.ES6Promise=t()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function i(e){W=e}function r(e){G=e}function o(){return function(){return process.nextTick(u)}}function s(){return function(){H(u)}}function a(){var e=0,t=new X(u),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=u,function(){return e.port2.postMessage(0)}}function l(){var e=setTimeout;return function(){return e(u,1)}}function u(){for(var e=0;z>e;e+=2){var t=ee[e],n=ee[e+1];t(n),ee[e]=void 0,ee[e+1]=void 0}z=0}function d(){try{var e=t,n=e("vertx");return H=n.runOnLoop||n.runOnContext,s()}catch(i){return l()}}function p(e,t){var n=arguments,i=this,r=new this.constructor(h);void 0===r[ne]&&L(r);var o=i._state;return o?!function(){var e=n[o-1];G(function(){return A(o,r,e,i._result)})}():M(i,r,e,t),r}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(h);return x(n,e),n}function h(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function y(e){try{return e.then}catch(t){return se.error=t,se}}function v(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function b(e,t,n){G(function(e){var i=!1,r=v(n,t,function(n){i||(i=!0,t!==n?x(e,n):T(e,n))},function(t){i||(i=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,k(e,r))},e)}function w(e,t){t._state===re?T(e,t._result):t._state===oe?k(e,t._result):M(t,void 0,function(t){return x(e,t)},function(t){return k(e,t)})}function S(e,t,i){t.constructor===e.constructor&&i===p&&t.constructor.resolve===f?w(e,t):i===se?k(e,se.error):void 0===i?T(e,t):n(i)?b(e,t,i):T(e,t)}function x(t,n){t===n?k(t,m()):e(n)?S(t,n,y(n)):T(t,n)}function C(e){e._onerror&&e._onerror(e._result),O(e)}function T(e,t){e._state===ie&&(e._result=t,e._state=re,0!==e._subscribers.length&&G(O,e))}function k(e,t){e._state===ie&&(e._state=oe,e._result=t,G(C,e))}function M(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+re]=n,r[o+oe]=i,0===o&&e._state&&G(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?A(n,i,r,o):r(o);e._subscribers.length=0}}function $(){this.error=null}function _(e,t){try{return e(t)}catch(n){return ae.error=n,ae}}function A(e,t,i,r){var o=n(i),s=void 0,a=void 0,c=void 0,l=void 0;if(o){if(s=_(i,r),s===ae?(l=!0,a=s.error,s=null):c=!0,t===s)return void k(t,g())}else s=r,c=!0;t._state!==ie||(o&&c?x(t,s):l?k(t,a):e===re?T(t,s):e===oe&&k(t,s))}function E(e,t){try{t(function(t){x(e,t)},function(t){k(e,t)})}catch(n){k(e,n)}}function I(){return ce++}function L(e){e[ne]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function N(e,t){this._instanceConstructor=e,this.promise=new e(h),this.promise[ne]||L(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&T(this.promise,this._result))):k(this.promise,D())}function D(){return new Error("Array Methods must be provided an Array")}function j(e){return new N(this,e).promise}function R(e){var t=this;return new t(Y(e)?function(n,i){for(var r=e.length,o=0;r>o;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function P(e){var t=this,n=new t(h);return k(n,e),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(e){this[ne]=I(),this._result=this._state=void 0,this._subscribers=[],h!==e&&("function"!=typeof e&&U(),this instanceof V?E(this,e):F())}function B(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var i=null;try{i=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===i&&!n.cast)return}e.Promise=V}var q=void 0;q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=q,z=0,H=void 0,W=void 0,G=function(e,t){ee[z]=e,ee[z+1]=t,z+=2,2===z&&(W?W(u):te())},K="undefined"!=typeof window?window:void 0,Z=K||{},X=Z.MutationObserver||Z.WebKitMutationObserver,J="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ee=new Array(1e3),te=void 0;te=J?o():X?a():Q?c():void 0===K&&"function"==typeof t?d():l();var ne=Math.random().toString(36).substring(16),ie=void 0,re=1,oe=2,se=new $,ae=new $,ce=0;return N.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ie&&e>n;n++)this._eachEntry(t[n],n)},N.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===f){var r=y(e);if(r===p&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===V){var o=new n(h);S(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},N.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===ie&&(this._remaining--,e===oe?k(i,n):this._result[t]=n),0===this._remaining&&T(i,this._result)},N.prototype._willSettleAt=function(e,t){var n=this;M(e,void 0,function(e){return n._settledAt(re,t,e)},function(e){return n._settledAt(oe,t,e)})},V.all=j,V.race=R,V.resolve=f,V.reject=P,V._setScheduler=i,V._setAsap=r,V._asap=G,V.prototype={constructor:V,then:p,"catch":function(e){return this.then(null,e)}},B(),V.polyfill=B,V.Promise=V,V}),n("platform/framework/src/Constants",{MODULE_NAME:"OpenMCTWeb",BUNDLE_FILE:"bundle.json",SEPARATOR:"/",EXTENSION_SUFFIX:"[]",DEFAULT_BUNDLE:{sources:"src",resources:"res",libraries:"lib",tests:"test",configuration:{},extensions:{}},PRIORITY_LEVELS:{fallback:Number.NEGATIVE_INFINITY,"default":-100,none:0,optional:100,preferred:1e3,mandatory:Number.POSITIVE_INFINITY},DEFAULT_PRIORITY:0}),n("platform/framework/src/FrameworkInitializer",[],function(){function e(e,t,n,i){this.loader=e,this.resolver=t,this.registrar=n,this.bootstrapper=i}function t(e,t){return function(){return e.apply(t,arguments)}}return e.prototype.runApplication=function(){return this.loader.loadBundles([]).then(t(this.resolver.resolveBundles,this.resolver)).then(t(this.registrar.registerExtensions,this.registrar)).then(t(this.bootstrapper.bootstrap,this.bootstrapper))},e}),n("platform/framework/src/LogLevel",[],function(){function e(){}function t(e){this.index=n.indexOf(e),this.index<0&&(this.index=1)}var n=["error","warn","info","log","debug"];return t.prototype.configure=function(t,i){function r(t){n.forEach(function(n,i){i>o&&(t[n]=e)})}var o=this.index;r(i),t.decorator("$log",["$delegate",function(e){return r(e),e}])},t}),n("platform/framework/src/load/Extension",[],function(){function e(e,t,n){var i=t,r={};(n.key||n.name)&&(i+="(",i+=n.key||"",i+=n.key&&n.name?" ":"",i+=n.name||"",i+=")"),i+=" from "+e.getLogName(),Object.keys(n).forEach(function(e){r[e]=n[e]}),r.bundle=e.getDefinition(),this.logName=i,this.bundle=e,this.category=t,this.definition=n,this.extensionDefinition=r}return e.prototype.getKey=function(){return this.definition.key||"undefined"},e.prototype.getBundle=function(){return this.bundle},e.prototype.getCategory=function(){return this.category},e.prototype.hasImplementation=function(){return void 0!==this.definition.implementation},e.prototype.getImplementationPath=function(){return this.hasImplementation()&&!this.hasImplementationValue()?this.bundle.getSourcePath(this.definition.implementation):void 0},e.prototype.getImplementationValue=function(){return"function"==typeof this.definition.implementation?this.definition.implementation:void 0},e.prototype.hasImplementationValue=function(){return"function"==typeof this.definition.implementation},e.prototype.getLogName=function(){return this.logName},e.prototype.getDefinition=function(){return this.extensionDefinition},e}),n("platform/framework/src/load/Bundle",["../Constants","./Extension"],function(e,t){function n(t,n){var i=Object.create(e.DEFAULT_BUNDLE),r=t;Object.keys(n).forEach(function(e){i[e]=n[e]}),i.path=t,(i.key||i.name)&&(r+="(",r+=i.key||"",r+=i.key&&i.name?" ":"",r+=i.name||"",r+=")"),this.path=t,this.definition=i,this.logName=r}return n.prototype.resolvePath=function(t){var n=this.path;return[n].concat(t||[]).join(e.SEPARATOR)},n.prototype.getPath=function(){return this.path},n.prototype.getSourcePath=function(e){var t=e?[this.definition.sources,e]:[this.definition.sources];return this.resolvePath(t)},n.prototype.getResourcePath=function(e){var t=e?[this.definition.resources,e]:[this.definition.resources];return this.resolvePath(t)},n.prototype.getLibraryPath=function(e){var t=e?[this.definition.libraries,e]:[this.definition.libraries];return this.resolvePath(t)},n.prototype.getConfiguration=function(){return this.definition.configuration||{}},n.prototype.getLogName=function(){return this.logName},n.prototype.getExtensions=function(e){var n=this.definition.extensions[e]||[],i=this;return n.map(function(n){return new t(i,e,n)})},n.prototype.getExtensionCategories=function(){return Object.keys(this.definition.extensions)},n.prototype.getDefinition=function(){return this.definition},n}),n("platform/framework/src/load/BundleLoader",["../Constants","./Bundle"],function(e,t){function n(e,t,n){this.$http=e,this.$log=t,this.legacyRegistry=n}var i="Malformed loadBundles argument; expected string or array",r="Invalid bundle contents for ",o="Failed to load bundle ";return n.prototype.loadBundles=function(n){function s(e){return f.get(e).then(function(e){return e.data})}function a(e){return e.filter(function(e){return void 0!==e})}function c(t){return s(t+"/"+e.BUNDLE_FILE).then(function(e){return null===e||"object"!=typeof e?void h.warn(r+t):e},function(){h.warn(o+t)})}function l(e){return m.contains(e)?Promise.resolve(new t(e,m.get(e))):c(e).then(function(n){return n&&new t(e,n)})}function u(e,t,n){return n.indexOf(e)===t}function d(e){var t=m.list().concat(e).filter(u).map(l);return Promise.all(t).then(a)}function p(e){function t(t){return h.info(["No external bundles loaded;","could not load bundle listing in",e,"due to error",t.status,t.statusText].join(" ")),d([])}return s(e).then(d,t)}var f=this.$http,h=this.$log,m=this.legacyRegistry;return Array.isArray(n)?d(n):"string"==typeof n?p(n):Promise.reject(new Error(i))},n}),n("platform/framework/src/resolve/ImplementationLoader",[],function(){function e(e){this.require=e}return e.prototype.load=function(e){var t=this.require;return new Promise(function(n,i){t([e],n,i)})},e}),n("platform/framework/src/resolve/ExtensionResolver",[],function(){function e(e,t){this.loader=e,this.$log=t}return e.prototype.resolve=function(e){function t(e){function t(e){function t(){return e.apply(this,arguments)}return t.prototype=e.prototype,t}function r(n){var r="function"==typeof n?t(n):Object.create(n);return Object.keys(n).forEach(function(e){r[e]=n[e]}),Object.keys(a).forEach(function(e){void 0===r[e]&&(r[e]=a[e])}),r.definition=a,i.info("Resolved "+e.getLogName()),r}function o(t){var n=["Could not load implementation for extension ",e.getLogName()," due to ",t.message].join("");return i.warn(n),e.getDefinition()}var s=e.hasImplementationValue()?Promise.resolve(e.getImplementationValue()):n.load(e.getImplementationPath()),a=e.getDefinition();return e.hasImplementationValue()||i.info(["Loading implementation ",e.getImplementationPath()," for extension ",e.getLogName()].join("")),s.then(r,o)}var n=this.loader,i=this.$log;return i.info(["Resolving extension ",e.getLogName()].join("")),e.hasImplementation()?t(e):Promise.resolve(e.getDefinition())},e}),n("platform/framework/src/resolve/BundleResolver",[],function(){function e(e,t,n){this.extensionResolver=e,this.requireConfigurator=t,this.$log=n}return e.prototype.resolveBundles=function(e){function t(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){t[n]=(t[n]||[]).concat(e[n])})}),t}function n(e){function t(e){function t(e){a[n].push(e)}var n=e.getCategory();return i.resolve(e).then(t)}function n(n){return a[n]=[],Promise.all(e.getExtensions(n).map(t))}function r(){return a}var s=e.getExtensionCategories(),a={};return o.info("Resolving extensions for bundle "+e.getLogName()),Promise.all(s.map(n)).then(r)}var i=this.extensionResolver,r=this.requireConfigurator,o=this.$log;return r.configure(e),Promise.all(e.map(n)).then(t)},e}),n("platform/framework/src/resolve/RequireConfigurator",[],function(){function e(e){this.requirejs=e}function t(e){return JSON.parse(JSON.stringify(e))}function n(e){var n=e.getConfiguration();return n.paths&&(n=t(n),Object.keys(n.paths).forEach(function(t){n.paths[t]=e.getLibraryPath(n.paths[t])})),n}function i(e,t){return["paths","shim"].forEach(function(n){Object.keys(t[n]||{}).forEach(function(i){e[n][i]=t[n][i]})}),e}function r(e){var t={baseUrl:"",paths:{},shim:{}},r=e.map(n);return r.reduce(i,t)}return e.prototype.configure=function(e){return this.requirejs.config(r(e))},e}),n("platform/framework/src/register/ServiceCompositor",[],function(){function e(e,t){this.latest={},this.providerLists={},this.app=e,this.$log=t}return e.prototype.registerCompositeServices=function(e){function t(e,t,n){var i=n||"No service provided by";m.warn([i," ",t," ",e.key," from bundle ",(e.bundle||{path:"unknown bundle"}).path,"; skipping."].join(""))}function n(){return Array.prototype.slice.call(arguments)}function i(e){return e}function r(e){return function(t){return t.type===e}}function o(e,t,n){return[t,"[",e,"#",n,"]"].join("")}function s(e,n){var i=e.provides,r=e.depends||[],s=o("provider",i,n);return i?(f[i]=f[i]||[],f[i].push(s),p[i]=s,h.service(s,r.concat([e])),void m.info("Registering provider for "+i)):t(e,"provider")}function a(){Object.keys(f).forEach(function(e){var t=o("provider",e,"*"),i=f[e];m.info(["Compositing",i.length,"providers for",e].join(" ")),h.service(t,i.concat([n]))})}function c(e,n){var i=e.provides,r=e.depends||[],s=o("provider",i,"*"),a=o("aggregator",i,n);return i?p[i]?(r=r.concat([s]),p[i]=a,void h.service(a,r.concat([e]))):t(e,"aggregator","No services to aggregate for"):t(e,"aggregator")}function l(e,n){var i=e.provides,r=e.depends||[],s=o("decorator",i,n);return i?p[i]?(r=r.concat([p[i]]),p[i]=s,void h.service(s,r.concat([e]))):t(e,"decorator","No services to decorate for"):t(e,"decorator")}function u(){Object.keys(p).forEach(function(e){h.service(e,[p[e],i])})}function d(e,t,n){e.forEach(s),a(),t.forEach(c),n.forEach(l),u()}var p=this.latest,f=this.providerLists,h=this.app,m=this.$log;d(e.filter(r("provider")),e.filter(r("aggregator")),e.filter(r("decorator")))},e}),n("platform/framework/src/register/CustomRegistrars",["../Constants","./ServiceCompositor"],function(e,t){function n(e,t){this.app=e,this.$log=t,this.registered={}}function i(e,t){return function(){return e.apply(t,arguments)}}function r(e){return function(t,n){var i=this.app,r=this.$log,o=t.key,s=t.depends||[],a=this.registered[e]||{};this.registered[e]=a,o?a[o]?r.debug(["Already registered ",e," with key ",o,"; skipping."].join("")):(r.info(["Registering ",e,": ",o].join("")),a[o]=!0,i[e](o,s.concat([t]))):r.warn(["Cannot register ",e," ",n,", no key specified. ",JSON.stringify(t)].join(""))}}function o(e){var t=this.app,n=this.$log,i=e.key,r=e.value;"string"==typeof i&&void 0!==r?(n.info(["Registering constant: ",i," with value ",r].join("")),t.constant(i,r)):n.warn(["Cannot register constant ",i," with value ",r].join(""))}function s(e){var t=this.app,n=this.$log;"function"==typeof e?t.run((e.depends||[]).concat([e])):n.warn(["Cannot register run extension from ",(e.bundle||{}).path,"; no implementation."].join(""))}function a(t){var n=this.app,i=this.$log,r=Object.create(t);r.templateUrl&&(r.templateUrl=[r.bundle.path,r.bundle.resources,r.templateUrl].join(e.SEPARATOR)),i.info("Registering route: "+(r.key||r.when)),n.config(["$routeProvider",function(e){r.when?e.when(r.when,r):e.otherwise(r)}])}function c(e){var n=this.app,i=this.$log;return new t(n,i).registerCompositeServices(e)}function l(e){return function(t){return t.map(i(e,this))}}return n.prototype.constants=l(o),n.prototype.routes=l(a),n.prototype.directives=l(r("directive")),n.prototype.controllers=l(r("controller")),n.prototype.services=l(r("service")),n.prototype.filters=l(r("filter")),n.prototype.runs=l(s),n.prototype.components=c,n}),n("platform/framework/src/register/PartialConstructor",[],function(){function e(e){function t(){function t(){var t=Array.prototype.slice.call(arguments),i=Object.create(e.prototype);return i=e.apply(i,n.concat(t))||i}var n=Array.prototype.slice.call(arguments);return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}return t}return e}),n("platform/framework/src/register/ExtensionRegistrar",["../Constants","./PartialConstructor"],function(e,t){function n(e,t,n,i){this.registeredCategories={},this.customRegistrars=t||{},this.app=e,this.sorter=n,this.$log=i}return n.prototype.registerExtensions=function(n){function i(e,t,n){var i=t.key?"extension-"+t.key+"#"+n:"extension#"+n;return e+"["+i+"]"}function r(){return Array.prototype.slice.call(arguments)}function o(e){return function(){return e}}function s(e,n){var i=n.depends||[],r="function"==typeof n?new t(n):o(n);return i.concat([r])}function a(t,n){var i=t+e.EXTENSION_SUFFIX;h.factory(i,n.concat([r]))}function c(e,t){function n(t,n){var o=i(e,t,n);r.push(o),h.factory(o,s(e,t))}var r=[];return p[e]?void g.warn(["Tried to register extensions for category ",e," more than once. Ignoring all but first set."].join("")):(f[e]?f[e](t):(t.forEach(n),a(e,r)),p[e]=!0,!0)}function l(t){var n=t.indexOf(e.EXTENSION_SUFFIX,t.length-e.EXTENSION_SUFFIX.length);return-1!==n}function u(t){var n={},i=Object.keys(t),r=[];return i.forEach(function(e){r=r.concat(t[e])}),r.forEach(function(e){(e.depends||[]).filter(l).forEach(function(e){n[e]=!0})}),i.forEach(function(t){var i=t+e.EXTENSION_SUFFIX;delete n[i]}),Object.keys(n)}function d(e){u(e).forEach(function(e){g.info("Registering empty extension category "+e),h.factory(e,[o([])])})}var p=this.registeredCategories,f=this.customRegistrars,h=this.app,m=this.sorter,g=this.$log;return g.info("Registering extensions..."),Object.keys(n).forEach(function(e){c(e,m.sort(n[e]))}),d(n),h},n}),n("platform/framework/src/register/ExtensionSorter",["../Constants"],function(e){function t(e){this.$log=e}return t.prototype.sort=function(t){function n(t){return a.warn(["Unrecognized priority '",(t||{}).priority,"' specified for extension from ",((t||{}).bundle||{}).path,"; defaulting to ",e.DEFAULT_PRIORITY].join("")),e.DEFAULT_PRIORITY}function i(t){var i=(t||{}).priority||e.DEFAULT_PRIORITY;return"string"==typeof i&&(i=e.PRIORITY_LEVELS[i]),"number"==typeof i?i:n(t)}function r(e,t){return{extension:e,index:t,priority:i(e)}}function o(e){return e.extension}function s(e,t){return t.priority-e.priority||e.index-t.index}var a=this.$log;return(t||[]).map(r).sort(s).map(o)},t}),n("platform/framework/src/bootstrap/ApplicationBootstrapper",[],function(){function e(e,t,n){this.angular=e,this.document=t,this.$log=n}return e.prototype.bootstrap=function(e){var t=this.angular,n=this.document,i=this.$log;i.info("Bootstrapping application "+(e||{}).name),t.element(n).ready(function(){t.bootstrap(n,[e.name],{strictDi:!0})})},e}),n("platform/framework/src/FrameworkLayer",["require","./Constants","./FrameworkInitializer","./LogLevel","./load/BundleLoader","./resolve/ImplementationLoader","./resolve/ExtensionResolver","./resolve/BundleResolver","./resolve/RequireConfigurator","./register/CustomRegistrars","./register/ExtensionRegistrar","./register/ExtensionSorter","./bootstrap/ApplicationBootstrapper"],function(t,n,i,r,o,s,a,c,l,u,d,p,f){function h(e,t){this.$http=e,this.$log=t}return h.prototype.initializeApplication=function(h,m,g){var y=this.$http,v=this.$log,b=h.module(n.MODULE_NAME,["ngRoute"]),w=new o(y,v,m),S=new c(new a(new s(t),v),new l(e),v),x=new d(b,new u(b,v),new p(v),v),C=new f(h,window.document,v),T=new i(w,S,x,C);new r(g).configure(b,v),v.info("Initializing application."),T.runApplication()},h}),function(e){n("angular",[],function(){return function(){return function(e,t,n){"use strict";function i(e){return function(){var t,n=arguments[0];for(t="["+(e?e+":":"")+n+"] http://errors.angularjs.org/1.4.4/"+(e?e+"/":"")+n,n=1;n<arguments.length;n++){t=t+(1==n?"?":"&")+"p"+(n-1)+"=";var i,r=encodeURIComponent;i=arguments[n],i="function"==typeof i?i.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof i?"undefined":"string"!=typeof i?JSON.stringify(i):i,t+=r(i)}return Error(t)}}function r(e){if(null==e||$(e))return!1;var t="length"in Object(e)&&e.length;return e.nodeType===ci&&t?!0:C(e)||Qn(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,n){var i,s;if(e)if(M(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i,e);else if(Qn(e)||r(e)){var a="object"!=typeof e;for(i=0,s=e.length;s>i;i++)(a||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==o)e.forEach(t,n,e);else if(x(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)Bn.call(e,i)&&t.call(n,e[i],i,e);return e}function s(e,t,n){for(var i=Object.keys(e).sort(),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function a(e){return function(t,n){e(n,t)}}function c(){return++Xn}function l(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function u(e,t,n){for(var i=e.$$hashKey,r=0,o=t.length;o>r;++r){var s=t[r];if(S(s)||M(s))for(var a=Object.keys(s),c=0,d=a.length;d>c;c++){var p=a[c],f=s[p];n&&S(f)?k(f)?e[p]=new Date(f.valueOf()):O(f)?e[p]=new RegExp(f):(S(e[p])||(e[p]=Qn(f)?[]:{}),u(e[p],[f],!0)):e[p]=f}}return l(e,i),e}function d(e){return u(e,Yn.call(arguments,1),!1)}function p(e){return u(e,Yn.call(arguments,1),!0)}function f(e){return parseInt(e,10)}function h(e,t){return d(Object.create(e),t)}function m(){}function g(e){return e}function y(e){return function(){return e}}function v(e){return M(e.toString)&&e.toString!==Object.prototype.toString}function b(e){return"undefined"==typeof e}function w(e){return"undefined"!=typeof e}function S(e){return null!==e&&"object"==typeof e}function x(e){return null!==e&&"object"==typeof e&&!Gn(e)}function C(e){return"string"==typeof e}function T(e){return"number"==typeof e}function k(e){return"[object Date]"===Wn.call(e)}function M(e){return"function"==typeof e}function O(e){return"[object RegExp]"===Wn.call(e)}function $(e){return e&&e.window===e}function _(e){return e&&e.$evalAsync&&e.$watch}function A(e){return"boolean"==typeof e}function E(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function I(e){var t={};e=e.split(",");var n;for(n=0;n<e.length;n++)t[e[n]]=!0;return t}function L(e){return Vn(e.nodeName||e[0]&&e[0].nodeName)}function N(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function D(e,t,n,i){if($(e)||_(e))throw Kn("cpws");if(ei.test(Wn.call(t)))throw Kn("cpta");if(t){if(e===t)throw Kn("cpi");n=n||[],i=i||[],S(e)&&(n.push(e),i.push(t));var r;if(Qn(e))for(r=t.length=0;r<e.length;r++)t.push(D(e[r],null,n,i));else{var s=t.$$hashKey;if(Qn(t)?t.length=0:o(t,function(e,n){delete t[n]}),x(e))for(r in e)t[r]=D(e[r],null,n,i);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=D(e[r],null,n,i));else for(r in e)Bn.call(e,r)&&(t[r]=D(e[r],null,n,i));l(t,s)}}else if(t=e,S(e)){if(n&&-1!==(s=n.indexOf(e)))return i[s];if(Qn(e))return D(e,[],n,i);if(ei.test(Wn.call(e)))t=new e.constructor(e);else if(k(e))t=new Date(e.getTime());else{if(!O(e))return r=Object.create(Gn(e)),D(e,r,n,i);t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex}i&&(n.push(e),i.push(t))}return t}function j(e,t){if(Qn(e)){t=t||[];for(var n=0,i=e.length;i>n;n++)t[n]=e[n]}else if(S(e))for(n in t=t||{},e)("$"!==n.charAt(0)||"$"!==n.charAt(1))&&(t[n]=e[n]);return t||e}function R(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var i,r=typeof e;if(r==typeof t&&"object"==r){if(!Qn(e)){if(k(e))return k(t)?R(e.getTime(),t.getTime()):!1;if(O(e))return O(t)?e.toString()==t.toString():!1;if(_(e)||_(t)||$(e)||$(t)||Qn(t)||k(t)||O(t))return!1;r=le();for(i in e)if("$"!==i.charAt(0)&&!M(e[i])){if(!R(e[i],t[i]))return!1;r[i]=!0}for(i in t)if(!(i in r||"$"===i.charAt(0)||t[i]===n||M(t[i])))return!1;return!0}if(!Qn(t))return!1;if((r=e.length)==t.length){for(i=0;r>i;i++)if(!R(e[i],t[i]))return!1;return!0}}return!1}function P(e,t,n){return e.concat(Yn.call(t,n))}function U(e,t){var n=2<arguments.length?Yn.call(arguments,2):[];return!M(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,P(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function F(e,i){var r=i;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=n:$(i)?r="$WINDOW":i&&t===i?r="$DOCUMENT":_(i)&&(r="$SCOPE"),r}function V(e,t){return"undefined"==typeof e?n:(T(t)||(t=t?2:null),JSON.stringify(e,F,t))}function B(e){return C(e)?JSON.parse(e):e}function q(e,t){var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Y(e,t,n){n=n?-1:1;var i=q(t,e.getTimezoneOffset());return t=e,e=n*(i-e.getTimezoneOffset()),t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function z(e){e=Rn(e).clone();try{e.empty()}catch(t){}var n=Rn("<div>").append(e).html();try{return e[0].nodeType===li?Vn(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Vn(t)})}catch(i){return Vn(n)}}function H(e){try{return decodeURIComponent(e)}catch(t){}}function W(e){var t={};return o((e||"").split("&"),function(e){var n,i,r;e&&(i=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(i=e.substring(0,n),r=e.substring(n+1)),i=H(i),w(i)&&(r=w(r)?H(r):!0,Bn.call(t,i)?Qn(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r))}),t}function G(e){var t=[];return o(e,function(e,n){Qn(e)?o(e,function(e){t.push(Z(n,!0)+(!0===e?"":"="+Z(e,!0)))}):t.push(Z(n,!0)+(!0===e?"":"="+Z(e,!0)))}),t.length?t.join("&"):""}function K(e){return Z(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Z(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function X(e,t){var n,i,r=oi.length;for(i=0;r>i;++i)if(n=oi[i]+t,C(n=e.getAttribute(n)))return n;return null}function J(e,t){var n,i,r={};o(oi,function(t){t+="app",!n&&e.hasAttribute&&e.hasAttribute(t)&&(n=e,i=e.getAttribute(t))}),o(oi,function(t){t+="app";var r;!n&&(r=e.querySelector("["+t.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(t))}),n&&(r.strictDi=null!==X(n,"strict-di"),t(n,i?[i]:[],r))}function Q(n,i,r){S(r)||(r={}),r=d({strictDi:!1},r);var s=function(){if(n=Rn(n),n.injector()){var e=n[0]===t?"document":z(n);throw Kn("btstrpd",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}return i=i||[],i.unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng"),e=Pe(i,r.strictDi),e.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),e},a=/^NG_ENABLE_DEBUG_INFO!/,c=/^NG_DEFER_BOOTSTRAP!/;return e&&a.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(a,"")),e&&!c.test(e.name)?s():(e.name=e.name.replace(c,""),Zn.resumeBootstrap=function(e){return o(e,function(e){i.push(e)}),s()},void(M(Zn.resumeDeferredBootstrap)&&Zn.resumeDeferredBootstrap()))}function ee(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function te(e){if(e=Zn.element(e).injector(),!e)throw Kn("test");return e.get("$$testability")}function ne(e,t){return t=t||"_",e.replace(si,function(e,n){return(n?t:"")+e.toLowerCase()})}function ie(){var t;if(!ai){var i=ri();Pn=e.jQuery,w(i)&&(Pn=null===i?n:e[i]),Pn&&Pn.fn.on?(Rn=Pn,d(Pn.fn,{scope:xi.scope,isolateScope:xi.isolateScope,controller:xi.controller,injector:xi.injector,inheritedData:xi.inheritedData}),t=Pn.cleanData,Pn.cleanData=function(e){var n;if(Jn)Jn=!1;else for(var i,r=0;null!=(i=e[r]);r++)(n=Pn._data(i,"events"))&&n.$destroy&&Pn(i).triggerHandler("$destroy");
t(e)}):Rn=me,Zn.element=Rn,ai=!0}}function re(e,t,n){if(!e)throw Kn("areq",t||"?",n||"required");return e}function oe(e,t,n){return n&&Qn(e)&&(e=e[e.length-1]),re(M(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function se(e,t){if("hasOwnProperty"===e)throw Kn("badname",t)}function ae(e,t,n){if(!t)return e;t=t.split(".");for(var i,r=e,o=t.length,s=0;o>s;s++)i=t[s],e&&(e=(r=e)[i]);return!n&&M(e)?U(r,e):e}function ce(e){var t=e[0];e=e[e.length-1];var n=[t];do{if(t=t.nextSibling,!t)break;n.push(t)}while(t!==e);return Rn(n)}function le(){return Object.create(null)}function ue(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=i("$injector"),r=i("ng");return e=t(e,"angular",Object),e.$$minErr=e.$$minErr||i,t(e,"module",function(){var e={};return function(i,o,s){if("hasOwnProperty"===i)throw r("badname","module");return o&&e.hasOwnProperty(i)&&(e[i]=null),t(e,i,function(){function e(e,t,n,i){return i||(i=r),function(){return i[n||"push"]([e,t,arguments]),u}}function t(e,t){return function(n,o){return o&&M(o)&&(o.$$moduleName=i),r.push([e,t,arguments]),u}}if(!o)throw n("nomod",i);var r=[],a=[],c=[],l=e("$injector","invoke","push",a),u={_invokeQueue:r,_configBlocks:a,_runBlocks:c,requires:o,name:i,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:l,run:function(e){return c.push(e),this}};return s&&l(s),u})}})}function de(t){d(t,{bootstrap:Q,copy:D,extend:d,merge:p,equals:R,element:Rn,forEach:o,injector:Pe,noop:m,bind:U,toJson:V,fromJson:B,identity:g,isUndefined:b,isDefined:w,isString:C,isFunction:M,isObject:S,isNumber:T,isElement:E,isArray:Qn,version:ui,isDate:k,lowercase:Vn,uppercase:qn,callbacks:{counter:0},getTestability:te,$$minErr:i,$$csp:ii,reloadWithDebugInfo:ee}),(Un=ue(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Ht}),e.provider("$compile",We).directive({a:wr,input:jr,textarea:jr,form:Tr,script:ko,select:$o,style:Ao,option:_o,ngBind:Ur,ngBindHtml:Vr,ngBindTemplate:Fr,ngClass:qr,ngClassEven:zr,ngClassOdd:Yr,ngCloak:Hr,ngController:Wr,ngForm:kr,ngHide:bo,ngIf:Zr,ngInclude:Xr,ngInit:Qr,ngNonBindable:po,ngPluralize:go,ngRepeat:yo,ngShow:vo,ngStyle:wo,ngSwitch:So,ngSwitchWhen:xo,ngSwitchDefault:Co,ngOptions:mo,ngTransclude:To,ngModel:co,ngList:eo,ngChange:Br,pattern:Io,ngPattern:Io,required:Eo,ngRequired:Eo,minlength:No,ngMinlength:No,maxlength:Lo,ngMaxlength:Lo,ngValue:Pr,ngModelOptions:uo}).directive({ngInclude:Jr}).directive(Sr).directive(Gr),e.provider({$anchorScroll:Ue,$animate:Di,$animateCss:ji,$$animateQueue:Ni,$$AnimateRunner:Li,$browser:Ye,$cacheFactory:ze,$controller:Xe,$document:Je,$exceptionHandler:Qe,$filter:an,$$forceReflow:Vi,$interpolate:dt,$interval:pt,$http:at,$httpParamSerializer:tt,$httpParamSerializerJQLike:nt,$httpBackend:lt,$location:Tt,$log:kt,$parse:Ft,$rootScope:zt,$q:Vt,$$q:Bt,$sce:Zt,$sceDelegate:Kt,$sniffer:Xt,$templateCache:He,$templateRequest:Jt,$$testability:Qt,$timeout:en,$window:rn,$$rAF:Yt,$$jqLite:Ne,$$HashMap:Mi,$$cookieReader:sn})}])}function pe(e){return e.replace(fi,function(e,t,n,i){return i?n.toUpperCase():n}).replace(hi,"Moz$1")}function fe(e){return e=e.nodeType,e===ci||!e||9===e}function he(e,t){var n,i,r=t.createDocumentFragment(),s=[];if(vi.test(e)){for(n=n||r.appendChild(t.createElement("div")),i=(bi.exec(e)||["",""])[1].toLowerCase(),i=Si[i]||Si._default,n.innerHTML=i[1]+e.replace(wi,"<$1></$2>")+i[2],i=i[0];i--;)n=n.lastChild;s=P(s,n.childNodes),n=r.firstChild,n.textContent=""}else s.push(t.createTextNode(e));return r.textContent="",r.innerHTML="",o(s,function(e){r.appendChild(e)}),r}function me(e){if(e instanceof me)return e;var n;if(C(e)&&(e=ti(e),n=!0),!(this instanceof me)){if(n&&"<"!=e.charAt(0))throw gi("nosel");return new me(e)}if(n){n=t;var i;e=(i=yi.exec(e))?[n.createElement(i[1])]:(i=he(e,n))?i.childNodes:[]}ke(this,e)}function ge(e){return e.cloneNode(!0)}function ye(e,t){if(t||be(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),i=0,r=n.length;r>i;i++)be(n[i])}function ve(e,t,n,i){if(w(i))throw gi("offargs");var r=(i=we(e))&&i.events,s=i&&i.handle;if(s)if(t)o(t.split(" "),function(t){if(w(n)){var i=r[t];if(N(i||[],n),i&&0<i.length)return}e.removeEventListener(t,s,!1),delete r[t]});else for(t in r)"$destroy"!==t&&e.removeEventListener(t,s,!1),delete r[t]}function be(e,t){var i=e.ng339,r=i&&di[i];r&&(t?delete r.data[t]:(r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),ve(e)),delete di[i],e.ng339=n))}function we(e,t){var i=e.ng339,i=i&&di[i];return t&&!i&&(e.ng339=i=++pi,i=di[i]={events:{},data:{},handle:n}),i}function Se(e,t,n){if(fe(e)){var i=w(n),r=!i&&t&&!S(t),o=!t;if(e=(e=we(e,!r))&&e.data,i)e[t]=n;else{if(o)return e;if(r)return e&&e[t];d(e,t)}}}function xe(e,t){return e.getAttribute?-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" "):!1}function Ce(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",ti((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ti(t)+" "," ")))})}function Te(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=ti(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",ti(n))}}function ke(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;n>i;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function Me(e,t){return Oe(e,"$"+(t||"ngController")+"Controller")}function Oe(e,t,i){for(9==e.nodeType&&(e=e.documentElement),t=Qn(t)?t:[t];e;){for(var r=0,o=t.length;o>r;r++)if((i=Rn.data(e,t[r]))!==n)return i;e=e.parentNode||11===e.nodeType&&e.host}}function $e(e){for(ye(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function _e(e,t){t||ye(e);var n=e.parentNode;n&&n.removeChild(e)}function Ae(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Rn(n).on("load",t)}function Ee(e,t){var n=Ci[t.toLowerCase()];return n&&Ti[L(e)]&&n}function Ie(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&ki[t]}function Le(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=t[i||n.type],o=r?r.length:0;if(o){if(b(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped},o>1&&(r=j(r));for(var a=0;o>a;a++)n.isImmediatePropagationStopped()||r[a].call(e,n)}};return n.elem=e,n}function Ne(){this.$get=function(){return d(me,{hasClass:function(e,t){return e.attr&&(e=e[0]),xe(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Te(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Ce(e,t)}})}}function De(e,t){var n=e&&e.$$hashKey;return n?("function"==typeof n&&(n=e.$$hashKey()),n):(n=typeof e,n="function"==n||"object"==n&&null!==e?e.$$hashKey=n+":"+(t||c)():n+":"+e)}function je(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function Re(e){return(e=e.toString().replace(Ai,"").match(Oi))?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Pe(e,t){function i(e){return function(t,n){return S(t)?void o(t,a(e)):e(t,n)}}function r(e,t){if(se(e,"service"),(M(t)||Qn(t))&&(t=m.instantiate(t)),!t.$get)throw Ei("pget",e);return h[e+"Provider"]=t}function s(e,t){return function(){var n=v.invoke(t,this);if(b(n))throw Ei("undef",e);return n}}function c(e,t,n){return r(e,{$get:!1!==n?s(e,t):t})}function l(e){re(b(e)||Qn(e),"modulesToLoad","not an array");var t,n=[];return o(e,function(e){function i(e){var t,n;for(t=0,n=e.length;n>t;t++){var i=e[t],r=m.get(i[0]);r[i[1]].apply(r,i[2])}}if(!f.get(e)){f.put(e,!0);try{C(e)?(t=Un(e),n=n.concat(l(t.requires)).concat(t._runBlocks),i(t._invokeQueue),i(t._configBlocks)):M(e)?n.push(m.invoke(e)):Qn(e)?n.push(m.invoke(e)):oe(e,"module")}catch(r){throw Qn(e)&&(e=e[e.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),Ei("modulerr",e,r.stack||r.message||r)}}}),n}function u(e,n){function i(t,i){if(e.hasOwnProperty(t)){if(e[t]===d)throw Ei("cdep",t+" <- "+p.join(" <- "));return e[t]}try{return p.unshift(t),e[t]=d,e[t]=n(t,i)}catch(r){throw e[t]===d&&delete e[t],r}finally{p.shift()}}function r(e,n,r,o){"string"==typeof r&&(o=r,r=null);var s,a,c,l=[],u=Pe.$$annotate(e,t,o);for(a=0,s=u.length;s>a;a++){if(c=u[a],"string"!=typeof c)throw Ei("itkn",c);l.push(r&&r.hasOwnProperty(c)?r[c]:i(c,o))}return Qn(e)&&(e=e[s]),e.apply(n,l)}return{invoke:r,instantiate:function(e,t,n){var i=Object.create((Qn(e)?e[e.length-1]:e).prototype||null);return e=r(e,i,t,n),S(e)||M(e)?e:i},get:i,annotate:Pe.$$annotate,has:function(t){return h.hasOwnProperty(t+"Provider")||e.hasOwnProperty(t)}}}t=!0===t;var d={},p=[],f=new je([],!0),h={$provide:{provider:i(r),factory:i(c),service:i(function(e,t){return c(e,["$injector",function(e){return e.instantiate(t)}])}),value:i(function(e,t){return c(e,y(t),!1)}),constant:i(function(e,t){se(e,"constant"),h[e]=t,g[e]=t}),decorator:function(e,t){var n=m.get(e+"Provider"),i=n.$get;n.$get=function(){var e=v.invoke(i,n);return v.invoke(t,null,{$delegate:e})}}}},m=h.$injector=u(h,function(e,t){throw Zn.isString(t)&&p.push(t),Ei("unpr",p.join(" <- "))}),g={},v=g.$injector=u(g,function(e,t){var i=m.get(e+"Provider",t);return v.invoke(i.$get,i,n,e)});return o(l(e),function(e){e&&v.invoke(e)}),v}function Ue(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function r(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===L(e)?(t=e,!0):void 0}),t}function o(e){if(e){e.scrollIntoView();var n;n=s.yOffset,M(n)?n=n():E(n)?(n=n[0],n="fixed"!==t.getComputedStyle(n).position?0:n.getBoundingClientRect().bottom):T(n)||(n=0),n&&(e=e.getBoundingClientRect().top,t.scrollBy(0,e-n))}else t.scrollTo(0,0)}function s(e){e=C(e)?e:n.hash();var t;e?(t=a.getElementById(e))?o(t):(t=r(a.getElementsByName(e)))?o(t):"top"===e&&o(null):o(null)}var a=t.document;return e&&i.$watch(function(){return n.hash()},function(e,t){e===t&&""===e||Ae(function(){i.$evalAsync(s)})}),s}]}function Fe(e,t){return e||t?e?t?(Qn(e)&&(e=e.join(" ")),Qn(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function Ve(e){C(e)&&(e=e.split(" "));var t=le();return o(e,function(e){e.length&&(t[e]=!0)}),t}function Be(e){return S(e)?e:{}}function qe(e,t,n,i){function r(e){try{e.apply(null,Yn.call(arguments,1))}finally{if(g--,0===g)for(;y.length;)try{y.pop()()}catch(t){n.error(t)}}}function s(){a(),c()}function a(){e:{try{v=d.state;break e}catch(e){}v=void 0}v=b(v)?null:v,R(v,M)&&(v=M),M=v}function c(){(S!==l.url()||w!==v)&&(S=l.url(),w=v,o(T,function(e){e(l.url(),v)}))}var l=this,u=e.location,d=e.history,p=e.setTimeout,f=e.clearTimeout,h={};l.isMock=!1;var g=0,y=[];l.$$completeOutstandingRequest=r,l.$$incOutstandingRequestCount=function(){g++},l.notifyWhenNoOutstandingRequests=function(e){0===g?e():y.push(e)};var v,w,S=u.href,x=t.find("base"),C=null;a(),w=v,l.url=function(t,n,r){if(b(r)&&(r=null),u!==e.location&&(u=e.location),d!==e.history&&(d=e.history),t){var o=w===r;if(S===t&&(!i.history||o))return l;var s=S&&yt(S)===yt(t);return S=t,w=r,!i.history||s&&o?((!s||C)&&(C=t),n?u.replace(t):s?(n=u,r=t.indexOf("#"),t=-1===r?"":t.substr(r),n.hash=t):u.href=t):(d[n?"replaceState":"pushState"](r,"",t),a(),w=v),l}return C||u.href.replace(/%27/g,"'")},l.state=function(){return v};var T=[],k=!1,M=null;l.onUrlChange=function(t){return k||(i.history&&Rn(e).on("popstate",s),Rn(e).on("hashchange",s),k=!0),T.push(t),t},l.$$applicationDestroyed=function(){Rn(e).off("hashchange popstate",s)},l.$$checkUrlChange=c,l.baseHref=function(){var e=x.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},l.defer=function(e,t){var n;return g++,n=p(function(){delete h[n],r(e)},t||0),h[n]=!0,n},l.defer.cancel=function(e){return h[e]?(delete h[e],f(e),r(m),!0):!1}}function Ye(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new qe(e,i,t,n)}]}function ze(){this.$get=function(){function e(e,n){function r(e){e!=p&&(f?f==e&&(f=e.n):f=e,o(e.n,e.p),o(e,p),p=e,p.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw i("$cacheFactory")("iid",e);var s=0,a=d({},n,{id:e}),c={},l=n&&n.capacity||Number.MAX_VALUE,u={},p=null,f=null;return t[e]={put:function(e,t){if(!b(t)){if(l<Number.MAX_VALUE){var n=u[e]||(u[e]={key:e});r(n)}return e in c||s++,c[e]=t,s>l&&this.remove(f.key),t}},get:function(e){if(l<Number.MAX_VALUE){var t=u[e];if(!t)return;r(t)}return c[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=u[e];if(!t)return;t==p&&(p=t.p),t==f&&(f=t.n),o(t.n,t.p),delete u[e]}delete c[e],s--},removeAll:function(){c={},s=0,u={},p=f=null},destroy:function(){u=a=c=null,delete t[e]},info:function(){return d({},a,{size:s})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function He(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function We(e,i){function r(e,t,n){var i=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,r={};return o(e,function(e,o){var s=e.match(i);if(!s)throw Ri("iscp",t,o,e,n?"controller bindings definition":"isolate scope definition");r[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o}}),r}function s(e){var t=e.charAt(0);if(!t||t!==Vn(t))throw Ri("baddir",e);if(e!==e.trim())throw Ri("baddir",e)}var c={},l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,u=/(([\w\-]+)(?:\:([^;]+))?;?)/,p=I("ngSrc,ngSrcset,src,srcset"),f=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,v=/^(on[a-z]+|formaction)$/;this.directive=function T(t,n){return se(t,"directive"),C(t)?(s(t),re(n,"directiveFactory"),c.hasOwnProperty(t)||(c[t]=[],e.factory(t+"Directive",["$injector","$exceptionHandler",function(e,n){var i=[];return o(c[t],function(o,s){try{var a=e.invoke(o);M(a)?a={compile:y(a)}:!a.compile&&a.link&&(a.compile=y(a.link)),a.priority=a.priority||0,a.index=s,a.name=a.name||t,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"EA";var c=a,l=a,u=a.name,d={isolateScope:null,bindToController:null};if(S(l.scope)&&(!0===l.bindToController?(d.bindToController=r(l.scope,u,!0),d.isolateScope={}):d.isolateScope=r(l.scope,u,!1)),S(l.bindToController)&&(d.bindToController=r(l.bindToController,u,!0)),S(d.bindToController)){var p=l.controller,f=l.controllerAs;if(!p)throw Ri("noctrl",u);var h;e:if(f&&C(f))h=f;else{if(C(p)){var m=Fi.exec(p);if(m){h=m[3];break e}}h=void 0}if(!h)throw Ri("noident",u)}var g=c.$$bindings=d;S(g.isolateScope)&&(a.$$isolateBindings=g.isolateScope),a.$$moduleName=o.$$moduleName,i.push(a)}catch(v){n(v)}}),i}])),c[t].push(n)):o(t,a(T)),this},this.aHrefSanitizationWhitelist=function(e){return w(e)?(i.aHrefSanitizationWhitelist(e),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return w(e)?(i.imgSrcSanitizationWhitelist(e),this):i.imgSrcSanitizationWhitelist()};var x=!0;this.debugInfoEnabled=function(e){return w(e)?(x=e,this):x},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,i,r,s,a,y,w,T,k,O,$){function A(e,t){try{e.addClass(t)}catch(n){}}function E(e,t,n,i,r){e instanceof Rn||(e=Rn(e)),o(e,function(t,n){t.nodeType==li&&t.nodeValue.match(/\S+/)&&(e[n]=Rn(t).wrap("<span></span>").parent()[0])});var s=I(e,t,e,n,i,r);E.$$addScopeClass(e);var a=null;return function(t,n,i){re(t,"scope"),i=i||{};var r=i.parentBoundTranscludeFn,o=i.transcludeControllers;if(i=i.futureParentElement,r&&r.$$boundTransclude&&(r=r.$$boundTransclude),a||(a=(i=i&&i[0])&&"foreignobject"!==L(i)&&i.toString().match(/SVG/)?"svg":"html"),i="html"!==a?Rn(Z(a,Rn("<div>").append(e).html())):n?xi.clone.call(e):e,o)for(var c in o)i.data("$"+c+"Controller",o[c].instance);return E.$$addScopeInfo(i,t),n&&n(i,t),s&&s(t,i,i,r),i}}function I(e,t,i,r,o,s){function a(e,i,r,o){var s,a,c,l,u,d,h;if(p)for(h=Array(i.length),l=0;l<f.length;l+=3)s=f[l],h[s]=i[s];else h=i;for(l=0,u=f.length;u>l;)a=h[f[l++]],i=f[l++],s=f[l++],i?(i.scope?(c=e.$new(),E.$$addScopeInfo(Rn(a),c),(d=i.$$destroyBindings)&&(i.$$destroyBindings=null,c.$on("$destroyed",d))):c=e,d=i.transcludeOnThisElement?D(e,i.transclude,o):!i.templateOnThisElement&&o?o:!o&&t?D(e,t):null,i(s,c,a,r,d,i)):s&&s(e,a.childNodes,n,o)}for(var c,l,u,d,p,f=[],h=0;h<e.length;h++)c=new oe,l=j(e[h],[],c,0===h?r:n,o),(s=l.length?F(l,e[h],c,t,i,null,[],[],s):null)&&s.scope&&E.$$addScopeClass(c.$$element),c=s&&s.terminal||!(u=e[h].childNodes)||!u.length?null:I(u,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:t),(s||c)&&(f.push(h,s,c),d=!0,p=p||s),s=null;return d?a:null}function D(e,t,n){return function(i,r,o,s,a){return i||(i=e.$new(!1,a),i.$$transcluded=!0),t(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}}function j(e,t,n,i,r){var o,s=n.$attr;switch(e.nodeType){case ci:B(t,Ge(L(e)),"E",i,r);for(var a,c,d,p=e.attributes,f=0,h=p&&p.length;h>f;f++){var m=!1,g=!1;a=p[f],o=a.name,c=ti(a.value),a=Ge(o),(d=ue.test(a))&&(o=o.replace(Pi,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var y=a.replace(/(Start|End)$/,"");q(y)&&a===y+"Start"&&(m=o,g=o.substr(0,o.length-5)+"end",o=o.substr(0,o.length-6)),a=Ge(o.toLowerCase()),s[a]=o,(d||!n.hasOwnProperty(a))&&(n[a]=c,Ee(e,a)&&(n[a]=!0)),J(e,t,c,a,d),B(t,a,"A",i,r,m,g)}if(e=e.className,S(e)&&(e=e.animVal),C(e)&&""!==e)for(;o=u.exec(e);)a=Ge(o[2]),B(t,a,"C",i,r)&&(n[a]=ti(o[3])),e=e.substr(o.index+o[0].length);break;case li:if(11===jn)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===li;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);K(t,e.nodeValue);break;case 8:try{(o=l.exec(e.nodeValue))&&(a=Ge(o[1]),B(t,a,"M",i,r)&&(n[a]=ti(o[2])))}catch(v){}}return t.sort(W),t}function P(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Ri("uterdir",t,n);e.nodeType==ci&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(r>0)}else i.push(e);return Rn(i)}function U(e,t,n){return function(i,r,o,s,a){return r=P(r[0],t,n),e(i,r,o,s,a)}}function F(e,i,o,s,a,c,l,u,d){function p(e,t,n,i){e&&(n&&(e=U(e,n,i)),e.require=v.require,e.directiveName=b,($===v||v.$$isolateScope)&&(e=ee(e,{isolateScope:!0})),l.push(e)),t&&(n&&(t=U(t,n,i)),t.require=v.require,t.directiveName=b,($===v||v.$$isolateScope)&&(t=ee(t,{isolateScope:!0})),u.push(t))}function h(e,t,n,i){var r;if(C(t)){var o=t.match(f);t=t.substring(o[0].length);var s=o[1]||o[3],o="?"===o[2];if("^^"===s?n=n.parent():r=(r=i&&i[t])&&r.instance,r||(i="$"+t+"Controller",r=s?n.inheritedData(i):n.data(i)),!r&&!o)throw Ri("ctreq",t,e)}else if(Qn(t))for(r=[],s=0,o=t.length;o>s;s++)r[s]=h(e,t[s],n,i);return r||null}function m(e,t,n,i,r,o){var s,a=le();for(s in i){var c=i[s],l={$scope:c===$||c.$$isolateScope?r:o,$element:e,$attrs:t,$transclude:n},u=c.controller;"@"==u&&(u=t[c.name]),l=y(u,l,!0,c.controllerAs),a[c.name]=l,D||e.data("$"+c.name+"Controller",l.instance)}return a}function g(e,t,r,s,a,c){function d(e,t,i){var r;return _(e)||(i=t,t=e,e=n),D&&(r=v),i||(i=D?w.parent():w),a(e,t,r,i,T)}var p,f,g,y,v,b,w;if(i===r?(s=o,w=o.$$element):(w=Rn(r),s=new oe(w,o)),$&&(y=t.$new(!0)),a&&(b=d,b.$$boundTransclude=a),O&&(v=m(w,s,b,O,y,t)),$&&(E.$$addScopeInfo(w,y,!0,!(A&&(A===$||A===$.$$originalDirective))),E.$$addScopeClass(w,!0),y.$$isolateBindings=$.$$isolateBindings,ie(t,s,y,y.$$isolateBindings,$,y)),v){var S,x=$||k;x&&v[x.name]&&(f=x.$$bindings.bindToController,(g=v[x.name])&&g.identifier&&f&&(S=g,c.$$destroyBindings=ie(t,s,g.instance,f,x)));for(p in v){g=v[p];var C=g();C!==g.instance&&(g.instance=C,w.data("$"+p+"Controller",C),g===S&&(c.$$destroyBindings(),c.$$destroyBindings=ie(t,s,C,f,x)))}}for(p=0,c=l.length;c>p;p++)f=l[p],te(f,f.isolateScope?y:t,w,s,f.require&&h(f.directiveName,f.require,w,v),b);var T=t;for($&&($.template||null===$.templateUrl)&&(T=y),e&&e(T,r.childNodes,n,a),p=u.length-1;p>=0;p--)f=u[p],te(f,f.isolateScope?y:t,w,s,f.require&&h(f.directiveName,f.require,w,v),b)}d=d||{};for(var v,b,w,x,T=-Number.MAX_VALUE,k=d.newScopeDirective,O=d.controllerDirectives,$=d.newIsolateScopeDirective,A=d.templateDirective,I=d.nonTlbTranscludeDirective,L=!1,N=!1,D=d.hasElementTranscludeDirective,R=o.$$element=Rn(i),F=s,B=0,q=e.length;q>B;B++){v=e[B];var W=v.$$start,K=v.$$end;if(W&&(R=P(i,W,K)),w=n,T>v.priority)break;if((w=v.scope)&&(v.templateUrl||(S(w)?(G("new/isolated scope",$||k,v,R),$=v):G("new/isolated scope",$,v,R)),k=k||v),b=v.name,!v.templateUrl&&v.controller&&(w=v.controller,O=O||le(),G("'"+b+"' controller",O[b],v,R),O[b]=v),(w=v.transclude)&&(L=!0,v.$$tlb||(G("transclusion",I,v,R),I=v),"element"==w?(D=!0,T=v.priority,w=R,R=o.$$element=Rn(t.createComment(" "+b+": "+o[b]+" ")),i=R[0],Q(a,Yn.call(w,0),i),F=E(w,s,T,c&&c.name,{nonTlbTranscludeDirective:I})):(w=Rn(ge(i)).contents(),R.empty(),F=E(w,s))),v.template)if(N=!0,G("template",A,v,R),A=v,w=M(v.template)?v.template(R,o):v.template,w=ce(w),v.replace){if(c=v,w=vi.test(w)?Ze(Z(v.templateNamespace,ti(w))):[],i=w[0],1!=w.length||i.nodeType!==ci)throw Ri("tplrt",b,"");Q(a,R,i),q={$attr:{}},w=j(i,[],q);var X=e.splice(B+1,e.length-(B+1));$&&V(w),e=e.concat(w).concat(X),Y(o,q),q=e.length}else R.html(w);if(v.templateUrl)N=!0,G("template",A,v,R),A=v,v.replace&&(c=v),g=H(e.splice(B,e.length-B),R,o,a,L&&F,l,u,{controllerDirectives:O,newScopeDirective:k!==v&&k,newIsolateScopeDirective:$,templateDirective:A,nonTlbTranscludeDirective:I}),q=e.length;else if(v.compile)try{x=v.compile(R,o,F),M(x)?p(null,x,W,K):x&&p(x.pre,x.post,W,K)}catch(J){r(J,z(R))}v.terminal&&(g.terminal=!0,T=Math.max(T,v.priority))}return g.scope=k&&!0===k.scope,g.transcludeOnThisElement=L,g.templateOnThisElement=N,g.transclude=F,d.hasElementTranscludeDirective=D,g}function V(e){for(var t=0,n=e.length;n>t;t++)e[t]=h(e[t],{$$isolateScope:!0})}function B(t,i,o,s,a,l,u){if(i===a)return null;if(a=null,c.hasOwnProperty(i)){var d;i=e.get(i+"Directive");for(var p=0,f=i.length;f>p;p++)try{d=i[p],(s===n||s>d.priority)&&-1!=d.restrict.indexOf(o)&&(l&&(d=h(d,{$$start:l,$$end:u})),t.push(d),a=d)}catch(m){r(m)}}return a}function q(t){if(c.hasOwnProperty(t))for(var n=e.get(t+"Directive"),i=0,r=n.length;r>i;i++)if(t=n[i],t.multiElement)return!0;return!1}function Y(e,t){var n=t.$attr,i=e.$attr,r=e.$$element;o(e,function(i,r){"$"!=r.charAt(0)&&(t[r]&&t[r]!==i&&(i+=("style"===r?";":" ")+t[r]),e.$set(r,i,!0,n[r]))}),o(t,function(t,o){"class"==o?(A(r,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==o?(r.attr("style",r.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,i[o]=n[o])})}function H(e,t,n,i,r,a,c,l){var u,d,p=[],f=t[0],m=e.shift(),g=h(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),y=M(m.templateUrl)?m.templateUrl(t,n):m.templateUrl,v=m.templateNamespace;return t.empty(),s(y).then(function(s){var h,b;if(s=ce(s),m.replace){if(s=vi.test(s)?Ze(Z(v,ti(s))):[],h=s[0],1!=s.length||h.nodeType!==ci)throw Ri("tplrt",m.name,y);s={$attr:{}},Q(i,t,h);var w=j(h,[],s);S(m.scope)&&V(w),e=w.concat(e),Y(n,s)}else h=f,t.html(s);for(e.unshift(g),u=F(e,h,n,r,t,m,a,c,l),o(i,function(e,n){e==h&&(i[n]=t[0])}),d=I(t[0].childNodes,r);p.length;){s=p.shift(),b=p.shift();var x=p.shift(),C=p.shift(),w=t[0];if(!s.$$destroyed){if(b!==f){var T=b.className;l.hasElementTranscludeDirective&&m.replace||(w=ge(h)),Q(x,Rn(b),w),A(Rn(w),T)}b=u.transcludeOnThisElement?D(s,u.transclude,C):C,u(d,s,w,i,b,u)}}p=null}),function(e,t,n,i,r){e=r,t.$$destroyed||(p?p.push(t,n,i,e):(u.transcludeOnThisElement&&(e=D(t,u.transclude,r)),u(d,t,n,i,e,u)))}}function W(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function G(e,t,n,i){function r(e){return e?" (module: "+e+")":""}if(t)throw Ri("multidir",t.name,r(t.$$moduleName),n.name,r(n.$$moduleName),e,z(i))}function K(e,t){var n=i(t,!0);n&&e.push({priority:0,compile:function(e){e=e.parent();var t=!!e.length;return t&&E.$$addBindingClass(e),function(e,i){var r=i.parent();t||E.$$addBindingClass(r),E.$$addBindingInfo(r,n.expressions),e.$watch(n,function(e){i[0].nodeValue=e})}}})}function Z(e,n){switch(e=Vn(e||"html")){case"svg":case"math":var i=t.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function X(e,t){if("srcdoc"==t)return k.HTML;var n=L(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?k.RESOURCE_URL:void 0}function J(e,t,n,r,o){var s=X(e,r);o=p[r]||o;var a=i(n,!0,s,o);if(a){if("multiple"===r&&"select"===L(e))throw Ri("selmulti",z(e));t.push({priority:100,compile:function(){return{pre:function(e,t,c){if(t=c.$$observers||(c.$$observers={}),v.test(r))throw Ri("nodomevents");var l=c[r];l!==n&&(a=l&&i(l,!0,s,o),n=l),a&&(c[r]=a(e),(t[r]||(t[r]=[])).$$inter=!0,(c.$$observers&&c.$$observers[r].$$scope||e).$watch(a,function(e,t){"class"===r&&e!=t?c.$updateClass(e,t):c.$set(r,e)}))}}}})}}function Q(e,n,i){var r,o,s=n[0],a=n.length,c=s.parentNode;if(e)for(r=0,o=e.length;o>r;r++)if(e[r]==s){e[r++]=i,o=r+a-1;for(var l=e.length;l>r;r++,o++)l>o?e[r]=e[o]:delete e[r];e.length-=a-1,e.context===s&&(e.context=i);break}for(c&&c.replaceChild(i,s),e=t.createDocumentFragment(),e.appendChild(s),Rn.hasData(s)&&(Rn(i).data(Rn(s).data()),Pn?(Jn=!0,Pn.cleanData([s])):delete Rn.cache[s[Rn.expando]]),s=1,a=n.length;a>s;s++)c=n[s],Rn(c).remove(),e.appendChild(c),delete n[s];n[0]=i,n.length=1}function ee(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function te(e,t,n,i,o,s){try{e(t,n,i,o,s)}catch(a){r(a,z(n))}}function ie(e,t,n,r,s,c){var l;return o(r,function(r,o){var c,u,d,p,f=r.attrName,h=r.optional;switch(r.mode){case"@":h||Bn.call(t,f)||(n[o]=t[f]=void 0),t.$observe(f,function(e){C(e)&&(n[o]=e)}),t.$$observers[f].$$scope=e,C(t[f])&&(n[o]=i(t[f])(e));break;case"=":if(!Bn.call(t,f)){if(h)break;t[f]=void 0}if(h&&!t[f])break;u=a(t[f]),p=u.literal?R:function(e,t){return e===t||e!==e&&t!==t},d=u.assign||function(){throw c=n[o]=u(e),Ri("nonassign",t[f],s.name)},c=n[o]=u(e),h=function(t){return p(t,n[o])||(p(t,c)?d(e,t=n[o]):n[o]=t),c=t},h.$stateful=!0,h=r.collection?e.$watchCollection(t[f],h):e.$watch(a(t[f],h),null,u.literal),l=l||[],l.push(h);break;case"&":if(u=t.hasOwnProperty(f)?a(t[f]):m,u===m&&h)break;n[o]=function(t){return u(e,t)}}}),r=l?function(){for(var e=0,t=l.length;t>e;++e)l[e]()}:m,c&&r!==m?(c.$on("$destroy",r),m):r}var oe=function(e,t){if(t){var n,i,r,o=Object.keys(t);for(n=0,i=o.length;i>n;n++)r=o[n],this[r]=t[r]}else this.$attr={};this.$$element=e};oe.prototype={$normalize:Ge,$addClass:function(e){e&&0<e.length&&O.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&O.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ke(e,t);n&&n.length&&O.addClass(this.$$element,n),(n=Ke(t,e))&&n.length&&O.removeClass(this.$$element,n)},$set:function(e,t,i,s){var a=this.$$element[0],c=Ee(a,e),l=Ie(a,e),a=e;if(c?(this.$$element.prop(e,t),s=c):l&&(this[l]=t,a=l),this[e]=t,s?this.$attr[e]=s:(s=this.$attr[e])||(this.$attr[e]=s=ne(e,"-")),c=L(this.$$element),"a"===c&&"href"===e||"img"===c&&"src"===e)this[e]=t=$(t,"src"===e);else if("img"===c&&"srcset"===e){for(var c="",l=ti(t),u=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,u=/\s/.test(l)?u:/(,)/,l=l.split(u),u=Math.floor(l.length/2),d=0;u>d;d++)var p=2*d,c=c+$(ti(l[p]),!0),c=c+(" "+ti(l[p+1]));l=ti(l[2*d]).split(/\s/),c+=$(ti(l[0]),!0),2===l.length&&(c+=" "+ti(l[1])),this[e]=t=c}!1!==i&&(null===t||t===n?this.$$element.removeAttr(s):this.$$element.attr(s,t)),(e=this.$$observers)&&o(e[a],function(e){try{e(t)}catch(n){r(n)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=le()),r=i[e]||(i[e]=[]);return r.push(t),w.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(e)||b(n[e])||t(n[e])}),function(){N(r,t)}}};var se=i.startSymbol(),ae=i.endSymbol(),ce="{{"==se||"}}"==ae?g:function(e){return e.replace(/\{\{/g,se).replace(/}}/g,ae)},ue=/^ngAttr[A-Z]/;return E.$$addBindingInfo=x?function(e,t){var n=e.data("$binding")||[];Qn(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:m,E.$$addBindingClass=x?function(e){A(e,"ng-binding")}:m,E.$$addScopeInfo=x?function(e,t,n,i){e.data(n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope",t)}:m,E.$$addScopeClass=x?function(e,t){A(e,t?"ng-isolate-scope":"ng-scope")}:m,E}]}function Ge(e){return pe(e.replace(Pi,""))}function Ke(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/),o=0;e:for(;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s==r[a])continue e;n+=(0<n.length?" ":"")+s}return n}function Ze(e){e=Rn(e);var t=e.length;if(1>=t)return e;for(;t--;)8===e[t].nodeType&&zn.call(e,t,1);return e}function Xe(){var e={},t=!1;this.register=function(t,n){se(t,"controller"),S(t)?d(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(r,o){function s(e,t,n,r){if(!e||!S(e.$scope))throw i("$controller")("noscp",r,t);e.$scope[t]=n}return function(i,a,c,l){var u,p,f;if(c=!0===c,l&&C(l)&&(f=l),C(i)){if(l=i.match(Fi),!l)throw Ui("ctrlfmt",i);p=l[1],f=f||l[3],i=e.hasOwnProperty(p)?e[p]:ae(a.$scope,p,!0)||(t?ae(o,p,!0):n),oe(i,p,!0)}return c?(c=(Qn(i)?i[i.length-1]:i).prototype,u=Object.create(c||null),f&&s(a,f,u,p||i.name),d(function(){var e=r.invoke(i,u,a,p);return e!==u&&(S(e)||M(e))&&(u=e,f&&s(a,f,u,p||i.name)),u},{instance:u,identifier:f})):(u=r.instantiate(i,a,p),f&&s(a,f,u,p||i.name),u)}}]}function Je(){this.$get=["$window",function(e){return Rn(e.document)}]}function Qe(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function et(e){return S(e)?k(e)?e.toISOString():V(e):e}function tt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return s(e,function(e,n){null===e||b(e)||(Qn(e)?o(e,function(e,i){t.push(Z(n)+"="+Z(et(e)))}):t.push(Z(n)+"="+Z(et(e))))}),t.join("&")}}}function nt(){this.$get=function(){return function(e){function t(e,i,r){null===e||b(e)||(Qn(e)?o(e,function(e,n){t(e,i+"["+(S(e)?n:"")+"]")}):S(e)&&!k(e)?s(e,function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))}):n.push(Z(i)+"="+Z(et(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function it(e,t){if(C(e)){var n=e.replace(Hi,"").trim();if(n){var i=t("Content-Type");(i=i&&0===i.indexOf(Bi))||(i=(i=n.match(Yi))&&zi[i[0]].test(n)),i&&(e=B(n))}}return e}function rt(e){var t,n=le();return C(e)?o(e.split("\n"),function(e){t=e.indexOf(":");var i=Vn(ti(e.substr(0,t)));e=ti(e.substr(t+1)),i&&(n[i]=n[i]?n[i]+", "+e:e)}):S(e)&&o(e,function(e,t){var i=Vn(t),r=ti(e);i&&(n[i]=n[i]?n[i]+", "+r:r)}),n}function ot(e){var t;return function(n){return t||(t=rt(e)),n?(n=t[Vn(n)],void 0===n&&(n=null),n):t}}function st(e,t,n,i){return M(i)?i(e,t,n):(o(i,function(i){e=i(e,t,n)}),e)}function at(){var e=this.defaults={transformResponse:[it],transformRequest:[function(e){return S(e)&&"[object File]"!==Wn.call(e)&&"[object Blob]"!==Wn.call(e)&&"[object FormData]"!==Wn.call(e)?V(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:j(qi),put:j(qi),patch:j(qi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},t=!1;this.useApplyAsync=function(e){return w(e)?(t=!!e,this):t};var r=!0;this.useLegacyPromiseExtensions=function(e){return w(e)?(r=!!e,this):r};var s=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,c,l,u,p,f){function h(t){function s(e){var t=d({},e);return t.data=e.data?st(e.data,e.headers,e.status,c.transformResponse):e.data,e=e.status,e>=200&&300>e?t:p.reject(t)}function a(e,t){var n,i={};return o(e,function(e,r){M(e)?(n=e(t),null!=n&&(i[r]=n)):i[r]=e}),i}if(!Zn.isObject(t))throw i("$http")("badreq",t);
var c=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},t);c.headers=function(t){var n,i,r,o=e.headers,s=d({},t.headers),o=d({},o.common,o[Vn(t.method)]);e:for(n in o){i=Vn(n);for(r in s)if(Vn(r)===i)continue e;s[n]=o[n]}return a(s,j(t))}(t),c.method=qn(c.method),c.paramSerializer=C(c.paramSerializer)?f.get(c.paramSerializer):c.paramSerializer;var l=[function(t){var i=t.headers,r=st(t.data,ot(i),n,t.transformRequest);return b(r)&&o(i,function(e,t){"content-type"===Vn(t)&&delete i[t]}),b(t.withCredentials)&&!b(e.withCredentials)&&(t.withCredentials=e.withCredentials),m(t,r).then(s,s)},n],u=p.when(c);for(o(v,function(e){(e.request||e.requestError)&&l.unshift(e.request,e.requestError),(e.response||e.responseError)&&l.push(e.response,e.responseError)});l.length;){t=l.shift();var h=l.shift(),u=u.then(t,h)}return r?(u.success=function(e){return oe(e,"fn"),u.then(function(t){e(t.data,t.status,t.headers,c)}),u},u.error=function(e){return oe(e,"fn"),u.then(null,function(t){e(t.data,t.status,t.headers,c)}),u}):(u.success=Gi("success"),u.error=Gi("error")),u}function m(i,r){function o(e,n,i,r){function o(){s(n,e,i,r)}f&&(e>=200&&300>e?f.put(T,[e,n,rt(i),r]):f.remove(T)),t?u.$applyAsync(o):(o(),u.$$phase||u.$apply())}function s(e,t,n,r){t=Math.max(t,0),(t>=200&&300>t?v.resolve:v.reject)({data:e,status:t,headers:ot(n),config:i,statusText:r})}function l(e){s(e.data,e.status,j(e.headers()),e.statusText)}function d(){var e=h.pendingRequests.indexOf(i);-1!==e&&h.pendingRequests.splice(e,1)}var f,m,v=p.defer(),x=v.promise,C=i.headers,T=g(i.url,i.paramSerializer(i.params));return h.pendingRequests.push(i),x.then(d,d),!i.cache&&!e.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(f=S(i.cache)?i.cache:S(e.cache)?e.cache:y),f&&(m=f.get(T),w(m)?m&&M(m.then)?m.then(l,l):Qn(m)?s(m[1],m[0],j(m[2]),m[3]):s(m,200,{},"OK"):f.put(T,x)),b(m)&&((m=nn(i.url)?c()[i.xsrfCookieName||e.xsrfCookieName]:n)&&(C[i.xsrfHeaderName||e.xsrfHeaderName]=m),a(i.method,T,r,o,C,i.timeout,i.withCredentials,i.responseType)),x}function g(e,t){return 0<t.length&&(e+=(-1==e.indexOf("?")?"?":"&")+t),e}var y=l("$http");e.paramSerializer=C(e.paramSerializer)?f.get(e.paramSerializer):e.paramSerializer;var v=[];return o(s,function(e){v.unshift(C(e)?f.get(e):f.invoke(e))}),h.pendingRequests=[],function(e){o(arguments,function(e){h[e]=function(t,n){return h(d({},n||{},{method:e,url:t}))}})}("get","delete","head","jsonp"),function(e){o(arguments,function(e){h[e]=function(t,n,i){return h(d({},i||{},{method:e,url:t,data:n}))}})}("post","put","patch"),h.defaults=e,h}]}function ct(){return new e.XMLHttpRequest}function lt(){this.$get=["$browser","$window","$document",function(e,t,n){return ut(e,ct,e.defer,t.angular.callbacks,n[0])}]}function ut(e,t,i,r,s){function a(e,t,n){var i=s.createElement("script"),o=null;return i.type="text/javascript",i.src=e,i.async=!0,o=function(e){i.removeEventListener("load",o,!1),i.removeEventListener("error",o,!1),s.body.removeChild(i),i=null;var a=-1,c="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),c=e.type,a="error"===e.type?404:200),n&&n(a,c)},i.addEventListener("load",o,!1),i.addEventListener("error",o,!1),s.body.appendChild(i),o}return function(s,c,l,u,d,p,f,h){function g(){b&&b(),S&&S.abort()}function y(t,r,o,s,a){C!==n&&i.cancel(C),b=S=null,t(r,o,s,a),e.$$completeOutstandingRequest(m)}if(e.$$incOutstandingRequestCount(),c=c||e.url(),"jsonp"==Vn(s)){var v="_"+(r.counter++).toString(36);r[v]=function(e){r[v].data=e,r[v].called=!0};var b=a(c.replace("JSON_CALLBACK","angular.callbacks."+v),v,function(e,t){y(u,e,r[v].data,"",t),r[v]=m})}else{var S=t();if(S.open(s,c,!0),o(d,function(e,t){w(e)&&S.setRequestHeader(t,e)}),S.onload=function(){var e=S.statusText||"",t="response"in S?S.response:S.responseText,n=1223===S.status?204:S.status;0===n&&(n=t?200:"file"==tn(c).protocol?404:0),y(u,n,t,S.getAllResponseHeaders(),e)},s=function(){y(u,-1,null,null,"")},S.onerror=s,S.onabort=s,f&&(S.withCredentials=!0),h)try{S.responseType=h}catch(x){if("json"!==h)throw x}S.send(l)}if(p>0)var C=i(g,p);else p&&M(p.then)&&p.then(g)}}function dt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function o(e){return"\\\\\\"+e}function s(n){return n.replace(u,e).replace(p,t)}function a(o,a,u,p){function f(e){try{var t=e;e=u?r.getTrusted(u,t):r.valueOf(t);var n;if(p&&!w(e))n=e;else if(null==e)n="";else{switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=V(e)}n=e}return n}catch(s){i(Ki.interr(o,s))}}p=!!p;for(var h,m,g=0,y=[],v=[],S=o.length,x=[],C=[];S>g;){if(-1==(h=o.indexOf(e,g))||-1==(m=o.indexOf(t,h+c))){g!==S&&x.push(s(o.substring(g)));break}g!==h&&x.push(s(o.substring(g,h))),g=o.substring(h+c,m),y.push(g),v.push(n(g,f)),g=m+l,C.push(x.length),x.push("")}if(u&&1<x.length&&Ki.throwNoconcat(o),!a||y.length){var T=function(e){for(var t=0,n=y.length;n>t;t++){if(p&&b(e[t]))return;x[C[t]]=e[t]}return x.join("")};return d(function(e){var t=0,n=y.length,r=Array(n);try{for(;n>t;t++)r[t]=v[t](e);return T(r)}catch(s){i(Ki.interr(o,s))}},{exp:o,expressions:y,$$watchDelegate:function(e,t){var n;return e.$watchGroup(v,function(i,r){var o=T(i);M(t)&&t.call(this,o,i!==r?n:o,e),n=o})}})}}var c=e.length,l=t.length,u=new RegExp(e.replace(/./g,o),"g"),p=new RegExp(t.replace(/./g,o),"g");return a.startSymbol=function(){return e},a.endSymbol=function(){return t},a}]}function pt(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,i){function r(r,s,a,c){var l=4<arguments.length,u=l?Yn.call(arguments,4):[],d=t.setInterval,p=t.clearInterval,f=0,h=w(c)&&!c,m=(h?i:n).defer(),g=m.promise;return a=w(a)?a:0,g.then(null,null,l?function(){r.apply(null,u)}:r),g.$$intervalId=d(function(){m.notify(f++),a>0&&f>=a&&(m.resolve(f),p(g.$$intervalId),delete o[g.$$intervalId]),h||e.$apply()},s),o[g.$$intervalId]=m,g}var o={};return r.cancel=function(e){return e&&e.$$intervalId in o?(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0):!1},r}]}function ft(e){e=e.split("/");for(var t=e.length;t--;)e[t]=K(e[t]);return e.join("/")}function ht(e,t){var n=tn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||Xi[n.protocol]||null}function mt(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var i=tn(e);t.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=W(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function gt(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function yt(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function vt(e){return e.replace(/(#.+)|#$/,"$1")}function bt(e,t,i){this.$$html5=!0,i=i||"",ht(e,this),this.$$parse=function(e){var n=gt(t,e);if(!C(n))throw Ji("ipthprfx",e,t);mt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=G(this.$$search),n=this.$$hash?"#"+K(this.$$hash):"";this.$$url=ft(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var s,a;return(s=gt(e,r))!==n?(a=s,a=(s=gt(i,s))!==n?t+(gt("/",s)||s):e+a):(s=gt(t,r))!==n?a=t+s:t==r+"/"&&(a=t),a&&this.$$parse(a),!!a}}function wt(e,t,n){ht(e,this),this.$$parse=function(i){var r,o=gt(e,i)||gt(t,i);b(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",b(o)&&(e=i,this.replace())):(r=gt(n,o),b(r)&&(r=o)),mt(r,this),i=this.$$path;var o=e,s=/^\/[A-Z]:(\/.*)/;0===r.indexOf(o)&&(r=r.replace(o,"")),s.exec(r)||(i=(r=s.exec(i))?r[1]:i),this.$$path=i,this.$$compose()},this.$$compose=function(){var t=G(this.$$search),i=this.$$hash?"#"+K(this.$$hash):"";this.$$url=ft(this.$$path)+(t?"?"+t:"")+i,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return yt(e)==yt(t)?(this.$$parse(t),!0):!1}}function St(e,t,n){this.$$html5=!0,wt.apply(this,arguments),this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,s;return e==yt(i)?o=i:(s=gt(t,i))?o=e+n+s:t===i+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=G(this.$$search),i=this.$$hash?"#"+K(this.$$hash):"";this.$$url=ft(this.$$path)+(t?"?"+t:"")+i,this.$$absUrl=e+n+this.$$url}}function xt(e){return function(){return this[e]}}function Ct(e,t){return function(n){return b(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Tt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return w(t)?(e=t,this):e},this.html5Mode=function(e){return A(e)?(t.enabled=e,this):S(e)?(A(e.enabled)&&(t.enabled=e.enabled),A(e.requireBase)&&(t.requireBase=e.requireBase),A(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,s){function a(e,t,n){var r=l.url(),o=l.$$state;try{i.url(e,t,n),l.$$state=i.state()}catch(s){throw l.url(r),l.$$state=o,s}}function c(e,t){n.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}var l,u;u=i.baseHref();var d,p=i.url();if(t.enabled){if(!u&&t.requireBase)throw Ji("nobase");d=p.substring(0,p.indexOf("/",p.indexOf("//")+2))+(u||"/"),u=r.history?bt:St}else d=yt(p),u=wt;var f=d.substr(0,yt(d).lastIndexOf("/")+1);l=new u(d,f,"#"+e),l.$$parseLinkUrl(p,p),l.$$state=i.state();var h=/^\s*(javascript|mailto):/i;o.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var r=Rn(e.target);"a"!==L(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var a=r.prop("href"),c=r.attr("href")||r.attr("xlink:href");S(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=tn(a.animVal).href),h.test(a)||!a||r.attr("target")||e.isDefaultPrevented()||!l.$$parseLinkUrl(a,c)||(e.preventDefault(),l.absUrl()!=i.url()&&(n.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}),vt(l.absUrl())!=vt(p)&&i.url(l.absUrl(),!0);var m=!0;return i.onUrlChange(function(e,t){b(gt(f,e))?s.location.href=e:(n.$evalAsync(function(){var i,r=l.absUrl(),o=l.$$state;l.$$parse(e),l.$$state=t,i=n.$broadcast("$locationChangeStart",e,r,t,o).defaultPrevented,l.absUrl()===e&&(i?(l.$$parse(r),l.$$state=o,a(r,!1,o)):(m=!1,c(r,o)))}),n.$$phase||n.$digest())}),n.$watch(function(){var e=vt(i.url()),t=vt(l.absUrl()),o=i.state(),s=l.$$replace,u=e!==t||l.$$html5&&r.history&&o!==l.$$state;(m||u)&&(m=!1,n.$evalAsync(function(){var t=l.absUrl(),i=n.$broadcast("$locationChangeStart",t,e,l.$$state,o).defaultPrevented;l.absUrl()===t&&(i?(l.$$parse(e),l.$$state=o):(u&&a(t,s,o===l.$$state?null:l.$$state),c(e,o)))})),l.$$replace=!1}),l}]}function kt(){var e=!0,t=this;this.debugEnabled=function(t){return w(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function r(e){var t=n.console||{},r=t[e]||t.log||m;e=!1;try{e=!!r.apply}catch(s){}return e?function(){var e=[];return o(arguments,function(t){e.push(i(t))}),r.apply(t,e)}:function(e,t){r(e,null==t?"":t)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Mt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw er("isecfld",t);return e}function Ot(e,t){if(e){if(e.constructor===e)throw er("isecfn",t);if(e.window===e)throw er("isecwindow",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw er("isecdom",t);if(e===Object)throw er("isecobj",t)}return e}function $t(e,t){if(e){if(e.constructor===e)throw er("isecfn",t);if(e===tr||e===nr||e===ir)throw er("isecff",t)}}function _t(e,t){return"undefined"!=typeof e?e:t}function At(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function Et(e,t){var n,i;switch(e.type){case ar.Program:n=!0,o(e.body,function(e){Et(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case ar.Literal:e.constant=!0,e.toWatch=[];break;case ar.UnaryExpression:Et(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case ar.BinaryExpression:Et(e.left,t),Et(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case ar.LogicalExpression:Et(e.left,t),Et(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case ar.ConditionalExpression:Et(e.test,t),Et(e.alternate,t),Et(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case ar.Identifier:e.constant=!1,e.toWatch=[e];break;case ar.MemberExpression:Et(e.object,t),e.computed&&Et(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case ar.CallExpression:n=e.filter?!t(e.callee.name).$stateful:!1,i=[],o(e.arguments,function(e){Et(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=e.filter&&!t(e.callee.name).$stateful?i:[e];break;case ar.AssignmentExpression:Et(e.left,t),Et(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case ar.ArrayExpression:n=!0,i=[],o(e.elements,function(e){Et(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=i;break;case ar.ObjectExpression:n=!0,i=[],o(e.properties,function(e){Et(e.value,t),n=n&&e.value.constant,e.value.constant||i.push.apply(i,e.value.toWatch)}),e.constant=n,e.toWatch=i;break;case ar.ThisExpression:e.constant=!1,e.toWatch=[]}}function It(e){if(1==e.length){e=e[0].expression;var t=e.toWatch;return 1!==t.length?t:t[0]!==e?t:n}}function Lt(e){return e.type===ar.Identifier||e.type===ar.MemberExpression}function Nt(e){return 1===e.body.length&&Lt(e.body[0].expression)?{type:ar.AssignmentExpression,left:e.body[0].expression,right:{type:ar.NGValueParameter},operator:"="}:void 0}function Dt(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===ar.Literal||e.body[0].expression.type===ar.ArrayExpression||e.body[0].expression.type===ar.ObjectExpression)}function jt(e,t){this.astBuilder=e,this.$filter=t}function Rt(e,t){this.astBuilder=e,this.$filter=t}function Pt(e){return"constructor"==e}function Ut(e){return M(e.valueOf)?e.valueOf():lr.call(e)}function Ft(){var e=le(),t=le();this.$get=["$filter",function(i){function r(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=Ut(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function s(e,t,i,o,s){var a,c=o.inputs;if(1===c.length){var l=r,c=c[0];return e.$watch(function(e){var t=c(e);return r(t,l)||(a=o(e,n,n,[t]),l=t&&Ut(t)),a},t,i,s)}for(var u=[],d=[],p=0,f=c.length;f>p;p++)u[p]=r,d[p]=null;return e.$watch(function(e){for(var t=!1,i=0,s=c.length;s>i;i++){var l=c[i](e);(t||(t=!r(l,u[i])))&&(d[i]=l,u[i]=l&&Ut(l))}return t&&(a=o(e,n,n,d)),a},t,i,s)}function a(e,t,n,i){var r,o;return r=e.$watch(function(e){return i(e)},function(e,n,i){o=e,M(t)&&t.apply(this,arguments),w(e)&&i.$$postDigest(function(){w(o)&&r()})},n)}function c(e,t,n,i){function r(e){var t=!0;return o(e,function(e){w(e)||(t=!1)}),t}var s,a;return s=e.$watch(function(e){return i(e)},function(e,n,i){a=e,M(t)&&t.call(this,e,n,i),r(e)&&i.$$postDigest(function(){r(a)&&s()})},n)}function l(e,t,n,i){var r;return r=e.$watch(function(e){return i(e)},function(e,n,i){M(t)&&t.apply(this,arguments),r()},n)}function u(e,t){if(!t)return e;var n=e.$$watchDelegate,n=n!==c&&n!==a?function(n,i,r,o){return r=e(n,i,r,o),t(r,n,i)}:function(n,i,r,o){return r=e(n,i,r,o),n=t(r,n,i),w(r)?n:r};return e.$$watchDelegate&&e.$$watchDelegate!==s?n.$$watchDelegate=e.$$watchDelegate:t.$stateful||(n.$$watchDelegate=s,n.inputs=e.inputs?e.inputs:[e]),n}var d=ii().noUnsafeEval,p={csp:d,expensiveChecks:!1},f={csp:d,expensiveChecks:!0};return function(n,r,o){var d,h,g;switch(typeof n){case"string":g=n=n.trim();var y=o?t:e;return d=y[g],d||(":"===n.charAt(0)&&":"===n.charAt(1)&&(h=!0,n=n.substring(2)),o=o?f:p,d=new sr(o),d=new cr(d,i,o).parse(n),d.constant?d.$$watchDelegate=l:h?d.$$watchDelegate=d.literal?c:a:d.inputs&&(d.$$watchDelegate=s),y[g]=d),u(d,r);case"function":return u(n,r);default:return m}}}]}function Vt(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return qt(function(t){e.$evalAsync(t)},t)}]}function Bt(){this.$get=["$browser","$exceptionHandler",function(e,t){return qt(function(t){e.defer(t)},t)}]}function qt(e,t){function r(e,t,n){function i(t){return function(n){r||(r=!0,t.call(e,n))}}var r=!1;return[i(t),i(n)]}function s(){this.$$state={status:0}}function a(e,t){return function(n){t.call(e,n)}}function c(i){!i.processScheduled&&i.pending&&(i.processScheduled=!0,e(function(){var e,r,o;o=i.pending,i.processScheduled=!1,i.pending=n;for(var s=0,a=o.length;a>s;++s){r=o[s][0],e=o[s][i.status];try{M(e)?r.resolve(e(i.value)):1===i.status?r.resolve(i.value):r.reject(i.value)}catch(c){r.reject(c),t(c)}}}))}function l(){this.promise=new s,this.resolve=a(this,this.resolve),this.reject=a(this,this.reject),this.notify=a(this,this.notify)}var u=i("$q",TypeError);d(s.prototype,{then:function(e,t,n){if(b(e)&&b(t)&&b(n))return this;var i=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),0<this.$$state.status&&c(this.$$state),i.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return f(t,!0,e)},function(t){return f(t,!1,e)},t)}}),d(l.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(u("qcycle",e)):this.$$resolve(e))},$$resolve:function(e){var n,i;i=r(this,this.$$resolve,this.$$reject);try{(S(e)||M(e))&&(n=e&&e.then),M(n)?(this.promise.$$state.status=-1,n.call(e,i[0],i[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,c(this.promise.$$state))}catch(o){i[1](o),t(o)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,c(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;0>=this.promise.$$state.status&&i&&i.length&&e(function(){for(var e,r,o=0,s=i.length;s>o;o++){r=i[o][0],e=i[o][3];try{r.notify(M(e)?e(n):n)}catch(a){t(a)}}})}});var p=function(e,t){var n=new l;return t?n.resolve(e):n.reject(e),n.promise},f=function(e,t,n){var i=null;try{M(n)&&(i=n())}catch(r){return p(r,!1)}return i&&M(i.then)?i.then(function(){return p(e,t)},function(e){return p(e,!1)}):p(e,t)},h=function(e,t,n,i){var r=new l;return r.resolve(e),r.promise.then(t,n,i)},m=function g(e){if(!M(e))throw u("norslvr",e);if(!(this instanceof g))return new g(e);var t=new l;return e(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise};return m.defer=function(){return new l},m.reject=function(e){var t=new l;return t.reject(e),t.promise},m.when=h,m.resolve=h,m.all=function(e){var t=new l,n=0,i=Qn(e)?[]:{};return o(e,function(e,r){n++,h(e).then(function(e){i.hasOwnProperty(r)||(i[r]=e,--n||t.resolve(i))},function(e){i.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(i),t.promise},m}function Yt(){this.$get=["$window","$timeout",function(e,t){function n(){for(var e=0;e<u.length;e++){var t=u[e];t&&(u[e]=null,t())}l=u.length=0}function i(e){var t=u.length;return l++,u.push(e),0===t&&(c=a(n)),function(){t>=0&&(t=u[t]=null,0===--l&&c&&(c(),c=null,u.length=0))}}var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame,o=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,s=!!r,a=s?function(e){var t=r(e);return function(){o(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};i.supported=s;var c,l=0,u=[];return i}]}function zt(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++Xn,this.$$ChildScope=null}return t.prototype=e,t}var t=10,n=i("$rootScope"),s=null,a=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,c,l,u){function d(e){e.currentScope.$$destroyed=!0}function p(){this.$id=++Xn,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function f(e){if(x.$$phase)throw n("inprog",x.$$phase);x.$$phase=e}function h(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function g(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function y(){}function v(){for(;k.length;)try{k.shift()()}catch(e){c(e)}a=null}function w(){null===a&&(a=u.defer(function(){x.$apply(v)}))}p.prototype={constructor:p,$new:function(t,n){var i;return n=n||this,t?(i=new p,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),i=new this.$$ChildScope),i.$parent=n,i.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=i,n.$$childTail=i):n.$$childHead=n.$$childTail=i,(t||n!=this)&&i.$on("$destroy",d),i},$watch:function(e,t,n,i){var r=l(e);if(r.$$watchDelegate)return r.$$watchDelegate(this,t,n,r,e);var o=this,a=o.$$watchers,c={fn:t,last:y,get:r,exp:i||e,eq:!!n};return s=null,M(t)||(c.fn=m),a||(a=o.$$watchers=[]),a.unshift(c),h(this,1),function(){0<=N(a,c)&&h(o,-1),s=null}},$watchGroup:function(e,t){function n(){c=!1,l?(l=!1,t(r,r,a)):t(r,i,a)}var i=Array(e.length),r=Array(e.length),s=[],a=this,c=!1,l=!0;if(!e.length){var u=!0;return a.$evalAsync(function(){u&&t(r,r,a)}),function(){u=!1}}return 1===e.length?this.$watch(e[0],function(e,n,o){r[0]=e,i[0]=n,t(r,e===n?r:i,o)}):(o(e,function(e,t){var o=a.$watch(e,function(e,o){r[t]=e,i[t]=o,c||(c=!0,a.$evalAsync(n))});s.push(o)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(e,t){function n(e){i=e;var t,n,s,a;if(!b(i)){if(S(i))if(r(i))for(o!==p&&(o=p,m=o.length=0,u++),e=i.length,m!==e&&(u++,o.length=m=e),t=0;e>t;t++)a=o[t],s=i[t],n=a!==a&&s!==s,n||a===s||(u++,o[t]=s);else{o!==f&&(o=f={},m=0,u++),e=0;for(t in i)i.hasOwnProperty(t)&&(e++,s=i[t],a=o[t],t in o?(n=a!==a&&s!==s,n||a===s||(u++,o[t]=s)):(m++,o[t]=s,u++));if(m>e)for(t in u++,o)i.hasOwnProperty(t)||(m--,delete o[t])}else o!==i&&(o=i,u++);return u}}n.$stateful=!0;var i,o,s,a=this,c=1<t.length,u=0,d=l(e,n),p=[],f={},h=!0,m=0;return this.$watch(d,function(){if(h?(h=!1,t(i,i,a)):t(i,s,a),c)if(S(i))if(r(i)){s=Array(i.length);for(var e=0;e<i.length;e++)s[e]=i[e]}else for(e in s={},i)Bn.call(i,e)&&(s[e]=i[e]);else s=i})},$digest:function(){var e,i,r,o,l,d,p,h,m,g=t,b=[];f("$digest"),u.$$checkUrlChange(),this===x&&null!==a&&(u.defer.cancel(a),v()),s=null;do{for(d=!1,p=this;C.length;){try{m=C.shift(),m.scope.$eval(m.expression,m.locals)}catch(w){c(w)}s=null}e:do{if(o=p.$$watchers)for(l=o.length;l--;)try{if(e=o[l])if((i=e.get(p))===(r=e.last)||(e.eq?R(i,r):"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))){if(e===s){d=!1;break e}}else d=!0,s=e,e.last=e.eq?D(i,null):i,e.fn(i,r===y?i:r,p),5>g&&(h=4-g,b[h]||(b[h]=[]),b[h].push({msg:M(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:i,oldVal:r}))}catch(S){c(S)}if(!(o=p.$$watchersCount&&p.$$childHead||p!==this&&p.$$nextSibling))for(;p!==this&&!(o=p.$$nextSibling);)p=p.$parent}while(p=o);if((d||C.length)&&!g--)throw x.$$phase=null,n("infdig",t,b)}while(d||C.length);for(x.$$phase=null;T.length;)try{T.shift()()}catch(k){c(k)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===x&&u.$$applicationDestroyed(),h(this,-this.$$watchersCount);for(var t in this.$$listenerCount)g(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=m,this.$on=this.$watch=this.$watchGroup=function(){return m},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(e,t){return l(e)(this,t)},$evalAsync:function(e,t){x.$$phase||C.length||u.defer(function(){C.length&&x.$digest()}),C.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){T.push(e)},$apply:function(e){try{f("$apply");try{return this.$eval(e)}finally{x.$$phase=null}}catch(t){c(t)}finally{try{x.$digest()}catch(n){throw c(n),n}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&k.push(t),w()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(t);-1!==i&&(n[i]=null,g(r,1,e))}},$emit:function(e,t){var n,i,r,o=[],s=this,a=!1,l={name:e,targetScope:s,stopPropagation:function(){a=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},u=P([l],arguments,1);do{for(n=s.$$listeners[e]||o,l.currentScope=s,i=0,r=n.length;r>i;i++)if(n[i])try{n[i].apply(null,u)}catch(d){c(d)}else n.splice(i,1),i--,r--;if(a)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(e,t){var n=this,i=this,r={name:e,targetScope:this,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[e])return r;for(var o,s,a=P([r],arguments,1);n=i;){for(r.currentScope=n,i=n.$$listeners[e]||[],o=0,s=i.length;s>o;o++)if(i[o])try{i[o].apply(null,a)}catch(l){c(l)}else i.splice(o,1),o--,s--;if(!(i=n.$$listenerCount[e]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return r.currentScope=null,r}};var x=new p,C=x.$$asyncQueue=[],T=x.$$postDigestQueue=[],k=x.$$applyAsyncQueue=[];return x}]}function Ht(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return w(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return w(e)?(t=e,this):t},this.$get=function(){return function(n,i){var r,o=i?t:e;return r=tn(n).href,""===r||r.match(o)?n:"unsafe:"+r}}}function Wt(e){if("self"===e)return e;if(C(e)){if(-1<e.indexOf("***"))throw ur("iwcard",e);return e=ni(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(O(e))return new RegExp("^"+e.source+"$");throw ur("imatcher")}function Gt(e){var t=[];return w(e)&&o(e,function(e){t.push(Wt(e))}),t}function Kt(){this.SCE_CONTEXTS=dr;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Gt(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Gt(e)),t},this.$get=["$injector",function(i){function r(e,t){return"self"===e?nn(t):!!e.exec(t.href)}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}var s=function(e){throw ur("unsafe")};i.has("$sanitize")&&(s=i.get("$sanitize"));var a=o(),c={};return c[dr.HTML]=o(a),c[dr.CSS]=o(a),c[dr.URL]=o(a),c[dr.JS]=o(a),c[dr.RESOURCE_URL]=o(c[dr.URL]),{trustAs:function(e,t){var i=c.hasOwnProperty(e)?c[e]:null;if(!i)throw ur("icontext",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw ur("itype",e);return new i(t)},getTrusted:function(i,o){if(null===o||o===n||""===o)return o;var a=c.hasOwnProperty(i)?c[i]:null;if(a&&o instanceof a)return o.$$unwrapTrustedValue();if(i===dr.RESOURCE_URL){var l,u,a=tn(o.toString()),d=!1;for(l=0,u=e.length;u>l;l++)if(r(e[l],a)){d=!0;break}if(d)for(l=0,u=t.length;u>l;l++)if(r(t[l],a)){d=!1;break}if(d)return o;throw ur("insecurl",o.toString())}if(i===dr.HTML)return s(o);throw ur("unsafe")},valueOf:function(e){return e instanceof a?e.$$unwrapTrustedValue():e}}}]}function Zt(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>jn)throw ur("iequirks");var i=j(dr);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=g),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var r=i.parseAs,s=i.getTrusted,a=i.trustAs;return o(dr,function(e,t){var n=Vn(t);i[pe("parse_as_"+n)]=function(t){return r(e,t)},i[pe("get_trusted_"+n)]=function(t){return s(e,t)},i[pe("trust_as_"+n)]=function(t){return a(e,t)}}),i}]}function Xt(){this.$get=["$window","$document",function(e,t){var n,i={},r=f((/android (\d+)/.exec(Vn((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},a=/^(Moz|webkit|ms)(?=[A-Z])/,c=s.body&&s.body.style,l=!1,u=!1;if(c){for(var d in c)if(l=a.exec(d)){n=l[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in c&&"webkit"),l=!!("transition"in c||n+"Transition"in c),u=!!("animation"in c||n+"Animation"in c),!r||l&&u||(l=C(c.webkitTransition),u=C(c.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>r||o),hasEvent:function(e){if("input"===e&&11>=jn)return!1;if(b(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:ii(),vendorPrefix:n,transitions:l,animations:u,android:r}}]}function Jt(){this.$get=["$templateCache","$http","$q","$sce",function(e,t,n,i){function r(o,s){r.totalPendingRequests++,C(o)&&e.get(o)||(o=i.getTrustedResourceUrl(o));var a=t.defaults&&t.defaults.transformResponse;return Qn(a)?a=a.filter(function(e){return e!==it}):a===it&&(a=null),t.get(o,{cache:e,transformResponse:a})["finally"](function(){r.totalPendingRequests--}).then(function(t){return e.put(o,t.data),t.data},function(e){if(!s)throw Ri("tpload",o,e.status,e.statusText);return n.reject(e)})}return r.totalPendingRequests=0,r}]}function Qt(){this.$get=["$rootScope","$browser","$location",function(e,t,n){return{findBindings:function(e,t,n){e=e.getElementsByClassName("ng-binding");var i=[];return o(e,function(e){var r=Zn.element(e).data("$binding");r&&o(r,function(r){n?new RegExp("(^|\\s)"+ni(t)+"(\\s|\\||$)").test(r)&&i.push(e):-1!=r.indexOf(t)&&i.push(e)})}),i},findModels:function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o=e.querySelectorAll("["+i[r]+"model"+(n?"=":"*=")+'"'+t+'"]');if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(t){t!==n.url()&&(n.url(t),e.$digest())},whenStable:function(e){t.notifyWhenNoOutstandingRequests(e)}}}]}function en(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,r){function o(o,a,c){M(o)||(c=a,a=o,o=m);var l,u=Yn.call(arguments,3),d=w(c)&&!c,p=(d?i:n).defer(),f=p.promise;return l=t.defer(function(){try{p.resolve(o.apply(null,u))}catch(t){p.reject(t),r(t)}finally{delete s[f.$$timeoutId]}d||e.$apply()},a),f.$$timeoutId=l,s[l]=p,f}var s={};return o.cancel=function(e){return e&&e.$$timeoutId in s?(s[e.$$timeoutId].reject("canceled"),delete s[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function tn(e){return jn&&(pr.setAttribute("href",e),e=pr.href),pr.setAttribute("href",e),{href:pr.href,protocol:pr.protocol?pr.protocol.replace(/:$/,""):"",host:pr.host,search:pr.search?pr.search.replace(/^\?/,""):"",hash:pr.hash?pr.hash.replace(/^#/,""):"",hostname:pr.hostname,port:pr.port,pathname:"/"===pr.pathname.charAt(0)?pr.pathname:"/"+pr.pathname}}function nn(e){return e=C(e)?tn(e):e,e.protocol===fr.protocol&&e.host===fr.host}function rn(){this.$get=y(e)}function on(e){function t(e){try{return decodeURIComponent(e)}catch(t){return e}}var i=e[0]||{},r={},o="";
return function(){var e,s,a,c,l;if(e=i.cookie||"",e!==o)for(o=e,e=o.split("; "),r={},a=0;a<e.length;a++)s=e[a],c=s.indexOf("="),c>0&&(l=t(s.substring(0,c)),r[l]===n&&(r[l]=t(s.substring(c+1))));return r}}function sn(){this.$get=on}function an(e){function t(n,i){if(S(n)){var r={};return o(n,function(e,n){r[n]=t(n,e)}),r}return e.factory(n+"Filter",i)}this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+"Filter")}}],t("currency",pn),t("date",Sn),t("filter",cn),t("json",xn),t("limitTo",Cn),t("lowercase",vr),t("number",fn),t("orderBy",Tn),t("uppercase",br)}function cn(){return function(e,t,n){if(!r(e)){if(null==e)return e;throw i("filter")("notarray",e)}var o;switch(dn(t)){case"function":break;case"boolean":case"null":case"number":case"string":o=!0;case"object":t=ln(t,n,o);break;default:return e}return Array.prototype.filter.call(e,t)}}function ln(e,t,n){var i=S(e)&&"$"in e;return!0===t?t=R:M(t)||(t=function(e,t){return b(e)?!1:null===e||null===t?e===t:S(t)||S(e)&&!v(e)?!1:(e=Vn(""+e),t=Vn(""+t),-1!==e.indexOf(t))}),function(r){return i&&!S(r)?un(r,e.$,t,!1):un(r,e,t,n)}}function un(e,t,n,i,r){var o=dn(e),s=dn(t);if("string"===s&&"!"===t.charAt(0))return!un(e,t.substring(1),n,i);if(Qn(e))return e.some(function(e){return un(e,t,n,i)});switch(o){case"object":var a;if(i){for(a in e)if("$"!==a.charAt(0)&&un(e[a],t,n,!0))return!0;return r?!1:un(e,t,n,!1)}if("object"===s){for(a in t)if(r=t[a],!M(r)&&!b(r)&&(o="$"===a,!un(o?e:e[a],r,n,o,o)))return!1;return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function dn(e){return null===e?"null":typeof e}function pn(e){var t=e.NUMBER_FORMATS;return function(e,n,i){return b(n)&&(n=t.CURRENCY_SYM),b(i)&&(i=t.PATTERNS[1].maxFrac),null==e?e:hn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function fn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:hn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function hn(e,t,n,i,r){if(S(e))return"";var o=0>e;e=Math.abs(e);var s=1/0===e;if(!s&&!isFinite(e))return"";var a=e+"",c="",l=!1,u=[];if(s&&(c=""),!s&&-1!==a.indexOf("e")){var d=a.match(/([\d\.]+)e(-?)(\d+)/);d&&"-"==d[2]&&d[3]>r+1?e=0:(c=a,l=!0)}if(s||l)r>0&&1>e&&(c=e.toFixed(r),e=parseFloat(c));else{s=(a.split(hr)[1]||"").length,b(r)&&(r=Math.min(Math.max(t.minFrac,s),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+r)).toString()+"e"+-r);var s=(""+e).split(hr),a=s[0],s=s[1]||"",d=0,p=t.lgSize,f=t.gSize;if(a.length>=p+f)for(d=a.length-p,l=0;d>l;l++)0===(d-l)%f&&0!==l&&(c+=n),c+=a.charAt(l);for(l=d;l<a.length;l++)0===(a.length-l)%p&&0!==l&&(c+=n),c+=a.charAt(l);for(;s.length<r;)s+="0";r&&"0"!==r&&(c+=i+s.substr(0,r))}return 0===e&&(o=!1),u.push(o?t.negPre:t.posPre,c,o?t.negSuf:t.posSuf),u.join("")}function mn(e,t,n){var i="";for(0>e&&(i="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function gn(e,t,n,i){return n=n||0,function(r){return r=r["get"+e](),(n>0||r>-n)&&(r+=n),0===r&&-12==n&&(r=12),mn(r,t,i)}}function yn(e,t){return function(n,i){var r=n["get"+e](),o=qn(t?"SHORT"+e:e);return i[o][r]}}function vn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function bn(e){return function(t){var n=vn(t.getFullYear());return t=+new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))-+n,t=1+Math.round(t/6048e5),mn(t,e)}}function wn(e,t){return 0>=e.getFullYear()?t.ERAS[0]:t.ERAS[1]}function Sn(e){function t(e){var t;if(t=e.match(n)){e=new Date(0);var i=0,r=0,o=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(i=f(t[9]+t[10]),r=f(t[9]+t[11])),o.call(e,f(t[1]),f(t[2])-1,f(t[3])),i=f(t[4]||0)-i,r=f(t[5]||0)-r,o=f(t[6]||0),t=Math.round(1e3*parseFloat("0."+(t[7]||0))),s.call(e,i,r,o,t)}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var s,a,c="",l=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,C(n)&&(n=yr.test(n)?f(n):t(n)),T(n)&&(n=new Date(n)),!k(n)||!isFinite(n.getTime()))return n;for(;i;)(a=gr.exec(i))?(l=P(l,a,1),i=l.pop()):(l.push(i),i=null);var u=n.getTimezoneOffset();return r&&(u=q(r,n.getTimezoneOffset()),n=Y(n,r,!0)),o(l,function(t){s=mr[t],c+=s?s(n,e.DATETIME_FORMATS,u):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}}function xn(){return function(e,t){return b(t)&&(t=2),V(e,t)}}function Cn(){return function(e,t,n){return t=1/0===Math.abs(Number(t))?Number(t):f(t),isNaN(t)?e:(T(e)&&(e=e.toString()),Qn(e)||C(e)?(n=!n||isNaN(n)?0:f(n),n=0>n&&n>=-e.length?e.length+n:n,t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)):e)}}function Tn(e){function t(t,n){return n=n?-1:1,t.map(function(t){var i=1,r=g;if(M(t))r=t;else if(C(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(i="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant)))var o=r(),r=function(e){return e[o]};return{get:r,descending:i*n}})}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}return function(e,i,o){if(!r(e))return e;Qn(i)||(i=[i]),0===i.length&&(i=["+"]);var s=t(i,o);return s.push({get:function(){return{}},descending:o?-1:1}),e=Array.prototype.map.call(e,function(e,t){return{value:e,predicateValues:s.map(function(i){var r=i.get(e);return i=typeof r,null===r?(i="string",r="null"):"string"===i?r=r.toLowerCase():"object"===i&&("function"==typeof r.valueOf&&(r=r.valueOf(),n(r))||v(r)&&(r=r.toString(),n(r))||(r=t)),{value:r,type:i}})}}),e.sort(function(e,t){for(var n=0,i=0,r=s.length;r>i;++i){var n=e.predicateValues[i],o=t.predicateValues[i],a=0;if(n.type===o.type?n.value!==o.value&&(a=n.value<o.value?-1:1):a=n.type<o.type?-1:1,n=a*s[i].descending)break}return n}),e=e.map(function(e){return e.value})}}function kn(e){return M(e)&&(e={link:e}),e.restrict=e.restrict||"AC",y(e)}function Mn(e,t,i,r,s){var a=this,c=[],l=a.$$parentForm=e.parent().controller("form")||xr;a.$error={},a.$$success={},a.$pending=n,a.$name=s(t.name||t.ngForm||"")(i),a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,a.$submitted=!1,l.$addControl(a),a.$rollbackViewValue=function(){o(c,function(e){e.$rollbackViewValue()})},a.$commitViewValue=function(){o(c,function(e){e.$commitViewValue()})},a.$addControl=function(e){se(e.$name,"input"),c.push(e),e.$name&&(a[e.$name]=e)},a.$$renameControl=function(e,t){var n=e.$name;a[n]===e&&delete a[n],a[t]=e,e.$name=t},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],o(a.$pending,function(t,n){a.$setValidity(n,null,e)}),o(a.$error,function(t,n){a.$setValidity(n,null,e)}),o(a.$$success,function(t,n){a.$setValidity(n,null,e)}),N(c,e)},Nn({ctrl:this,$element:e,set:function(e,t,n){var i=e[t];i?-1===i.indexOf(n)&&i.push(n):e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(N(i,n),0===i.length&&delete e[t])},parentForm:l,$animate:r}),a.$setDirty=function(){r.removeClass(e,io),r.addClass(e,ro),a.$dirty=!0,a.$pristine=!1,l.$setDirty()},a.$setPristine=function(){r.setClass(e,io,ro+" ng-submitted"),a.$dirty=!1,a.$pristine=!0,a.$submitted=!1,o(c,function(e){e.$setPristine()})},a.$setUntouched=function(){o(c,function(e){e.$setUntouched()})},a.$setSubmitted=function(){r.addClass(e,"ng-submitted"),a.$submitted=!0,l.$setSubmitted()}}function On(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function $n(e,t,n,i,r,o){var s=Vn(t[0].type);if(!r.android){var a=!1;t.on("compositionstart",function(e){a=!0}),t.on("compositionend",function(){a=!1,c()})}var c=function(e){if(l&&(o.defer.cancel(l),l=null),!a){var r=t.val();e=e&&e.type,"password"===s||n.ngTrim&&"false"===n.ngTrim||(r=ti(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,e)}};if(r.hasEvent("input"))t.on("input",c);else{var l,u=function(e,t,n){l||(l=o.defer(function(){l=null,t&&t.value===n||c(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||u(e,this,this.value)}),r.hasEvent("paste")&&t.on("paste cut",u)}t.on("change",c),i.$render=function(){var e=i.$isEmpty(i.$viewValue)?"":i.$viewValue;t.val()!==e&&t.val(e)}}function _n(e,t){return function(n,i){var r,s;if(k(n))return n;if(C(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Mr.test(n))return new Date(n);if(e.lastIndex=0,r=e.exec(n))return r.shift(),s=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(r,function(e,n){n<t.length&&(s[t[n]]=+e)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,1e3*s.sss||0)}return NaN}}function An(e,t,i,r){return function(o,s,a,c,l,u,d){function p(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function f(e){return w(e)?k(e)?e:i(e):n}En(o,s,a,c),$n(o,s,a,c,l,u);var h,m=c&&c.$options&&c.$options.timezone;if(c.$$parserName=e,c.$parsers.push(function(e){return c.$isEmpty(e)?null:t.test(e)?(e=i(e,h),m&&(e=Y(e,m)),e):n}),c.$formatters.push(function(e){if(e&&!k(e))throw so("datefmt",e);return p(e)?((h=e)&&m&&(h=Y(h,m,!0)),d("date")(e,r,m)):(h=null,"")}),w(a.min)||a.ngMin){var g;c.$validators.min=function(e){return!p(e)||b(g)||i(e)>=g},a.$observe("min",function(e){g=f(e),c.$validate()})}if(w(a.max)||a.ngMax){var y;c.$validators.max=function(e){return!p(e)||b(y)||i(e)<=y},a.$observe("max",function(e){y=f(e),c.$validate()})}}}function En(e,t,i,r){(r.$$hasNativeValidators=S(t[0].validity))&&r.$parsers.push(function(e){var i=t.prop("validity")||{};return i.badInput&&!i.typeMismatch?n:e})}function In(e,t,n,i,r){if(w(i)){if(e=e(i),!e.constant)throw so("constexpr",n,i);return e(t)}return r}function Ln(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[],i=0;e:for(;i<e.length;i++){for(var r=e[i],o=0;o<t.length;o++)if(r==t[o])continue e;n.push(r)}return n}function r(e){var t=[];return Qn(e)?(o(e,function(e){t=t.concat(r(e))}),t):C(e)?e.split(" "):S(e)?(o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(s,a,c){function l(e,t){var n=a.data("$classCounts")||le(),i=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),a.data("$classCounts",n),i.join(" ")}function u(e){if(!0===t||s.$index%2===t){var o=r(e||[]);if(d){if(!R(e,d)){var u=r(d),p=i(o,u),o=i(u,o),p=l(p,1),o=l(o,-1);p&&p.length&&n.addClass(a,p),o&&o.length&&n.removeClass(a,o)}}else{var p=l(o,1);c.$addClass(p)}}d=j(e)}var d;s.$watch(c[e],u,!0),c.$observe("class",function(t){u(s.$eval(c[e]))}),"ngClass"!==e&&s.$watch("$index",function(n,i){var o=1&n;if(o!==(1&i)){var a=r(s.$eval(c[e]));o===t?(o=l(a,1),c.$addClass(o)):(o=l(a,-1),c.$removeClass(o))}})}}}]}function Nn(e){function t(e,t){t&&!s[e]?(u.addClass(o,e),s[e]=!0):!t&&s[e]&&(u.removeClass(o,e),s[e]=!1)}function i(e,n){e=e?"-"+ne(e,"-"):"",t(to+e,!0===n),t(no+e,!1===n)}var r=e.ctrl,o=e.$element,s={},a=e.set,c=e.unset,l=e.parentForm,u=e.$animate;s[no]=!(s[to]=o.hasClass(to)),r.$setValidity=function(e,o,s){o===n?(r.$pending||(r.$pending={}),a(r.$pending,e,s)):(r.$pending&&c(r.$pending,e,s),Dn(r.$pending)&&(r.$pending=n)),A(o)?o?(c(r.$error,e,s),a(r.$$success,e,s)):(a(r.$error,e,s),c(r.$$success,e,s)):(c(r.$error,e,s),c(r.$$success,e,s)),r.$pending?(t(oo,!0),r.$valid=r.$invalid=n,i("",null)):(t(oo,!1),r.$valid=Dn(r.$error),r.$invalid=!r.$valid,i("",r.$valid)),o=r.$pending&&r.$pending[e]?n:r.$error[e]?!1:r.$$success[e]?!0:null,i(e,o),l.$setValidity(e,o,r)}}function Dn(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var jn,Rn,Pn,Un,Fn=/^\/(.+)\/([a-z]*)$/,Vn=function(e){return C(e)?e.toLowerCase():e},Bn=Object.prototype.hasOwnProperty,qn=function(e){return C(e)?e.toUpperCase():e},Yn=[].slice,zn=[].splice,Hn=[].push,Wn=Object.prototype.toString,Gn=Object.getPrototypeOf,Kn=i("ng"),Zn=e.angular||(e.angular={}),Xn=0;jn=t.documentMode,m.$inject=[],g.$inject=[];var Jn,Qn=Array.isArray,ei=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,ti=function(e){return C(e)?e.trim():e},ni=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ii=function(){if(!w(ii.rules)){var e=t.querySelector("[ng-csp]")||t.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ii.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else{e=ii;try{new Function(""),n=!1}catch(i){n=!0}e.rules={noUnsafeEval:n,noInlineStyle:!1}}}return ii.rules},ri=function(){if(w(ri.name_))return ri.name_;var e,n,i,r,o=oi.length;for(n=0;o>n;++n)if(i=oi[n],e=t.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return ri.name_=r},oi=["ng-","data-ng-","ng:","x-ng-"],si=/[A-Z]/g,ai=!1,ci=1,li=3,ui={full:"1.4.4",major:1,minor:4,dot:4,codeName:"pylon-requirement"};me.expando="ng339";var di=me.cache={},pi=1;me._data=function(e){return this.cache[e[this.expando]]||{}};var fi=/([\:\-\_]+(.))/g,hi=/^moz([A-Z])/,mi={mouseleave:"mouseout",mouseenter:"mouseover"},gi=i("jqLite"),yi=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,vi=/<|&#?\w+;/,bi=/<([\w:]+)/,wi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Si={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Si.optgroup=Si.option,Si.tbody=Si.tfoot=Si.colgroup=Si.caption=Si.thead,Si.th=Si.td;var xi=me.prototype={ready:function(n){function i(){r||(r=!0,n())}var r=!1;"complete"===t.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),me(e).on("load",i))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Rn(e>=0?this[e]:this[this.length+e])},length:0,push:Hn,sort:[].sort,splice:[].splice},Ci={};o("multiple selected checked disabled readOnly required open".split(" "),function(e){Ci[Vn(e)]=e});var Ti={};o("input select option textarea button form details".split(" "),function(e){Ti[e]=!0});var ki={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:Se,removeData:be,hasData:function(e){for(var t in di[e.ng339])return!0;return!1}},function(e,t){me[t]=e}),o({data:Se,inheritedData:Oe,scope:function(e){return Rn.data(e,"$scope")||Oe(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Rn.data(e,"$isolateScope")||Rn.data(e,"$isolateScopeNoTemplate")},controller:Me,injector:function(e){return Oe(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:xe,css:function(e,t,n){return t=pe(t),w(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,i){var r=e.nodeType;if(r!==li&&2!==r&&8!==r)if(r=Vn(t),Ci[r]){if(!w(i))return e[t]||(e.attributes.getNamedItem(t)||m).specified?r:n;i?(e[t]=!0,e.setAttribute(t,r)):(e[t]=!1,e.removeAttribute(r))}else if(w(i))e.setAttribute(t,i);else if(e.getAttribute)return e=e.getAttribute(t,2),null===e?n:e},prop:function(e,t,n){return w(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(b(t)){var n=e.nodeType;return n===ci||n===li?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(b(t)){if(e.multiple&&"select"===L(e)){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return b(t)?e.innerHTML:(ye(e,!0),void(e.innerHTML=t))},empty:$e},function(e,t){me.prototype[t]=function(t,i){var r,o,s=this.length;if(e!==$e&&(2==e.length&&e!==xe&&e!==Me?t:i)===n){if(S(t)){for(r=0;s>r;r++)if(e===Se)e(this[r],t);else for(o in t)e(this[r],o,t[o]);return this}for(r=e.$dv,s=r===n?Math.min(s,1):s,o=0;s>o;o++){var a=e(this[o],t,i);r=r?r+a:a}return r}for(r=0;s>r;r++)e(this[r],t,i);return this}}),o({removeData:be,on:function Do(e,t,n,i){if(w(i))throw gi("onargs");if(fe(e)){var r=we(e,!0);i=r.events;var o=r.handle;o||(o=r.handle=Le(e,i));for(var r=0<=t.indexOf(" ")?t.split(" "):[t],s=r.length;s--;){t=r[s];var a=i[t];a||(i[t]=[],"mouseenter"===t||"mouseleave"===t?Do(e,mi[t],function(e){var n=e.relatedTarget;n&&(n===this||this.contains(n))||o(e,t)}):"$destroy"!==t&&e.addEventListener(t,o,!1),a=i[t]),a.push(n)}}},off:ve,one:function(e,t,n){e=Rn(e),e.on(t,function i(){e.off(t,n),e.off(t,i)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;ye(e),o(new me(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){e.nodeType===ci&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===ci||11===n){t=new me(t);for(var n=0,i=t.length;i>n;n++)e.appendChild(t[n])}},prepend:function(e,t){if(e.nodeType===ci){var n=e.firstChild;o(new me(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Rn(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:_e,detach:function(e){_e(e,!0)},after:function(e,t){var n=e,i=e.parentNode;t=new me(t);for(var r=0,o=t.length;o>r;r++){var s=t[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:Te,removeClass:Ce,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var i=n;b(i)&&(i=!xe(e,t)),(i?Te:Ce)(e,t)})},parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:ge,triggerHandler:function(e,t,n){var i,r,s=t.type||t,a=we(e);(a=(a=a&&a.events)&&a[s])&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:m,type:s,target:e},t.type&&(i=d(i,t)),t=j(a),r=n?[i].concat(n):[i],o(t,function(t){i.isImmediatePropagationStopped()||t.apply(e,r)}))}},function(e,t){me.prototype[t]=function(t,n,i){for(var r,o=0,s=this.length;s>o;o++)b(r)?(r=e(this[o],t,n,i),w(r)&&(r=Rn(r))):ke(r,e(this[o],t,n,i));return w(r)?r:this},me.prototype.bind=me.prototype.on,me.prototype.unbind=me.prototype.off}),je.prototype={put:function(e,t){this[De(e,this.nextUid)]=t},get:function(e){return this[De(e,this.nextUid)]},remove:function(e){var t=this[e=De(e,this.nextUid)];return delete this[e],t}};var Mi=[function(){this.$get=[function(){return je}]}],Oi=/^[^\(]*\(\s*([^\)]*)\)/m,$i=/,/,_i=/^\s*(_?)(\S+?)\1\s*$/,Ai=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ei=i("$injector");Pe.$$annotate=function(e,t,n){var i;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw C(n)&&n||(n=e.name||Re(e)),Ei("strictdi",n);t=e.toString().replace(Ai,""),t=t.match(Oi),o(t[1].split($i),function(e){e.replace(_i,function(e,t,n){i.push(n)})})}e.$inject=i}}else Qn(e)?(t=e.length-1,oe(e[t],"fn"),i=e.slice(0,t)):oe(e,"fn",!0);return i};var Ii=i("$animate"),Li=function(){this.$get=["$q","$$rAF",function(e,t){function n(){}return n.all=m,n.chain=m,n.prototype={end:m,cancel:m,resume:m,pause:m,complete:m,then:function(n,i){return e(function(e){t(function(){e()})}).then(n,i)}},n}]},Ni=function(){var e=new je,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function r(n,r,s){var a=e.get(n);a||(e.put(n,a={}),t.push(n)),n=function(e,t){var n=!1;return e&&(e=C(e)?e.split(" "):Qn(e)?e:[],o(e,function(e){e&&(n=!0,a[e]=t)})),n},r=n(r,!0),s=n(s,!1),!r&&!s||1<t.length||i.$$postDigest(function(){o(t,function(t){var n=e.get(t);if(n){var i=Ve(t.attr("class")),r="",s="";o(n,function(e,t){e!==!!i[t]&&(e?r+=(r.length?" ":"")+t:s+=(s.length?" ":"")+t)}),o(t,function(e){r&&Te(e,r),s&&Ce(e,s)}),e.remove(t)}}),t.length=0})}return{enabled:m,on:m,off:m,pin:m,push:function(e,t,i,o){return o&&o(),i=i||{},i.from&&e.css(i.from),i.to&&e.css(i.to),(i.addClass||i.removeClass)&&r(e,i.addClass,i.removeClass),new n}}}]},Di=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw Ii("notcsel",n);var r=n+"-animation";t.$$registeredAnimations[n.substr(1)]=r,e.factory(r,i)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Ii("nongcls","ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var i;e:{for(i=0;i<n.length;i++){var r=n[i];if(1===r.nodeType){i=r;break e}}i=void 0}!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,i,r,o){return i=i&&Rn(i),r=r&&Rn(r),i=i||r.parent(),t(n,i,r),e.push(n,"enter",Be(o))},move:function(n,i,r,o){return i=i&&Rn(i),r=r&&Rn(r),i=i||r.parent(),t(n,i,r),e.push(n,"move",Be(o))},leave:function(t,n){return e.push(t,"leave",Be(n),function(){t.remove()})},addClass:function(t,n,i){return i=Be(i),i.addClass=Fe(i.addclass,n),e.push(t,"addClass",i)},removeClass:function(t,n,i){return i=Be(i),i.removeClass=Fe(i.removeClass,n),e.push(t,"removeClass",i)},setClass:function(t,n,i,r){return r=Be(r),r.addClass=Fe(r.addClass,n),r.removeClass=Fe(r.removeClass,i),e.push(t,"setClass",r)},animate:function(t,n,i,r,o){return o=Be(o),o.from=o.from?d(o.from,n):n,o.to=o.to?d(o.to,i):i,o.tempClasses=Fe(o.tempClasses,r||"ng-inline-animate"),e.push(t,"animate",o)}}}]}],ji=function(){this.$get=["$$rAF","$q",function(e,t){var n=function(){};return n.prototype={done:function(e){this.defer&&this.defer[!0===e?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){return this.defer||(this.defer=t.defer()),this.defer.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)}},function(t,i){function r(){return e(function(){i.addClass&&(t.addClass(i.addClass),i.addClass=null),i.removeClass&&(t.removeClass(i.removeClass),i.removeClass=null),i.to&&(t.css(i.to),i.to=null),o||s.done(),o=!0}),s}i.from&&(t.css(i.from),i.from=null);var o,s=new n;return{start:r,end:r}}}]},Ri=i("$compile");We.$inject=["$provide","$$sanitizeUriProvider"];var Pi=/^((?:x|data)[\:\-_])/i,Ui=i("$controller"),Fi=/^(\S+)(\s+as\s+(\w+))?$/,Vi=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Rn&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Bi="application/json",qi={"Content-Type":Bi+";charset=utf-8"},Yi=/^\[|^\{(?!\{)/,zi={"[":/]$/,"{":/}$/},Hi=/^\)\]\}',?\n/,Wi=i("$http"),Gi=function(e){return function(){throw Wi("legacy",e)}},Ki=Zn.$interpolateMinErr=i("$interpolate");Ki.throwNoconcat=function(e){throw Ki("noconcat",e)},Ki.interr=function(e,t){return Ki("interr",e,t.toString())};var Zi=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Xi={http:80,https:443,ftp:21},Ji=i("$location"),Qi={$$html5:!1,$$replace:!1,absUrl:xt("$$absUrl"),url:function(e){if(b(e))return this.$$url;var t=Zi.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:xt("$$protocol"),host:xt("$$host"),port:xt("$$port"),path:Ct("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(C(e)||T(e))e=e.toString(),this.$$search=W(e);else{if(!S(e))throw Ji("isrcharg");e=D(e,{}),o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:b(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Ct("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};o([St,wt,bt],function(e){e.prototype=Object.create(Qi),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==bt||!this.$$html5)throw Ji("nostate");return this.$$state=b(t)?null:t,this}});var er=i("$parse"),tr=Function.prototype.call,nr=Function.prototype.apply,ir=Function.prototype.bind,rr=le();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){rr[e]=!0});var or={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},sr=function(e){this.options=e};sr.prototype={constructor:sr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;)if(e=this.text.charAt(this.index),'"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(e))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var t=e+this.peek(),n=t+this.peek(2),i=rr[t],r=rr[n];rr[e]||i||r?(e=r?n:i?t:e,this.tokens.push({index:this.index,text:e,operator:!0}),this.index+=e.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){return e=e||1,this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||"\x0B"===e||""===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){throw n=n||this.index,t=w(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n,er("lexerr",e,t,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Vn(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index),i=i+o;if(r)"u"===o?(r=this.text.substring(this.index+1,this.index+5),r.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+r+"]"),this.index+=4,n+=String.fromCharCode(parseInt(r,16))):n+=or[o]||o,r=!1;else if("\\"===o)r=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var ar=function(e,t){this.lexer=e,this.options=t};ar.Program="Program",ar.ExpressionStatement="ExpressionStatement",ar.AssignmentExpression="AssignmentExpression",ar.ConditionalExpression="ConditionalExpression",ar.LogicalExpression="LogicalExpression",ar.BinaryExpression="BinaryExpression",ar.UnaryExpression="UnaryExpression",ar.CallExpression="CallExpression",ar.MemberExpression="MemberExpression",ar.Identifier="Identifier",ar.Literal="Literal",ar.ArrayExpression="ArrayExpression",ar.Property="Property",ar.ObjectExpression="ObjectExpression",ar.ThisExpression="ThisExpression",ar.NGValueParameter="NGValueParameter",ar.prototype={ast:function(e){return this.text=e,this.tokens=this.lexer.lex(e),e=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var e=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:ar.Program,body:e}},expressionStatement:function(){return{type:ar.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:ar.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:ar.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:ar.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:ar.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:ar.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:ar.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:ar.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:ar.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:ar.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.constants.hasOwnProperty(this.peek().text)?e=D(this.constants[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:ar.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:ar.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:ar.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){e=[e];for(var t={type:ar.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return t},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.expression());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:ar.Identifier,name:e.text}},constant:function(){return{type:ar.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:ar.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:ar.Property,kind:"init"},this.peek().constant?e.key=this.constant():this.peek().identifier?e.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),e.value=this.expression(),t.push(e)}while(this.expect(","));return this.consume("}"),{type:ar.ObjectExpression,properties:t}},throwError:function(e,t){throw er("syntax",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw er("ueoe",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw er("ueoe",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){e=this.tokens[e];var o=e.text;if(o===t||o===n||o===i||o===r||!(t||n||i||r))return e}return!1},expect:function(e,t,n,i){return(e=this.peek(e,t,n,i))?(this.tokens.shift(),
e):!1},constants:{"true":{type:ar.Literal,value:!0},"false":{type:ar.Literal,value:!1},"null":{type:ar.Literal,value:null},undefined:{type:ar.Literal,value:n},"this":{type:ar.ThisExpression}}},jt.prototype={compile:function(e,t){var i=this,r=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Et(r,i.$filter);var s,a="";return this.stage="assign",(s=Nt(r))&&(this.state.computing="assign",a=this.nextId(),this.recurse(s,a),a="fn.assign="+this.generateFunction("assign","s,v,l")),s=It(r.body),i.stage="inputs",o(s,function(e,t){var n="fn"+t;i.state[n]={vars:[],body:[],own:{}},i.state.computing=n;var r=i.nextId();i.recurse(e,r),i.return_(r),i.state.inputs.push(n),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(r),a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+a+this.watchFns()+"return fn;",a=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",a)(this.$filter,Mt,Ot,$t,_t,At,e),this.state=this.stage=n,a.literal=Dt(r),a.constant=r.constant,a},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return o(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return o(this.state.filters,function(n,i){e.push(n+"=$filter("+t.escape(i)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,i,r,s,a){var c,l,u,d,p=this;if(r=r||m,!a&&w(e.watchId))t=t||this.nextId(),this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,i,r,s,!0));else switch(e.type){case ar.Program:o(e.body,function(t,i){p.recurse(t.expression,n,n,function(e){l=e}),i!==e.body.length-1?p.current().body.push(l,";"):p.return_(l)});break;case ar.Literal:d=this.escape(e.value),this.assign(t,d),r(d);break;case ar.UnaryExpression:this.recurse(e.argument,n,n,function(e){l=e}),d=e.operator+"("+this.ifDefined(l,0)+")",this.assign(t,d),r(d);break;case ar.BinaryExpression:this.recurse(e.left,n,n,function(e){c=e}),this.recurse(e.right,n,n,function(e){l=e}),d="+"===e.operator?this.plus(c,l):"-"===e.operator?this.ifDefined(c,0)+e.operator+this.ifDefined(l,0):"("+c+")"+e.operator+"("+l+")",this.assign(t,d),r(d);break;case ar.LogicalExpression:t=t||this.nextId(),p.recurse(e.left,t),p.if_("&&"===e.operator?t:p.not(t),p.lazyRecurse(e.right,t)),r(t);break;case ar.ConditionalExpression:t=t||this.nextId(),p.recurse(e.test,t),p.if_(t,p.lazyRecurse(e.alternate,t),p.lazyRecurse(e.consequent,t)),r(t);break;case ar.Identifier:t=t||this.nextId(),i&&(i.context="inputs"===p.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),i.computed=!1,i.name=e.name),Mt(e.name),p.if_("inputs"===p.stage||p.not(p.getHasOwnProperty("l",e.name)),function(){p.if_("inputs"===p.stage||"s",function(){s&&1!==s&&p.if_(p.not(p.nonComputedMember("s",e.name)),p.lazyAssign(p.nonComputedMember("s",e.name),"{}")),p.assign(t,p.nonComputedMember("s",e.name))})},t&&p.lazyAssign(t,p.nonComputedMember("l",e.name))),(p.state.expensiveChecks||Pt(e.name))&&p.addEnsureSafeObject(t),r(t);break;case ar.MemberExpression:c=i&&(i.context=this.nextId())||this.nextId(),t=t||this.nextId(),p.recurse(e.object,c,n,function(){p.if_(p.notNull(c),function(){e.computed?(l=p.nextId(),p.recurse(e.property,l),p.addEnsureSafeMemberName(l),s&&1!==s&&p.if_(p.not(p.computedMember(c,l)),p.lazyAssign(p.computedMember(c,l),"{}")),d=p.ensureSafeObject(p.computedMember(c,l)),p.assign(t,d),i&&(i.computed=!0,i.name=l)):(Mt(e.property.name),s&&1!==s&&p.if_(p.not(p.nonComputedMember(c,e.property.name)),p.lazyAssign(p.nonComputedMember(c,e.property.name),"{}")),d=p.nonComputedMember(c,e.property.name),(p.state.expensiveChecks||Pt(e.property.name))&&(d=p.ensureSafeObject(d)),p.assign(t,d),i&&(i.computed=!1,i.name=e.property.name))},function(){p.assign(t,"undefined")}),r(t)},!!s);break;case ar.CallExpression:t=t||this.nextId(),e.filter?(l=p.filter(e.callee.name),u=[],o(e.arguments,function(e){var t=p.nextId();p.recurse(e,t),u.push(t)}),d=l+"("+u.join(",")+")",p.assign(t,d),r(t)):(l=p.nextId(),c={},u=[],p.recurse(e.callee,l,c,function(){p.if_(p.notNull(l),function(){p.addEnsureSafeFunction(l),o(e.arguments,function(e){p.recurse(e,p.nextId(),n,function(e){u.push(p.ensureSafeObject(e))})}),c.name?(p.state.expensiveChecks||p.addEnsureSafeObject(c.context),d=p.member(c.context,c.name,c.computed)+"("+u.join(",")+")"):d=l+"("+u.join(",")+")",d=p.ensureSafeObject(d),p.assign(t,d)},function(){p.assign(t,"undefined")}),r(t)}));break;case ar.AssignmentExpression:if(l=this.nextId(),c={},!Lt(e.left))throw er("lval");this.recurse(e.left,n,c,function(){p.if_(p.notNull(c.context),function(){p.recurse(e.right,l),p.addEnsureSafeObject(p.member(c.context,c.name,c.computed)),d=p.member(c.context,c.name,c.computed)+e.operator+l,p.assign(t,d),r(t||d)})},1);break;case ar.ArrayExpression:u=[],o(e.elements,function(e){p.recurse(e,p.nextId(),n,function(e){u.push(e)})}),d="["+u.join(",")+"]",this.assign(t,d),r(d);break;case ar.ObjectExpression:u=[],o(e.properties,function(e){p.recurse(e.value,p.nextId(),n,function(t){u.push(p.escape(e.key.type===ar.Identifier?e.key.name:""+e.key.value)+":"+t)})}),d="{"+u.join(",")+"}",this.assign(t,d),r(d);break;case ar.ThisExpression:this.assign(t,"s"),r("s");break;case ar.NGValueParameter:this.assign(t,"v"),r("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),i[n]},assign:function(e,t){return e?(this.current().body.push(e,"=",t,";"),e):void 0},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var i=this.current().body;i.push("if(",e,"){"),t(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return e+"."+t},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},lazyRecurse:function(e,t,n,i,r,o){var s=this;return function(){s.recurse(e,t,n,i,r,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(C(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(T(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw er("esc")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Rt.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,Et(i,n.$filter);var r,s;(r=Nt(i))&&(s=this.recurse(r)),r=It(i.body);var a;r&&(a=[],o(r,function(e,t){var i=n.recurse(e);e.input=i,a.push(i),e.watchId=t}));var c=[];return o(i.body,function(e){c.push(n.recurse(e.expression))}),r=0===i.body.length?function(){}:1===i.body.length?c[0]:function(e,t){var n;return o(c,function(i){n=i(e,t)}),n},s&&(r.assign=function(e,t,n){return s(e,n,t)}),a&&(r.inputs=a),r.literal=Dt(i),r.constant=i.constant,r},recurse:function(e,t,i){var r,s,a,c=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case ar.Literal:return this.value(e.value,t);case ar.UnaryExpression:return s=this.recurse(e.argument),this["unary"+e.operator](s,t);case ar.BinaryExpression:return r=this.recurse(e.left),s=this.recurse(e.right),this["binary"+e.operator](r,s,t);case ar.LogicalExpression:return r=this.recurse(e.left),s=this.recurse(e.right),this["binary"+e.operator](r,s,t);case ar.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case ar.Identifier:return Mt(e.name,c.expression),c.identifier(e.name,c.expensiveChecks||Pt(e.name),t,i,c.expression);case ar.MemberExpression:return r=this.recurse(e.object,!1,!!i),e.computed||(Mt(e.property.name,c.expression),s=e.property.name),e.computed&&(s=this.recurse(e.property)),e.computed?this.computedMember(r,s,t,i,c.expression):this.nonComputedMember(r,s,c.expensiveChecks,t,i,c.expression);case ar.CallExpression:return a=[],o(e.arguments,function(e){a.push(c.recurse(e))}),e.filter&&(s=this.$filter(e.callee.name)),e.filter||(s=this.recurse(e.callee,!0)),e.filter?function(e,i,r,o){for(var c=[],l=0;l<a.length;++l)c.push(a[l](e,i,r,o));return e=s.apply(n,c,o),t?{context:n,name:n,value:e}:e}:function(e,n,i,r){var o,l=s(e,n,i,r);if(null!=l.value){Ot(l.context,c.expression),$t(l.value,c.expression),o=[];for(var u=0;u<a.length;++u)o.push(Ot(a[u](e,n,i,r),c.expression));o=Ot(l.value.apply(l.context,o),c.expression)}return t?{value:o}:o};case ar.AssignmentExpression:return r=this.recurse(e.left,!0,1),s=this.recurse(e.right),function(e,n,i,o){var a=r(e,n,i,o);return e=s(e,n,i,o),Ot(a.value,c.expression),a.context[a.name]=e,t?{value:e}:e};case ar.ArrayExpression:return a=[],o(e.elements,function(e){a.push(c.recurse(e))}),function(e,n,i,r){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,i,r));return t?{value:o}:o};case ar.ObjectExpression:return a=[],o(e.properties,function(e){a.push({key:e.key.type===ar.Identifier?e.key.name:""+e.key.value,value:c.recurse(e.value)})}),function(e,n,i,r){for(var o={},s=0;s<a.length;++s)o[a[s].key]=a[s].value(e,n,i,r);return t?{value:o}:o};case ar.ThisExpression:return function(e){return t?{value:e}:e};case ar.NGValueParameter:return function(e,n,i,r){return t?{value:i}:i}}},"unary+":function(e,t){return function(n,i,r,o){return n=e(n,i,r,o),n=w(n)?+n:0,t?{value:n}:n}},"unary-":function(e,t){return function(n,i,r,o){return n=e(n,i,r,o),n=w(n)?-n:0,t?{value:n}:n}},"unary!":function(e,t){return function(n,i,r,o){return n=!e(n,i,r,o),t?{value:n}:n}},"binary+":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s);return i=t(i,r,o,s),a=At(a,i),n?{value:a}:a}},"binary-":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s);return i=t(i,r,o,s),a=(w(a)?a:0)-(w(i)?i:0),n?{value:a}:a}},"binary*":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)*t(i,r,o,s),n?{value:i}:i}},"binary/":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)/t(i,r,o,s),n?{value:i}:i}},"binary%":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)%t(i,r,o,s),n?{value:i}:i}},"binary===":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)===t(i,r,o,s),n?{value:i}:i}},"binary!==":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)!==t(i,r,o,s),n?{value:i}:i}},"binary==":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)==t(i,r,o,s),n?{value:i}:i}},"binary!=":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)!=t(i,r,o,s),n?{value:i}:i}},"binary<":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)<t(i,r,o,s),n?{value:i}:i}},"binary>":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)>t(i,r,o,s),n?{value:i}:i}},"binary<=":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)<=t(i,r,o,s),n?{value:i}:i}},"binary>=":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)>=t(i,r,o,s),n?{value:i}:i}},"binary&&":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)&&t(i,r,o,s),n?{value:i}:i}},"binary||":function(e,t,n){return function(i,r,o,s){return i=e(i,r,o,s)||t(i,r,o,s),n?{value:i}:i}},"ternary?:":function(e,t,n,i){return function(r,o,s,a){return r=e(r,o,s,a)?t(r,o,s,a):n(r,o,s,a),i?{value:r}:r}},value:function(e,t){return function(){return t?{context:n,name:n,value:e}:e}},identifier:function(e,t,i,r,o){return function(s,a,c,l){return s=a&&e in a?a:s,r&&1!==r&&s&&!s[e]&&(s[e]={}),a=s?s[e]:n,t&&Ot(a,o),i?{context:s,name:e,value:a}:a}},computedMember:function(e,t,n,i,r){return function(o,s,a,c){var l,u,d=e(o,s,a,c);return null!=d&&(l=t(o,s,a,c),Mt(l,r),i&&1!==i&&d&&!d[l]&&(d[l]={}),u=d[l],Ot(u,r)),n?{context:d,name:l,value:u}:u}},nonComputedMember:function(e,t,i,r,o,s){return function(a,c,l,u){return a=e(a,c,l,u),o&&1!==o&&a&&!a[t]&&(a[t]={}),c=null!=a?a[t]:n,(i||Pt(t))&&Ot(c,s),r?{context:a,name:t,value:c}:c}},inputs:function(e,t){return function(n,i,r,o){return o?o[t]:e(n,i,r)}}};var cr=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new ar(this.lexer),this.astCompiler=n.csp?new Rt(this.ast,t):new jt(this.ast,t)};cr.prototype={constructor:cr,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}},le(),le();var lr=Object.prototype.valueOf,ur=i("$sce"),dr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ri=i("$compile"),pr=t.createElement("a"),fr=tn(e.location.href);on.$inject=["$document"],an.$inject=["$provide"],pn.$inject=["$locale"],fn.$inject=["$locale"];var hr=".",mr={yyyy:gn("FullYear",4),yy:gn("FullYear",2,0,!0),y:gn("FullYear",1),MMMM:yn("Month"),MMM:yn("Month",!0),MM:gn("Month",2,1),M:gn("Month",1,1),dd:gn("Date",2),d:gn("Date",1),HH:gn("Hours",2),H:gn("Hours",1),hh:gn("Hours",2,-12),h:gn("Hours",1,-12),mm:gn("Minutes",2),m:gn("Minutes",1),ss:gn("Seconds",2),s:gn("Seconds",1),sss:gn("Milliseconds",3),EEEE:yn("Day"),EEE:yn("Day",!0),a:function(e,t){return 12>e.getHours()?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){return e=-1*n,e=(e>=0?"+":"")+(mn(Math[e>0?"floor":"ceil"](e/60),2)+mn(Math.abs(e%60),2))},ww:bn(2),w:bn(1),G:wn,GG:wn,GGG:wn,GGGG:function(e,t){return 0>=e.getFullYear()?t.ERANAMES[0]:t.ERANAMES[1]}},gr=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,yr=/^\-?\d+$/;Sn.$inject=["$locale"];var vr=y(Vn),br=y(qn);Tn.$inject=["$parse"];var wr=y({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Wn.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Sr={};o(Ci,function(e,t){function n(e,n,r){e.$watch(r[i],function(e){r.$set(t,!!e)})}if("multiple"!=e){var i=Ge("ng-"+t),r=n;"checked"===e&&(r=function(e,t,r){r.ngModel!==r[i]&&n(e,t,r)}),Sr[i]=function(){return{restrict:"A",priority:100,link:r}}}}),o(ki,function(e,t){Sr[t]=function(){return{priority:100,link:function(e,n,i){return"ngPattern"===t&&"/"==i.ngPattern.charAt(0)&&(n=i.ngPattern.match(Fn))?void i.$set("ngPattern",new RegExp(n[1],n[2])):void e.$watch(i[t],function(e){i.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=Ge("ng-"+e);Sr[t]=function(){return{priority:99,link:function(n,i,r){var o=e,s=e;"href"===e&&"[object SVGAnimatedString]"===Wn.call(i.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",o=null),r.$observe(t,function(t){t?(r.$set(s,t),jn&&o&&i.prop(o,r[s])):"href"===e&&r.$set(s,null)})}}}});var xr={$addControl:m,$$renameControl:function(e,t){e.$name=t},$removeControl:m,$setValidity:m,$setDirty:m,$setPristine:m,$setSubmitted:m};Mn.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Cr=function(e){return["$timeout","$parse",function(t,i){function r(e){return""===e?i('this[""]').assign:i(e).assign||m}return{name:"form",restrict:e?"EAC":"E",controller:Mn,compile:function(i,o){i.addClass(io).addClass(to);var s=o.name?"name":e&&o.ngForm?"ngForm":!1;return{pre:function(e,i,o,a){if(!("action"in o)){var c=function(t){e.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),t.preventDefault()};i[0].addEventListener("submit",c,!1),i.on("$destroy",function(){t(function(){i[0].removeEventListener("submit",c,!1)},0,!1)})}var l=a.$$parentForm,u=s?r(a.$name):m;s&&(u(e,a),o.$observe(s,function(t){a.$name!==t&&(u(e,n),l.$$renameControl(a,t),(u=r(a.$name))(e,a))})),i.on("$destroy",function(){l.$removeControl(a),u(e,n),d(a,xr)})}}}}}]},Tr=Cr(),kr=Cr(!0),Mr=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Or=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,$r=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,_r=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Ar=/^(\d{4})-(\d{2})-(\d{2})$/,Er=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ir=/^(\d{4})-W(\d\d)$/,Lr=/^(\d{4})-(\d\d)$/,Nr=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Dr={text:function(e,t,n,i,r,o){$n(e,t,n,i,r,o),On(i)},date:An("date",Ar,_n(Ar,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":An("datetimelocal",Er,_n(Er,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:An("time",Nr,_n(Nr,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:An("week",Ir,function(e,t){if(k(e))return e;if(C(e)){Ir.lastIndex=0;var n=Ir.exec(e);if(n){var i=+n[1],r=+n[2],o=n=0,s=0,a=0,c=vn(i),r=7*(r-1);return t&&(n=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),a=t.getMilliseconds()),new Date(i,0,c.getDate()+r,n,o,s,a)}}return NaN},"yyyy-Www"),month:An("month",Lr,_n(Lr,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,i,r,o,s){if(En(e,t,i,r),$n(e,t,i,r,o,s),r.$$parserName="number",r.$parsers.push(function(e){return r.$isEmpty(e)?null:_r.test(e)?parseFloat(e):n}),r.$formatters.push(function(e){if(!r.$isEmpty(e)){if(!T(e))throw so("numfmt",e);e=e.toString()}return e}),w(i.min)||i.ngMin){var a;r.$validators.min=function(e){return r.$isEmpty(e)||b(a)||e>=a},i.$observe("min",function(e){w(e)&&!T(e)&&(e=parseFloat(e,10)),a=T(e)&&!isNaN(e)?e:n,r.$validate()})}if(w(i.max)||i.ngMax){var c;r.$validators.max=function(e){return r.$isEmpty(e)||b(c)||c>=e},i.$observe("max",function(e){w(e)&&!T(e)&&(e=parseFloat(e,10)),c=T(e)&&!isNaN(e)?e:n,r.$validate()})}},url:function(e,t,n,i,r,o){$n(e,t,n,i,r,o),On(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||Or.test(n)}},email:function(e,t,n,i,r,o){$n(e,t,n,i,r,o),On(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||$r.test(n)}},radio:function(e,t,n,i){b(n.name)&&t.attr("name",++Xn),t.on("click",function(e){t[0].checked&&i.$setViewValue(n.value,e&&e.type)}),i.$render=function(){t[0].checked=n.value==i.$viewValue},n.$observe("value",i.$render)},checkbox:function(e,t,n,i,r,o,s,a){var c=In(a,e,"ngTrueValue",n.ngTrueValue,!0),l=In(a,e,"ngFalseValue",n.ngFalseValue,!1);t.on("click",function(e){i.$setViewValue(t[0].checked,e&&e.type)}),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return!1===e},i.$formatters.push(function(e){return R(e,c)}),i.$parsers.push(function(e){return e?c:l})},hidden:m,button:m,submit:m,reset:m,file:m},jr=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,s,a){a[0]&&(Dr[Vn(s.type)]||Dr.text)(r,o,s,a[0],t,e,n,i)}}}}],Rr=/^(true|false|\d+)$/,Pr=function(){return{restrict:"A",priority:100,compile:function(e,t){return Rr.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Ur=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,i,r){e.$$addBindingInfo(i,r.ngBind),i=i[0],t.$watch(r.ngBind,function(e){i.textContent=e===n?"":e})}}}}],Fr=["$interpolate","$compile",function(e,t){return{compile:function(i){return t.$$addBindingClass(i),function(i,r,o){i=e(r.attr(o.$attr.ngBindTemplate)),t.$$addBindingInfo(r,i.expressions),r=r[0],o.$observe("ngBindTemplate",function(e){r.textContent=e===n?"":e})}}}}],Vr=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,r){var o=t(r.ngBindHtml),s=t(r.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(i),function(t,i,r){n.$$addBindingInfo(i,r.ngBindHtml),t.$watch(s,function(){i.html(e.getTrustedHtml(o(t))||"")})}}}}],Br=y({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),qr=Ln("",!0),Yr=Ln("Odd",0),zr=Ln("Even",1),Hr=kn({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Wr=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Gr={},Kr={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Ge("ng-"+e);Gr[t]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var s=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var r=function(){s(t,{$event:n})};Kr[e]&&i.$$phase?t.$evalAsync(r):t.$apply(r)})}}}}]});var Zr=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,c,l;n.$watch(r.ngIf,function(n){n?c||s(function(n,o){c=o,n[n.length++]=t.createComment(" end ngIf: "+r.ngIf+" "),a={clone:n},e.enter(n,i.parent(),i)}):(l&&(l.remove(),l=null),c&&(c.$destroy(),c=null),a&&(l=ce(a.clone),e.leave(l).then(function(){l=null}),a=null))})}}}],Xr=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Zn.noop,compile:function(i,r){var o=r.ngInclude||r.src,s=r.onload||"",a=r.autoscroll;return function(i,r,c,l,u){var d,p,f,h=0,m=function(){p&&(p.remove(),p=null),d&&(d.$destroy(),d=null),f&&(n.leave(f).then(function(){p=null}),p=f,f=null)};i.$watch(o,function(o){var c=function(){!w(a)||a&&!i.$eval(a)||t()},p=++h;o?(e(o,!0).then(function(e){if(p===h){var t=i.$new();l.template=e,e=u(t,function(e){m(),n.enter(e,null,r).then(c)}),d=t,f=e,d.$emit("$includeContentLoaded",o),i.$eval(s)}},function(){p===h&&(m(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(m(),l.template=null)})}}}}],Jr=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){/SVG/.test(i[0].toString())?(i.empty(),e(he(o.template,t).childNodes)(n,function(e){i.append(e)},{futureParentElement:i})):(i.html(o.template),e(i.contents())(n))}}}],Qr=kn({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),eo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,i,r){var s=t.attr(i.$attr.ngList)||", ",a="false"!==i.ngTrim,c=a?ti(s):s;r.$parsers.push(function(e){if(!b(e)){var t=[];return e&&o(e.split(c),function(e){e&&t.push(a?ti(e):e)}),t}}),r.$formatters.push(function(e){return Qn(e)?e.join(s):n}),r.$isEmpty=function(e){return!e||!e.length}}}},to="ng-valid",no="ng-invalid",io="ng-pristine",ro="ng-dirty",oo="ng-pending",so=i("ngModel"),ao=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,i,r,s,a,c,l,u,d){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=d(i.name||"",!1)(e);var p,f=s(i.ngModel),h=f.assign,g=f,y=h,v=null,S=this;this.$$setOptions=function(e){if((S.$options=e)&&e.getterSetter){var t=s(i.ngModel+"()"),n=s(i.ngModel+"($$$p)");g=function(e){var n=f(e);return M(n)&&(n=t(e)),n},y=function(e,t){M(f(e))?n(e,{$$$p:S.$modelValue}):h(e,S.$modelValue)}}else if(!f.assign)throw so("nonassign",i.ngModel,z(r))},this.$render=m,this.$isEmpty=function(e){return b(e)||""===e||null===e||e!==e};var x=r.inheritedData("$formController")||xr,C=0;Nn({ctrl:this,$element:r,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:x,$animate:a}),this.$setPristine=function(){S.$dirty=!1,S.$pristine=!0,a.removeClass(r,ro),a.addClass(r,io)},this.$setDirty=function(){S.$dirty=!0,S.$pristine=!1,a.removeClass(r,io),a.addClass(r,ro),x.$setDirty()},this.$setUntouched=function(){S.$touched=!1,S.$untouched=!0,a.setClass(r,"ng-untouched","ng-touched")},this.$setTouched=function(){S.$touched=!0,S.$untouched=!1,a.setClass(r,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){c.cancel(v),S.$viewValue=S.$$lastCommittedViewValue,S.$render()},this.$validate=function(){if(!T(S.$modelValue)||!isNaN(S.$modelValue)){var e=S.$$rawModelValue,t=S.$valid,i=S.$modelValue,r=S.$options&&S.$options.allowInvalid;S.$$runValidators(e,S.$$lastCommittedViewValue,function(o){r||t===o||(S.$modelValue=o?e:n,S.$modelValue!==i&&S.$$writeModelToScope())})}},this.$$runValidators=function(e,t,i){function r(){var n=!0;return o(S.$validators,function(i,r){var o=i(e,t);n=n&&o,a(r,o)}),n?!0:(o(S.$asyncValidators,function(e,t){a(t,null)}),!1)}function s(){var i=[],r=!0;o(S.$asyncValidators,function(o,s){var c=o(e,t);if(!c||!M(c.then))throw so("$asyncValidators",c);a(s,n),i.push(c.then(function(){a(s,!0)},function(e){r=!1,a(s,!1)}))}),i.length?u.all(i).then(function(){c(r)},m):c(!0)}function a(e,t){l===C&&S.$setValidity(e,t)}function c(e){l===C&&i(e)}C++;var l=C;(function(){var e=S.$$parserName||"parse";return p!==n?(p||(o(S.$validators,function(e,t){a(t,null)}),o(S.$asyncValidators,function(e,t){a(t,null)})),a(e,p),p):(a(e,null),!0)})()&&r()?s():c(!1)},this.$commitViewValue=function(){var e=S.$viewValue;c.cancel(v),(S.$$lastCommittedViewValue!==e||""===e&&S.$$hasNativeValidators)&&(S.$$lastCommittedViewValue=e,S.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var t=S.$$lastCommittedViewValue;if(p=b(t)?n:!0)for(var i=0;i<S.$parsers.length;i++)if(t=S.$parsers[i](t),b(t)){p=!1;break}T(S.$modelValue)&&isNaN(S.$modelValue)&&(S.$modelValue=g(e));var r=S.$modelValue,o=S.$options&&S.$options.allowInvalid;S.$$rawModelValue=t,o&&(S.$modelValue=t,S.$modelValue!==r&&S.$$writeModelToScope()),S.$$runValidators(t,S.$$lastCommittedViewValue,function(e){o||(S.$modelValue=e?t:n,S.$modelValue!==r&&S.$$writeModelToScope())})},this.$$writeModelToScope=function(){y(e,S.$modelValue),o(S.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){S.$viewValue=e,S.$options&&!S.$options.updateOnDefault||S.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n=0,i=S.$options;i&&w(i.debounce)&&(i=i.debounce,T(i)?n=i:T(i[t])?n=i[t]:T(i["default"])&&(n=i["default"])),c.cancel(v),n?v=c(function(){S.$commitViewValue()},n):l.$$phase?S.$commitViewValue():e.$apply(function(){S.$commitViewValue()})},e.$watch(function(){var t=g(e);if(t!==S.$modelValue&&(S.$modelValue===S.$modelValue||t===t)){S.$modelValue=S.$$rawModelValue=t,p=n;for(var i=S.$formatters,r=i.length,o=t;r--;)o=i[r](o);S.$viewValue!==o&&(S.$viewValue=S.$$lastCommittedViewValue=o,S.$render(),S.$$runValidators(t,o,m))}return t})}],co=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ao,priority:1,compile:function(t){return t.addClass(io).addClass("ng-untouched").addClass(to),{pre:function(e,t,n,i){var r=i[0],o=i[1]||xr;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(e){r.$name!==e&&o.$$renameControl(r,e)}),e.$on("$destroy",function(){o.$removeControl(r)})},post:function(t,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(n){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],lo=/(\s+|^)default(\s+|$)/,uo=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var i=this;this.$options=D(e.$eval(t.ngModelOptions)),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=ti(this.$options.updateOn.replace(lo,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},po=kn({terminal:!0,priority:1e3}),fo=i("ngOptions"),ho=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,mo=["$compile","$parse",function(e,n){function i(e,t,i){function o(e,t,n,i,r){this.selectValue=e,this.viewValue=t,this.label=n,this.group=i,this.disabled=r}function s(e){var t;if(!l&&r(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var a=e.match(ho);if(!a)throw fo("iexp",e,z(t));var c=a[5]||a[7],l=a[6];e=/ as /.test(a[0])&&a[1];var u=a[9];t=n(a[2]?a[1]:c);var d=e&&n(e)||t,p=u&&n(u),f=u?function(e,t){return p(i,t)}:function(e){return De(e)},h=function(e,t){return f(e,w(e,t))},m=n(a[2]||a[1]),g=n(a[3]||""),y=n(a[4]||""),v=n(a[8]),b={},w=l?function(e,t){return b[l]=t,b[c]=e,b}:function(e){return b[c]=e,b};return{trackBy:u,getTrackByValue:h,getWatchables:n(v,function(e){var t=[];e=e||[];for(var n=s(e),r=n.length,o=0;r>o;o++){var c=e===n?o:n[o],l=w(e[c],c),c=f(e[c],l);t.push(c),(a[2]||a[1])&&(c=m(i,l),t.push(c)),a[4]&&(l=y(i,l),t.push(l))}return t}),getOptions:function(){for(var e=[],t={},n=v(i)||[],r=s(n),a=r.length,c=0;a>c;c++){var l=n===r?c:r[c],p=w(n[l],l),b=d(i,p),l=f(b,p),S=m(i,p),x=g(i,p),p=y(i,p),b=new o(l,b,S,x,p);e.push(b),t[l]=b}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[h(e)]},getViewValueFromOption:function(e){return u?Zn.copy(e.viewValue):e.viewValue}}}}}var s=t.createElement("option"),a=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(t,n,r,c){function l(e,t){e.element=t,t.disabled=e.disabled,e.value!==t.value&&(t.value=e.selectValue),e.label!==t.label&&(t.label=e.label,t.textContent=e.label)}function u(e,t,n,i){return t&&Vn(t.nodeName)===n?n=t:(n=i.cloneNode(!1),t?e.insertBefore(n,t):e.appendChild(n)),n}function d(e){for(var t;e;)t=e.nextSibling,_e(e),e=t}function p(e){var t=g&&g[0],n=S&&S[0];if(t||n)for(;e&&(e===t||e===n);)e=e.nextSibling;return e}function f(){var e=x&&m.readValue();x=C.getOptions();var t={},i=n[0].firstChild;if(w&&n.prepend(g),i=p(i),x.items.forEach(function(e){var r,o;e.group?(r=t[e.group],r||(r=u(n[0],i,"optgroup",a),i=r.nextSibling,r.label=e.group,r=t[e.group]={groupElement:r,currentOptionElement:r.firstChild}),o=u(r.groupElement,r.currentOptionElement,"option",s),l(e,o),r.currentOptionElement=o.nextSibling):(o=u(n[0],i,"option",s),l(e,o),i=o.nextSibling)}),Object.keys(t).forEach(function(e){d(t[e].currentOptionElement)}),d(i),h.$render(),!h.$isEmpty(e)){var r=m.readValue();(C.trackBy?R(e,r):e===r)||(h.$setViewValue(r),h.$render())}}var h=c[1];if(h){var m=c[0];c=r.multiple;for(var g,y=0,v=n.children(),b=v.length;b>y;y++)if(""===v[y].value){g=v.eq(y);break}var w=!!g,S=Rn(s.cloneNode(!1));S.val("?");var x,C=i(r.ngOptions,n,t);c?(h.$isEmpty=function(e){return!e||0===e.length},m.writeValue=function(e){x.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){(e=x.getOptionFromViewValue(e))&&!e.disabled&&(e.element.selected=!0)})},m.readValue=function(){var e=n.val()||[],t=[];return o(e,function(e){
(e=x.selectValueMap[e])&&!e.disabled&&t.push(x.getViewValueFromOption(e))}),t},C.trackBy&&t.$watchCollection(function(){return Qn(h.$viewValue)?h.$viewValue.map(function(e){return C.getTrackByValue(e)}):void 0},function(){h.$render()})):(m.writeValue=function(e){var t=x.getOptionFromViewValue(e);t&&!t.disabled?n[0].value!==t.selectValue&&(S.remove(),w||g.remove(),n[0].value=t.selectValue,t.element.selected=!0,t.element.setAttribute("selected","selected")):null===e||w?(S.remove(),w||n.prepend(g),n.val(""),g.prop("selected",!0),g.attr("selected",!0)):(w||g.remove(),n.prepend(S),n.val("?"),S.prop("selected",!0),S.attr("selected",!0))},m.readValue=function(){var e=x.selectValueMap[n.val()];return e&&!e.disabled?(w||g.remove(),S.remove(),x.getViewValueFromOption(e)):null},C.trackBy&&t.$watch(function(){return C.getTrackByValue(h.$viewValue)},function(){h.$render()})),w?(g.remove(),e(g)(t),g.removeClass("ng-scope")):g=Rn(s.cloneNode(!1)),f(),t.$watchCollection(C.getWatchables,f)}}}}],go=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(s,a,c){function l(e){a.text(e||"")}var u,d=c.count,p=c.$attr.when&&a.attr(c.$attr.when),f=c.offset||0,h=s.$eval(p)||{},g={},y=t.startSymbol(),v=t.endSymbol(),w=y+d+"-"+f+v,S=Zn.noop;o(c,function(e,t){var n=r.exec(t);n&&(n=(n[1]?"-":"")+Vn(n[2]),h[n]=a.attr(c.$attr[t]))}),o(h,function(e,n){g[n]=t(e.replace(i,w))}),s.$watch(d,function(t){var i=parseFloat(t),r=isNaN(i);r||i in h||(i=e.pluralCat(i-f)),i===u||r&&T(u)&&isNaN(u)||(S(),r=g[i],b(r)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+p),S=m,l()):S=s.$watch(r,l),u=i)})}}}],yo=["$parse","$animate",function(e,s){var a=i("ngRepeat"),c=function(e,t,n,i,r,o,s){e[n]=i,r&&(e[r]=o),e.$index=t,e.$first=0===t,e.$last=t===s-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,l){var u=l.ngRepeat,d=t.createComment(" end ngRepeat: "+u+" "),p=u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw a("iexp",u);var f=p[1],h=p[2],m=p[3],g=p[4],p=f.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!p)throw a("iidexp",f);var y=p[3]||p[1],v=p[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw a("badident",m);var b,w,S,x,C={$id:De};return g?b=e(g):(S=function(e,t){return De(t)},x=function(e){return e}),function(e,t,i,l,p){b&&(w=function(t,n,i){return v&&(C[v]=t),C[y]=n,C.$index=i,b(e,C)});var f=le();e.$watchCollection(h,function(i){var l,h,g,b,C,T,k,M,O,$,_=t[0],A=le();if(m&&(e[m]=i),r(i))M=i,h=w||S;else for($ in h=w||x,M=[],i)i.hasOwnProperty($)&&"$"!==$.charAt(0)&&M.push($);for(b=M.length,$=Array(b),l=0;b>l;l++)if(C=i===M?l:M[l],T=i[C],k=h(C,T,l),f[k])O=f[k],delete f[k],A[k]=O,$[l]=O;else{if(A[k])throw o($,function(e){e&&e.scope&&(f[e.id]=e)}),a("dupes",u,k,T);$[l]={id:k,scope:n,clone:n},A[k]=!0}for(g in f){if(O=f[g],k=ce(O.clone),s.leave(k),k[0].parentNode)for(l=0,h=k.length;h>l;l++)k[l].$$NG_REMOVED=!0;O.scope.$destroy()}for(l=0;b>l;l++)if(C=i===M?l:M[l],T=i[C],O=$[l],O.scope){g=_;do g=g.nextSibling;while(g&&g.$$NG_REMOVED);O.clone[0]!=g&&s.move(ce(O.clone),null,Rn(_)),_=O.clone[O.clone.length-1],c(O.scope,l,y,T,v,C,b)}else p(function(e,t){O.scope=t;var n=d.cloneNode(!1);e[e.length++]=n,s.enter(e,null,Rn(_)),_=n,O.clone=e,A[O.id]=O,c(O.scope,l,y,T,v,C,b)});f=A})}}}}],vo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,function(t){e[t?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],bo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,function(t){e[t?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],wo=kn(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),So=["$animate",function(e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,s){var a=[],c=[],l=[],u=[],d=function(e,t){return function(){e.splice(t,1)}};n.$watch(r.ngSwitch||r.on,function(n){var i,r;for(i=0,r=l.length;r>i;++i)e.cancel(l[i]);for(i=l.length=0,r=u.length;r>i;++i){var p=ce(c[i].clone);u[i].$destroy(),(l[i]=e.leave(p)).then(d(l,i))}c.length=0,u.length=0,(a=s.cases["!"+n]||s.cases["?"])&&o(a,function(n){n.transclude(function(i,r){u.push(r);var o=n.element;i[i.length++]=t.createComment(" end ngSwitchWhen: "),c.push({clone:i}),e.enter(i,o.parent(),o)})})})}}}],xo=kn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:t})}}),Co=kn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),To=kn({restrict:"EAC",link:function(e,t,n,r,o){if(!o)throw i("ngTransclude")("orphan",z(t));o(function(e){t.empty(),t.append(e)})}}),ko=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){"text/ng-template"==n.type&&e.put(n.id,t[0].text)}}}],Mo={$setViewValue:m,$render:m},Oo=["$element","$scope","$attrs",function(e,i,r){var o=this,s=new je;o.ngModelCtrl=Mo,o.unknownOption=Rn(t.createElement("option")),o.renderUnknownOption=function(t){t="? "+De(t)+" ?",o.unknownOption.val(t),e.prepend(o.unknownOption),e.val(t)},i.$on("$destroy",function(){o.renderUnknownOption=m}),o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.readValue=function(){return o.removeUnknownOption(),e.val()},o.writeValue=function(t){o.hasOption(t)?(o.removeUnknownOption(),e.val(t),""===t&&o.emptyOption.prop("selected",!0)):null==t&&o.emptyOption?(o.removeUnknownOption(),e.val("")):o.renderUnknownOption(t)},o.addOption=function(e,t){se(e,'"option value"'),""===e&&(o.emptyOption=t);var n=s.get(e)||0;s.put(e,n+1)},o.removeOption=function(e){var t=s.get(e);t&&(1===t?(s.remove(e),""===e&&(o.emptyOption=n)):s.put(e,t-1))},o.hasOption=function(e){return!!s.get(e)}}],$o=function(){return{restrict:"E",require:["select","?ngModel"],controller:Oo,link:function(e,t,n,i){var r=i[1];if(r){var s=i[0];if(s.ngModelCtrl=r,r.$render=function(){s.writeValue(r.$viewValue)},t.on("change",function(){e.$apply(function(){r.$setViewValue(s.readValue())})}),n.multiple){s.readValue=function(){var e=[];return o(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},s.writeValue=function(e){var n=new je(e);o(t.find("option"),function(e){e.selected=w(n.get(e.value))})};var a,c=NaN;e.$watch(function(){c!==r.$viewValue||R(a,r.$viewValue)||(a=j(r.$viewValue),r.$render()),c=r.$viewValue}),r.$isEmpty=function(e){return!e||0===e.length}}}}}},_o=["$interpolate",function(e){function t(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}return{restrict:"E",priority:100,compile:function(n,i){if(b(i.value)){var r=e(n.text(),!0);r||i.$set("value",n.text())}return function(e,n,i){var o=n.parent(),s=o.data("$selectController")||o.parent().data("$selectController");s&&s.ngModelCtrl&&(r?e.$watch(r,function(e,r){i.$set("value",e),r!==e&&s.removeOption(r),s.addOption(e,n),s.ngModelCtrl.$render(),t(n)}):(s.addOption(i.value,n),s.ngModelCtrl.$render(),t(n)),n.on("$destroy",function(){s.removeOption(i.value),s.ngModelCtrl.$render()}))}}}}],Ao=y({restrict:"E",terminal:!1}),Eo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},Io=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,o){if(o){var s,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(C(e)&&0<e.length&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw i("ngPattern")("noregexp",a,e,z(t));s=e||n,o.$validate()}),o.$validators.pattern=function(e){return o.$isEmpty(e)||b(s)||s.test(e)}}}}},Lo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=-1;n.$observe("maxlength",function(e){e=f(e),r=isNaN(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(e,t){return 0>r||i.$isEmpty(t)||t.length<=r}}}}},No=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("minlength",function(e){r=f(e)||0,i.$validate()}),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=r}}}}};e.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(ie(),de(Zn),Zn.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",pluralCat:function(e,i){var r=0|e,o=i;return n===o&&(o=Math.min(t(e),3)),Math.pow(10,o),1==r&&0==o?"one":"other"}})}]),Rn(t).ready(function(){J(t,Q)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),e.angular=angular}.apply(e,arguments)})}(this),function(e){n("angular-route",["angular"],function(){return function(){!function(e,t,n){"use strict";function i(e,n,i){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(r,o,s,a,c){function l(){f&&(i.cancel(f),f=null),d&&(d.$destroy(),d=null),p&&(f=i.leave(p),f.then(function(){f=null}),p=null)}function u(){var s=e.current&&e.current.locals;if(t.isDefined(s&&s.$template)){var s=r.$new(),a=e.current;p=c(s,function(e){i.enter(e,null,p||o).then(function(){!t.isDefined(h)||h&&!r.$eval(h)||n()}),l()}),d=a.scope=s,d.$emit("$viewContentLoaded"),d.$eval(m)}else l()}var d,p,f,h=s.autoscroll,m=s.onload||"";r.$on("$routeChangeSuccess",u),u()}}}function r(e,t,n){return{restrict:"ECA",priority:-400,link:function(i,r){var o=n.current,s=o.locals;r.html(s.$template);var a=e(r.contents());o.controller&&(s.$scope=i,s=t(o.controller,s),o.controllerAs&&(i[o.controllerAs]=s),r.data("$ngControllerController",s),r.children().data("$ngControllerController",s)),a(i)}}}e=t.module("ngRoute",["ng"]).provider("$route",function(){function e(e,n){return t.extend(Object.create(e),n)}function n(e,t){var n=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},r=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,n,i){return e="?"===i?i:null,i="*"===i?i:null,r.push({name:n,optional:!!e}),t=t||"",""+(e?"":t)+"(?:"+(e?t:"")+(i&&"(.+?)"||"([^/]+)")+(e||"")+")"+(e||"")}).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",n?"i":""),i}var i={};this.when=function(e,r){var o=t.copy(r);if(t.isUndefined(o.reloadOnSearch)&&(o.reloadOnSearch=!0),t.isUndefined(o.caseInsensitiveMatch)&&(o.caseInsensitiveMatch=this.caseInsensitiveMatch),i[e]=t.extend(o,e&&n(e,o)),e){var s="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";i[s]=t.extend({redirectTo:e},n(s,o))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,r,s,a,c,l,u){function d(e){var i=v.current;(g=(m=f())&&i&&m.$$route===i.$$route&&t.equals(m.pathParams,i.pathParams)&&!m.reloadOnSearch&&!y)||!i&&!m||n.$broadcast("$routeChangeStart",m,i).defaultPrevented&&e&&e.preventDefault()}function p(){var e=v.current,i=m;g?(e.params=i.params,t.copy(e.params,s),n.$broadcast("$routeUpdate",e)):(i||e)&&(y=!1,(v.current=i)&&i.redirectTo&&(t.isString(i.redirectTo)?r.path(h(i.redirectTo,i.params)).search(i.params).replace():r.url(i.redirectTo(i.pathParams,r.path(),r.search())).replace()),a.when(i).then(function(){if(i){var e,n,r=t.extend({},i.resolve);return t.forEach(r,function(e,n){r[n]=t.isString(e)?c.get(e):c.invoke(e,null,null,n)}),t.isDefined(e=i.template)?t.isFunction(e)&&(e=e(i.params)):t.isDefined(n=i.templateUrl)&&(t.isFunction(n)&&(n=n(i.params)),t.isDefined(n)&&(i.loadedTemplateUrl=u.valueOf(n),e=l(n))),t.isDefined(e)&&(r.$template=e),a.all(r)}}).then(function(r){i==v.current&&(i&&(i.locals=r,t.copy(i.params,s)),n.$broadcast("$routeChangeSuccess",i,e))},function(t){i==v.current&&n.$broadcast("$routeChangeError",i,e,t)}))}function f(){var n,o;return t.forEach(i,function(i,s){var a;if(a=!o){var c=r.path();a=i.keys;var l={};if(i.regexp)if(c=i.regexp.exec(c)){for(var u=1,d=c.length;d>u;++u){var p=a[u-1],f=c[u];p&&f&&(l[p.name]=f)}a=l}else a=null;else a=null;a=n=a}a&&(o=e(i,{params:t.extend({},r.search(),n),pathParams:n}),o.$$route=i)}),o||i[null]&&e(i[null],{params:{},pathParams:{}})}function h(e,n){var i=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)i.push(e);else{var r=e.match(/(\w+)(?:[?*])?(.*)/),o=r[1];i.push(n[o]),i.push(r[2]||""),delete n[o]}}),i.join("")}var m,g,y=!1,v={routes:i,reload:function(){y=!0,n.$evalAsync(function(){d(),p()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw o("norout");e=t.extend({},this.current.params,e),r.path(h(this.current.$$route.originalPath,e)),r.search(e)}};return n.$on("$locationChangeStart",d),n.$on("$locationChangeSuccess",p),v}]});var o=t.$$minErr("ngRoute");e.provider("$routeParams",function(){this.$get=function(){return{}}}),e.directive("ngView",i),e.directive("ngView",r),i.$inject=["$route","$anchorScroll","$animate"],r.$inject=["$compile","$controller","$route"]}(window,window.angular)}.apply(e,arguments)})}(this),n("platform/framework/src/Main",["require","es6-promise","./FrameworkLayer","angular","angular-route"],function(t,n,i,r){function o(){}return o.prototype.run=function(t){function o(){var e=/[?&]log=([a-z]+)/.exec(window.location.search);return e?e[1]:""}var s=r.injector(["ng"]);window.Promise=window.Promise||n.Promise,e.config({baseUrl:""}),s.instantiate(["$http","$log",i]).initializeApplication(r,t,o())},o}),n("src/BundleRegistry",[],function(){function e(){this.bundles={},this.knownBundles={}}return e.prototype.register=function(e,t){if(this.knownBundles.hasOwnProperty(e))throw new Error("Cannot register bundle with duplicate path",e);this.knownBundles[e]=t},e.prototype.enable=function(e){if(!this.knownBundles[e])throw new Error("Unknown bundle "+e);this.bundles[e]=this.knownBundles[e]},e.prototype.disable=function(e){if(!this.bundles[e])throw new Error("Tried to disable inactive bundle "+e);delete this.bundles[e]},e.prototype.contains=function(e){return!!this.bundles[e]},e.prototype.get=function(e){return this.bundles[e]},e.prototype.list=function(){return Object.keys(this.bundles)},e.prototype.remove=e.prototype.disable,e.prototype["delete"]=function(e){if(!this.knownBundles[e])throw new Error("Cannot remove Unknown Bundle "+e);delete this.bundles[e],delete this.knownBundles[e]},e}),n("legacyRegistry",["src/BundleRegistry"],function(e){return new e}),n("src/api/objects/object-utils",[],function(){function e(e){return"object"==typeof e&&e.hasOwnProperty("key")&&e.hasOwnProperty("namespace")}function t(e){return"string"==typeof e}function n(t){if(e(t))return t;for(var n="",i=t,r=0;r<i.length;r++){if("\\"===i[r]&&":"===i[r+1])r++;else if(":"===i[r]){i=i.slice(r+1);break}n+=i[r]}return t===n&&(n=""),{namespace:n,key:i}}function i(e){return t(e)?e:e.namespace?[e.namespace.replace(/\:/g,"\\:"),e.key].join(":"):e.key}function r(e){return e=JSON.parse(JSON.stringify(e)),delete e.identifier,e.composition&&(e.composition=e.composition.map(i)),e}function o(e,t){return e=JSON.parse(JSON.stringify(e)),e.identifier=n(t),e.composition&&(e.composition=e.composition.map(n)),e}function s(e,t){return e.key===t.key&&e.namespace===t.namespace}function a(e,t){return s(e.identifier,t.identifier)}return{toOldFormat:r,toNewFormat:o,makeKeyString:i,parseKeyString:n,equals:a,identifierEquals:s}}),n("src/adapter/actions/ActionDialogDecorator",["../../api/objects/object-utils"],function(e){function t(e,t){this.mct=e,this.actionService=t}return t.prototype.getActions=function(t){var n=this.mct;return this.actionService.getActions(t).map(function(i){if(i.dialogService){var r=e.toNewFormat(t.domainObject.getModel(),e.parseKeyString(t.domainObject.getId())),o=n.propertyEditors.get(r);o.length>0&&(i.dialogService=Object.create(i.dialogService),i.dialogService.getUserInput=function(e,i){return new n.Dialog(o[0].view(t.domainObject),e.title).show()})}return i})},t}),n("src/adapter/capabilities/AdapterCapability",["../../api/objects/object-utils"],function(e){function t(e){this.domainObject=e}return t.prototype.invoke=function(){return e.toNewFormat(this.domainObject.getModel(),this.domainObject.getId())},t}),n("src/adapter/controllers/AdaptedViewController",[],function(){function e(e,t){function n(n){if(!n)return void(e.view=void 0);var i=n.useCapability("adapter"),r=t.mainViews.get(i);e.view=r[0]&&r[0].view(i)}e.$watch("domainObject",n)}return e}),n("src/adapter/directives/Region",[],function(){function e(e){this.activeView=void 0,this.element=e}return e.prototype.clear=function(){this.activeView&&(this.activeView.destroy(),this.activeView=void 0)},e.prototype.show=function(e){this.clear(),this.activeView=e,this.activeView&&this.activeView.show(this.element)},e}),n("src/adapter/directives/MCTView",["angular","./Region","../../api/objects/object-utils"],function(e,t,n){function i(){return{restrict:"A",link:function(e,n,i){var r=new t(n[0]);e.$watch(i.mctView,r.show.bind(r))}}}return i}),n("platform/core/src/objects/DomainObjectImpl",[],function(){function e(e,t,n){this.id=e,this.model=t,this.capabilities=n}return e.prototype.getId=function(){return this.id},e.prototype.getModel=function(){return this.model},e.prototype.getCapability=function(e){var t=this.capabilities[e];return"function"==typeof t?t(this):t},e.prototype.hasCapability=function(e){return void 0!==this.getCapability(e)},e.prototype.useCapability=function(e){var t=Array.prototype.slice.apply(arguments,[1]),n=this.getCapability(e);return n&&n.invoke?n.invoke.apply(n,t):n},e}),n("src/adapter/services/Instantiate",["../../../platform/core/src/objects/DomainObjectImpl"],function(e){function t(t,n,i){return function(r,o){o=o||n.generate();var s=r.id;r.id=o;var a=t.getCapabilities(r,o);return r.id=s,i.put(o,r),new e(o,r,a)}}return t}),n("src/adapter/services/MissingModelCompatibilityDecorator",["../../api/objects/object-utils"],function(e){function t(e,t){this.api=e,this.modelService=t,this.apiFetching={}}return t.prototype.apiFetch=function(t){var n={},i=t.map(function(t){return this.apiFetching[t]?Promise.resolve():(this.apiFetching[t]=!0,this.api.objects.get(e.parseKeyString(t)).then(function(i){n[t]=e.toOldFormat(i)}))},this);return Promise.all(i).then(function(){return n})},t.prototype.getModels=function(e){return this.modelService.getModels(e).then(function(t){var n=e.filter(function(e){return!t[e]});return n.length?this.apiFetch(n).then(function(e){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}):t}.bind(this))},t}),n("src/adapter/capabilities/synchronizeMutationCapability",[],function(){function e(e){return function(t){var n=e(t),i=n.listen.bind(n);return n.listen=function(e){return i(function(t){n.domainObject.model=JSON.parse(JSON.stringify(t)),e(t)})},n}}return e}),n("src/adapter/capabilities/AlternateCompositionCapability",["../../api/objects/object-utils"],function(e){function t(e,t){this.domainObject=t,this.getDependencies=function(){this.instantiate=e.get("instantiate"),this.contextualize=e.get("contextualize"),this.getDependencies=void 0,this.openmct=e.get("openmct")}.bind(this)}return t.prototype.add=function(e,t){function n(t){var n=t.composition.indexOf(e.getId());-1===n&&t.composition.push(e.getId())}if("undefined"!=typeof t)throw new Error("Composition Capability does not support adding at index");return this.domainObject.useCapability("mutation",n).then(this.invoke.bind(this)).then(function(t){return t.filter(function(t){return t.getId()===e.getId()})[0]})},t.prototype.contextualizeChild=function(t){this.getDependencies&&this.getDependencies();var n=e.makeKeyString(t.identifier),i=e.toOldFormat(t),r=this.instantiate(i,n);return this.contextualize(r,this.domainObject)},t.prototype.invoke=function(){var t=e.toNewFormat(this.domainObject.getModel(),this.domainObject.getId());this.getDependencies&&this.getDependencies();var n=this.openmct.composition.get(t);return n.load().then(function(e){return e.map(this.contextualizeChild,this)}.bind(this))},t.appliesTo=function(e){return!1},t}),n("src/adapter/capabilities/APICapabilityDecorator",["./synchronizeMutationCapability","./AlternateCompositionCapability"],function(e,t){function n(e,t){this.$injector=e,this.capabilityService=t}return n.prototype.getCapabilities=function(n,i){var r=this.capabilityService.getCapabilities(n,i);return r.mutation&&(r.mutation=e(r.mutation)),t.appliesTo(n,i)&&(r.composition=function(e){return new t(this.$injector,e)}.bind(this)),r},n}),n("src/adapter/policies/AdapterCompositionPolicy",[],function(){function e(e){this.openmct=e}return e.prototype.allow=function(e,t){var n=e.getInitialModel();return this.openmct.composition.checkPolicy(n,t)},e}),n("src/adapter/policies/AdaptedViewPolicy",[],function(){function e(e){this.openmct=e}return e.prototype.allow=function(e,t){if("adapted-view"===e.key){var n=t.useCapability("adapter");return this.openmct.mainViews.get(n).length>0}return!0},e}),n("src/adapter/runs/AlternateCompositionInitializer",["../capabilities/AlternateCompositionCapability","../../api/objects/object-utils"],function(e,t){function n(n){e.appliesTo=function(e,i){return e=t.toNewFormat(e,i||""),!!n.composition.get(e)}}return n}),n("text",["module"],function(e){"use strict";function n(e,t){return void 0===e||""===e?t:e}function i(e,t,i,r){if(t===r)return!0;if(e===i){if("http"===e)return n(t,"80")===n(r,"80");if("https"===e)return n(t,"443")===n(r,"443")}return!1}var r,o,s,a,c,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,p="undefined"!=typeof location&&location.href,f=p&&location.protocol&&location.protocol.replace(/\:/,""),h=p&&location.hostname,m=p&&(location.port||void 0),g={},y=e.config&&e.config()||{};return r={version:"2.0.15",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(d);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:y.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=l[t];try{e=new ActiveXObject(n)}catch(i){}if(e){l=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.lastIndexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,o){var s,a,c,l=r.xdRegExp.exec(e);return l?(s=l[2],a=l[3],a=a.split(":"),c=a[1],a=a[0],(!s||s===t)&&(!a||a.toLowerCase()===n.toLowerCase())&&(!c&&!a||i(s,c,t,o))):!0},finishLoad:function(e,t,n,i){n=t?r.strip(n):n,y.isBuild&&(g[e]=n),i(n)},load:function(e,t,n,i){if(i&&i.isBuild&&!i.inlineText)return void n();y.isBuild=i&&i.isBuild;var o=r.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=t.toUrl(s),c=y.useXhr||r.useXhr;return 0===a.indexOf("empty:")?void n():void(!p||c(a,f,h,m)?r.get(a,function(t){r.finishLoad(e,o.strip,t,n)},function(e){n.error&&n.error(e)}):t([s],function(e){r.finishLoad(o.moduleName+"."+o.ext,o.strip,e,n)}))},write:function(e,t,n,i){if(g.hasOwnProperty(t)){var o=r.jsEscape(g[t]);n.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,n,i,o){var s=r.parseName(t),a=s.ext?"."+s.ext:"",c=s.moduleName+a,l=n.toUrl(s.moduleName+a)+".js";r.load(c,n,function(t){var n=function(e){return i(l,e)};n.asModule=function(e,t){return i.asModule(e,l,t)},r.write(e,c,n,o)},o)}},"node"===y.env||!y.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(o=t.nodeRequire("fs"),r.get=function(e,t,n){try{var i=o.readFileSync(e,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),t(i)}catch(r){n&&n(r)}}):"xhr"===y.env||!y.env&&r.createXhr()?r.get=function(e,t,n,i){var o,s=r.createXhr();if(s.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);y.onXhr&&y.onXhr(s,e),s.onreadystatechange=function(i){var r,o;4===s.readyState&&(r=s.status||0,r>399&&600>r?(o=new Error(e+" HTTP status: "+r),o.xhr=s,n&&n(o)):t(s.responseText),y.onXhrComplete&&y.onXhrComplete(s,e))},s.send(null)}:"rhino"===y.env||!y.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?r.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),c="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);c=String(n.toString())}finally{a.close()}t(c)}:("xpconnect"===y.env||!y.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),c="@mozilla.org/windows-registry-key;1"in s,r.get=function(e,t){var n,i,r,o={};c&&(e=e.replace(/\//g,"\\")),r=new FileUtils.File(e);try{n=s["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(r,1,0,!1),i=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),i.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),o),i.close(),n.close(),t(o.value)}catch(l){throw new Error((r&&r.path||"")+": "+l)}}),r}),n("text!src/adapter/templates/adapted-view-template.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="AdaptedViewController" mct-view="view"></div>\n'}),n("src/adapter/bundle",["legacyRegistry","./actions/ActionDialogDecorator","./capabilities/AdapterCapability","./controllers/AdaptedViewController","./directives/MCTView","./services/Instantiate","./services/MissingModelCompatibilityDecorator","./capabilities/APICapabilityDecorator","./policies/AdapterCompositionPolicy","./policies/AdaptedViewPolicy","./runs/AlternateCompositionInitializer","text!./templates/adapted-view-template.html"],function(e,t,n,i,r,o,s,a,c,l,u,d){e.register("src/adapter",{extensions:{directives:[{key:"mctView",implementation:r}],capabilities:[{key:"adapter",implementation:n}],controllers:[{key:"AdaptedViewController",implementation:i,depends:["$scope","openmct"]}],services:[{key:"instantiate",priority:"mandatory",implementation:o,depends:["capabilityService","identifierService","cacheService"]}],components:[{type:"decorator",provides:"capabilityService",implementation:a,depends:["$injector"]},{type:"decorator",provides:"actionService",implementation:t,depends:["openmct"]},{type:"decorator",provides:"modelService",implementation:s,depends:["openmct"]}],policies:[{category:"composition",implementation:c,depends:["openmct"]},{category:"view",implementation:l,depends:["openmct"]}],runs:[{implementation:u,depends:["openmct"]}],views:[{key:"adapted-view",template:d}],licenses:[{name:"almond",version:"0.3.3",description:"Lightweight RequireJS replacement for builds",author:"jQuery Foundation",website:"https://github.com/requirejs/almond",copyright:"Copyright jQuery Foundation and other contributors, https://jquery.org/",license:"license-mit",link:"https://github.com/requirejs/almond/blob/master/LICENSE"},{name:"lodash",version:"3.10.1",description:"Utility functions",author:"Dojo Foundation",website:"https://lodash.com",copyright:"Copyright 2012-2015 The Dojo Foundation",license:"license-mit",link:"https://raw.githubusercontent.com/lodash/lodash/3.10.1/LICENSE"},{name:"EventEmitter3",version:"1.2.0",description:"Event-driven programming support",author:"Arnout Kazemier",website:"https://github.com/primus/eventemitter3",copyright:"Copyright (c) 2014 Arnout Kazemier",license:"license-mit",link:"https://github.com/primus/eventemitter3/blob/1.2.0/LICENSE"}]}})}),n("src/api/objects/LegacyObjectAPIInterceptor",["./object-utils"],function(e){function t(e,t,n,i){this.eventEmitter=e,this.objectService=t,this.instantiate=n,this.generalTopic=i("mutation"),this.bridgeEventBuses()}function n(n,i,r,o,s){var a=n.objects.eventEmitter;return this.getObjects=function(t){var i={},o=t.map(function(t){var o=e.parseKeyString(t);return n.objects.get(o).then(function(n){n=e.toOldFormat(n),i[t]=r(n,t)})});return Promise.all(o).then(function(){return i})},n.objects.supersecretSetFallbackProvider(new t(a,s,r,o)),i.forEach(function(t){n.objects.addRoot(e.parseKeyString(t.id))}),this}return t.prototype.bridgeEventBuses=function(){var t,n,i=function(i){var r=e.makeKeyString(i.identifier),o=this.instantiate(e.toOldFormat(i),r);t(),o.getCapability("mutation").mutate(function(){return e.toOldFormat(i)}),t=this.generalTopic.listen(n)}.bind(this);n=function(t){var n=e.toNewFormat(t.getModel(),t.getId());this.eventEmitter.off("mutation",i),this.eventEmitter.emit(n.identifier.key+":*",n),this.eventEmitter.on("mutation",i)}.bind(this),this.eventEmitter.on("mutation",i),t=this.generalTopic.listen(n)},t.prototype.save=function(t){var n=t.key;return t.getCapability("persistence").persist().then(function(){return e.toNewFormat(t,n)})},t.prototype["delete"]=function(e){},
t.prototype.get=function(t){var n=e.makeKeyString(t);return this.objectService.getObjects([n]).then(function(i){var r=i[n].getModel();return e.toNewFormat(r,t)})},n}),n("src/api/objects/bundle",["./LegacyObjectAPIInterceptor","legacyRegistry"],function(e,t){t.register("src/api/objects",{name:"Object API",description:"The public Objects API",extensions:{components:[{provides:"objectService",type:"decorator",priority:"mandatory",implementation:e,depends:["openmct","roots[]","instantiate","topic"]}]}})}),function(){function e(e,t){if(e!==t){var n=null===e,i=e===C,r=e===e,o=null===t,s=t===C,a=t===t;if(e>t&&!o||!r||n&&!s&&a||i&&a)return 1;if(t>e&&!n||!a||o&&!i&&r||s&&r)return-1}return 0}function t(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function i(e,t,n){if(t!==t)return h(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function r(e){return"function"==typeof e||!1}function o(e){return null==e?"":e+""}function s(e,t){for(var n=-1,i=e.length;++n<i&&t.indexOf(e.charAt(n))>-1;);return n}function a(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function c(t,n){return e(t.criteria,n.criteria)||t.index-n.index}function l(t,n,i){for(var r=-1,o=t.criteria,s=n.criteria,a=o.length,c=i.length;++r<a;){var l=e(o[r],s[r]);if(l){if(r>=c)return l;var u=i[r];return l*("asc"===u||u===!0?1:-1)}}return t.index-n.index}function u(e){return Be[e]}function d(e){return qe[e]}function p(e,t,n){return t?e=He[e]:n&&(e=We[e]),"\\"+e}function f(e){return"\\"+We[e]}function h(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!==o)return r}return-1}function m(e){return!!e&&"object"==typeof e}function g(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function y(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;)e[n]===t&&(e[n]=B,o[++r]=n);return o}function v(e,t){for(var n,i=-1,r=e.length,o=-1,s=[];++i<r;){var a=e[i],c=t?t(a,i,e):a;i&&n===c||(n=c,s[++o]=a)}return s}function b(e){for(var t=-1,n=e.length;++t<n&&g(e.charCodeAt(t)););return t}function w(e){for(var t=e.length;t--&&g(e.charCodeAt(t)););return t}function S(e){return Ye[e]}function x(n){function g(e){if(m(e)&&!_a(e)&&!(e instanceof te)){if(e instanceof Q)return e;if(ts.call(e,"__chain__")&&ts.call(e,"__wrapped__"))return fi(e)}return new Q(e)}function K(){}function Q(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function te(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$s,this.__views__=[]}function Be(){var e=new te(this.__wrapped__);return e.__actions__=nt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nt(this.__views__),e}function qe(){if(this.__filtered__){var e=new te(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ye(){var e=this.__wrapped__.value(),t=this.__dir__,n=_a(e),i=0>t,r=n?e.length:0,o=Hn(0,r,this.__views__),s=o.start,a=o.end,c=a-s,l=i?a:s-1,u=this.__iteratees__,d=u.length,p=0,f=Cs(c,this.__takeCount__);if(!n||P>r||r==c&&f==c)return nn(e,this.__actions__);var h=[];e:for(;c--&&f>p;){l+=t;for(var m=-1,g=e[l];++m<d;){var y=u[m],v=y.iteratee,b=y.type,w=v(g);if(b==F)g=w;else if(!w){if(b==U)continue e;break e}}h[p++]=g}return h}function ze(){this.__data__={}}function He(e){return this.has(e)&&delete this.__data__[e]}function We(e){return"__proto__"==e?C:this.__data__[e]}function Ge(e){return"__proto__"!=e&&ts.call(this.__data__,e)}function Ke(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Ze(e){var t=e?e.length:0;for(this.data={hash:ys(null),set:new ds};t--;)this.push(e[t])}function Xe(e,t){var n=e.data,i="string"==typeof t||Nr(t)?n.set.has(t):n.hash[t];return i?0:-1}function Je(e){var t=this.data;"string"==typeof e||Nr(e)?t.set.add(e):t.hash[e]=!0}function Qe(e,t){for(var n=-1,i=e.length,r=-1,o=t.length,s=Vo(i+o);++n<i;)s[n]=e[n];for(;++r<o;)s[n++]=t[r];return s}function nt(e,t){var n=-1,i=e.length;for(t||(t=Vo(i));++n<i;)t[n]=e[n];return t}function it(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function rt(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function ot(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function st(e,t,n,i){for(var r=-1,o=e.length,s=i,a=s;++r<o;){var c=e[r],l=+t(c);n(l,s)&&(s=l,a=c)}return a}function at(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[++r]=s)}return o}function ct(e,t){for(var n=-1,i=e.length,r=Vo(i);++n<i;)r[n]=t(e[n],n,e);return r}function lt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function ut(e,t,n,i){var r=-1,o=e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function dt(e,t,n,i){var r=e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function pt(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function ft(e,t){for(var n=e.length,i=0;n--;)i+=+t(e[n])||0;return i}function ht(e,t){return e===C?t:e}function mt(e,t,n,i){return e!==C&&ts.call(i,n)?e:t}function gt(e,t,n){for(var i=-1,r=Fa(t),o=r.length;++i<o;){var s=r[i],a=e[s],c=n(a,t[s],s,e,t);(c===c?c===a:a!==a)&&(a!==C||s in e)||(e[s]=c)}return e}function yt(e,t){return null==t?e:bt(t,Fa(t),e)}function vt(e,t){for(var n=-1,i=null==e,r=!i&&Xn(e),o=r?e.length:0,s=t.length,a=Vo(s);++n<s;){var c=t[n];r?a[n]=Jn(c,o)?e[c]:C:a[n]=i?C:e[c]}return a}function bt(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}function wt(e,t,n){var i=typeof e;return"function"==i?t===C?e:sn(e,t,n):null==e?$o:"object"==i?Ut(e):t===C?No(e):Ft(e,t)}function St(e,t,n,i,r,o,s){var a;if(n&&(a=r?n(e,i,r):n(e)),a!==C)return a;if(!Nr(e))return e;var c=_a(e);if(c){if(a=Wn(e),!t)return nt(e,a)}else{var l=is.call(e),u=l==G;if(l!=X&&l!=q&&(!u||r))return Ve[l]?Kn(e,l,t):r?e:{};if(a=Gn(u?{}:e),!t)return yt(a,e)}o||(o=[]),s||(s=[]);for(var d=o.length;d--;)if(o[d]==e)return s[d];return o.push(e),s.push(a),(c?it:Et)(e,function(i,r){a[r]=St(i,t,n,r,e,o,s)}),a}function xt(e,t,n){if("function"!=typeof e)throw new Zo(V);return ps(function(){e.apply(C,n)},t)}function Ct(e,t){var n=e?e.length:0,r=[];if(!n)return r;var o=-1,s=qn(),a=s===i,c=a&&t.length>=P?mn(t):null,l=t.length;c&&(s=Xe,a=!1,t=c);e:for(;++o<n;){var u=e[o];if(a&&u===u){for(var d=l;d--;)if(t[d]===u)continue e;r.push(u)}else s(t,u,0)<0&&r.push(u)}return r}function Tt(e,t){var n=!0;return js(e,function(e,i,r){return n=!!t(e,i,r)}),n}function kt(e,t,n,i){var r=i,o=r;return js(e,function(e,s,a){var c=+t(e,s,a);(n(c,r)||c===i&&c===o)&&(r=c,o=e)}),o}function Mt(e,t,n,i){var r=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>r?0:r+n),i=i===C||i>r?r:+i||0,0>i&&(i+=r),r=n>i?0:i>>>0,n>>>=0;r>n;)e[n++]=t;return e}function Ot(e,t){var n=[];return js(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function $t(e,t,n,i){var r;return n(e,function(e,n,o){return t(e,n,o)?(r=i?n:e,!1):void 0}),r}function _t(e,t,n,i){i||(i=[]);for(var r=-1,o=e.length;++r<o;){var s=e[r];m(s)&&Xn(s)&&(n||_a(s)||kr(s))?t?_t(s,t,n,i):lt(i,s):n||(i[i.length]=s)}return i}function At(e,t){return Ps(e,t,eo)}function Et(e,t){return Ps(e,t,Fa)}function It(e,t){return Us(e,t,Fa)}function Lt(e,t){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var s=t[n];Lr(e[s])&&(o[++r]=s)}return o}function Nt(e,t,n){if(null!=e){n!==C&&n in di(e)&&(t=[n]);for(var i=0,r=t.length;null!=e&&r>i;)e=e[t[i++]];return i&&i==r?e:C}}function Dt(e,t,n,i,r,o){return e===t?!0:null==e||null==t||!Nr(e)&&!m(t)?e!==e&&t!==t:jt(e,t,Dt,n,i,r,o)}function jt(e,t,n,i,r,o,s){var a=_a(e),c=_a(t),l=Y,u=Y;a||(l=is.call(e),l==q?l=X:l!=X&&(a=qr(e))),c||(u=is.call(t),u==q?u=X:u!=X&&(c=qr(t)));var d=l==X,p=u==X,f=l==u;if(f&&!a&&!d)return Un(e,t,l);if(!r){var h=d&&ts.call(e,"__wrapped__"),m=p&&ts.call(t,"__wrapped__");if(h||m)return n(h?e.value():e,m?t.value():t,i,r,o,s)}if(!f)return!1;o||(o=[]),s||(s=[]);for(var g=o.length;g--;)if(o[g]==e)return s[g]==t;o.push(e),s.push(t);var y=(a?Pn:Fn)(e,t,n,i,r,o,s);return o.pop(),s.pop(),y}function Rt(e,t,n){var i=t.length,r=i,o=!n;if(null==e)return!r;for(e=di(e);i--;){var s=t[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<r;){s=t[i];var a=s[0],c=e[a],l=s[1];if(o&&s[2]){if(c===C&&!(a in e))return!1}else{var u=n?n(c,l,a):C;if(!(u===C?Dt(l,c,n,!0):u))return!1}}return!0}function Pt(e,t){var n=-1,i=Xn(e)?Vo(e.length):[];return js(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function Ut(e){var t=Yn(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null==e?!1:e[n]===i&&(i!==C||n in di(e))}}return function(e){return Rt(e,t)}}function Ft(e,t){var n=_a(e),i=ei(e)&&ii(t),r=e+"";return e=pi(e),function(o){if(null==o)return!1;var s=r;if(o=di(o),(n||!i)&&!(s in o)){if(o=1==e.length?o:Nt(o,Gt(e,0,-1)),null==o)return!1;s=Mi(e),o=di(o)}return o[s]===t?t!==C||s in o:Dt(t,o[s],C,!0)}}function Vt(e,t,n,i,r){if(!Nr(e))return e;var o=Xn(t)&&(_a(t)||qr(t)),s=o?C:Fa(t);return it(s||t,function(a,c){if(s&&(c=a,a=t[c]),m(a))i||(i=[]),r||(r=[]),Bt(e,t,c,Vt,n,i,r);else{var l=e[c],u=n?n(l,a,c,e,t):C,d=u===C;d&&(u=a),u===C&&(!o||c in e)||!d&&(u===u?u===l:l!==l)||(e[c]=u)}}),e}function Bt(e,t,n,i,r,o,s){for(var a=o.length,c=t[n];a--;)if(o[a]==c)return void(e[n]=s[a]);var l=e[n],u=r?r(l,c,n,e,t):C,d=u===C;d&&(u=c,Xn(c)&&(_a(c)||qr(c))?u=_a(l)?l:Xn(l)?nt(l):[]:Fr(c)||kr(c)?u=kr(l)?Gr(l):Fr(l)?l:{}:d=!1),o.push(c),s.push(u),d?e[n]=i(u,c,r,o,s):(u===u?u!==l:l===l)&&(e[n]=u)}function qt(e){return function(t){return null==t?C:t[e]}}function Yt(e){var t=e+"";return e=pi(e),function(n){return Nt(n,e,t)}}function zt(e,t){for(var n=e?t.length:0;n--;){var i=t[n];if(i!=r&&Jn(i)){var r=i;fs.call(e,i,1)}}return e}function Ht(e,t){return e+vs(Ms()*(t-e+1))}function Wt(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function Gt(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=n===C||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Vo(r);++i<r;)o[i]=e[i+t];return o}function Kt(e,t){var n;return js(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function Zt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Xt(e,t,n){var i=Vn(),r=-1;t=ct(t,function(e){return i(e)});var o=Pt(e,function(e){var n=ct(t,function(t){return t(e)});return{criteria:n,index:++r,value:e}});return Zt(o,function(e,t){return l(e,t,n)})}function Jt(e,t){var n=0;return js(e,function(e,i,r){n+=+t(e,i,r)||0}),n}function Qt(e,t){var n=-1,r=qn(),o=e.length,s=r===i,a=s&&o>=P,c=a?mn():null,l=[];c?(r=Xe,s=!1):(a=!1,c=t?[]:l);e:for(;++n<o;){var u=e[n],d=t?t(u,n,e):u;if(s&&u===u){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),l.push(u)}else r(c,d,0)<0&&((t||a)&&c.push(d),l.push(u))}return l}function en(e,t){for(var n=-1,i=t.length,r=Vo(i);++n<i;)r[n]=e[t[n]];return r}function tn(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?Gt(e,i?0:o,i?o+1:r):Gt(e,i?o+1:0,i?r:o)}function nn(e,t){var n=e;n instanceof te&&(n=n.value());for(var i=-1,r=t.length;++i<r;){var o=t[i];n=o.func.apply(o.thisArg,lt([n],o.args))}return n}function rn(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&Es>=r){for(;r>i;){var o=i+r>>>1,s=e[o];(n?t>=s:t>s)&&null!==s?i=o+1:r=o}return r}return on(e,t,$o,n)}function on(e,t,n,i){t=n(t);for(var r=0,o=e?e.length:0,s=t!==t,a=null===t,c=t===C;o>r;){var l=vs((r+o)/2),u=n(e[l]),d=u!==C,p=u===u;if(s)var f=p||i;else f=a?p&&d&&(i||null!=u):c?p&&(i||d):null==u?!1:i?t>=u:t>u;f?r=l+1:o=l}return Cs(o,As)}function sn(e,t,n){if("function"!=typeof e)return $o;if(t===C)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}function an(e){var t=new ss(e.byteLength),n=new hs(t);return n.set(new hs(e)),t}function cn(e,t,n){for(var i=n.length,r=-1,o=xs(e.length-i,0),s=-1,a=t.length,c=Vo(a+o);++s<a;)c[s]=t[s];for(;++r<i;)c[n[r]]=e[r];for(;o--;)c[s++]=e[r++];return c}function ln(e,t,n){for(var i=-1,r=n.length,o=-1,s=xs(e.length-r,0),a=-1,c=t.length,l=Vo(s+c);++o<s;)l[o]=e[o];for(var u=o;++a<c;)l[u+a]=t[a];for(;++i<r;)l[u+n[i]]=e[o++];return l}function un(e,t){return function(n,i,r){var o=t?t():{};if(i=Vn(i,r,3),_a(n))for(var s=-1,a=n.length;++s<a;){var c=n[s];e(o,c,i(c,s,n),n)}else js(n,function(t,n,r){e(o,t,i(t,n,r),r)});return o}}function dn(e){return yr(function(t,n){var i=-1,r=null==t?0:n.length,o=r>2?n[r-2]:C,s=r>2?n[2]:C,a=r>1?n[r-1]:C;for("function"==typeof o?(o=sn(o,a,5),r-=2):(o="function"==typeof a?a:C,r-=o?1:0),s&&Qn(n[0],n[1],s)&&(o=3>r?C:o,r=1);++i<r;){var c=n[i];c&&e(t,c,o)}return t})}function pn(e,t){return function(n,i){var r=n?Bs(n):0;if(!ni(r))return e(n,i);for(var o=t?r:-1,s=di(n);(t?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function fn(e){return function(t,n,i){for(var r=di(t),o=i(t),s=o.length,a=e?s:-1;e?a--:++a<s;){var c=o[a];if(n(r[c],c,r)===!1)break}return t}}function hn(e,t){function n(){var r=this&&this!==et&&this instanceof n?i:e;return r.apply(t,arguments)}var i=yn(e);return n}function mn(e){return ys&&ds?new Ze(e):null}function gn(e){return function(t){for(var n=-1,i=ko(uo(t)),r=i.length,o="";++n<r;)o=e(o,i[n],n);return o}}function yn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ds(e.prototype),i=e.apply(n,t);return Nr(i)?i:n}}function vn(e){function t(n,i,r){r&&Qn(n,i,r)&&(i=C);var o=Rn(n,e,C,C,C,C,C,i);return o.placeholder=t.placeholder,o}return t}function bn(e,t){return yr(function(n){var i=n[0];return null==i?i:(n.push(t),e.apply(C,n))})}function wn(e,t){return function(n,i,r){if(r&&Qn(n,i,r)&&(i=C),i=Vn(i,r,3),1==i.length){n=_a(n)?n:ui(n);var o=st(n,i,e,t);if(!n.length||o!==t)return o}return kt(n,i,e,t)}}function Sn(e,n){return function(i,r,o){if(r=Vn(r,o,3),_a(i)){var s=t(i,r,n);return s>-1?i[s]:C}return $t(i,r,e)}}function xn(e){return function(n,i,r){return n&&n.length?(i=Vn(i,r,3),t(n,i,e)):-1}}function Cn(e){return function(t,n,i){return n=Vn(n,i,3),$t(t,n,e,!0)}}function Tn(e){return function(){for(var t,n=arguments.length,i=e?n:-1,r=0,o=Vo(n);e?i--:++i<n;){var s=o[r++]=arguments[i];if("function"!=typeof s)throw new Zo(V);!t&&Q.prototype.thru&&"wrapper"==Bn(s)&&(t=new Q([],!0))}for(i=t?-1:n;++i<n;){s=o[i];var a=Bn(s),c="wrapper"==a?Vs(s):C;t=c&&ti(c[0])&&c[1]==(I|$|A|L)&&!c[4].length&&1==c[9]?t[Bn(c[0])].apply(t,c[3]):1==s.length&&ti(s)?t[a]():t.thru(s)}return function(){var e=arguments,i=e[0];if(t&&1==e.length&&_a(i)&&i.length>=P)return t.plant(i).value();for(var r=0,s=n?o[r].apply(this,e):i;++r<n;)s=o[r].call(this,s);return s}}}function kn(e,t){return function(n,i,r){return"function"==typeof i&&r===C&&_a(n)?e(n,i):t(n,sn(i,r,3))}}function Mn(e){return function(t,n,i){return("function"!=typeof n||i!==C)&&(n=sn(n,i,3)),e(t,n,eo)}}function On(e){return function(t,n,i){return("function"!=typeof n||i!==C)&&(n=sn(n,i,3)),e(t,n)}}function $n(e){return function(t,n,i){var r={};return n=Vn(n,i,3),Et(t,function(t,i,o){var s=n(t,i,o);i=e?s:i,t=e?t:s,r[i]=t}),r}}function _n(e){return function(t,n,i){return t=o(t),(e?t:"")+Ln(t,n,i)+(e?"":t)}}function An(e){var t=yr(function(n,i){var r=y(i,t.placeholder);return Rn(n,e,C,i,r)});return t}function En(e,t){return function(n,i,r,o){var s=arguments.length<3;return"function"==typeof i&&o===C&&_a(n)?e(n,i,r,s):Wt(n,Vn(i,o,4),r,s,t)}}function In(e,t,n,i,r,o,s,a,c,l){function u(){for(var b=arguments.length,w=b,S=Vo(b);w--;)S[w]=arguments[w];if(i&&(S=cn(S,i,r)),o&&(S=ln(S,o,s)),h||g){var x=u.placeholder,T=y(S,x);if(b-=T.length,l>b){var O=a?nt(a):C,$=xs(l-b,0),_=h?T:C,I=h?C:T,L=h?S:C,N=h?C:S;t|=h?A:E,t&=~(h?E:A),m||(t&=~(k|M));var D=[e,t,n,L,_,N,I,O,c,$],j=In.apply(C,D);return ti(e)&&qs(j,D),j.placeholder=x,j}}var R=p?n:this,P=f?R[e]:e;return a&&(S=ci(S,a)),d&&c<S.length&&(S.length=c),this&&this!==et&&this instanceof u&&(P=v||yn(e)),P.apply(R,S)}var d=t&I,p=t&k,f=t&M,h=t&$,m=t&O,g=t&_,v=f?C:yn(e);return u}function Ln(e,t,n){var i=e.length;if(t=+t,i>=t||!ws(t))return"";var r=t-i;return n=null==n?" ":n+"",yo(n,gs(r/n.length)).slice(0,r)}function Nn(e,t,n,i){function r(){for(var t=-1,a=arguments.length,c=-1,l=i.length,u=Vo(l+a);++c<l;)u[c]=i[c];for(;a--;)u[c++]=arguments[++t];var d=this&&this!==et&&this instanceof r?s:e;return d.apply(o?n:this,u)}var o=t&k,s=yn(e);return r}function Dn(e){var t=zo[e];return function(e,n){return n=n===C?0:+n||0,n?(n=ls(10,n),t(e*n)/n):t(e)}}function jn(e){return function(t,n,i,r){var o=Vn(i);return null==i&&o===wt?rn(t,n,e):on(t,n,o(i,r,1),e)}}function Rn(e,t,n,i,r,o,s,a){var c=t&M;if(!c&&"function"!=typeof e)throw new Zo(V);var l=i?i.length:0;if(l||(t&=~(A|E),i=r=C),l-=r?r.length:0,t&E){var u=i,d=r;i=r=C}var p=c?C:Vs(e),f=[e,t,n,i,r,u,d,o,s,a];if(p&&(ri(f,p),t=f[1],a=f[9]),f[9]=null==a?c?0:e.length:xs(a-l,0)||0,t==k)var h=hn(f[0],f[2]);else h=t!=A&&t!=(k|A)||f[4].length?In.apply(C,f):Nn.apply(C,f);var m=p?Fs:qs;return m(h,f)}function Pn(e,t,n,i,r,o,s){var a=-1,c=e.length,l=t.length;if(c!=l&&!(r&&l>c))return!1;for(;++a<c;){var u=e[a],d=t[a],p=i?i(r?d:u,r?u:d,a):C;if(p!==C){if(p)continue;return!1}if(r){if(!pt(t,function(e){return u===e||n(u,e,i,r,o,s)}))return!1}else if(u!==d&&!n(u,d,i,r,o,s))return!1}return!0}function Un(e,t,n){switch(n){case z:case H:return+e==+t;case W:return e.name==t.name&&e.message==t.message;case Z:return e!=+e?t!=+t:e==+t;case J:case ee:return e==t+""}return!1}function Fn(e,t,n,i,r,o,s){var a=Fa(e),c=a.length,l=Fa(t),u=l.length;if(c!=u&&!r)return!1;for(var d=c;d--;){var p=a[d];if(!(r?p in t:ts.call(t,p)))return!1}for(var f=r;++d<c;){p=a[d];var h=e[p],m=t[p],g=i?i(r?m:h,r?h:m,p):C;if(!(g===C?n(h,m,i,r,o,s):g))return!1;f||(f="constructor"==p)}if(!f){var y=e.constructor,v=t.constructor;if(y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v))return!1}return!0}function Vn(e,t,n){var i=g.callback||Mo;return i=i===Mo?wt:i,n?i(e,t,n):i}function Bn(e){for(var t=e.name+"",n=Ns[t],i=n?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function qn(e,t,n){var r=g.indexOf||Ti;return r=r===Ti?i:r,e?r(e,t,n):r}function Yn(e){for(var t=to(e),n=t.length;n--;)t[n][2]=ii(t[n][1]);return t}function zn(e,t){var n=null==e?C:e[t];return Rr(n)?n:C}function Hn(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Cs(t,e+s);break;case"takeRight":e=xs(e,t-s)}}return{start:e,end:t}}function Wn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ts.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Gn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Wo),new t}function Kn(e,t,n){var i=e.constructor;switch(t){case ne:return an(e);case z:case H:return new i(+e);case ie:case re:case oe:case se:case ae:case ce:case le:case ue:case de:var r=e.buffer;return new i(n?an(r):r,e.byteOffset,e.length);case Z:case ee:return new i(e);case J:var o=new i(e.source,Ae.exec(e));o.lastIndex=e.lastIndex}return o}function Zn(e,t,n){null==e||ei(t,e)||(t=pi(t),e=1==t.length?e:Nt(e,Gt(t,0,-1)),t=Mi(t));var i=null==e?e:e[t];return null==i?C:i.apply(e,n)}function Xn(e){return null!=e&&ni(Bs(e))}function Jn(e,t){return e="number"==typeof e||Le.test(e)?+e:-1,t=null==t?Is:t,e>-1&&e%1==0&&t>e}function Qn(e,t,n){if(!Nr(n))return!1;var i=typeof t;if("number"==i?Xn(n)&&Jn(t,n.length):"string"==i&&t in n){var r=n[t];return e===e?e===r:r!==r}return!1}function ei(e,t){var n=typeof e;if("string"==n&&Ce.test(e)||"number"==n)return!0;if(_a(e))return!1;var i=!xe.test(e);return i||null!=t&&e in di(t)}function ti(e){var t=Bn(e),n=g[t];if("function"!=typeof n||!(t in te.prototype))return!1;if(e===n)return!0;var i=Vs(n);return!!i&&e===i[0]}function ni(e){return"number"==typeof e&&e>-1&&e%1==0&&Is>=e}function ii(e){return e===e&&!Nr(e)}function ri(e,t){var n=e[1],i=t[1],r=n|i,o=I>r,s=i==I&&n==$||i==I&&n==L&&e[7].length<=t[8]||i==(I|L)&&n==$;if(!o&&!s)return e;i&k&&(e[2]=t[2],r|=n&k?0:O);var a=t[3];if(a){var c=e[3];e[3]=c?cn(c,a,t[4]):nt(a),e[4]=c?y(e[3],B):nt(t[4])}return a=t[5],a&&(c=e[5],e[5]=c?ln(c,a,t[6]):nt(a),e[6]=c?y(e[5],B):nt(t[6])),a=t[7],a&&(e[7]=nt(a)),i&I&&(e[8]=null==e[8]?t[8]:Cs(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function oi(e,t){return e===C?t:Aa(e,t,oi)}function si(e,t){e=di(e);for(var n=-1,i=t.length,r={};++n<i;){var o=t[n];o in e&&(r[o]=e[o])}return r}function ai(e,t){var n={};return At(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}function ci(e,t){for(var n=e.length,i=Cs(t.length,n),r=nt(e);i--;){var o=t[i];e[i]=Jn(o,n)?r[o]:C}return e}function li(e){for(var t=eo(e),n=t.length,i=n&&e.length,r=!!i&&ni(i)&&(_a(e)||kr(e)),o=-1,s=[];++o<n;){var a=t[o];(r&&Jn(a,i)||ts.call(e,a))&&s.push(a)}return s}function ui(e){return null==e?[]:Xn(e)?Nr(e)?e:Wo(e):oo(e)}function di(e){return Nr(e)?e:Wo(e)}function pi(e){if(_a(e))return e;var t=[];return o(e).replace(Te,function(e,n,i,r){t.push(i?r.replace($e,"$1"):n||e)}),t}function fi(e){return e instanceof te?e.clone():new Q(e.__wrapped__,e.__chain__,nt(e.__actions__))}function hi(e,t,n){t=(n?Qn(e,t,n):null==t)?1:xs(vs(t)||1,1);for(var i=0,r=e?e.length:0,o=-1,s=Vo(gs(r/t));r>i;)s[++o]=Gt(e,i,i+=t);return s}function mi(e){for(var t=-1,n=e?e.length:0,i=-1,r=[];++t<n;){var o=e[t];o&&(r[++i]=o)}return r}function gi(e,t,n){var i=e?e.length:0;return i?((n?Qn(e,t,n):null==t)&&(t=1),Gt(e,0>t?0:t)):[]}function yi(e,t,n){var i=e?e.length:0;return i?((n?Qn(e,t,n):null==t)&&(t=1),t=i-(+t||0),Gt(e,0,0>t?0:t)):[]}function vi(e,t,n){return e&&e.length?tn(e,Vn(t,n,3),!0,!0):[]}function bi(e,t,n){return e&&e.length?tn(e,Vn(t,n,3),!0):[]}function wi(e,t,n,i){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Qn(e,t,n)&&(n=0,i=r),Mt(e,t,n,i)):[]}function Si(e){return e?e[0]:C}function xi(e,t,n){var i=e?e.length:0;return n&&Qn(e,t,n)&&(t=!1),i?_t(e,t):[]}function Ci(e){var t=e?e.length:0;return t?_t(e,!0):[]}function Ti(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?xs(r+n,0):n;else if(n){var o=rn(e,t);return r>o&&(t===t?t===e[o]:e[o]!==e[o])?o:-1}return i(e,t,n||0)}function ki(e){return yi(e,1)}function Mi(e){var t=e?e.length:0;return t?e[t-1]:C}function Oi(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(0>n?xs(i+n,0):Cs(n||0,i-1))+1;else if(n){r=rn(e,t,!0)-1;var o=e[r];return(t===t?t===o:o!==o)?r:-1}if(t!==t)return h(e,r,!0);for(;r--;)if(e[r]===t)return r;return-1}function $i(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,i=qn(),r=e.length;++n<r;)for(var o=0,s=e[n];(o=i(t,s,o))>-1;)fs.call(t,o,1);return t}function _i(e,t,n){var i=[];if(!e||!e.length)return i;var r=-1,o=[],s=e.length;for(t=Vn(t,n,3);++r<s;){var a=e[r];t(a,r,e)&&(i.push(a),o.push(r))}return zt(e,o),i}function Ai(e){return gi(e,1)}function Ei(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Qn(e,t,n)&&(t=0,n=i),Gt(e,t,n)):[]}function Ii(e,t,n){var i=e?e.length:0;return i?((n?Qn(e,t,n):null==t)&&(t=1),Gt(e,0,0>t?0:t)):[]}function Li(e,t,n){var i=e?e.length:0;return i?((n?Qn(e,t,n):null==t)&&(t=1),t=i-(+t||0),Gt(e,0>t?0:t)):[]}function Ni(e,t,n){return e&&e.length?tn(e,Vn(t,n,3),!1,!0):[]}function Di(e,t,n){return e&&e.length?tn(e,Vn(t,n,3)):[]}function ji(e,t,n,r){var o=e?e.length:0;if(!o)return[];null!=t&&"boolean"!=typeof t&&(r=n,n=Qn(e,t,r)?C:t,t=!1);var s=Vn();return(null!=n||s!==wt)&&(n=s(n,r,3)),t&&qn()===i?v(e,n):Qt(e,n)}function Ri(e){if(!e||!e.length)return[];var t=-1,n=0;e=at(e,function(e){return Xn(e)?(n=xs(e.length,n),!0):void 0});for(var i=Vo(n);++t<n;)i[t]=ct(e,qt(t));return i}function Pi(e,t,n){var i=e?e.length:0;if(!i)return[];var r=Ri(e);return null==t?r:(t=sn(t,n,4),ct(r,function(e){return ut(e,t,C,!0)}))}function Ui(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Xn(n))var i=i?lt(Ct(i,n),Ct(n,i)):n}return i?Qt(i):[]}function Fi(e,t){var n=-1,i=e?e.length:0,r={};for(!i||t||_a(e[0])||(t=[]);++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function Vi(e){var t=g(e);return t.__chain__=!0,t}function Bi(e,t,n){return t.call(n,e),e}function qi(e,t,n){return t.call(n,e)}function Yi(){return Vi(this)}function zi(){return new Q(this.value(),this.__chain__)}function Hi(e){for(var t,n=this;n instanceof K;){var i=fi(n);t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function Wi(){var e=this.__wrapped__,t=function(e){return e.reverse()};if(e instanceof te){var n=e;return this.__actions__.length&&(n=new te(this)),n=n.reverse(),n.__actions__.push({func:qi,args:[t],thisArg:C}),new Q(n,this.__chain__)}return this.thru(t)}function Gi(){return this.value()+""}function Ki(){return nn(this.__wrapped__,this.__actions__)}function Zi(e,t,n){var i=_a(e)?ot:Tt;return n&&Qn(e,t,n)&&(t=C),("function"!=typeof t||n!==C)&&(t=Vn(t,n,3)),i(e,t)}function Xi(e,t,n){var i=_a(e)?at:Ot;return t=Vn(t,n,3),i(e,t)}function Ji(e,t){return ra(e,Ut(t))}function Qi(e,t,n,i){var r=e?Bs(e):0;return ni(r)||(e=oo(e),r=e.length),n="number"!=typeof n||i&&Qn(t,n,i)?0:0>n?xs(r+n,0):n||0,"string"==typeof e||!_a(e)&&Br(e)?r>=n&&e.indexOf(t,n)>-1:!!r&&qn(e,t,n)>-1}function er(e,t,n){var i=_a(e)?ct:Pt;return t=Vn(t,n,3),i(e,t)}function tr(e,t){return er(e,No(t))}function nr(e,t,n){var i=_a(e)?at:Ot;return t=Vn(t,n,3),i(e,function(e,n,i){return!t(e,n,i)})}function ir(e,t,n){if(n?Qn(e,t,n):null==t){e=ui(e);var i=e.length;return i>0?e[Ht(0,i-1)]:C}var r=-1,o=Wr(e),i=o.length,s=i-1;for(t=Cs(0>t?0:+t||0,i);++r<t;){var a=Ht(r,s),c=o[a];o[a]=o[r],o[r]=c}return o.length=t,o}function rr(e){return ir(e,$s)}function or(e){var t=e?Bs(e):0;return ni(t)?t:Fa(e).length}function sr(e,t,n){var i=_a(e)?pt:Kt;return n&&Qn(e,t,n)&&(t=C),("function"!=typeof t||n!==C)&&(t=Vn(t,n,3)),i(e,t)}function ar(e,t,n){if(null==e)return[];n&&Qn(e,t,n)&&(t=C);var i=-1;t=Vn(t,n,3);var r=Pt(e,function(e,n,r){return{criteria:t(e,n,r),index:++i,value:e}});return Zt(r,c)}function cr(e,t,n,i){return null==e?[]:(i&&Qn(t,n,i)&&(n=C),_a(t)||(t=null==t?[]:[t]),_a(n)||(n=null==n?[]:[n]),Xt(e,t,n))}function lr(e,t){return Xi(e,Ut(t))}function ur(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Zo(V);var n=e;e=t,t=n}return e=ws(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function dr(e,t,n){return n&&Qn(e,t,n)&&(t=C),t=e&&null==t?e.length:xs(+t||0,0),Rn(e,I,C,C,C,C,t)}function pr(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Zo(V);var i=e;e=t,t=i}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=C),n}}function fr(e,t,n){function i(){f&&as(f),l&&as(l),m=0,l=f=h=C}function r(t,n){n&&as(n),l=f=h=C,t&&(m=ma(),u=e.apply(p,c),f||l||(c=p=C))}function o(){var e=t-(ma()-d);0>=e||e>t?r(h,l):f=ps(o,e)}function s(){r(y,f)}function a(){if(c=arguments,d=ma(),p=this,h=y&&(f||!v),g===!1)var n=v&&!f;else{l||v||(m=d);var i=g-(d-m),r=0>=i||i>g;r?(l&&(l=as(l)),m=d,u=e.apply(p,c)):l||(l=ps(s,i))}return r&&f?f=as(f):f||t===g||(f=ps(o,t)),n&&(r=!0,u=e.apply(p,c)),!r||f||l||(c=p=C),u}var c,l,u,d,p,f,h,m=0,g=!1,y=!0;if("function"!=typeof e)throw new Zo(V);if(t=0>t?0:+t||0,n===!0){var v=!0;y=!1}else Nr(n)&&(v=!!n.leading,g="maxWait"in n&&xs(+n.maxWait||0,t),y="trailing"in n?!!n.trailing:y);return a.cancel=i,a}function hr(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Zo(V);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new hr.Cache,n}function mr(e){if("function"!=typeof e)throw new Zo(V);return function(){return!e.apply(this,arguments)}}function gr(e){return pr(2,e)}function yr(e,t){if("function"!=typeof e)throw new Zo(V);return t=xs(t===C?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,r=xs(n.length-t,0),o=Vo(r);++i<r;)o[i]=n[t+i];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var s=Vo(t+1);for(i=-1;++i<t;)s[i]=n[i];return s[t]=o,e.apply(this,s)}}function vr(e){if("function"!=typeof e)throw new Zo(V);return function(t){return e.apply(this,t)}}function br(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Zo(V);return n===!1?i=!1:Nr(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),fr(e,t,{leading:i,maxWait:+t,trailing:r})}function wr(e,t){return t=null==t?$o:t,Rn(t,A,C,[e],[])}function Sr(e,t,n,i){return t&&"boolean"!=typeof t&&Qn(e,t,n)?t=!1:"function"==typeof t&&(i=n,n=t,t=!1),"function"==typeof n?St(e,t,sn(n,i,3)):St(e,t)}function xr(e,t,n){return"function"==typeof t?St(e,!0,sn(t,n,3)):St(e,!0)}function Cr(e,t){return e>t}function Tr(e,t){return e>=t}function kr(e){return m(e)&&Xn(e)&&ts.call(e,"callee")&&!us.call(e,"callee")}function Mr(e){return e===!0||e===!1||m(e)&&is.call(e)==z}function Or(e){return m(e)&&is.call(e)==H}function $r(e){return!!e&&1===e.nodeType&&m(e)&&!Fr(e)}function _r(e){return null==e?!0:Xn(e)&&(_a(e)||Br(e)||kr(e)||m(e)&&Lr(e.splice))?!e.length:!Fa(e).length}function Ar(e,t,n,i){n="function"==typeof n?sn(n,i,3):C;var r=n?n(e,t):C;return r===C?Dt(e,t,n):!!r}function Er(e){return m(e)&&"string"==typeof e.message&&is.call(e)==W}function Ir(e){return"number"==typeof e&&ws(e)}function Lr(e){return Nr(e)&&is.call(e)==G}function Nr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Dr(e,t,n,i){return n="function"==typeof n?sn(n,i,3):C,Rt(e,Yn(t),n)}function jr(e){return Ur(e)&&e!=+e}function Rr(e){return null==e?!1:Lr(e)?os.test(es.call(e)):m(e)&&Ie.test(e)}function Pr(e){return null===e}function Ur(e){return"number"==typeof e||m(e)&&is.call(e)==Z}function Fr(e){var t;if(!m(e)||is.call(e)!=X||kr(e)||!ts.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return At(e,function(e,t){n=t}),n===C||ts.call(e,n)}function Vr(e){return Nr(e)&&is.call(e)==J}function Br(e){return"string"==typeof e||m(e)&&is.call(e)==ee}function qr(e){return m(e)&&ni(e.length)&&!!Fe[is.call(e)]}function Yr(e){return e===C}function zr(e,t){return t>e}function Hr(e,t){return t>=e}function Wr(e){var t=e?Bs(e):0;return ni(t)?t?nt(e):[]:oo(e)}function Gr(e){return bt(e,eo(e))}function Kr(e,t,n){var i=Ds(e);return n&&Qn(e,t,n)&&(t=C),t?yt(i,t):i}function Zr(e){return Lt(e,eo(e))}function Xr(e,t,n){var i=null==e?C:Nt(e,pi(t),t+"");return i===C?n:i}function Jr(e,t){if(null==e)return!1;var n=ts.call(e,t);if(!n&&!ei(t)){if(t=pi(t),e=1==t.length?e:Nt(e,Gt(t,0,-1)),null==e)return!1;t=Mi(t),n=ts.call(e,t)}return n||ni(e.length)&&Jn(t,e.length)&&(_a(e)||kr(e))}function Qr(e,t,n){n&&Qn(e,t,n)&&(t=C);for(var i=-1,r=Fa(e),o=r.length,s={};++i<o;){var a=r[i],c=e[a];t?ts.call(s,c)?s[c].push(a):s[c]=[a]:s[c]=a}return s}function eo(e){if(null==e)return[];Nr(e)||(e=Wo(e));var t=e.length;t=t&&ni(t)&&(_a(e)||kr(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,o=Vo(t),s=t>0;++i<t;)o[i]=i+"";for(var a in e)s&&Jn(a,t)||"constructor"==a&&(r||!ts.call(e,a))||o.push(a);return o}function to(e){e=di(e);for(var t=-1,n=Fa(e),i=n.length,r=Vo(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}function no(e,t,n){var i=null==e?C:e[t];return i===C&&(null==e||ei(t,e)||(t=pi(t),e=1==t.length?e:Nt(e,Gt(t,0,-1)),i=null==e?C:e[Mi(t)]),i=i===C?n:i),Lr(i)?i.call(e):i}function io(e,t,n){if(null==e)return e;var i=t+"";t=null!=e[i]||ei(t,e)?[i]:pi(t);for(var r=-1,o=t.length,s=o-1,a=e;null!=a&&++r<o;){var c=t[r];Nr(a)&&(r==s?a[c]=n:null==a[c]&&(a[c]=Jn(t[r+1])?[]:{})),a=a[c]}return e}function ro(e,t,n,i){var r=_a(e)||qr(e);if(t=Vn(t,i,4),null==n)if(r||Nr(e)){var o=e.constructor;n=r?_a(e)?new o:[]:Ds(Lr(o)?o.prototype:C)}else n={};return(r?it:Et)(e,function(e,i,r){return t(n,e,i,r)}),n}function oo(e){return en(e,Fa(e));
}function so(e){return en(e,eo(e))}function ao(e,t,n){return t=+t||0,n===C?(n=t,t=0):n=+n||0,e>=Cs(t,n)&&e<xs(t,n)}function co(e,t,n){n&&Qn(e,t,n)&&(t=n=C);var i=null==e,r=null==t;if(null==n&&(r&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,r=!0)),i&&r&&(t=1,r=!1),e=+e||0,r?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=Ms();return Cs(e+o*(t-e+cs("1e-"+((o+"").length-1))),t)}return Ht(e,t)}function lo(e){return e=o(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function uo(e){return e=o(e),e&&e.replace(Ne,u).replace(Oe,"")}function po(e,t,n){e=o(e),t+="";var i=e.length;return n=n===C?i:Cs(0>n?0:+n||0,i),n-=t.length,n>=0&&e.indexOf(t,n)==n}function fo(e){return e=o(e),e&&ve.test(e)?e.replace(ge,d):e}function ho(e){return e=o(e),e&&Me.test(e)?e.replace(ke,p):e||"(?:)"}function mo(e,t,n){e=o(e),t=+t;var i=e.length;if(i>=t||!ws(t))return e;var r=(t-i)/2,s=vs(r),a=gs(r);return n=Ln("",a,n),n.slice(0,s)+e+n}function go(e,t,n){return(n?Qn(e,t,n):null==t)?t=0:t&&(t=+t),e=wo(e),ks(e,t||(Ee.test(e)?16:10))}function yo(e,t){var n="";if(e=o(e),t=+t,1>t||!e||!ws(t))return n;do t%2&&(n+=e),t=vs(t/2),e+=e;while(t);return n}function vo(e,t,n){return e=o(e),n=null==n?0:Cs(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function bo(e,t,n){var i=g.templateSettings;n&&Qn(e,t,n)&&(t=n=C),e=o(e),t=gt(yt({},n||t),i,mt);var r,s,a=gt(yt({},t.imports),i.imports,mt),c=Fa(a),l=en(a,c),u=0,d=t.interpolate||De,p="__p += '",h=Go((t.escape||De).source+"|"+d.source+"|"+(d===Se?_e:De).source+"|"+(t.evaluate||De).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Ue+"]")+"\n";e.replace(h,function(t,n,i,o,a,c){return i||(i=o),p+=e.slice(u,c).replace(je,f),n&&(r=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+t.length,t}),p+="';\n";var y=t.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(pe,""):p).replace(fe,"$1").replace(he,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Xa(function(){return Yo(c,m+"return "+p).apply(C,l)});if(v.source=p,Er(v))throw v;return v}function wo(e,t,n){var i=e;return(e=o(e))?(n?Qn(i,t,n):null==t)?e.slice(b(e),w(e)+1):(t+="",e.slice(s(e,t),a(e,t)+1)):e}function So(e,t,n){var i=e;return e=o(e),e?(n?Qn(i,t,n):null==t)?e.slice(b(e)):e.slice(s(e,t+"")):e}function xo(e,t,n){var i=e;return e=o(e),e?(n?Qn(i,t,n):null==t)?e.slice(0,w(e)+1):e.slice(0,a(e,t+"")+1):e}function Co(e,t,n){n&&Qn(e,t,n)&&(t=C);var i=N,r=D;if(null!=t)if(Nr(t)){var s="separator"in t?t.separator:s;i="length"in t?+t.length||0:i,r="omission"in t?o(t.omission):r}else i=+t||0;if(e=o(e),i>=e.length)return e;var a=i-r.length;if(1>a)return r;var c=e.slice(0,a);if(null==s)return c+r;if(Vr(s)){if(e.slice(a).search(s)){var l,u,d=e.slice(0,a);for(s.global||(s=Go(s.source,(Ae.exec(s)||"")+"g")),s.lastIndex=0;l=s.exec(d);)u=l.index;c=c.slice(0,null==u?a:u)}}else if(e.indexOf(s,a)!=a){var p=c.lastIndexOf(s);p>-1&&(c=c.slice(0,p))}return c+r}function To(e){return e=o(e),e&&ye.test(e)?e.replace(me,S):e}function ko(e,t,n){return n&&Qn(e,t,n)&&(t=C),e=o(e),e.match(t||Re)||[]}function Mo(e,t,n){return n&&Qn(e,t,n)&&(t=C),m(e)?_o(e):wt(e,t)}function Oo(e){return function(){return e}}function $o(e){return e}function _o(e){return Ut(St(e,!0))}function Ao(e,t){return Ft(e,St(t,!0))}function Eo(e,t,n){if(null==n){var i=Nr(t),r=i?Fa(t):C,o=r&&r.length?Lt(t,r):C;(o?o.length:i)||(o=!1,n=t,t=e,e=this)}o||(o=Lt(t,Fa(t)));var s=!0,a=-1,c=Lr(e),l=o.length;n===!1?s=!1:Nr(n)&&"chain"in n&&(s=n.chain);for(;++a<l;){var u=o[a],d=t[u];e[u]=d,c&&(e.prototype[u]=function(t){return function(){var n=this.__chain__;if(s||n){var i=e(this.__wrapped__),r=i.__actions__=nt(this.__actions__);return r.push({func:t,args:arguments,thisArg:e}),i.__chain__=n,i}return t.apply(e,lt([this.value()],arguments))}}(d))}return e}function Io(){return et._=rs,this}function Lo(){}function No(e){return ei(e)?qt(e):Yt(e)}function Do(e){return function(t){return Nt(e,pi(t),t+"")}}function jo(e,t,n){n&&Qn(e,t,n)&&(t=n=C),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var i=-1,r=xs(gs((t-e)/(n||1)),0),o=Vo(r);++i<r;)o[i]=e,e+=n;return o}function Ro(e,t,n){if(e=vs(e),1>e||!ws(e))return[];var i=-1,r=Vo(Cs(e,_s));for(t=sn(t,n,1);++i<e;)_s>i?r[i]=t(i):t(i);return r}function Po(e){var t=++ns;return o(e)+t}function Uo(e,t){return(+e||0)+(+t||0)}function Fo(e,t,n){return n&&Qn(e,t,n)&&(t=C),t=Vn(t,n,3),1==t.length?ft(_a(e)?e:ui(e),t):Jt(e,t)}n=n?tt.defaults(et.Object(),n,tt.pick(et,Pe)):et;var Vo=n.Array,Bo=n.Date,qo=n.Error,Yo=n.Function,zo=n.Math,Ho=n.Number,Wo=n.Object,Go=n.RegExp,Ko=n.String,Zo=n.TypeError,Xo=Vo.prototype,Jo=Wo.prototype,Qo=Ko.prototype,es=Yo.prototype.toString,ts=Jo.hasOwnProperty,ns=0,is=Jo.toString,rs=et._,os=Go("^"+es.call(ts).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=n.ArrayBuffer,as=n.clearTimeout,cs=n.parseFloat,ls=zo.pow,us=Jo.propertyIsEnumerable,ds=zn(n,"Set"),ps=n.setTimeout,fs=Xo.splice,hs=n.Uint8Array,ms=zn(n,"WeakMap"),gs=zo.ceil,ys=zn(Wo,"create"),vs=zo.floor,bs=zn(Vo,"isArray"),ws=n.isFinite,Ss=zn(Wo,"keys"),xs=zo.max,Cs=zo.min,Ts=zn(Bo,"now"),ks=n.parseInt,Ms=zo.random,Os=Ho.NEGATIVE_INFINITY,$s=Ho.POSITIVE_INFINITY,_s=4294967295,As=_s-1,Es=_s>>>1,Is=9007199254740991,Ls=ms&&new ms,Ns={};g.support={};g.templateSettings={escape:be,evaluate:we,interpolate:Se,variable:"",imports:{_:g}};var Ds=function(){function e(){}return function(t){if(Nr(t)){e.prototype=t;var n=new e;e.prototype=C}return n||{}}}(),js=pn(Et),Rs=pn(It,!0),Ps=fn(),Us=fn(!0),Fs=Ls?function(e,t){return Ls.set(e,t),e}:$o,Vs=Ls?function(e){return Ls.get(e)}:Lo,Bs=qt("length"),qs=function(){var e=0,t=0;return function(n,i){var r=ma(),o=R-(r-t);if(t=r,o>0){if(++e>=j)return n}else e=0;return Fs(n,i)}}(),Ys=yr(function(e,t){return m(e)&&Xn(e)?Ct(e,_t(t,!1,!0)):[]}),zs=xn(),Hs=xn(!0),Ws=yr(function(e){for(var t=e.length,n=t,r=Vo(d),o=qn(),s=o===i,a=[];n--;){var c=e[n]=Xn(c=e[n])?c:[];r[n]=s&&c.length>=120?mn(n&&c):null}var l=e[0],u=-1,d=l?l.length:0,p=r[0];e:for(;++u<d;)if(c=l[u],(p?Xe(p,c):o(a,c,0))<0){for(var n=t;--n;){var f=r[n];if((f?Xe(f,c):o(e[n],c,0))<0)continue e}p&&p.push(c),a.push(c)}return a}),Gs=yr(function(t,n){n=_t(n);var i=vt(t,n);return zt(t,n.sort(e)),i}),Ks=jn(),Zs=jn(!0),Xs=yr(function(e){return Qt(_t(e,!1,!0))}),Js=yr(function(e,t){return Xn(e)?Ct(e,t):[]}),Qs=yr(Ri),ea=yr(function(e){var t=e.length,n=t>2?e[t-2]:C,i=t>1?e[t-1]:C;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof i?(--t,i):C,i=C),e.length=t,Pi(e,n,i)}),ta=yr(function(e){return e=_t(e),this.thru(function(t){return Qe(_a(t)?t:[di(t)],e)})}),na=yr(function(e,t){return vt(e,_t(t))}),ia=un(function(e,t,n){ts.call(e,n)?++e[n]:e[n]=1}),ra=Sn(js),oa=Sn(Rs,!0),sa=kn(it,js),aa=kn(rt,Rs),ca=un(function(e,t,n){ts.call(e,n)?e[n].push(t):e[n]=[t]}),la=un(function(e,t,n){e[n]=t}),ua=yr(function(e,t,n){var i=-1,r="function"==typeof t,o=ei(t),s=Xn(e)?Vo(e.length):[];return js(e,function(e){var a=r?t:o&&null!=e?e[t]:C;s[++i]=a?a.apply(e,n):Zn(e,t,n)}),s}),da=un(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),pa=En(ut,js),fa=En(dt,Rs),ha=yr(function(e,t){if(null==e)return[];var n=t[2];return n&&Qn(t[0],t[1],n)&&(t.length=1),Xt(e,_t(t),[])}),ma=Ts||function(){return(new Bo).getTime()},ga=yr(function(e,t,n){var i=k;if(n.length){var r=y(n,ga.placeholder);i|=A}return Rn(e,i,t,n,r)}),ya=yr(function(e,t){t=t.length?_t(t):Zr(e);for(var n=-1,i=t.length;++n<i;){var r=t[n];e[r]=Rn(e[r],k,e)}return e}),va=yr(function(e,t,n){var i=k|M;if(n.length){var r=y(n,va.placeholder);i|=A}return Rn(t,i,e,n,r)}),ba=vn($),wa=vn(_),Sa=yr(function(e,t){return xt(e,1,t)}),xa=yr(function(e,t,n){return xt(e,t,n)}),Ca=Tn(),Ta=Tn(!0),ka=yr(function(e,t){if(t=_t(t),"function"!=typeof e||!ot(t,r))throw new Zo(V);var n=t.length;return yr(function(i){for(var r=Cs(i.length,n);r--;)i[r]=t[r](i[r]);return e.apply(this,i)})}),Ma=An(A),Oa=An(E),$a=yr(function(e,t){return Rn(e,L,C,C,C,_t(t))}),_a=bs||function(e){return m(e)&&ni(e.length)&&is.call(e)==Y},Aa=dn(Vt),Ea=dn(function(e,t,n){return n?gt(e,t,n):yt(e,t)}),Ia=bn(Ea,ht),La=bn(Aa,oi),Na=Cn(Et),Da=Cn(It),ja=Mn(Ps),Ra=Mn(Us),Pa=On(Et),Ua=On(It),Fa=Ss?function(e){var t=null==e?C:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Xn(e)?li(e):Nr(e)?Ss(e):[]}:li,Va=$n(!0),Ba=$n(),qa=yr(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=ct(_t(t),Ko);return si(e,Ct(eo(e),t))}var n=sn(t[0],t[1],3);return ai(e,function(e,t,i){return!n(e,t,i)})}),Ya=yr(function(e,t){return null==e?{}:"function"==typeof t[0]?ai(e,sn(t[0],t[1],3)):si(e,_t(t))}),za=gn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ha=gn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Wa=_n(),Ga=_n(!0),Ka=gn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Za=gn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Xa=yr(function(e,t){try{return e.apply(C,t)}catch(n){return Er(n)?n:new qo(n)}}),Ja=yr(function(e,t){return function(n){return Zn(n,e,t)}}),Qa=yr(function(e,t){return function(n){return Zn(e,n,t)}}),ec=Dn("ceil"),tc=Dn("floor"),nc=wn(Cr,Os),ic=wn(zr,$s),rc=Dn("round");return g.prototype=K.prototype,Q.prototype=Ds(K.prototype),Q.prototype.constructor=Q,te.prototype=Ds(K.prototype),te.prototype.constructor=te,ze.prototype["delete"]=He,ze.prototype.get=We,ze.prototype.has=Ge,ze.prototype.set=Ke,Ze.prototype.push=Je,hr.Cache=ze,g.after=ur,g.ary=dr,g.assign=Ea,g.at=na,g.before=pr,g.bind=ga,g.bindAll=ya,g.bindKey=va,g.callback=Mo,g.chain=Vi,g.chunk=hi,g.compact=mi,g.constant=Oo,g.countBy=ia,g.create=Kr,g.curry=ba,g.curryRight=wa,g.debounce=fr,g.defaults=Ia,g.defaultsDeep=La,g.defer=Sa,g.delay=xa,g.difference=Ys,g.drop=gi,g.dropRight=yi,g.dropRightWhile=vi,g.dropWhile=bi,g.fill=wi,g.filter=Xi,g.flatten=xi,g.flattenDeep=Ci,g.flow=Ca,g.flowRight=Ta,g.forEach=sa,g.forEachRight=aa,g.forIn=ja,g.forInRight=Ra,g.forOwn=Pa,g.forOwnRight=Ua,g.functions=Zr,g.groupBy=ca,g.indexBy=la,g.initial=ki,g.intersection=Ws,g.invert=Qr,g.invoke=ua,g.keys=Fa,g.keysIn=eo,g.map=er,g.mapKeys=Va,g.mapValues=Ba,g.matches=_o,g.matchesProperty=Ao,g.memoize=hr,g.merge=Aa,g.method=Ja,g.methodOf=Qa,g.mixin=Eo,g.modArgs=ka,g.negate=mr,g.omit=qa,g.once=gr,g.pairs=to,g.partial=Ma,g.partialRight=Oa,g.partition=da,g.pick=Ya,g.pluck=tr,g.property=No,g.propertyOf=Do,g.pull=$i,g.pullAt=Gs,g.range=jo,g.rearg=$a,g.reject=nr,g.remove=_i,g.rest=Ai,g.restParam=yr,g.set=io,g.shuffle=rr,g.slice=Ei,g.sortBy=ar,g.sortByAll=ha,g.sortByOrder=cr,g.spread=vr,g.take=Ii,g.takeRight=Li,g.takeRightWhile=Ni,g.takeWhile=Di,g.tap=Bi,g.throttle=br,g.thru=qi,g.times=Ro,g.toArray=Wr,g.toPlainObject=Gr,g.transform=ro,g.union=Xs,g.uniq=ji,g.unzip=Ri,g.unzipWith=Pi,g.values=oo,g.valuesIn=so,g.where=lr,g.without=Js,g.wrap=wr,g.xor=Ui,g.zip=Qs,g.zipObject=Fi,g.zipWith=ea,g.backflow=Ta,g.collect=er,g.compose=Ta,g.each=sa,g.eachRight=aa,g.extend=Ea,g.iteratee=Mo,g.methods=Zr,g.object=Fi,g.select=Xi,g.tail=Ai,g.unique=ji,Eo(g,g),g.add=Uo,g.attempt=Xa,g.camelCase=za,g.capitalize=lo,g.ceil=ec,g.clone=Sr,g.cloneDeep=xr,g.deburr=uo,g.endsWith=po,g.escape=fo,g.escapeRegExp=ho,g.every=Zi,g.find=ra,g.findIndex=zs,g.findKey=Na,g.findLast=oa,g.findLastIndex=Hs,g.findLastKey=Da,g.findWhere=Ji,g.first=Si,g.floor=tc,g.get=Xr,g.gt=Cr,g.gte=Tr,g.has=Jr,g.identity=$o,g.includes=Qi,g.indexOf=Ti,g.inRange=ao,g.isArguments=kr,g.isArray=_a,g.isBoolean=Mr,g.isDate=Or,g.isElement=$r,g.isEmpty=_r,g.isEqual=Ar,g.isError=Er,g.isFinite=Ir,g.isFunction=Lr,g.isMatch=Dr,g.isNaN=jr,g.isNative=Rr,g.isNull=Pr,g.isNumber=Ur,g.isObject=Nr,g.isPlainObject=Fr,g.isRegExp=Vr,g.isString=Br,g.isTypedArray=qr,g.isUndefined=Yr,g.kebabCase=Ha,g.last=Mi,g.lastIndexOf=Oi,g.lt=zr,g.lte=Hr,g.max=nc,g.min=ic,g.noConflict=Io,g.noop=Lo,g.now=ma,g.pad=mo,g.padLeft=Wa,g.padRight=Ga,g.parseInt=go,g.random=co,g.reduce=pa,g.reduceRight=fa,g.repeat=yo,g.result=no,g.round=rc,g.runInContext=x,g.size=or,g.snakeCase=Ka,g.some=sr,g.sortedIndex=Ks,g.sortedLastIndex=Zs,g.startCase=Za,g.startsWith=vo,g.sum=Fo,g.template=bo,g.trim=wo,g.trimLeft=So,g.trimRight=xo,g.trunc=Co,g.unescape=To,g.uniqueId=Po,g.words=ko,g.all=Zi,g.any=sr,g.contains=Qi,g.eq=Ar,g.detect=ra,g.foldl=pa,g.foldr=fa,g.head=Si,g.include=Qi,g.inject=pa,Eo(g,function(){var e={};return Et(g,function(t,n){g.prototype[n]||(e[n]=t)}),e}(),!1),g.sample=ir,g.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ir(t,e)}):ir(this.value())},g.VERSION=T,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){g[e].placeholder=g}),it(["drop","take"],function(e,t){te.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new te(this);n=null==n?1:xs(vs(n)||0,0);var r=this.clone();return i?r.__takeCount__=Cs(r.__takeCount__,n):r.__views__.push({size:n,type:e+(r.__dir__<0?"Right":"")}),r},te.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),it(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n!=F;te.prototype[e]=function(e,t){var r=this.clone();return r.__iteratees__.push({iteratee:Vn(e,t,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),it(["first","last"],function(e,t){var n="take"+(t?"Right":"");te.prototype[e]=function(){return this[n](1).value()[0]}}),it(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");te.prototype[e]=function(){return this.__filtered__?new te(this):this[n](1)}}),it(["pluck","where"],function(e,t){var n=t?"filter":"map",i=t?Ut:No;te.prototype[e]=function(e){return this[n](i(e))}}),te.prototype.compact=function(){return this.filter($o)},te.prototype.reject=function(e,t){return e=Vn(e,t,1),this.filter(function(t){return!e(t)})},te.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||0>t)?new te(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==C&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n)},te.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},te.prototype.toArray=function(){return this.take($s)},Et(te.prototype,function(e,t){var n=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t),r=g[i?"take"+("last"==t?"Right":""):t];r&&(g.prototype[t]=function(){var t=i?[1]:arguments,o=this.__chain__,s=this.__wrapped__,a=!!this.__actions__.length,c=s instanceof te,l=t[0],u=c||_a(s);u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var d=function(e){return i&&o?r(e,1)[0]:r.apply(C,lt([e],t))},p={func:qi,args:[d],thisArg:C},f=c&&!a;if(i&&!o)return f?(s=s.clone(),s.__actions__.push(p),e.call(s)):r.call(C,this.value())[0];if(!i&&u){s=f?s:new te(this);var h=e.apply(s,t);return h.__actions__.push(p),new Q(h,o)}return this.thru(d)})}),it(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?Qo:Xo)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);g.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Et(te.prototype,function(e,t){var n=g[t];if(n){var i=n.name+"",r=Ns[i]||(Ns[i]=[]);r.push({name:t,func:n})}}),Ns[In(C,M).name]=[{name:"wrapper",func:C}],te.prototype.clone=Be,te.prototype.reverse=qe,te.prototype.value=Ye,g.prototype.chain=Yi,g.prototype.commit=zi,g.prototype.concat=ta,g.prototype.plant=Hi,g.prototype.reverse=Wi,g.prototype.toString=Gi,g.prototype.run=g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=Ki,g.prototype.collect=g.prototype.map,g.prototype.head=g.prototype.first,g.prototype.select=g.prototype.filter,g.prototype.tail=g.prototype.rest,g}var C,T="3.10.1",k=1,M=2,O=4,$=8,_=16,A=32,E=64,I=128,L=256,N=30,D="...",j=150,R=16,P=200,U=1,F=2,V="Expected a function",B="__lodash_placeholder__",q="[object Arguments]",Y="[object Array]",z="[object Boolean]",H="[object Date]",W="[object Error]",G="[object Function]",K="[object Map]",Z="[object Number]",X="[object Object]",J="[object RegExp]",Q="[object Set]",ee="[object String]",te="[object WeakMap]",ne="[object ArrayBuffer]",ie="[object Float32Array]",re="[object Float64Array]",oe="[object Int8Array]",se="[object Int16Array]",ae="[object Int32Array]",ce="[object Uint8Array]",le="[object Uint8ClampedArray]",ue="[object Uint16Array]",de="[object Uint32Array]",pe=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,he=/(__e\(.*?\)|\b__t\)) \+\n'';/g,me=/&(?:amp|lt|gt|quot|#39|#96);/g,ge=/[&<>"'`]/g,ye=RegExp(me.source),ve=RegExp(ge.source),be=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,Se=/<%=([\s\S]+?)%>/g,xe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Ce=/^\w*$/,Te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ke=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Me=RegExp(ke.source),Oe=/[\u0300-\u036f\ufe20-\ufe23]/g,$e=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ae=/\w*$/,Ee=/^0[xX]/,Ie=/^\[object .+?Constructor\]$/,Le=/^\d+$/,Ne=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,De=/($^)/,je=/['\n\r\u2028\u2029\\]/g,Re=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Pe=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ue=-1,Fe={};Fe[ie]=Fe[re]=Fe[oe]=Fe[se]=Fe[ae]=Fe[ce]=Fe[le]=Fe[ue]=Fe[de]=!0,Fe[q]=Fe[Y]=Fe[ne]=Fe[z]=Fe[H]=Fe[W]=Fe[G]=Fe[K]=Fe[Z]=Fe[X]=Fe[J]=Fe[Q]=Fe[ee]=Fe[te]=!1;var Ve={};Ve[q]=Ve[Y]=Ve[ne]=Ve[z]=Ve[H]=Ve[ie]=Ve[re]=Ve[oe]=Ve[se]=Ve[ae]=Ve[Z]=Ve[X]=Ve[J]=Ve[ee]=Ve[ce]=Ve[le]=Ve[ue]=Ve[de]=!0,Ve[W]=Ve[G]=Ve[K]=Ve[Q]=Ve[te]=!1;var Be={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ze={"function":!0,object:!0},He={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},We={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=ze[typeof exports]&&exports&&!exports.nodeType&&exports,Ke=ze[typeof module]&&module&&!module.nodeType&&module,Ze=Ge&&Ke&&"object"==typeof global&&global&&global.Object&&global,Xe=ze[typeof self]&&self&&self.Object&&self,Je=ze[typeof window]&&window&&window.Object&&window,Qe=Ke&&Ke.exports===Ge&&Ge,et=Ze||Je!==(this&&this.window)&&Je||Xe||this,tt=x();"function"==typeof n&&"object"==typeof n.amd&&n.amd?(et._=tt,n("lodash",[],function(){return tt})):Ge&&Ke?Qe?(Ke.exports=tt)._=tt:Ge._=tt:et._=tt}.call(this),n("src/api/telemetry/TelemetryMetadataManager",["lodash"],function(e){function t(t){var n=[];return n.push({key:"name",name:"Name"}),t.domains.forEach(function(t,i){var r=e.clone(t);r.hints={x:i+1,domain:i+1},n.push(r)}),t.ranges.forEach(function(i,r){var o=e.clone(i);o.hints={y:r,range:r,priority:r+t.domains.length+1},"enum"===o.type&&(o.key="enum",o.hints.y-=10,o.hints.range-=10,o.enumerations=e.sortBy(o.enumerations.map(function(e){return{string:e.string,value:+e.value}}),"e.value"),o.values=e.pluck(o.enumerations,"value"),o.max=e.max(o.values),o.min=e.min(o.values)),n.push(o)}),n}function n(e,t){return e.source=e.source||e.key,e.hints=e.hints||{},e.hints.hasOwnProperty("priority")||(e.hints.priority=t),e}function i(i,r){if(this.metadata=i.telemetry||{},this.metadata.values)this.valueMetadatas=this.metadata.values;else{var o=r.getType(i.type).typeDef.telemetry;e.extend(this.metadata,o),this.valueMetadatas=t(this.metadata)}this.valueMetadatas=this.valueMetadatas.map(n)}return i.prototype.value=function(e){return this.valueMetadatas.filter(function(t){return t.key===e})[0]},i.prototype.values=function(){return this.valuesForHints(["priority"])},i.prototype.valuesForHints=function(t){function n(e){return this.hints.hasOwnProperty(e)}function i(e){return t.every(n,e)}var r=this.valueMetadatas.filter(i),o=e.sortBy(r,function(e){return t.map(function(t){return e.hints[t]})});return o},i}),n("src/api/telemetry/TelemetryValueFormatter",["lodash"],function(e){function t(e,t){var n={parse:function(e){return Number(e)},format:function(e){return e},validate:function(e){return!0}};this.valueMetadata=e,this.parseCache=new WeakMap,this.formatCache=new WeakMap;try{this.formatter=t.getFormat(e.format,e)}catch(i){this.formatter=n}"enum"===e.type&&(this.formatter={},this.enumerations=e.enumerations.reduce(function(e,t){return e.byValue[t.value]=t.string,e.byString[t.string]=t.value,e},{byValue:{},byString:{}}),this.formatter.format=function(e){return this.enumerations.byValue[e]}.bind(this),this.formatter.parse=function(e){return"string"==typeof e&&this.enumerations.hasOwnProperty(e)?this.enumerations.byString[e]:Number(e)}.bind(this))}return t.prototype.parse=function(t){return e.isObject(t)?(this.parseCache.has(t)||this.parseCache.set(t,this.formatter.parse(t[this.valueMetadata.source])),this.parseCache.get(t)):this.formatter.parse(t)},t.prototype.format=function(t){return e.isObject(t)?(this.formatCache.has(t)||this.formatCache.set(t,this.formatter.format(t[this.valueMetadata.source])),this.formatCache.get(t)):this.formatter.format(t)},t}),function(e){n("EventEmitter",[],function(){return function(){"use strict";function t(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function n(){}var i=Object.prototype.hasOwnProperty,r="function"!=typeof Object.create?"~":!1;return n.prototype._events=void 0,n.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)i.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},n.prototype.listeners=function(e,t){var n=r?r+e:e,i=this._events&&this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,a=new Array(s);s>o;o++)a[o]=i[o].fn;return a},n.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events||!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,s),!0}for(l=1,c=new Array(d-1);d>l;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,f=u.length;for(l=0;f>l;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;default:if(!c)for(p=1,c=new Array(d-1);d>p;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},n.prototype.on=function(e,n,i){var o=new t(n,i||this),s=r?r+e:e;return this._events||(this._events=r?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},n.prototype.once=function(e,n,i){var o=new t(n,i||this,!0),s=r?r+e:e;return this._events||(this._events=r?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},n.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events||!this._events[o])return this;var s=this._events[o],a=[];if(t)if(s.fn)(s.fn!==t||i&&!s.once||n&&s.context!==n)&&a.push(s);else for(var c=0,l=s.length;l>c;c++)(s[c].fn!==t||i&&!s[c].once||n&&s[c].context!==n)&&a.push(s[c]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},n.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[r?r+e:e]:this._events=r?{}:Object.create(null),this):this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=r,"undefined"!=typeof module&&(module.exports=n),e.EventEmitter=n}.apply(e,arguments)})}(this),n("src/api/telemetry/TelemetryAPI",["./TelemetryMetadataManager","./TelemetryValueFormatter","lodash","EventEmitter"],function(e,t,n,i){function r(e){this.MCT=e,this.requestProviders=[],this.subscriptionProviders=[],this.metadataCache=new WeakMap,this.formatMapCache=new WeakMap,this.valueFormatterCache=new WeakMap}return r.prototype.canProvideTelemetry=function(e){return!!this.findSubscriptionProvider(e)||!!this.findRequestProvider(e)},r.prototype.addProvider=function(e){e.supportsRequest&&this.requestProviders.unshift(e),e.supportsSubscribe&&this.subscriptionProviders.unshift(e)},r.prototype.findSubscriptionProvider=function(e){function t(e){return e.supportsSubscribe.apply(e,n)}var n=Array.prototype.slice.apply(arguments);return this.subscriptionProviders.filter(t)[0]},r.prototype.findRequestProvider=function(e,t){function n(e){return e.supportsRequest.apply(e,i)}var i=Array.prototype.slice.apply(arguments);return this.requestProviders.filter(n)[0]},r.prototype.request=function(e,t){var n=this.findRequestProvider.apply(this,arguments);return n.request.apply(n,arguments)},r.prototype.subscribe=function(e,t,n){var i=this.findSubscriptionProvider.apply(this,arguments);return i.subscribe.apply(i,arguments)},r.prototype.getMetadata=function(t){return this.metadataCache.has(t)||(this.typeService||(this.typeService=this.MCT.$injector.get("typeService")),this.metadataCache.set(t,new e(t,this.typeService))),this.metadataCache.get(t)},r.prototype.commonValuesForHints=function(e,t){var i=e.map(function(e){var i=e.valuesForHints(t);return n.indexBy(i,"key")}).reduce(function(e,t){var n={};return Object.keys(e).forEach(function(i){t.hasOwnProperty(i)&&(n[i]=e[i])}),n}),r=t.map(function(e){return"hints."+e});return n.sortByAll(i,r)},r.prototype.getValueFormatter=function(e){return this.valueFormatterCache.has(e)||(this.formatService||(this.formatService=this.MCT.$injector.get("formatService")),this.valueFormatterCache.set(e,new t(e,this.formatService))),this.valueFormatterCache.get(e)},r.prototype.getFormatMap=function(e){if(!this.formatMapCache.has(e)){var t=e.values().reduce(function(e,t){return e[t.key]=this.getValueFormatter(t),e}.bind(this),{});this.formatMapCache.set(e,t)}return this.formatMapCache.get(e)},r.prototype.limitEvaluator=function(){return this.legacyProvider.limitEvaluator.apply(this.legacyProvider,arguments)},r}),n("src/api/telemetry/LegacyTelemetryProvider",["../objects/object-utils"],function(e){function t(e,t){this.telemetryApi=e.telemetry,this.instantiate=t}function n(e,t,n,i){var r;return n.getDatum?r=n.getDatum(i):(r={},t.valuesForHints(["x"]).forEach(function(e){r[e.key]=n.getDomainValue(i,e.key)}),t.valuesForHints(["y"]).forEach(function(e){r[e.key]=n.getRangeValue(i,e.key)})),void 0!==t.value("name")&&void 0===r.name&&(r.name=e.name),r}function i(e,t,i){for(var r=[],o=0;o<i.getPointCount();o++)r.push(n(e,t,i,o));return r}return t.prototype.canProvideTelemetry=function(t){return this.instantiate(e.toOldFormat(t),e.makeKeyString(t.identifier)).hasCapability("telemetry")},t.prototype.supportsRequest=t.prototype.supportsSubscribe=t.prototype.canProvideTelemetry,t.prototype.request=function(t,n){var r=this.telemetryApi.getMetadata(t),o=this.instantiate(e.toOldFormat(t),e.makeKeyString(t.identifier)),s=o.getCapability("telemetry");return s.requestData(n).then(function(e){return Promise.resolve(i(t,r,e))})["catch"](function(e){return Promise.reject(e)})},t.prototype.subscribe=function(t,i,r){function o(e){i(n(t,s,e,e.getPointCount()-1))}var s=this.telemetryApi.getMetadata(t),a=this.instantiate(e.toOldFormat(t),e.makeKeyString(t.identifier)),c=a.getCapability("telemetry");return c.subscribe(o,r)},t.prototype.limitEvaluator=function(t){var n=this.instantiate(e.toOldFormat(t),e.makeKeyString(t.identifier)),i=n.getCapability("limit");return i?{evaluate:function(e,t){return i.evaluate(e,t.key)}}:void 0},function(e,n){var i=new t(e,n);e.telemetry.legacyProvider=i,e.telemetry.requestProviders.push(i),e.telemetry.subscriptionProviders.push(i)}}),n("src/api/telemetry/bundle",["./TelemetryAPI","./LegacyTelemetryProvider","legacyRegistry"],function(e,t,n){n.register("src/api/telemetry",{name:"Telemetry API",description:"The public Telemetry API",extensions:{runs:[{key:"TelemetryAPI",implementation:e,depends:["formatService"]},{key:"LegacyTelemetryAdapter",implementation:t,depends:["openmct","instantiate"]}]}})}),n("example/builtins/src/ExampleController",[],function(){"use strict";function e(e,t){e.phrase=t.getMessage()}return e}),n("example/builtins/src/ExampleDirective",[],function(){"use strict";function e(e){var r=e.length>0?t:n;return r+="<ul>",e.forEach(function(e){r+="<li>",r+="function"==typeof e?new e(i).getText():e.text,r+="</li>"}),r+="</ul>",{template:r}}var t="A directive loaded these message from example extensions.",n="A directive tried to load example extensions, but found none.",i="I heard this from my partial constructor.";return e}),n("example/builtins/src/ExampleService",[],function(){"use strict";function e(){return{getMessage:function(){return"I heard this from a service"}}}return e}),n("example/builtins/bundle",["./src/ExampleController","./src/ExampleDirective","./src/ExampleService","legacyRegistry"],function(e,t,n,i){"use strict";i.register("example/builtins",{name:"Angular Built-ins Example",description:"Example showing how to declare extensions with built-in support from Angular.",sources:"src",extensions:{controllers:[{key:"ExampleController",implementation:e,depends:["$scope","exampleService"]}],directives:[{key:"exampleDirective",implementation:t,depends:["examples[]"]}],routes:[{templateUrl:"templates/example.html"}],services:[{key:"exampleService",implementation:n}]}})}),n("example/composite/src/SomeProvider",[],function(){"use strict";function e(){return{getMessages:function(){return["I am a message from some provider."]}}}return e}),n("example/composite/src/SomeOtherProvider",[],function(){"use strict";function e(){return{getMessages:function(){return["I am a message from some other provider."]}}}return e}),n("example/composite/src/SomeDecorator",[],function(){"use strict";function e(e){return{getMessages:function(){return e.getMessages().map(function(e){return e.toLocaleUpperCase()})}}}return e}),n("example/composite/src/SomeOtherDecorator",[],function(){"use strict";function e(e){return{getMessages:function(){return e.getMessages().map(function(e){return e+"..."})}}}return e}),n("example/composite/src/SomeAggregator",[],function(){"use strict";function e(e){return{getMessages:function(){return e.map(function(e){return e.getMessages()}).reduce(function(e,t){return e.concat(t)},[])}}}return e}),n("example/composite/src/SomeOtherExample",[],function(){"use strict";function e(e){return{getText:function(){return e.getMessages().join(" | ")}}}return e}),n("example/composite/bundle",["./src/SomeProvider","./src/SomeOtherProvider","./src/SomeDecorator","./src/SomeOtherDecorator","./src/SomeAggregator","./src/SomeOtherExample","legacyRegistry"],function(e,t,n,i,r,o,s){"use strict";s.register("example/composite",{extensions:{components:[{implementation:e,
provides:"someService",type:"provider"},{implementation:t,provides:"someService",type:"provider"},{implementation:n,provides:"someService",type:"decorator"},{implementation:i,provides:"someService",type:"decorator"},{implementation:r,provides:"someService",type:"aggregator"}],examples:[{implementation:o,depends:["someService"]}]}})}),n("text!example/eventGenerator/data/transcript.json",[],function(){return'[\n    "CC: Eagle, Houston. You\'re GO for landing. Over.",\n    "LMP: Roger. Understand. GO for landing. 3000 feet. PROGRAM ALARM.",\n    "CC: Copy.",\n    "LMP: 1201",\n    "CDR: 1201.",\n    "CC: Roger. 1201 alarm. We\'re GO. Same type. We\'re GO.",\n    "LMP: 2000 feet. 2000 feet, Into the AGS, 47 degrees.",\n    "CC: Roger.",\n    "LMP: 47 degrees.",\n    "CC: Eagle, looking great. You\'re GO.",\n    "CC: Roger. 1202. We copy it.",\n    "O1: LMP 35 degrees. 35 degrees. 750. Coming down to 23.fl",\n    "LMP: 700 feet, 21 down, 33 degrees.",\n    "LMP: 600 feet, down at 19.",\n    "LMP: 540 feet, down at - 30. Down at 15.",\n    "LMP: At 400 feet, down at 9.",\n    "LMP: ...forward.",\n    "LMP: 350 feet, down at 4.",\n    "LMP: 30, ... one-half down.",\n    "LMP: We\'re pegged on horizontal velocity.",\n    "LMP: 300 feet, down 3 1/2, 47 forward.",\n    "LMP: ... up.",\n    "LMP: On 1 a minute, 1 1/2 down.",\n    "CDR: 70.",\n    "LMP: Watch your shadow out there.",\n    "LMP: 50, down at 2 1/2, 19 forward.",\n    "LMP: Altitude-velocity light.",\n    "LMP: 3 1/2 down s 220 feet, 13 forward.",\n    "LMP: 1t forward. Coming down nicely.",\n    "LMP: 200 feet, 4 1/2 down.",\n    "LMP: 5 1/2 down.",\n    "LMP: 160, 6 - 6 1/2 down.",\n    "LMP: 5 1/2 down, 9 forward. That\'s good.",\n    "LMP: 120 feet.",\n    "LMP: 100 feet, 3 1/2 down, 9 forward. Five percent.",\n    "LMP: ...",\n    "LMP: Okay. 75 feet. There\'s looking good. Down a half, 6 forward.",\n    "CC:  60 seconds.",\n    "LMP: Lights on. ...",\n    "LMP: Down 2 1/2. Forward. Forward. Good.",\n    "LMP: 40 feet, down 2 1/2. Kicking up some dust.",\n    "LMP: 30 feet, 2 1/2 down. Faint shadow.",\n    "LMP: 4 forward. 4 forward. Drifting to the right a little. Okay. Down a half.",\n    "CC:  30 seconds.",\n    "CDR: Forward drift?",\n    "LMP: Yes.",\n    "LMP: Okay.",\n    "LMP: CONTACT LIGHT.",\n    "LMP: Okay. ENGINE STOP.",\n    "LMP: ACA - out of DETENT.",\n    "CDR: Out of DETENT.",\n    "LMP: MODE CONTROL - both AUTO. DESCENT ENGINE COMMAND OVERRIDE - OFF. ENGINE ARM - OFF.",\n    "LMP: 413 is in.",\n    "CC:  We copy you down, Eagle.",\n    "CDR: Houston, Tranquility Base here.",\n    "CDR: THE EAGLE HAS LANDED."\n]'}),n("example/eventGenerator/src/EventTelemetry",["text!../data/transcript.json"],function(e){"use strict";function t(e,t){var r=Date.now(),o=Math.floor((r-n)/t),s={};return s.getPointCount=function(){return o},s.getDomainValue=function(e,i){return e*t+("delta"!==i?n:0)},s.getRangeValue=function(e,t){var r=this.getDomainValue(e)-n,o=e%i.length;return i[o]+" - ["+r.toString()+"]"},s}var n=Date.now(),i=JSON.parse(e);return t}),n("example/eventGenerator/src/EventTelemetryProvider",["./EventTelemetry"],function(e){"use strict";function t(t,n){function i(e){return"eventGenerator"===e.source}function r(t){return{key:t.key,telemetry:new e(t,d)}}function o(e){var t={};return e.forEach(function(e){t[e.key]=e.telemetry}),{eventGenerator:t}}function s(e){return n(function(){return o(e.filter(i).map(r))},0)}function a(e){u.forEach(function(e){var t=e.requests;e.callback(o(t.filter(i).map(r)))})}function c(){p=!0,n(function(){a(),p&&u.length>0?c():p=!1},d)}function l(e,t){function n(){u=u.filter(function(e){return e!==i})}var i={callback:e,requests:t};return u.push(i),p||c(),n}var u=[],d=1e3,p=!1;1e5*Math.random();return{requestTelemetry:s,subscribe:l}}return t}),n("example/eventGenerator/bundle",["./src/EventTelemetryProvider","legacyRegistry"],function(e,t){"use strict";t.register("example/eventGenerator",{name:"Event Message Generator",description:"For development use. Creates sample event message data that mimics a live data stream.",extensions:{components:[{implementation:e,type:"provider",provides:"telemetryService",depends:["$q","$timeout"]}],types:[{key:"eventGenerator",name:"Event Message Generator",cssClass:"icon-folder-new",description:"For development use. Creates sample event message data that mimics a live data stream.",priority:10,features:"creation",model:{telemetry:{}},telemetry:{source:"eventGenerator",domains:[{key:"time",name:"Time",format:"utc"}],ranges:[{key:"message",name:"Message",format:"string"}]}}]}})}),n("example/export/ExportTelemetryAsCSVAction",[],function(){"use strict";function e(e,t){this.exportService=e,this.context=t}return e.prototype.perform=function(){function e(e){return e.name}var t=this.context,n=t.domainObject,i=n.getCapability("telemetry"),r=i.getMetadata(),o=r.domains,s=r.ranges,a=this.exportService;i.requestData({}).then(function(t){function n(e,n){o.forEach(function(i){e[i.name]=t.getDomainValue(n,i.key)})}function i(e,n){s.forEach(function(i){e[i.name]=t.getRangeValue(n,i.key)})}var r,c,l=o.map(e).concat(s.map(e)),u=[];for(c=0;c<t.getPointCount();c+=1)r={},n(r,c),i(r,c),u.push(r);a.exportCSV(u,{headers:l})})},e.appliesTo=function(e){return e.domainObject&&e.domainObject.hasCapability("telemetry")},e}),n("example/export/bundle",["legacyRegistry","./ExportTelemetryAsCSVAction"],function(e,t){"use strict";e.register("example/export",{name:"Example of using CSV Export",extensions:{actions:[{key:"example.export",name:"Export Telemetry as CSV",implementation:t,category:"contextual",cssClass:"icon-download",depends:["exportService"]}]}})}),n("example/extensions/src/SomeExample",[],function(){"use strict";function e(e,t){return{getText:function(){return['"',e.getMessage(),'" and "',t,'"'].join("")}}}return e}),n("example/extensions/bundle",["./src/SomeExample","legacyRegistry"],function(e,t){"use strict";t.register("example/extensions",{name:"Custom Extensions Examples",description:"Example showing how to declare custom extensions.",sources:"src",extensions:{examples:[{text:"I came from example/extensions"},{implementation:e,depends:["exampleService"]}]}})}),n("example/forms/src/ExampleFormController",[],function(){"use strict";function e(e){e.state={},e.toolbar={name:"An example toolbar.",sections:[{description:"First section",items:[{name:"X",description:"X coordinate",control:"textfield",pattern:"^\\d+$",disabled:!0,size:2,key:"x"},{name:"Y",description:"Y coordinate",control:"textfield",pattern:"^\\d+$",size:2,key:"y"},{name:"W",description:"Cell width",control:"textfield",pattern:"^\\d+$",size:2,key:"w"},{name:"H",description:"Cell height",control:"textfield",pattern:"^\\d+$",size:2,key:"h"}]},{description:"Second section",items:[{control:"button",csslass:"icon-save",click:function(){window.alert("Save")}},{control:"button",csslass:"icon-x",description:"Button B",click:function(){window.alert("Cancel")}},{control:"button",csslass:"icon-trash",description:"Button C",disabled:!0,click:function(){window.alert("Delete")}}]},{items:[{control:"color",key:"color"}]}]},e.form={name:"An example form.",sections:[{name:"First section",rows:[{name:"Check me",control:"checkbox",key:"checkMe"},{name:"Enter your name",required:!0,control:"textfield",key:"yourName"},{name:"Enter a number",control:"textfield",pattern:"^\\d+$",key:"aNumber"}]},{name:"Second section",rows:[{name:"Pick a date",required:!0,description:"Enter date in form YYYY-DDD",control:"datetime",key:"aDate"},{name:"Choose something",control:"select",options:[{name:"Hats",value:"hats"},{name:"Bats",value:"bats"},{name:"Cats",value:"cats"},{name:"Mats",value:"mats"}],key:"aChoice"},{name:"Choose something",control:"select",required:!0,options:[{name:"Hats",value:"hats"},{name:"Bats",value:"bats"},{name:"Cats",value:"cats"},{name:"Mats",value:"mats"}],key:"aRequiredChoice"}]}]}}return e}),n("example/forms/bundle",["./src/ExampleFormController","legacyRegistry"],function(e,t){"use strict";t.register("example/forms",{name:"Declarative Forms example",sources:"src",extensions:{controllers:[{key:"ExampleFormController",implementation:e,depends:["$scope"]}],routes:[{templateUrl:"templates/exampleForm.html"}]}})}),n("example/identity/src/ExampleIdentityService",[],function(){"use strict";function e(e){function i(e){return e}function r(){}this.userPromise=e.getUserInput(n,t).then(i,r)}var t={key:"user",name:"Example User"},n={name:"Identify Yourself",sections:[{rows:[{name:"User ID",control:"textfield",key:"key",required:!0},{name:"Human name",control:"textfield",key:"name",required:!0}]}]};return e.prototype.getUser=function(){return this.userPromise},e}),n("example/identity/bundle",["./src/ExampleIdentityService","legacyRegistry"],function(e,t){"use strict";t.register("example/identity",{extensions:{components:[{implementation:e,provides:"identityService",type:"provider",depends:["dialogService"]}]}})}),n("example/imagery/src/ImageTelemetry",[],function(){"use strict";function e(){return{getPointCount:function(){return Math.floor((Date.now()-t)/1e3)},getDomainValue:function(e,t){return n[e%n.length].timestamp},getRangeValue:function(e,t){return n[e%n.length].url}}}var t=Date.now(),n=["http://www.nasa.gov/393811main_Palomar_ao_bouchez_10s_after_impact_4x3_946-710.png","http://www.nasa.gov/393821main_Palomar_ao_bouchez_15s_after_impact_4x3_946-710.png","http://www.nasa.gov/images/content/393801main_CfhtVeillet2_4x3_516-387.jpg","http://www.nasa.gov/images/content/392790main_1024_768_GeminiNorth_NightBeforeImpact_946-710.jpg"].map(function(e,n){return{timestamp:t+1e3*n,url:e}});return e}),n("example/imagery/src/ImageTelemetryProvider",["./ImageTelemetry"],function(e){"use strict";function t(t,n){function i(e){return"imagery"===e.source}function r(t){return{key:t.key,telemetry:new e}}function o(e){var t={};return e.forEach(function(e){t[e.key]=e.telemetry}),{imagery:t}}function s(e){return n(function(){return o(e.filter(i).map(r))},0)}function a(){u.forEach(function(e){var t=e.requests;e.callback(o(t.filter(i).map(r)))})}function c(){n(function(){a(),u.length>0&&c()},1e3)}function l(e,t){function n(){u=u.filter(function(e){return e!==i})}var i={callback:e,requests:t};return u.push(i),1===u.length&&c(),n}var u=[];return{requestTelemetry:s,subscribe:l}}return t}),n("example/imagery/bundle",["./src/ImageTelemetryProvider","legacyRegistry"],function(e,t){"use strict";t.register("example/imagery",{name:"Imagery",description:"Example of a component that produces image telemetry.",extensions:{components:[{implementation:e,type:"provider",provides:"telemetryService",depends:["$q","$timeout"]}],types:[{key:"imagery",name:"Example Imagery",cssClass:"icon-image",features:"creation",description:"For development use. Creates example imagery data that mimics a live imagery stream.",priority:10,model:{telemetry:{}},telemetry:{source:"imagery",domains:[{name:"Time",key:"time",format:"utc"}],ranges:[{name:"Image",key:"url",format:"imageUrl"}]}}]}})}),n("example/mobile/bundle",["legacyRegistry"],function(e){"use strict";e.register("example/mobile",{name:"Mobile",description:"Allows elements with pertinence to mobile usage and development",extensions:{stylesheets:[{stylesheetUrl:"css/mobile-example.css",priority:"mandatory"}]}})}),n("example/msl/src/MSLDataDictionary",[],function(){return{name:"Mars Science Laboratory",identifier:"msl",instruments:[{name:"rems",identifier:"rems",measurements:[{name:"Min. Air Temperature",identifier:"min_temp",units:"degrees",type:"float"},{name:"Max. Air Temperature",identifier:"max_temp",units:"degrees",type:"float"},{name:"Atmospheric Pressure",identifier:"pressure",units:"pascals",type:"float"},{name:"Min. Ground Temperature",identifier:"min_gts_temp",units:"degrees",type:"float"},{name:"Max. Ground Temperature",identifier:"max_gts_temp",units:"degrees",type:"float"}]}]}}),n("example/msl/src/RemsTelemetryServerAdapter",["./MSLDataDictionary","module"],function(e,t){"use strict";function n(e,n,i,o){this.localDataURI=t.uri.substring(0,t.uri.lastIndexOf("/")+1)+r,this.deferreds={},this.REMS_WS_URL=o,this.$q=e,this.$http=n,this.$log=i,this.cache=void 0}var i="terrestrial_date",r="../data/rems.json";return n.prototype.dictionary=e,n.prototype.requestHistory=function(e){function t(e){var t=[];return s.cache=e,e.data.soles.forEach(function(e){isNaN(e[a])||t.unshift({date:Date.parse(e[i]),value:e[a]})}),t}function n(){return s.$log.warn("Loading REMS data failed, probably due to cross origin policy. Falling back to local data"),s.$http.get(s.localDataURI)}function r(t){return t.filter(function(t){return t.date>=(e.start||Number.MIN_VALUE)&&t.date<=(e.end||Number.MAX_VALUE)})}function o(e){c.resolve({id:a,values:e})}var s=this,a=e.key,c=this.$q.defer();return this.$q.when(this.cache||this.$http.get(this.REMS_WS_URL))["catch"](n).then(t).then(r).then(o),c.promise},n.prototype.history=function(e){e.key;return this.requestHistory(e)},n}),n("example/msl/src/RemsTelemetryModelProvider",[],function(){"use strict";function e(e){function i(e){return 0===e.indexOf(t)}function r(e){return t+e.identifier}function o(e){function t(e,t){var i=n[e.type];o[r(e)]={type:"msl.measurement",name:e.name,location:t,telemetry:{key:e.identifier,ranges:[{key:"value",name:e.units,units:e.units,format:i}]}}}function i(e,n){var i=e.measurements||[],s=r(e);o[s]={type:"msl.instrument",name:e.name,location:n,composition:i.map(r)},i.forEach(function(e){t(e,s)})}var o={};return(e.instruments||[]).forEach(function(e){i(e,"msl:curiosity")}),o}return{getModels:function(t){return t.some(i)?o(e.dictionary):{}}}}var t="msl_tlm:",n={"float":"number",integer:"number",string:"string"};return e}),n("example/msl/src/RemsTelemetrySeries",[],function(){"use strict";function e(e){this.data=e}return e.prototype.getPointCount=function(){return this.data.length},e.prototype.getDomainValue=function(e){return this.data[e].date},e.prototype.getRangeValue=function(e){return this.data[e].value},e}),n("example/msl/src/RemsTelemetryProvider",["./RemsTelemetrySeries"],function(e){"use strict";function t(e,t){this.adapter=e,this.$q=t}var n="rems.source";return t.prototype.requestTelemetry=function(t){function i(e){return e.source===n}function r(t){a[n][t.id]=new e(t.values)}function o(e){return c.history(e).then(r)}var s,a={},c=this.adapter;return s=t.filter(i),a[n]={},this.$q.all(s.map(o)).then(function(){return a})},t.prototype.subscribe=function(e,t){return function(){}},t.prototype.unsubscribe=function(e,t){return function(){}},t}),n("example/msl/bundle",["./src/RemsTelemetryServerAdapter","./src/RemsTelemetryModelProvider","./src/RemsTelemetryProvider","legacyRegistry","module"],function(e,t,n,i){"use strict";i.register("example/msl",{name:"Mars Science Laboratory Data Adapter",extensions:{types:[{name:"Mars Science Laboratory",key:"msl.curiosity",cssClass:"icon-object"},{name:"Instrument",key:"msl.instrument",cssClass:"icon-object",model:{composition:[]}},{name:"Measurement",key:"msl.measurement",cssClass:"icon-telemetry",model:{telemetry:{}},telemetry:{source:"rems.source",domains:[{name:"Time",key:"utc",format:"utc"}]}}],constants:[{key:"REMS_WS_URL",value:"/proxyUrl?url=http://cab.inta-csic.es/rems/wp-content/plugins/marsweather-widget/api.php"}],roots:[{id:"msl:curiosity"}],models:[{id:"msl:curiosity",priority:"preferred",model:{type:"msl.curiosity",name:"Mars Science Laboratory",composition:["msl_tlm:rems"]}}],services:[{key:"rems.adapter",implementation:e,depends:["$q","$http","$log","REMS_WS_URL"]}],components:[{provides:"modelService",type:"provider",implementation:t,depends:["rems.adapter"]},{provides:"telemetryService",type:"provider",implementation:n,depends:["rems.adapter","$q"]}]}})}),n("example/notifications/src/DialogLaunchController",[],function(){"use strict";function e(e,t,n,i,r){e.launchProgress=function(e){function r(){s.progress=Math.min(100,Math.floor(s.progress+30*Math.random())),s.progressText=["Estimated time remaining: about ",60-Math.floor(s.progress/100*60)," seconds"].join(" "),s.progress<100&&t(r,1e3)}var o,s={title:"Progress Dialog Example",progress:0,hint:"Do not navigate away from this page or close this browser tab while this operation is in progress.",actionText:"Calculating...",unknownProgress:!e,unknownDuration:!1,severity:"info",options:[{label:"Cancel Operation",callback:function(){n.debug("Operation cancelled"),o.dismiss()}},{label:"Do something else...",callback:function(){n.debug("Something else pressed")}}]};o=i.showBlockingMessage(s),o?(s.actionText="Processing 100 objects...",e&&t(r,1e3)):n.error("Could not display modal dialog")},e.launchError=function(){var e,t={title:"Error Dialog Example",actionText:"Something happened, and it was not good.",severity:"error",options:[{label:"Try Again",callback:function(){n.debug("Try Again Pressed"),e.dismiss()}},{label:"Cancel",callback:function(){n.debug("Cancel Pressed"),e.dismiss()}}]};e=i.showBlockingMessage(t),e||n.error("Could not display modal dialog")},e.launchInfo=function(){var e,t={title:"Info Dialog Example",actionText:"This is an example of a blocking info dialog. This dialog can be used to draw the user's attention to an event.",severity:"info",primaryOption:{label:"OK",callback:function(){n.debug("OK Pressed"),e.dismiss()}}};e=i.showBlockingMessage(t),e||n.error("Could not display modal dialog")}}return e}),n("example/notifications/src/NotificationLaunchController",[],function(){"use strict";function e(e,t,n,i){function r(){var e=["Adipiscing turpis mauris in enim elementu hac, enim aliquam etiam.","Eros turpis, pulvinar turpis eros eu","Lundium nascetur a, lectus montes ac, parturient in natoque, duis risus risus pulvinar pid rhoncus, habitasse auctor natoque!"];return e[Math.floor(3*Math.random())]}function o(){var e=[{label:"Try Again",callback:function(){n.debug("Try Again pressed")}},{label:"Remove",callback:function(){n.debug("Remove pressed")}},{label:"Cancel",callback:function(){n.debug("Cancel pressed")}}];return e.splice(0,Math.floor(Math.random()*e.length)),e}var s=1;e.newError=function(){i.notify({title:"Example error notification "+s++,hint:"An error has occurred",severity:"error",primaryOption:{label:"Retry",callback:function(){n.info("Retry clicked")}},options:o()})},e.newAlert=function(){i.notify({title:"Alert notification "+s++,hint:"This is an alert message",severity:"alert",primaryOption:{label:"Retry",callback:function(){n.info("Retry clicked")}},options:o()})},e.newProgress=function(){function e(n){n.progress=Math.min(100,Math.floor(n.progress+30*Math.random())),n.progressText=["Estimated time remaining: about ",60-Math.floor(n.progress/100*60)," seconds"].join(" "),n.progress<100&&t(function(){e(n)},1e3)}var n={title:"Progress notification example",severity:"info",progress:0,actionText:r(),unknownProgress:!1};i.notify(n),e(n)},e.newInfo=function(){i.info({title:"Example Info notification "+s++})}}return e}),n("example/notifications/src/DialogLaunchIndicator",[],function(){"use strict";function e(){}return e.template="dialogLaunchTemplate",e.prototype.getGlyphClass=function(){return"ok"},e.prototype.getText=function(){return"Launch test dialog"},e.prototype.getDescription=function(){return"Launch test dialog"},e}),n("example/notifications/src/NotificationLaunchIndicator",[],function(){"use strict";function e(){}return e.template="notificationLaunchTemplate",e.prototype.getGlyphClass=function(){return"ok"},e.prototype.getText=function(){return"Launch notification"},e.prototype.getDescription=function(){return"Launch notification"},e}),n("example/notifications/bundle",["./src/DialogLaunchController","./src/NotificationLaunchController","./src/DialogLaunchIndicator","./src/NotificationLaunchIndicator","legacyRegistry"],function(e,t,n,i,r){"use strict";r.register("example/notifications",{extensions:{templates:[{key:"dialogLaunchTemplate",templateUrl:"dialog-launch.html"},{key:"notificationLaunchTemplate",templateUrl:"notification-launch.html"}],controllers:[{key:"DialogLaunchController",implementation:e,depends:["$scope","$timeout","$log","dialogService","notificationService"]},{key:"NotificationLaunchController",implementation:t,depends:["$scope","$timeout","$log","notificationService"]}],indicators:[{implementation:n,priority:"fallback"},{implementation:i,priority:"fallback"}]}})}),n("example/persistence/src/BrowserPersistenceProvider",[],function(){"use strict";function e(e,t){var n=t?[t]:[],i={},r={as:function(t){return e.when(t)}};return n.forEach(function(e){i[e]={}}),{listSpaces:function(){return r.as(n)},listObjects:function(e){var t=i[e];return r.as(t?Object.keys(t):null)},createObject:function(e,t,n){var o=i[e];return!o||o[t]?r.as(null):(o[t]=n,r.as(!0))},readObject:function(e,t){var n=i[e];return r.as(n?n[t]:null)},updateObject:function(e,t,n){var o=i[e];return o&&o[t]?(o[t]=n,r.as(!0)):r.as(null)},deleteObject:function(e,t,n){var o=i[e];return o&&o[t]?(delete o[t],r.as(!0)):r.as(null)}}}return e}),n("example/persistence/bundle",["./src/BrowserPersistenceProvider","legacyRegistry"],function(e,t){"use strict";t.register("example/persistence",{extensions:{components:[{provides:"persistenceService",type:"provider",implementation:e,depends:["$q","PERSISTENCE_SPACE"]}],constants:[{key:"PERSISTENCE_SPACE",value:"mct"}]}})}),n("platform/commonUI/regions/src/Region",[],function(){function e(e){e=e||{},this.name=e.name,this.content=e.content,this.modes=e.modes,this.regions=[]}return e.prototype.addRegion=function(e,t){t?this.regions.splice(t,0,e):this.regions.push(e)},e.prototype.removeRegion=function(e){"number"==typeof e?this.regions.splice(e,1):"string"==typeof e?this.regions=this.regions.filter(function(t){return t.name!==e}):this.regions.splice(this.regions.indexOf(e),1)},e}),n("platform/commonUI/browse/src/InspectorRegion",["../../regions/src/Region"],function(e){function t(){e.call(this,{name:"Inspector"}),this.buildRegion()}return t.prototype=Object.create(e.prototype),t.prototype.constructor=e,t.prototype.buildRegion=function(){var t={name:"metadata",title:"Metadata Region",modes:["browse","edit"],content:{key:"object-properties"}};this.addRegion(new e(t),0)},t}),n("example/plotOptions/bundle",["legacyRegistry","../../platform/commonUI/browse/src/InspectorRegion","../../platform/commonUI/regions/src/Region"],function(e,t,n){"use strict";var i=new t,r=new n({name:"plot-options",title:"Plot Options",modes:["browse"],content:{key:"plot-options-browse"}}),o=new n({name:"plot-options",title:"Plot Options",modes:["edit"],content:{key:"plot-options-browse"}});i.addRegion(r),i.addRegion(o),e.register("example/plotType",{name:"Plot Type",description:"Example illustrating registration of a new object type",extensions:{types:[{key:"plot",name:"Example Telemetry Plot",cssClass:"icon-telemetry-panel",description:"For development use. A plot for displaying telemetry.",priority:10,delegates:["telemetry"],features:"creation",contains:[{has:"telemetry"}],model:{composition:[]},inspector:i,telemetry:{source:"generator",domains:[{key:"time",name:"Time"},{key:"yesterday",name:"Yesterday"},{key:"delta",name:"Delta",format:"example.delta"}],ranges:[{key:"sin",name:"Sine"},{key:"cos",name:"Cosine"}]},properties:[{name:"Period",control:"textfield",cssClass:"l-input-sm l-numeric",key:"period",required:!0,property:["telemetry","period"],pattern:"^\\d*(\\.\\d*)?$"}]}]}})}),n("example/policy/src/ExamplePolicy",[],function(){"use strict";function e(){return{allow:function(e,t){var n=(t||{}).domainObject,i=n&&n.getModel()||{},r=i.name||"",o=e.getMetadata()||{};return"remove"!==o.key||r.indexOf("foo")<0}}}return e}),n("example/policy/bundle",["./src/ExamplePolicy","legacyRegistry"],function(e,t){"use strict";t.register("example/policy",{name:"Example Policy",description:"Provides an example of using policies to prohibit actions.",extensions:{policies:[{implementation:e,category:"action"}]}})}),n("example/profiling/src/WatchIndicator",[],function(){"use strict";function e(e,t){function n(e){e&&(r+=(e.$$watchers||[]).length,n(e.$$childHead),n(e.$$nextSibling))}function i(){r=0,n(t)}var r=0;return e(i,1e3),i(),{getCssClass:function(){return"icon-database"},getText:function(){return r+" watches"},getDescription:function(){return""}}}return e}),n("example/profiling/src/DigestIndicator",[],function(){"use strict";function e(e,t){function n(){var e=Date.now(),t=(e-s)/1e3;o=Math.round(r/t),s=e,r=0}function i(){r+=1}var r=0,o=0,s=Date.now();return t.$watch(i),e(n,1e3),n(),{getCssClass:function(){return"icon-connectivity"},getText:function(){return o+" digests/sec"},getDescription:function(){return""}}}return e}),n("example/profiling/bundle",["./src/WatchIndicator","./src/DigestIndicator","legacyRegistry"],function(e,t,n){"use strict";n.register("example/profiling",{extensions:{indicators:[{implementation:e,depends:["$interval","$rootScope"]},{implementation:t,depends:["$interval","$rootScope"]}]}})}),n("example/scratchpad/src/ScratchPersistenceProvider",[],function(){"use strict";function e(e){this.$q=e,this.table={}}return e.prototype.listSpaces=function(){return this.$q.when(["scratch"])},e.prototype.listObjects=function(e){return this.$q.when("scratch"===e?Object.keys(this.table):[])},e.prototype.createObject=function(e,t,n){return"scratch"===e&&(this.table[t]=JSON.stringify(n)),this.$q.when("scratch"===e)},e.prototype.readObject=function(e,t){return this.$q.when("scratch"===e&&this.table[t]?JSON.parse(this.table[t]):void 0)},e.prototype.deleteObject=function(e,t,n){return"scratch"===e&&delete this.table[t],this.$q.when("scratch"===e)},e.prototype.updateObject=e.prototype.createObject,e}),n("example/scratchpad/bundle",["./src/ScratchPersistenceProvider","legacyRegistry"],function(e,t){"use strict";t.register("example/scratchpad",{extensions:{roots:[{id:"scratch:root"}],models:[{id:"scratch:root",model:{type:"folder",composition:[],name:"Scratchpad"},priority:"preferred"}],components:[{provides:"persistenceService",type:"provider",implementation:e,depends:["$q"]}]}})}),n("example/taxonomy/src/ExampleTaxonomyModelProvider",[],function(){"use strict";function e(e){var t,n,i,r,o={};for(i=0;3>i;i+=1)for(t="examplePacket"+i,o[t]={name:"Stub Subsystem "+(i+1),type:"telemetry.panel",composition:[]},r=0;100*(i+1)>r;r+=1)n="exampleTelemetry"+r,o[n]={name:"SWG"+i+"."+r,type:"generator",telemetry:{period:10+i+r}},o[t].composition.push(n);return{getModels:function(){return e.when(o)}}}return e}),n("example/taxonomy/bundle",["./src/ExampleTaxonomyModelProvider","legacyRegistry"],function(e,t){"use strict";t.register("example/taxonomy",{name:"Example taxonomy",description:"Example illustrating the addition of a static top-level hierarchy",extensions:{roots:[{id:"exampleTaxonomy"}],models:[{id:"exampleTaxonomy",model:{type:"folder",name:"Stub Subsystems",composition:["examplePacket0","examplePacket1","examplePacket2"]}}],components:[{provides:"modelService",type:"provider",implementation:e,depends:["$q"]}]}})}),n("example/worker/src/FibonacciIndicator",[],function(){"use strict";function e(e,t){function n(){s.postMessage([o]),o+=1}function i(e){r=e.data,t.$apply(),n()}var r,o=0,s=e.run("example.fibonacci");return s.onmessage=i,n(),{getCssClass:function(){return"icon-object-unknown"},getText:function(){return r},getDescription:function(){return""}}}return e}),n("example/worker/bundle",["./src/FibonacciIndicator","legacyRegistry"],function(e,t){"use strict";t.register("example/worker",{extensions:{indicators:[{implementation:e,depends:["workerService","$rootScope"]}],workers:[{key:"example.fibonacci",scriptUrl:"FibonacciWorker.js"}]}})}),n("platform/features/conductor/core/src/timeSystems/TimeSystem",[],function(){function e(){this.metadata=void 0}return e.prototype.formats=function(){throw new Error("Not implemented")},e.prototype.deltaFormat=function(){throw new Error("Not implemented")},e.prototype.tickSources=function(){throw new Error("Not implemented")},e.prototype.defaults=function(){throw new Error("Not implemented")},e.prototype.isUTCBased=function(){return!0},e}),n("platform/features/conductor/core/src/timeSystems/TickSource",[],function(){function e(){this.listeners=[]}return e.prototype.listen=function(e){throw new Error("Not implemented")},e}),n("platform/features/conductor/core/src/timeSystems/LocalClock",["./TickSource"],function(e){function t(t,n){e.call(this),this.metadata={key:"local",mode:"realtime",cssClass:"icon-clock",label:"Real-time",name:"Real-time Mode",description:"Monitor real-time streaming data as it comes in. The Time Conductor and displays will automatically advance themselves based on a UTC clock."},this.period=n,this.$timeout=t,this.timeoutHandle=void 0}return t.prototype=Object.create(e.prototype),t.prototype.start=function(){this.timeoutHandle=this.$timeout(this.tick.bind(this),this.period)},t.prototype.stop=function(){this.timeoutHandle&&this.$timeout.cancel(this.timeoutHandle)},t.prototype.tick=function(){var e=Date.now();this.listeners.forEach(function(t){t(e)}),this.timeoutHandle=this.$timeout(this.tick.bind(this),this.period)},t.prototype.listen=function(e){var t=this.listeners;return t.push(e),1===t.length&&this.start(),function(){t.splice(t.indexOf(e)),0===t.length&&this.stop()}.bind(this)},t}),n("example/localTimeSystem/src/LADTickSource",["../../../platform/features/conductor/core/src/timeSystems/LocalClock"],function(e){function t(t,n){e.call(this,t,n),this.metadata={key:"test-lad",mode:"lad",cssClass:"icon-clock",label:"Latest Available Data",name:"Latest available data",description:"Monitor real-time streaming data as it comes in. The Time Conductor and displays will automatically advance themselves based on a UTC clock."}}return t.prototype=Object.create(e.prototype),t}),n("example/localTimeSystem/src/LocalTimeSystem",["../../../platform/features/conductor/core/src/timeSystems/TimeSystem","../../../platform/features/conductor/core/src/timeSystems/LocalClock","./LADTickSource"],function(e,t,n){function i(i){e.call(this),this.metadata={key:"local",name:"Local",glyph:"C"},this.fmts=["local-format"],this.sources=[new t(i,o),new n(i,o)]}var r=18e5,o=1e3;return i.prototype=Object.create(e.prototype),i.prototype.formats=function(){return this.fmts},i.prototype.deltaFormat=function(){return"duration"},i.prototype.tickSources=function(){return this.sources},i.prototype.defaults=function(e){var t=1e3*Math.ceil(Date.now()/1e3);return{key:"local-default",name:"Local 12 hour time system defaults",deltas:{start:r,end:0},bounds:{start:t-r,end:t}}},i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof n&&n.amd?n("moment",t):e.moment=t()}(this,function(){"use strict";function e(){return gi.apply(null,arguments)}function n(e){gi=e}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){var t;for(t in e)return!1;return!0}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,n,i){return vt(e,t,n,i,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function f(e){return null==e._pf&&(e._pf=p()),e._pf}function h(e){if(null==e._isValid){var t=f(e),n=vi.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),
null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=d(NaN);return null!=e?u(f(t),e):f(t).userInvalidated=!0,t}function g(e){return void 0===e}function y(e,t){var n,i,r;if(g(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),g(t._i)||(e._i=t._i),g(t._f)||(e._f=t._f),g(t._l)||(e._l=t._l),g(t._strict)||(e._strict=t._strict),g(t._tzm)||(e._tzm=t._tzm),g(t._isUTC)||(e._isUTC=t._isUTC),g(t._offset)||(e._offset=t._offset),g(t._pf)||(e._pf=f(t)),g(t._locale)||(e._locale=t._locale),bi.length>0)for(n in bi)i=bi[n],r=t[i],g(r)||(e[i]=r);return e}function v(t){y(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),wi===!1&&(wi=!0,e.updateOffset(this),wi=!1)}function b(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function w(e){return 0>e?Math.ceil(e)||0:Math.floor(e)}function S(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=w(t)),n}function x(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&S(e[i])!==S(t[i]))&&s++;return s+o}function C(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,n){var i=!0;return u(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),i){for(var r,o=[],s=0;s<arguments.length;s++){if(r="","object"==typeof arguments[s]){r+="\n["+s+"] ";for(var a in arguments[0])r+=a+": "+arguments[0][a]+", ";r=r.slice(0,-2)}else r=arguments[s];o.push(r)}C(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),i=!1}return n.apply(this,arguments)},n)}function k(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),Si[t]||(C(n),Si[t]=!0)}function M(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e){var t,n;for(n in e)t=e[n],M(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function $(e,t){var n,i=u({},e);for(n in t)l(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},u(i[n],e[n]),u(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)l(e,n)&&!l(t,n)&&r(e[n])&&(i[n]=u({},i[n]));return i}function _(e){null!=e&&this.set(e)}function A(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return M(i)?i.call(t,n):i}function E(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function I(){return this._invalidDate}function L(e){return this._ordinal.replace("%d",e)}function N(e,t,n,i){var r=this._relativeTime[n];return M(r)?r(e,t,n,i):r.replace(/%d/i,e)}function D(e,t){var n=this._relativeTime[e>0?"future":"past"];return M(n)?n(t):n.replace(/%s/i,t)}function j(e,t){var n=e.toLowerCase();Ei[n]=Ei[n+"s"]=Ei[t]=e}function R(e){return"string"==typeof e?Ei[e]||Ei[e.toLowerCase()]:void 0}function P(e){var t,n,i={};for(n in e)l(e,n)&&(t=R(n),t&&(i[t]=e[n]));return i}function U(e,t){Ii[e]=t}function F(e){var t=[];for(var n in e)t.push({unit:n,priority:Ii[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function V(t,n){return function(i){return null!=i?(q(this,t,i),e.updateOffset(this,n),this):B(this,t)}}function B(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function Y(e){return e=R(e),M(this[e])?this[e]():this}function z(e,t){if("object"==typeof e){e=P(e);for(var n=F(e),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit])}else if(e=R(e),M(this[e]))return this[e](t);return this}function H(e,t,n){var i=""+Math.abs(e),r=t-i.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function W(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(ji[e]=r),t&&(ji[t[0]]=function(){return H(r.apply(this,arguments),t[1],t[2])}),n&&(ji[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function G(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function K(e){var t,n,i=e.match(Li);for(t=0,n=i.length;n>t;t++)ji[i[t]]?i[t]=ji[i[t]]:i[t]=G(i[t]);return function(t){var r,o="";for(r=0;n>r;r++)o+=i[r]instanceof Function?i[r].call(t,e):i[r];return o}}function Z(e,t){return e.isValid()?(t=X(t,e.localeData()),Di[t]=Di[t]||K(t),Di[t](e)):e.localeData().invalidDate()}function X(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Ni.lastIndex=0;i>=0&&Ni.test(e);)e=e.replace(Ni,n),Ni.lastIndex=0,i-=1;return e}function J(e,t,n){er[e]=M(t)?t:function(e,i){return e&&n?n:t}}function Q(e,t){return l(er,e)?er[e](t._strict,t._locale):new RegExp(ee(e))}function ee(e){return te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}))}function te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ne(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),s(t)&&(i=function(e,n){n[t]=S(e)}),n=0;n<e.length;n++)tr[e[n]]=i}function ie(e,t){ne(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function re(e,t,n){null!=t&&l(tr,e)&&tr[e](t,n._a,n,e)}function oe(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function se(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||pr).test(t)?"format":"standalone"][e.month()]:this._months}function ae(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[pr.test(t)?"format":"standalone"][e.month()]:this._monthsShort}function ce(e,t,n){var i,r,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;12>i;++i)o=d([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(r=dr.call(this._shortMonthsParse,s),-1!==r?r:null):(r=dr.call(this._longMonthsParse,s),-1!==r?r:null):"MMM"===t?(r=dr.call(this._shortMonthsParse,s),-1!==r?r:(r=dr.call(this._longMonthsParse,s),-1!==r?r:null)):(r=dr.call(this._longMonthsParse,s),-1!==r?r:(r=dr.call(this._shortMonthsParse,s),-1!==r?r:null))}function le(e,t,n){var i,r,o;if(this._monthsParseExact)return ce.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=d([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function ue(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=S(t);else if(t=e.localeData().monthsParse(t),!s(t))return e;return n=Math.min(e.date(),oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function de(t){return null!=t?(ue(this,t),e.updateOffset(this,!0),this):B(this,"Month")}function pe(){return oe(this.year(),this.month())}function fe(e){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=mr),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function he(e){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=gr),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function me(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],o=[];for(t=0;12>t;t++)n=d([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),o.sort(e),t=0;12>t;t++)i[t]=te(i[t]),r[t]=te(r[t]);for(t=0;24>t;t++)o[t]=te(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ge(e){return ye(e)?366:365}function ye(e){return e%4===0&&e%100!==0||e%400===0}function ve(){return ye(this.year())}function be(e,t,n,i,r,o,s){var a=new Date(e,t,n,i,r,o,s);return 100>e&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function we(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Se(e,t,n){var i=7+t-n,r=(7+we(e,0,i).getUTCDay()-t)%7;return-r+i-1}function xe(e,t,n,i,r){var o,s,a=(7+n-i)%7,c=Se(e,i,r),l=1+7*(t-1)+a+c;return 0>=l?(o=e-1,s=ge(o)+l):l>ge(e)?(o=e+1,s=l-ge(e)):(o=e,s=l),{year:o,dayOfYear:s}}function Ce(e,t,n){var i,r,o=Se(e.year(),t,n),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return 1>s?(r=e.year()-1,i=s+Te(r,t,n)):s>Te(e.year(),t,n)?(i=s-Te(e.year(),t,n),r=e.year()+1):(r=e.year(),i=s),{week:i,year:r}}function Te(e,t,n){var i=Se(e,t,n),r=Se(e+1,t,n);return(ge(e)-i+r)/7}function ke(e){return Ce(e,this._week.dow,this._week.doy).week}function Me(){return this._week.dow}function Oe(){return this._week.doy}function $e(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function _e(e){var t=Ce(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ae(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ee(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ie(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:this._weekdays}function Le(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ne(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function De(e,t,n){var i,r,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;7>i;++i)o=d([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(r=dr.call(this._weekdaysParse,s),-1!==r?r:null):"ddd"===t?(r=dr.call(this._shortWeekdaysParse,s),-1!==r?r:null):(r=dr.call(this._minWeekdaysParse,s),-1!==r?r:null):"dddd"===t?(r=dr.call(this._weekdaysParse,s),-1!==r?r:(r=dr.call(this._shortWeekdaysParse,s),-1!==r?r:(r=dr.call(this._minWeekdaysParse,s),-1!==r?r:null))):"ddd"===t?(r=dr.call(this._shortWeekdaysParse,s),-1!==r?r:(r=dr.call(this._weekdaysParse,s),-1!==r?r:(r=dr.call(this._minWeekdaysParse,s),-1!==r?r:null))):(r=dr.call(this._minWeekdaysParse,s),-1!==r?r:(r=dr.call(this._weekdaysParse,s),-1!==r?r:(r=dr.call(this._shortWeekdaysParse,s),-1!==r?r:null)))}function je(e,t,n){var i,r,o;if(this._weekdaysParseExact)return De.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;7>i;i++){if(r=d([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Re(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ae(e,this.localeData()),this.add(e-t,"d")):t}function Pe(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ue(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ee(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Fe(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=xr),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ve(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Cr),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Be(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Tr),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function qe(){function e(e,t){return t.length-e.length}var t,n,i,r,o,s=[],a=[],c=[],l=[];for(t=0;7>t;t++)n=d([2e3,1]).day(t),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),o=this.weekdays(n,""),s.push(i),a.push(r),c.push(o),l.push(i),l.push(r),l.push(o);for(s.sort(e),a.sort(e),c.sort(e),l.sort(e),t=0;7>t;t++)a[t]=te(a[t]),c[t]=te(c[t]),l[t]=te(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ye(){return this.hours()%12||12}function ze(){return this.hours()||24}function He(e,t){W(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function We(e,t){return t._meridiemParse}function Ge(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ke(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ze(e){return e?e.toLowerCase().replace("_","-"):e}function Xe(e){for(var t,n,i,r,o=0;o<e.length;){for(r=Ze(e[o]).split("-"),t=r.length,n=Ze(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=Je(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&x(r,n,!0)>=t-1)break;t--}o++}return null}function Je(e){var n=null;if(!_r[e]&&"undefined"!=typeof module&&module&&module.exports)try{n=kr._abbr,t("./locale/"+e),Qe(n)}catch(i){}return _r[e]}function Qe(e,t){var n;return e&&(n=g(t)?nt(e):et(e,t),n&&(kr=n)),kr._abbr}function et(e,t){if(null!==t){var n=$r;if(t.abbr=e,null!=_r[e])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=_r[e]._config;else if(null!=t.parentLocale){if(null==_r[t.parentLocale])return Ar[t.parentLocale]||(Ar[t.parentLocale]=[]),Ar[t.parentLocale].push({name:e,config:t}),null;n=_r[t.parentLocale]._config}return _r[e]=new _($(n,t)),Ar[e]&&Ar[e].forEach(function(e){et(e.name,e.config)}),Qe(e),_r[e]}return delete _r[e],null}function tt(e,t){if(null!=t){var n,i=$r;null!=_r[e]&&(i=_r[e]._config),t=$(i,t),n=new _(t),n.parentLocale=_r[e],_r[e]=n,Qe(e)}else null!=_r[e]&&(null!=_r[e].parentLocale?_r[e]=_r[e].parentLocale:null!=_r[e]&&delete _r[e]);return _r[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return kr;if(!i(e)){if(t=Je(e))return t;e=[e]}return Xe(e)}function it(){return Ti(_r)}function rt(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ir]<0||n[ir]>11?ir:n[rr]<1||n[rr]>oe(n[nr],n[ir])?rr:n[or]<0||n[or]>24||24===n[or]&&(0!==n[sr]||0!==n[ar]||0!==n[cr])?or:n[sr]<0||n[sr]>59?sr:n[ar]<0||n[ar]>59?ar:n[cr]<0||n[cr]>999?cr:-1,f(e)._overflowDayOfYear&&(nr>t||t>rr)&&(t=rr),f(e)._overflowWeeks&&-1===t&&(t=lr),f(e)._overflowWeekday&&-1===t&&(t=ur),f(e).overflow=t),e}function ot(e){var t,n,i,r,o,s,a=e._i,c=Er.exec(a)||Ir.exec(a);if(c){for(f(e).iso=!0,t=0,n=Nr.length;n>t;t++)if(Nr[t][1].exec(c[1])){r=Nr[t][0],i=Nr[t][2]!==!1;break}if(null==r)return void(e._isValid=!1);if(c[3]){for(t=0,n=Dr.length;n>t;t++)if(Dr[t][1].exec(c[3])){o=(c[2]||" ")+Dr[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(c[4]){if(!Lr.exec(c[4]))return void(e._isValid=!1);s="Z"}e._f=r+(o||"")+(s||""),dt(e)}else e._isValid=!1}function st(t){var n=jr.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(ot(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function at(e,t,n){return null!=e?e:null!=t?t:n}function ct(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function lt(e){var t,n,i,r,o=[];if(!e._d){for(i=ct(e),e._w&&null==e._a[rr]&&null==e._a[ir]&&ut(e),e._dayOfYear&&(r=at(e._a[nr],i[nr]),e._dayOfYear>ge(r)&&(f(e)._overflowDayOfYear=!0),n=we(r,0,e._dayOfYear),e._a[ir]=n.getUTCMonth(),e._a[rr]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[or]&&0===e._a[sr]&&0===e._a[ar]&&0===e._a[cr]&&(e._nextDay=!0,e._a[or]=0),e._d=(e._useUTC?we:be).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[or]=24)}}function ut(e){var t,n,i,r,o,s,a,c;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,s=4,n=at(t.GG,e._a[nr],Ce(bt(),1,4).year),i=at(t.W,1),r=at(t.E,1),(1>r||r>7)&&(c=!0);else{o=e._locale._week.dow,s=e._locale._week.doy;var l=Ce(bt(),o,s);n=at(t.gg,e._a[nr],l.year),i=at(t.w,l.week),null!=t.d?(r=t.d,(0>r||r>6)&&(c=!0)):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(c=!0)):r=o}1>i||i>Te(n,o,s)?f(e)._overflowWeeks=!0:null!=c?f(e)._overflowWeekday=!0:(a=xe(n,i,r,o,s),e._a[nr]=a.year,e._dayOfYear=a.dayOfYear)}function dt(t){if(t._f===e.ISO_8601)return void ot(t);t._a=[],f(t).empty=!0;var n,i,r,o,s,a=""+t._i,c=a.length,l=0;for(r=X(t._f,t._locale).match(Li)||[],n=0;n<r.length;n++)o=r[n],i=(a.match(Q(o,t))||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&f(t).unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),l+=i.length),ji[o]?(i?f(t).empty=!1:f(t).unusedTokens.push(o),re(o,i,t)):t._strict&&!i&&f(t).unusedTokens.push(o);f(t).charsLeftOver=c-l,a.length>0&&f(t).unusedInput.push(a),t._a[or]<=12&&f(t).bigHour===!0&&t._a[or]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[or]=pt(t._locale,t._a[or],t._meridiem),lt(t),rt(t)}function pt(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function ft(e){var t,n,i,r,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,t=y({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],dt(t),h(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==i||i>o)&&(i=o,n=t));u(e,n||t)}function ht(e){if(!e._d){var t=P(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lt(e)}}function mt(e){var t=new v(rt(gt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function gt(e){var t=e._i,n=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===n&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new v(rt(t)):(a(t)?e._d=t:i(n)?ft(e):n?dt(e):yt(e),h(e)||(e._d=null),e))}function yt(t){var n=t._i;void 0===n?t._d=new Date(e.now()):a(n)?t._d=new Date(n.valueOf()):"string"==typeof n?st(t):i(n)?(t._a=c(n.slice(0),function(e){return parseInt(e,10)}),lt(t)):"object"==typeof n?ht(t):s(n)?t._d=new Date(n):e.createFromInputFallback(t)}function vt(e,t,n,s,a){var c={};return(n===!0||n===!1)&&(s=n,n=void 0),(r(e)&&o(e)||i(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=n,c._i=e,c._f=t,c._strict=s,mt(c)}function bt(e,t,n,i){return vt(e,t,n,i,!1)}function wt(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function St(){var e=[].slice.call(arguments,0);return wt("isBefore",e)}function xt(){var e=[].slice.call(arguments,0);return wt("isAfter",e)}function Ct(e){var t=P(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||0,s=t.day||0,a=t.hour||0,c=t.minute||0,l=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*l+6e4*c+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=nt(),this._bubble()}function Tt(e){return e instanceof Ct}function kt(e){return 0>e?-1*Math.round(-1*e):Math.round(e)}function Mt(e,t){W(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+H(~~(e/60),2)+t+H(~~e%60,2)})}function Ot(e,t){var n=(t||"").match(e);if(null===n)return null;var i=n[n.length-1]||[],r=(i+"").match(Fr)||["-",0,0],o=+(60*r[1])+S(r[2]);return 0===o?0:"+"===r[0]?o:-o}function $t(t,n){var i,r;return n._isUTC?(i=n.clone(),r=(b(t)||a(t)?t.valueOf():bt(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+r),e.updateOffset(i,!1),i):bt(t).local()}function _t(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function At(t,n){var i,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(t=Ot(Xi,t),null===t)return this}else Math.abs(t)<16&&(t=60*t);return!this._isUTC&&n&&(i=_t(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!n||this._changeInProgress?Ht(this,Vt(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:_t(this)}function Et(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function It(e){return this.utcOffset(0,e)}function Lt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(_t(this),"m")),this}function Nt(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=Ot(Zi,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Dt(e){return this.isValid()?(e=e?bt(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function jt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Rt(){if(!g(this._isDSTShifted))return this._isDSTShifted;var e={};if(y(e,this),e=gt(e),e._a){var t=e._isUTC?d(e._a):bt(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Pt(){return this.isValid()?!this._isUTC:!1}function Ut(){return this.isValid()?this._isUTC:!1}function Ft(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Vt(e,t){var n,i,r,o=e,a=null;return Tt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(o={},t?o[t]=e:o.milliseconds=e):(a=Vr.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:S(a[rr])*n,h:S(a[or])*n,m:S(a[sr])*n,s:S(a[ar])*n,ms:S(kt(1e3*a[cr]))*n}):(a=Br.exec(e))?(n="-"===a[1]?-1:1,o={y:Bt(a[2],n),M:Bt(a[3],n),w:Bt(a[4],n),d:Bt(a[5],n),h:Bt(a[6],n),m:Bt(a[7],n),s:Bt(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Yt(bt(o.from),bt(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new Ct(o),Tt(e)&&l(e,"_locale")&&(i._locale=e._locale),i}function Bt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function qt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Yt(e,t){var n;return e.isValid()&&t.isValid()?(t=$t(t,e),e.isBefore(t)?n=qt(e,t):(n=qt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function zt(e,t){return function(n,i){var r,o;return null===i||isNaN(+i)||(k(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=Vt(n,i),Ht(this,r,e),this}}function Ht(t,n,i,r){var o=n._milliseconds,s=kt(n._days),a=kt(n._months);t.isValid()&&(r=null==r?!0:r,o&&t._d.setTime(t._d.valueOf()+o*i),s&&q(t,"Date",B(t,"Date")+s*i),a&&ue(t,B(t,"Month")+a*i),r&&e.updateOffset(t,s||a))}function Wt(e,t){var n=e.diff(t,"days",!0);return-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse"}function Gt(t,n){var i=t||bt(),r=$t(i,this).startOf("day"),o=e.calendarFormat(this,r)||"sameElse",s=n&&(M(n[o])?n[o].call(this,i):n[o]);return this.format(s||this.localeData().calendar(o,this,bt(i)))}function Kt(){return new v(this)}function Zt(e,t){var n=b(e)?e:bt(e);return this.isValid()&&n.isValid()?(t=R(g(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function Xt(e,t){var n=b(e)?e:bt(e);return this.isValid()&&n.isValid()?(t=R(g(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function Jt(e,t,n,i){return i=i||"()",("("===i[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))}function Qt(e,t){var n,i=b(e)?e:bt(e);return this.isValid()&&i.isValid()?(t=R(t||"millisecond"),"millisecond"===t?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function en(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function tn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function nn(e,t,n){var i,r,o,s;return this.isValid()?(i=$t(e,this),i.isValid()?(r=6e4*(i.utcOffset()-this.utcOffset()),t=R(t),"year"===t||"month"===t||"quarter"===t?(s=rn(this,i),"quarter"===t?s/=3:"year"===t&&(s/=12)):(o=this-i,s="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-r)/864e5:"week"===t?(o-r)/6048e5:o),n?s:w(s)):NaN):NaN}function rn(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(r,"months");return 0>t-o?(n=e.clone().add(r-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(r+1,"months"),i=(t-o)/(n-o)),-(r+i)||0}function on(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function sn(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?M(Date.prototype.toISOString)?this.toDate().toISOString():Z(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Z(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function an(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]';return this.format(n+i+r+o)}function cn(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=Z(this,t);return this.localeData().postformat(n)}function ln(e,t){return this.isValid()&&(b(e)&&e.isValid()||bt(e).isValid())?Vt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function un(e){return this.from(bt(),e)}function dn(e,t){return this.isValid()&&(b(e)&&e.isValid()||bt(e).isValid())?Vt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pn(e){return this.to(bt(),e)}function fn(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function hn(){return this._locale}function mn(e){switch(e=R(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function gn(e){return e=R(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function yn(){return this._d.valueOf()-6e4*(this._offset||0)}function vn(){return Math.floor(this.valueOf()/1e3)}function bn(){return new Date(this.valueOf())}function wn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Sn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function xn(){return this.isValid()?this.toISOString():null}function Cn(){return h(this)}function Tn(){return u({},f(this))}function kn(){return f(this).overflow}function Mn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function On(e,t){W(0,[e,e.length],0,t)}function $n(e){return In.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function _n(e){return In.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function An(){return Te(this.year(),1,4)}function En(){var e=this.localeData()._week;return Te(this.year(),e.dow,e.doy)}function In(e,t,n,i,r){var o;return null==e?Ce(this,i,r).year:(o=Te(e,i,r),t>o&&(t=o),Ln.call(this,e,t,n,i,r))}function Ln(e,t,n,i,r){var o=xe(e,t,n,i,r),s=we(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Nn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Dn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function jn(e,t){t[cr]=S(1e3*("0."+e))}function Rn(){return this._isUTC?"UTC":""}function Pn(){return this._isUTC?"Coordinated Universal Time":""}function Un(e){return bt(1e3*e)}function Fn(){return bt.apply(null,arguments).parseZone()}function Vn(e){return e}function Bn(e,t,n,i){var r=nt(),o=d().set(i,t);return r[n](o,e)}function qn(e,t,n){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return Bn(e,t,n,"month");var i,r=[];for(i=0;12>i;i++)r[i]=Bn(e,i,n,"month");return r}function Yn(e,t,n,i){"boolean"==typeof e?(s(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,s(t)&&(n=t,t=void 0),t=t||"");var r=nt(),o=e?r._week.dow:0;if(null!=n)return Bn(t,(n+o)%7,i,"day");var a,c=[];for(a=0;7>a;a++)c[a]=Bn(t,(a+o)%7,i,"day");return c}function zn(e,t){return qn(e,t,"months")}function Hn(e,t){return qn(e,t,"monthsShort")}function Wn(e,t,n){return Yn(e,t,n,"weekdays")}function Gn(e,t,n){return Yn(e,t,n,"weekdaysShort")}function Kn(e,t,n){return Yn(e,t,n,"weekdaysMin")}function Zn(){var e=this._data;return this._milliseconds=Qr(this._milliseconds),this._days=Qr(this._days),this._months=Qr(this._months),e.milliseconds=Qr(e.milliseconds),e.seconds=Qr(e.seconds),e.minutes=Qr(e.minutes),e.hours=Qr(e.hours),e.months=Qr(e.months),e.years=Qr(e.years),this}function Xn(e,t,n,i){var r=Vt(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Jn(e,t){return Xn(this,e,t,1)}function Qn(e,t){return Xn(this,e,t,-1)}function ei(e){return 0>e?Math.floor(e):Math.ceil(e)}function ti(){var e,t,n,i,r,o=this._milliseconds,s=this._days,a=this._months,c=this._data;return o>=0&&s>=0&&a>=0||0>=o&&0>=s&&0>=a||(o+=864e5*ei(ii(a)+s),s=0,a=0),c.milliseconds=o%1e3,e=w(o/1e3),c.seconds=e%60,t=w(e/60),c.minutes=t%60,n=w(t/60),c.hours=n%24,s+=w(n/24),r=w(ni(s)),a+=r,s-=ei(ii(r)),i=w(a/12),a%=12,c.days=s,c.months=a,c.years=i,this}function ni(e){return 4800*e/146097}function ii(e){return 146097*e/4800}function ri(e){var t,n,i=this._milliseconds;if(e=R(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+ni(t),"month"===e?n:n/12;
switch(t=this._days+Math.round(ii(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function oi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12)}function si(e){return function(){return this.as(e)}}function ai(e){return e=R(e),this[e+"s"]()}function ci(e){return function(){return this._data[e]}}function li(){return w(this.days()/7)}function ui(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function di(e,t,n){var i=Vt(e).abs(),r=go(i.as("s")),o=go(i.as("m")),s=go(i.as("h")),a=go(i.as("d")),c=go(i.as("M")),l=go(i.as("y")),u=r<yo.s&&["s",r]||1>=o&&["m"]||o<yo.m&&["mm",o]||1>=s&&["h"]||s<yo.h&&["hh",s]||1>=a&&["d"]||a<yo.d&&["dd",a]||1>=c&&["M"]||c<yo.M&&["MM",c]||1>=l&&["y"]||["yy",l];return u[2]=t,u[3]=+e>0,u[4]=n,ui.apply(null,u)}function pi(e){return void 0===e?go:"function"==typeof e?(go=e,!0):!1}function fi(e,t){return void 0===yo[e]?!1:void 0===t?yo[e]:(yo[e]=t,!0)}function hi(e){var t=this.localeData(),n=di(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function mi(){var e,t,n,i=vo(this._milliseconds)/1e3,r=vo(this._days),o=vo(this._months);e=w(i/60),t=w(e/60),i%=60,e%=60,n=w(o/12),o%=12;var s=n,a=o,c=r,l=t,u=e,d=i,p=this.asSeconds();return p?(0>p?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(c?c+"D":"")+(l||u||d?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var gi,yi;yi=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;n>i;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var vi=yi,bi=e.momentProperties=[],wi=!1,Si={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var xi;xi=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Ci,Ti=xi,ki={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Mi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Oi="Invalid date",$i="%d",_i=/\d{1,2}/,Ai={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ei={},Ii={},Li=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ni=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Di={},ji={},Ri=/\d/,Pi=/\d\d/,Ui=/\d{3}/,Fi=/\d{4}/,Vi=/[+-]?\d{6}/,Bi=/\d\d?/,qi=/\d\d\d\d?/,Yi=/\d\d\d\d\d\d?/,zi=/\d{1,3}/,Hi=/\d{1,4}/,Wi=/[+-]?\d{1,6}/,Gi=/\d+/,Ki=/[+-]?\d+/,Zi=/Z|[+-]\d\d:?\d\d/gi,Xi=/Z|[+-]\d\d(?::?\d\d)?/gi,Ji=/[+-]?\d+(\.\d{1,3})?/,Qi=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,er={},tr={},nr=0,ir=1,rr=2,or=3,sr=4,ar=5,cr=6,lr=7,ur=8;Ci=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var dr=Ci;W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),W("MMMM",0,0,function(e){return this.localeData().months(this,e)}),j("month","M"),U("month",8),J("M",Bi),J("MM",Bi,Pi),J("MMM",function(e,t){return t.monthsShortRegex(e)}),J("MMMM",function(e,t){return t.monthsRegex(e)}),ne(["M","MM"],function(e,t){t[ir]=S(e)-1}),ne(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[ir]=r:f(n).invalidMonth=e});var pr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,fr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),hr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mr=Qi,gr=Qi;W("Y",0,0,function(){var e=this.year();return 9999>=e?""+e:"+"+e}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),j("year","y"),U("year",1),J("Y",Ki),J("YY",Bi,Pi),J("YYYY",Hi,Fi),J("YYYYY",Wi,Vi),J("YYYYYY",Wi,Vi),ne(["YYYYY","YYYYYY"],nr),ne("YYYY",function(t,n){n[nr]=2===t.length?e.parseTwoDigitYear(t):S(t)}),ne("YY",function(t,n){n[nr]=e.parseTwoDigitYear(t)}),ne("Y",function(e,t){t[nr]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return S(e)+(S(e)>68?1900:2e3)};var yr=V("FullYear",!0);W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),j("week","w"),j("isoWeek","W"),U("week",5),U("isoWeek",5),J("w",Bi),J("ww",Bi,Pi),J("W",Bi),J("WW",Bi,Pi),ie(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=S(e)});var vr={dow:0,doy:6};W("d",0,"do","day"),W("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),W("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),W("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),j("day","d"),j("weekday","e"),j("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),J("d",Bi),J("e",Bi),J("E",Bi),J("dd",function(e,t){return t.weekdaysMinRegex(e)}),J("ddd",function(e,t){return t.weekdaysShortRegex(e)}),J("dddd",function(e,t){return t.weekdaysRegex(e)}),ie(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:f(n).invalidWeekday=e}),ie(["d","e","E"],function(e,t,n,i){t[i]=S(e)});var br="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),wr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Sr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),xr=Qi,Cr=Qi,Tr=Qi;W("H",["HH",2],0,"hour"),W("h",["hh",2],0,Ye),W("k",["kk",2],0,ze),W("hmm",0,0,function(){return""+Ye.apply(this)+H(this.minutes(),2)}),W("hmmss",0,0,function(){return""+Ye.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)}),He("a",!0),He("A",!1),j("hour","h"),U("hour",13),J("a",We),J("A",We),J("H",Bi),J("h",Bi),J("HH",Bi,Pi),J("hh",Bi,Pi),J("hmm",qi),J("hmmss",Yi),J("Hmm",qi),J("Hmmss",Yi),ne(["H","HH"],or),ne(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ne(["h","hh"],function(e,t,n){t[or]=S(e),f(n).bigHour=!0}),ne("hmm",function(e,t,n){var i=e.length-2;t[or]=S(e.substr(0,i)),t[sr]=S(e.substr(i)),f(n).bigHour=!0}),ne("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[or]=S(e.substr(0,i)),t[sr]=S(e.substr(i,2)),t[ar]=S(e.substr(r)),f(n).bigHour=!0}),ne("Hmm",function(e,t,n){var i=e.length-2;t[or]=S(e.substr(0,i)),t[sr]=S(e.substr(i))}),ne("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[or]=S(e.substr(0,i)),t[sr]=S(e.substr(i,2)),t[ar]=S(e.substr(r))});var kr,Mr=/[ap]\.?m?\.?/i,Or=V("Hours",!0),$r={calendar:ki,longDateFormat:Mi,invalidDate:Oi,ordinal:$i,ordinalParse:_i,relativeTime:Ai,months:fr,monthsShort:hr,week:vr,weekdays:br,weekdaysMin:Sr,weekdaysShort:wr,meridiemParse:Mr},_r={},Ar={},Er=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ir=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Lr=/Z|[+-]\d\d(?::?\d\d)?/,Nr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Dr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],jr=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=T("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){};var Rr=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:m()}),Pr=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}),Ur=function(){return Date.now?Date.now():+new Date};Mt("Z",":"),Mt("ZZ",""),J("Z",Xi),J("ZZ",Xi),ne(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ot(Xi,e)});var Fr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Vr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Br=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Vt.fn=Ct.prototype;var qr=zt(1,"add"),Yr=zt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var zr=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),On("gggg","weekYear"),On("ggggg","weekYear"),On("GGGG","isoWeekYear"),On("GGGGG","isoWeekYear"),j("weekYear","gg"),j("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),J("G",Ki),J("g",Ki),J("GG",Bi,Pi),J("gg",Bi,Pi),J("GGGG",Hi,Fi),J("gggg",Hi,Fi),J("GGGGG",Wi,Vi),J("ggggg",Wi,Vi),ie(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=S(e)}),ie(["gg","GG"],function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)}),W("Q",0,"Qo","quarter"),j("quarter","Q"),U("quarter",7),J("Q",Ri),ne("Q",function(e,t){t[ir]=3*(S(e)-1)}),W("D",["DD",2],"Do","date"),j("date","D"),U("date",9),J("D",Bi),J("DD",Bi,Pi),J("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ne(["D","DD"],rr),ne("Do",function(e,t){t[rr]=S(e.match(Bi)[0],10)});var Hr=V("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),j("dayOfYear","DDD"),U("dayOfYear",4),J("DDD",zi),J("DDDD",Ui),ne(["DDD","DDDD"],function(e,t,n){n._dayOfYear=S(e)}),W("m",["mm",2],0,"minute"),j("minute","m"),U("minute",14),J("m",Bi),J("mm",Bi,Pi),ne(["m","mm"],sr);var Wr=V("Minutes",!1);W("s",["ss",2],0,"second"),j("second","s"),U("second",15),J("s",Bi),J("ss",Bi,Pi),ne(["s","ss"],ar);var Gr=V("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),j("millisecond","ms"),U("millisecond",16),J("S",zi,Ri),J("SS",zi,Pi),J("SSS",zi,Ui);var Kr;for(Kr="SSSS";Kr.length<=9;Kr+="S")J(Kr,Gi);for(Kr="S";Kr.length<=9;Kr+="S")ne(Kr,jn);var Zr=V("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var Xr=v.prototype;Xr.add=qr,Xr.calendar=Gt,Xr.clone=Kt,Xr.diff=nn,Xr.endOf=gn,Xr.format=cn,Xr.from=ln,Xr.fromNow=un,Xr.to=dn,Xr.toNow=pn,Xr.get=Y,Xr.invalidAt=kn,Xr.isAfter=Zt,Xr.isBefore=Xt,Xr.isBetween=Jt,Xr.isSame=Qt,Xr.isSameOrAfter=en,Xr.isSameOrBefore=tn,Xr.isValid=Cn,Xr.lang=zr,Xr.locale=fn,Xr.localeData=hn,Xr.max=Pr,Xr.min=Rr,Xr.parsingFlags=Tn,Xr.set=z,Xr.startOf=mn,Xr.subtract=Yr,Xr.toArray=wn,Xr.toObject=Sn,Xr.toDate=bn,Xr.toISOString=sn,Xr.inspect=an,Xr.toJSON=xn,Xr.toString=on,Xr.unix=vn,Xr.valueOf=yn,Xr.creationData=Mn,Xr.year=yr,Xr.isLeapYear=ve,Xr.weekYear=$n,Xr.isoWeekYear=_n,Xr.quarter=Xr.quarters=Nn,Xr.month=de,Xr.daysInMonth=pe,Xr.week=Xr.weeks=$e,Xr.isoWeek=Xr.isoWeeks=_e,Xr.weeksInYear=En,Xr.isoWeeksInYear=An,Xr.date=Hr,Xr.day=Xr.days=Re,Xr.weekday=Pe,Xr.isoWeekday=Ue,Xr.dayOfYear=Dn,Xr.hour=Xr.hours=Or,Xr.minute=Xr.minutes=Wr,Xr.second=Xr.seconds=Gr,Xr.millisecond=Xr.milliseconds=Zr,Xr.utcOffset=At,Xr.utc=It,Xr.local=Lt,Xr.parseZone=Nt,Xr.hasAlignedHourOffset=Dt,Xr.isDST=jt,Xr.isLocal=Pt,Xr.isUtcOffset=Ut,Xr.isUtc=Ft,Xr.isUTC=Ft,Xr.zoneAbbr=Rn,Xr.zoneName=Pn,Xr.dates=T("dates accessor is deprecated. Use date instead.",Hr),Xr.months=T("months accessor is deprecated. Use month instead",de),Xr.years=T("years accessor is deprecated. Use year instead",yr),Xr.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Et),Xr.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Rt);var Jr=_.prototype;Jr.calendar=A,Jr.longDateFormat=E,Jr.invalidDate=I,Jr.ordinal=L,Jr.preparse=Vn,Jr.postformat=Vn,Jr.relativeTime=N,Jr.pastFuture=D,Jr.set=O,Jr.months=se,Jr.monthsShort=ae,Jr.monthsParse=le,Jr.monthsRegex=he,Jr.monthsShortRegex=fe,Jr.week=ke,Jr.firstDayOfYear=Oe,Jr.firstDayOfWeek=Me,Jr.weekdays=Ie,Jr.weekdaysMin=Ne,Jr.weekdaysShort=Le,Jr.weekdaysParse=je,Jr.weekdaysRegex=Fe,Jr.weekdaysShortRegex=Ve,Jr.weekdaysMinRegex=Be,Jr.isPM=Ge,Jr.meridiem=Ke,Qe("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===S(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=T("moment.lang is deprecated. Use moment.locale instead.",Qe),e.langData=T("moment.langData is deprecated. Use moment.localeData instead.",nt);var Qr=Math.abs,eo=si("ms"),to=si("s"),no=si("m"),io=si("h"),ro=si("d"),oo=si("w"),so=si("M"),ao=si("y"),co=ci("milliseconds"),lo=ci("seconds"),uo=ci("minutes"),po=ci("hours"),fo=ci("days"),ho=ci("months"),mo=ci("years"),go=Math.round,yo={s:45,m:45,h:22,d:26,M:11},vo=Math.abs,bo=Ct.prototype;return bo.abs=Zn,bo.add=Jn,bo.subtract=Qn,bo.as=ri,bo.asMilliseconds=eo,bo.asSeconds=to,bo.asMinutes=no,bo.asHours=io,bo.asDays=ro,bo.asWeeks=oo,bo.asMonths=so,bo.asYears=ao,bo.valueOf=oi,bo._bubble=ti,bo.get=ai,bo.milliseconds=co,bo.seconds=lo,bo.minutes=uo,bo.hours=po,bo.days=fo,bo.weeks=li,bo.months=ho,bo.years=mo,bo.humanize=hi,bo.toISOString=mi,bo.toString=mi,bo.toJSON=mi,bo.locale=fn,bo.localeData=hn,bo.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",mi),bo.lang=zr,W("X",0,0,"unix"),W("x",0,0,"valueOf"),J("x",Ki),J("X",Ji),ne("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ne("x",function(e,t,n){n._d=new Date(S(e))}),e.version="2.17.1",n(bt),e.fn=Xr,e.min=St,e.max=xt,e.now=Ur,e.utc=d,e.unix=Un,e.months=zn,e.isDate=a,e.locale=Qe,e.invalid=m,e.duration=Vt,e.isMoment=b,e.weekdays=Wn,e.parseZone=Fn,e.localeData=nt,e.isDuration=Tt,e.monthsShort=Hn,e.weekdaysMin=Kn,e.defineLocale=et,e.updateLocale=tt,e.locales=it,e.weekdaysShort=Gn,e.normalizeUnits=R,e.relativeTimeRounding=pi,e.relativeTimeThreshold=fi,e.calendarFormat=Wt,e.prototype=Xr,e}),n("example/localTimeSystem/src/LocalTimeFormat",["moment"],function(e){function t(){}function n(t){var n=e.utc(t);return[[".SSS",function(e){return e.milliseconds()}],[":ss",function(e){return e.seconds()}],["hh:mma",function(e){return e.minutes()}],["hha",function(e){return e.hours()}],["ddd DD",function(e){return e.days()&&1!=e.date()}],["MMM DD",function(e){return 1!=e.date()}],["MMMM",function(e){return e.month()}],["YYYY",function(){return!0}]].filter(function(e){return e[1](n)})[0][0]}var i="YYYY-MM-DD h:mm:ss.SSS a",r=[i,"YYYY-MM-DD h:mm:ss a","YYYY-MM-DD h:mm a","YYYY-MM-DD"];return t.prototype.format=function(t,r){if(void 0!==r){var o=n(t,r);if(o)return e.utc(t).format(o)}return e(t).format(i)},t.prototype.parse=function(t){return e(t,r).valueOf()},t.prototype.validate=function(t){return e(t,r).isValid()},t}),n("example/localTimeSystem/bundle",["./src/LocalTimeSystem","./src/LocalTimeFormat","legacyRegistry"],function(e,t,n){n.register("example/localTimeSystem",{extensions:{formats:[{key:"local-format",implementation:t}],timeSystems:[{implementation:e,depends:["$timeout"]}]}})}),n("text!platform/commonUI/about/res/templates/about-dialog.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="abs t-about l-about t-about-openmctweb s-about" ng-controller = "AboutController as about">\n    <div class="l-splash s-splash"></div>\n    <div class="s-text l-content">\n        <h1 class="l-title s-title">Open MCT</h1>\n        <div class="l-description s-description">\n	        <p>Open MCT, Copyright &copy; 2014-2016, United States Government as represented by the Administrator of the National Aeronautics and Space Administration. All rights reserved.</p>\n	        <p>Open MCT is licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License.  You may obtain a copy of the License at <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>.</p>\n	        <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>\n	        <p>Open MCT includes source code licensed under additional open source licenses. See the Open Source Licenses file included with this distribution or <a ng-click="about.openLicenses()">click here for licensing information</a>.</p>\n        </div>\n        <h2>Version Information</h2>\n        <ul class="t-info l-info s-info" ng-repeat = "version in about.versions()">\n            <li title="{{version.description}}">\n                <span class="info version-name">{{version.name}}</span>\n	            <span class="info version-value">{{version.value}}</span>\n            </li>\n        </ul>\n    </div>\n</div>\n\n'}),n("platform/commonUI/about/src/LogoController",[],function(){function e(e){this.overlayService=e}return e.prototype.showAboutDialog=function(){this.overlayService.createOverlay("overlay-about")},e}),n("platform/commonUI/about/src/AboutController",[],function(){function e(e,t){this.versionDefinitions=e,this.$window=t}return e.prototype.versions=function(){return this.versionDefinitions},e.prototype.openLicenses=function(){this.$window.open("#/licenses")},e}),n("platform/commonUI/about/src/LicenseController",[],function(){function e(e){this.licenseDefinitions=e}return e.prototype.licenses=function(){return this.licenseDefinitions},e}),n("text!platform/commonUI/about/res/templates/app-logo.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller = "AboutController as about">\n	<div class=\'app-logo logo-openmctweb abs\' title="Version {{about.versions()[0].value}}"></div>\n</span>'}),n("text!platform/commonUI/about/res/templates/about-logo.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="LogoController as logo">\n    <mct-include ng-click="logo.showAboutDialog()" key="\'app-logo\'">\n    </mct-include>\n</span>\n'}),n("text!platform/commonUI/about/res/templates/overlay-about.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<mct-container key="overlay">\n    <mct-include key="\'about-dialog\'">\n    </mct-include>\n</mct-container>'}),n("text!platform/commonUI/about/res/templates/license-apache.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<!-- From http://www.apache.org/licenses/LICENSE-2.0 -->\n<br>\n	<p>Version 2.0, January 2004</p>\n	<p><a href="http://www.apache.org/licenses/">http://www.apache.org/licenses/</a></p>\n	<h3>TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION</h3>\n	<p><strong><a name="definitions">1. Definitions</a></strong>.</p>\n	<p>"License" shall mean the terms and conditions for use, reproduction, and\n		distribution as defined by Sections 1 through 9 of this document.</p>\n	<p>"Licensor" shall mean the copyright owner or entity authorized by the\n		copyright owner that is granting the License.</p>\n	<p>"Legal Entity" shall mean the union of the acting entity and all other\n		entities that control, are controlled by, or are under common control with\n		that entity. For the purposes of this definition, "control" means (i) the\n		power, direct or indirect, to cause the direction or management of such\n		entity, whether by contract or otherwise, or (ii) ownership of fifty\n		percent (50%) or more of the outstanding shares, or (iii) beneficial\n		ownership of such entity.</p>\n	<p>"You" (or "Your") shall mean an individual or Legal Entity exercising\n		permissions granted by this License.</p>\n	<p>"Source" form shall mean the preferred form for making modifications,\n		including but not limited to software source code, documentation source,\n		and configuration files.</p>\n	<p>"Object" form shall mean any form resulting from mechanical transformation\n		or translation of a Source form, including but not limited to compiled\n		object code, generated documentation, and conversions to other media types.</p>\n	<p>"Work" shall mean the work of authorship, whether in Source or Object form,\n		made available under the License, as indicated by a copyright notice that\n		is included in or attached to the work (an example is provided in the\n		Appendix below).</p>\n	<p>"Derivative Works" shall mean any work, whether in Source or Object form,\n		that is based on (or derived from) the Work and for which the editorial\n		revisions, annotations, elaborations, or other modifications represent, as\n		a whole, an original work of authorship. For the purposes of this License,\n		Derivative Works shall not include works that remain separable from, or\n		merely link (or bind by name) to the interfaces of, the Work and Derivative\n		Works thereof.</p>\n	<p>"Contribution" shall mean any work of authorship, including the original\n		version of the Work and any modifications or additions to that Work or\n		Derivative Works thereof, that is intentionally submitted to Licensor for\n		inclusion in the Work by the copyright owner or by an individual or Legal\n		Entity authorized to submit on behalf of the copyright owner. For the\n		purposes of this definition, "submitted" means any form of electronic,\n		verbal, or written communication sent to the Licensor or its\n		representatives, including but not limited to communication on electronic\n		mailing lists, source code control systems, and issue tracking systems that\n		are managed by, or on behalf of, the Licensor for the purpose of discussing\n		and improving the Work, but excluding communication that is conspicuously\n		marked or otherwise designated in writing by the copyright owner as "Not a\n		Contribution."</p>\n	<p>"Contributor" shall mean Licensor and any individual or Legal Entity on\n		behalf of whom a Contribution has been received by Licensor and\n		subsequently incorporated within the Work.</p>\n	<p><strong><a name="copyright">2. Grant of Copyright License</a></strong>. Subject to the\n		terms and conditions of this License, each Contributor hereby grants to You\n		a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n		copyright license to reproduce, prepare Derivative Works of, publicly\n		display, publicly perform, sublicense, and distribute the Work and such\n		Derivative Works in Source or Object form.</p>\n	<p><strong><a name="patent">3. Grant of Patent License</a></strong>. Subject to the terms\n		and conditions of this License, each Contributor hereby grants to You a\n		perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n		(except as stated in this section) patent license to make, have made, use,\n		offer to sell, sell, import, and otherwise transfer the Work, where such\n		license applies only to those patent claims licensable by such Contributor\n		that are necessarily infringed by their Contribution(s) alone or by\n		combination of their Contribution(s) with the Work to which such\n		Contribution(s) was submitted. If You institute patent litigation against\n		any entity (including a cross-claim or counterclaim in a lawsuit) alleging\n		that the Work or a Contribution incorporated within the Work constitutes\n		direct or contributory patent infringement, then any patent licenses\n		granted to You under this License for that Work shall terminate as of the\n		date such litigation is filed.</p>\n	<p><strong><a name="redistribution">4. Redistribution</a></strong>. You may reproduce and\n		distribute copies of the Work or Derivative Works thereof in any medium,\n		with or without modifications, and in Source or Object form, provided that\n		You meet the following conditions:</p>\n	<ol style="list-style: lower-latin;">\n		<li>You must give any other recipients of the Work or Derivative Works a\n			copy of this License; and</li>\n\n		<li>You must cause any modified files to carry prominent notices stating\n			that You changed the files; and</li>\n\n		<li>You must retain, in the Source form of any Derivative Works that You\n			distribute, all copyright, patent, trademark, and attribution notices from\n			the Source form of the Work, excluding those notices that do not pertain to\n			any part of the Derivative Works; and</li>\n\n		<li>If the Work includes a "NOTICE" text file as part of its distribution,\n			then any Derivative Works that You distribute must include a readable copy\n			of the attribution notices contained within such NOTICE file, excluding\n			those notices that do not pertain to any part of the Derivative Works, in\n			at least one of the following places: within a NOTICE text file distributed\n			as part of the Derivative Works; within the Source form or documentation,\n			if provided along with the Derivative Works; or, within a display generated\n			by the Derivative Works, if and wherever such third-party notices normally\n			appear. The contents of the NOTICE file are for informational purposes only\n			and do not modify the License. You may add Your own attribution notices\n			within Derivative Works that You distribute, alongside or as an addendum to\n			the NOTICE text from the Work, provided that such additional attribution\n			notices cannot be construed as modifying the License.\n			<br>\n			<br>\n			You may add Your own copyright statement to Your modifications and may\n			provide additional or different license terms and conditions for use,\n			reproduction, or distribution of Your modifications, or for any such\n			Derivative Works as a whole, provided Your use, reproduction, and\n			distribution of the Work otherwise complies with the conditions stated in\n			this License.\n		</li>\n\n	</ol>\n\n	<p><strong><a name="contributions">5. Submission of Contributions</a></strong>. Unless You\n		explicitly state otherwise, any Contribution intentionally submitted for\n		inclusion in the Work by You to the Licensor shall be under the terms and\n		conditions of this License, without any additional terms or conditions.\n		Notwithstanding the above, nothing herein shall supersede or modify the\n		terms of any separate license agreement you may have executed with Licensor\n		regarding such Contributions.</p>\n	<p><strong><a name="trademarks">6. Trademarks</a></strong>. This License does not grant\n		permission to use the trade names, trademarks, service marks, or product\n		names of the Licensor, except as required for reasonable and customary use\n		in describing the origin of the Work and reproducing the content of the\n		NOTICE file.</p>\n	<p><strong><a name="no-warranty">7. Disclaimer of Warranty</a></strong>. Unless required by\n		applicable law or agreed to in writing, Licensor provides the Work (and\n		each Contributor provides its Contributions) on an "AS IS" BASIS, WITHOUT\n		WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including,\n		without limitation, any warranties or conditions of TITLE,\n		NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You\n		are solely responsible for determining the appropriateness of using or\n		redistributing the Work and assume any risks associated with Your exercise\n		of permissions under this License.</p>\n	<p><strong><a name="no-liability">8. Limitation of Liability</a></strong>. In no event and\n		under no legal theory, whether in tort (including negligence), contract, or\n		otherwise, unless required by applicable law (such as deliberate and\n		grossly negligent acts) or agreed to in writing, shall any Contributor be\n		liable to You for damages, including any direct, indirect, special,\n		incidental, or consequential damages of any character arising as a result\n		of this License or out of the use or inability to use the Work (including\n		but not limited to damages for loss of goodwill, work stoppage, computer\n		failure or malfunction, or any and all other commercial damages or losses),\n		even if such Contributor has been advised of the possibility of such\n		damages.</p>\n	<p><strong><a name="additional">9. Accepting Warranty or Additional Liability</a></strong>.\n		While redistributing the Work or Derivative Works thereof, You may choose\n		to offer, and charge a fee for, acceptance of support, warranty, indemnity,\n		or other liability obligations and/or rights consistent with this License.\n		However, in accepting such obligations, You may act only on Your own behalf\n		and on Your sole responsibility, not on behalf of any other Contributor,\n		and only if You agree to indemnify, defend, and hold each Contributor\n		harmless for any liability incurred by, or claims asserted against, such\n		Contributor by reason of your accepting any such warranty or additional\n		liability.</p>\n	<h3>END OF TERMS AND CONDITIONS</h3>\n	<h3 id="apply">APPENDIX: How to apply the Apache License to your work</h3>\n	<p>To apply the Apache License to your work, attach the following boilerplate\n		notice, with the fields enclosed by brackets "[]" replaced with your own\n		identifying information. (Don\'t include the brackets!) The text should be\n		enclosed in the appropriate comment syntax for the file format. We also\n		recommend that a file or class name and description of purpose be included\n		on the same "printed page" as the copyright notice for easier\n		identification within third-party archives.</p>\n	<div class="codehilite"><pre>Copyright [yyyy] [name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the "License");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n</pre></div>';
}),n("text!platform/commonUI/about/res/templates/license-mit.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>\n<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>\n<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>'}),n("text!platform/commonUI/about/res/templates/licenses.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="LicenseController as lc" class="abs l-standalone s-text l-about l-licenses s-about s-licenses">\n	<h1>OpenMCT Web Licenses</h1>\n	<h2>Apache License</h2>\n	<mct-include key="\'license-apache\'"></mct-include>\n\n	<h2>Software Components Licenses</h2>\n    <p>This software includes components released under the following licenses:</p>\n	<div class="l-licenses-software">\n		<div class="l-license-software" ng-repeat="license in lc.licenses()">\n			<h3><a target="_blank" ng-href="{{license.website}}">{{license.name}}</a></h3>\n			<p>\n				<em>Version</em> {{license.version}}\n				<em>&nbsp;|&nbsp;Author<span ng-show="license.author.indexOf(\',\') > 0">s</span></em> {{license.author}}\n				<em>&nbsp;|&nbsp;Description</em> {{license.description}}\n			</p>\n			<em>License</em>\n			<div class="s-license-text">\n				<p ng-show="license.copyright.length > 0">{{license.copyright}}</p>\n				<mct-include key="license.license"></mct-include>\n			</div>\n		</div>\n	</div>\n</div>'}),n("text!platform/commonUI/about/res/templates/licenses-export-md.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="LicenseController as lc" class="abs l-about l-standalone s-text s-md-export">\n    <h1># Open MCT Licenses</h1>\n    <h2>## Apache License</h2>\n    <mct-include key="\'license-apache\'"></mct-include>\n\n    <h2>## Software Components Licenses</h2>\n    <p>This software includes components released under the following licenses:</p>\n    <div class="l-license-software" ng-repeat="license in lc.licenses()">\n        <p>### {{license.name}}</p>\n        <p>#### Info</p>\n        <p>* Link: {{license.website}}</p>\n        <p>* Version: {{license.version}}</p>\n        <p>* Author<span ng-show="license.author.indexOf(\',\') > 0">s</span>: {{license.author}}</p>\n        <p>* Description: {{license.description}}</p>\n        <p>#### License</p>\n        <p ng-show="license.copyright.length > 0">{{license.copyright}}</p>\n        <mct-include key="license.license"></mct-include>\n        <p>&nbsp;</p>\n        <p>---</p>\n    </div>\n</div>'}),n("platform/commonUI/about/bundle",["text!./res/templates/about-dialog.html","./src/LogoController","./src/AboutController","./src/LicenseController","text!./res/templates/app-logo.html","text!./res/templates/about-logo.html","text!./res/templates/overlay-about.html","text!./res/templates/license-apache.html","text!./res/templates/license-mit.html","text!./res/templates/licenses.html","text!./res/templates/licenses-export-md.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d){d.register("platform/commonUI/about",{name:"About Open MCT",extensions:{templates:[{key:"app-logo",priority:"optional",template:r},{key:"about-logo",priority:"preferred",template:o},{key:"about-dialog",template:e},{key:"overlay-about",template:s},{key:"license-apache",template:a},{key:"license-mit",template:c}],controllers:[{key:"LogoController",depends:["overlayService"],implementation:t},{key:"AboutController",depends:["versions[]","$window"],implementation:n},{key:"LicenseController",depends:["licenses[]"],implementation:i}],licenses:[{name:"Json.NET",version:"6.0.8",author:"Newtonsoft",description:"JSON serialization/deserialization",website:"http://www.newtonsoft.com/json",copyright:"Copyright (c) 2007 James Newton-King",license:"license-mit",link:"https://github.com/JamesNK/Newtonsoft.Json/blob/master/LICENSE.md"},{name:"Nancy",version:"0.23.2",author:"Andreas Hkansson, Steven Robbins and contributors",description:"Embedded web server",website:"http://nancyfx.org/",copyright:"Copyright  2010 Andreas Hkansson, Steven Robbins and contributors",license:"license-mit",link:"http://www.opensource.org/licenses/mit-license.php"},{name:"Nancy.Hosting.Self",version:"0.23.2",author:"Andreas Hkansson, Steven Robbins and contributors",description:"Embedded web server",website:"http://nancyfx.org/",copyright:"Copyright  2010 Andreas Hkansson, Steven Robbins and contributors",license:"license-mit",link:"http://www.opensource.org/licenses/mit-license.php"},{name:"SuperSocket",version:"0.9.0.2",author:" Kerry Jiang",description:"Supports SuperWebSocket",website:"https://supersocket.codeplex.com/",copyright:"Copyright 2010-2014 Kerry Jiang (kerry-jiang@hotmail.com)",license:"license-apache",link:"https://supersocket.codeplex.com/license"},{name:"SuperWebSocket",version:"0.9.0.2",author:" Kerry Jiang",description:"WebSocket implementation for client-server communication",website:"https://superwebsocket.codeplex.com/",copyright:"Copyright 2010-2014 Kerry Jiang (kerry-jiang@hotmail.com)",license:"license-apache",link:"https://superwebsocket.codeplex.com/license"},{name:"log4net",version:"2.0.3",author:"Apache Software Foundation",description:"Logging",website:"http://logging.apache.org/log4net/",copyright:"Copyright  2004-2015 Apache Software Foundation.",license:"license-apache",link:"http://logging.apache.org/log4net/license.html"}],routes:[{when:"/licenses",template:l},{when:"/licenses-md",template:u}]}})}),n("platform/commonUI/browse/src/BrowseController",[],function(){function e(e,t,n,i,r,o,s){function a(e){return o.urlForLocation("",e).replace("/","")}function c(e,t){var n;for(n=0;n<e.length;n+=1)if(e[n].getId()===t)return e[n]}function l(e){return i.getObjects([e]).then(function(t){return t[e]})}function u(e,t){var n=t.shift();return n?e.useCapability("composition").then(function(i){var r=c(i,n);return r?r.hasCapability("composition")?u(r,t):r:e}):e}function d(i){e.navigatedObject=i,e.treeModel.selectedObject=i,h=a(i),t.current.pathParams.ids=h,n.path("/browse/"+h)}function p(e){return l("ROOT").then(function(t){return u(t,e)}).then(function(e){r.setNavigation(e)})}function f(e){var t=a(e);h!==t&&(h=t,d(e))}var h,m=(t.current.params.ids||s).split("/");e.treeModel={selectedObject:void 0,onSelection:function(e){r.setNavigation(e,!0)},allowSelection:function(e){return r.shouldNavigate()}},l("ROOT").then(function(t){e.domainObject=t,p(m)}),r.addListener(f),e.$on("$routeChangeStart",function(e,n){n.$$route===t.current.$$route&&n.pathParams.ids!==t.current.pathParams.ids&&(e.preventDefault(),p(n.pathParams.ids.split("/")))}),e.$on("$destroy",function(){r.removeListener(f)})}return e}),n("platform/commonUI/browse/src/PaneController",[],function(){function e(e,t,n){var i=this;this.agentService=t,this.state=!n.opener,this.callback=function(){t.isPhone()&&t.isPortrait()&&(i.state=!1)}}return e.prototype.toggle=function(){this.state=!this.state},e.prototype.visible=function(){return this.state},e}),n("platform/commonUI/browse/src/InspectorPaneController",["./PaneController"],function(e){function t(t,n,i,r){function o(e){-1===e.indexOf("editing")||c.visible()||c.toggle()}function s(e){return a&&a(),e.hasCapability("status")&&(a=e.getCapability("status").listen(o)),a}e.call(this,t,n,i);var a,c=this,l=r.getNavigation();l&&s(l),r.addListener(s),t.$on("$destroy",function(){a(),r.removeListener(s)})}return t.prototype=Object.create(e.prototype),t}),n("platform/commonUI/browse/src/BrowseObjectController",[],function(){function e(e,t,n){function i(n){function i(t){t.key===r&&(e.representation=e.representation||{},e.representation.selected=t)}var r=t.search().view;r&&(n&&n.useCapability("view")||[]).forEach(i),o=n}function r(e){e&&t.search().view!==e&&t.search("view",e)}var o;e.$watch("domainObject",i),e.$watch("representation.selected.key",r),e.$on("$locationChangeSuccess",function(){i(e.domainObject)}),e.doAction=function(t){return e[t]&&e[t]()}}return e}),n("platform/commonUI/browse/src/MenuArrowController",[],function(){function e(e){this.$scope=e}return e.prototype.showMenu=function(e){var t={key:"menu",domainObject:this.$scope.domainObject,event:e};this.$scope.domainObject.getCapability("action").perform(t)},e}),n("platform/commonUI/browse/src/navigation/NavigationService",[],function(){function e(e){this.navigated=void 0,this.callbacks=[],this.checks=[],this.$window=e,this.oldUnload=e.onbeforeunload,e.onbeforeunload=this.onBeforeUnload.bind(this)}return e.prototype.getNavigation=function(){return this.navigated},e.prototype.setNavigation=function(e,t){if(t)return this.doNavigation(e),!0;if(this.navigated===e)return!0;var n=this.shouldWarnBeforeNavigate();return n&&!this.$window.confirm(n)?!1:(this.doNavigation(e),!0)},e.prototype.addListener=function(e){this.callbacks.push(e)},e.prototype.removeListener=function(e){this.callbacks=this.callbacks.filter(function(t){return t!==e})},e.prototype.shouldNavigate=function(){var e=this.shouldWarnBeforeNavigate();return!e||this.$window.confirm(e)},e.prototype.checkBeforeNavigation=function(e){return this.checks.push(e),function(){this.checks=this.checks.filter(function(t){return e!==t})}.bind(this)},e.prototype.doNavigation=function(e){this.navigated=e,this.callbacks.forEach(function(t){t(e)})},e.prototype.shouldWarnBeforeNavigate=function(){var e=[];return this.checks.forEach(function(t){var n=t();n&&e.push(n)}),e.length?e.join("\n"):!1},e.prototype.onBeforeUnload=function(){var e=this.shouldWarnBeforeNavigate();return e?e:this.oldUnload?this.oldUnload.apply(void 0,[].slice.apply(arguments)):void 0},e}),n("platform/commonUI/browse/src/navigation/NavigateAction",[],function(){function e(e,t){this.domainObject=t.domainObject,this.navigationService=e}return e.prototype.perform=function(){return this.navigationService.shouldNavigate()?(this.navigationService.setNavigation(this.domainObject,!0),Promise.resolve({})):Promise.reject("Navigation Prevented by User")},e.appliesTo=function(e){return void 0!==e.domainObject},e}),n("platform/commonUI/browse/src/navigation/OrphanNavigationHandler",[],function(){function e(e,t,n){function i(e){var t=e.getCapability("context");return t.getParent()}function r(e){var t=i(e);t.useCapability("composition").then(function(n){var i=n.every(function(t){return t.getId()!==e.getId()});i&&t.getCapability("action").perform("navigate")})}function o(){var e=n.getNavigation();e.hasCapability("context")&&(e.getCapability("editor").isEditContextRoot()||r(e))}var s;s=e(o),n.addListener(s),t("mutation").listen(s)}return e}),n("platform/commonUI/browse/src/windowing/NewTabAction",[],function(){function e(e,t,n){n=n||{},this.urlService=e,this.open=function(){t.open.apply(t,arguments)},this.domainObject=n.selectedObject||n.domainObject}return e.prototype.perform=function(){this.open(this.urlService.urlForNewTab("browse",this.domainObject),"_blank")},e}),function(e){n("screenfull",[],function(){return function(){return!function(){"use strict";var e="undefined"!=typeof module&&module.exports,t="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,r=n.length,o={};r>i;i++)if(e=n[i],e&&e[1]in document){for(i=0,t=e.length;t>i;i++)o[n[0][i]]=e[i];return o}return!1}(),i={request:function(e){var i=n.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[i]():e[i](t&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[n.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:n};return n?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(document[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[n.fullscreenEnabled])}}}),void(e?module.exports=i:window.screenfull=i)):void(e?module.exports=!1:window.screenfull=!1)}(),e.screenfull=screenfull}.apply(e,arguments)})}(this),n("platform/commonUI/browse/src/windowing/FullscreenAction",["screenfull"],function(e){function t(e){this.context=e}var n="Enter full screen mode",i="Exit full screen mode";return t.prototype.perform=function(){e.toggle()},t.prototype.getMetadata=function(){var r=Object.create(t);return r.cssClass=e.isFullscreen?"icon-fullscreen-expand":"icon-fullscreen-collapse",r.description=e.isFullscreen?i:n,r.group="windowing",r.context=this.context,r},t}),n("platform/commonUI/browse/src/windowing/WindowTitler",[],function(){function e(e,t,n){function i(){var t=e.getNavigation();return t&&t.getModel().name}function r(e){n[0].title=e}t.$watch(i,r)}return e}),n("text!platform/commonUI/browse/res/templates/browse.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n\n<div class="abs holder-all" ng-controller="BrowseController">\n    <mct-include key="\'topbar-browse\'"></mct-include>\n    <div class="abs holder holder-main browse-area s-browse-area browse-wrapper"\n         ng-controller="PaneController as modelPaneTree"\n         ng-class="modelPaneTree.visible() ? \'pane-tree-showing\' : \'pane-tree-hidden\'">\n        <mct-split-pane class=\'abs contents\'\n                        anchor=\'left\'>\n            <div class=\'split-pane-component treeview pane left\'>\n                <div class="abs holder l-flex-col holder-treeview-elements">\n                    <mct-representation key="\'create-button\'"\n                                        mct-object="navigatedObject"\n                                        class="holder flex-elem create-button-holder">\n                    </mct-representation>\n                    <mct-include key="\'search\'"\n                                 ng-model="treeModel"\n                                 class="holder l-flex-col flex-elem search-holder"\n                                 ng-class="{ active: treeModel.search, grows: treeModel.search }">\n                    </mct-include>\n                    <mct-representation key="\'tree\'"\n                                        mct-object="domainObject"\n                                        parameters="tree"\n                                        ng-model="treeModel"\n                                        class="holder flex-elem grows vscroll tree-holder"\n                                        ng-hide="treeModel.search">\n                    </mct-representation>\n                </div>\n            </div>\n\n            <mct-splitter class="splitter-treeview mobile-hide"></mct-splitter>\n\n            <div class=\'split-pane-component items pane primary-pane right\'>\n                <a class="mini-tab-icon anchor-left toggle-pane toggle-tree"\n                   title="{{ modelPaneTree.visible()? \'Hide\' : \'Show\' }} this pane"\n                   ng-click="modelPaneTree.toggle()"\n                   ng-class="{ collapsed : !modelPaneTree.visible() }"></a>\n\n                <div class=\'holder holder-object-and-inspector abs\' id=\'content-area\'\n                     ng-controller="InspectorPaneController as modelPaneInspect"\n                     ng-class="modelPaneInspect.visible() ? \'pane-inspect-showing\' : \'pane-inspect-hidden\'">\n\n                    <mct-split-pane class=\'l-object-and-inspector contents abs\' anchor=\'right\'>\n                        <div class=\'split-pane-component t-object pane primary-pane left\'>\n                            <mct-representation mct-object="navigatedObject"\n                                                key="navigatedObject.getCapability(\'status\').get(\'editing\') ? \'edit-object\' : \'browse-object\'"\n                                                class="abs holder holder-object">\n                            </mct-representation>\n                            <a class="mini-tab-icon anchor-right mobile-hide toggle-pane toggle-inspect flush-right"\n                               title="{{ modelPaneInspect.visible()? \'Hide\' : \'Show\' }} the Inspection pane"\n                               ng-click="modelPaneInspect.toggle()"\n                               ng-class="{ collapsed : !modelPaneInspect.visible() }"></a>\n                        </div>\n\n                        <mct-splitter class="splitter-inspect mobile-hide flush-right edge-shdw"></mct-splitter>\n\n                        <div class="split-pane-component t-inspect pane right mobile-hide">\n                            <mct-representation key="\'object-inspector\'"\n                                                mct-object="navigatedObject"\n                                                ng-model="treeModel">\n                            </mct-representation>\n                        </div>\n                    </mct-split-pane>\n                </div>\n            </div>\n        </mct-split-pane>\n    </div>\n    <mct-include key="\'bottombar\'"></mct-include>\n</div>\n\n'}),n("text!platform/commonUI/browse/res/templates/browse-object.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="BrowseObjectController" class="abs l-flex-col">\n    <div class="holder flex-elem l-flex-row object-browse-bar ">\n        <div class="items-select left flex-elem l-flex-row grows">\n            <mct-representation key="\'back-arrow\'"\n                                mct-object="domainObject"\n                                class="flex-elem l-back"></mct-representation>\n            <mct-representation key="\'object-header\'"\n                                mct-object="domainObject"\n                                class="l-flex-row flex-elem grows object-header">\n            </mct-representation>\n        </div>\n        <div class="btn-bar right l-flex-row flex-elem flex-justify-end flex-fixed">\n            <mct-representation key="\'switcher\'"\n                                mct-object="domainObject"\n                                ng-model="representation">\n            </mct-representation>\n            <!-- Temporarily, on mobile, the action buttons are hidden-->\n            <mct-representation key="\'action-group\'"\n                                mct-object="domainObject"\n                                parameters="{ category: \'view-control\' }"\n                                class="mobile-hide">\n            </mct-representation>\n        </div>\n    </div>\n    <div class="holder l-flex-col flex-elem grows l-object-wrapper l-controls-visible l-time-controller-visible">\n        <div class="holder l-flex-col flex-elem grows l-object-wrapper-inner">\n            <!-- Toolbar and Save/Cancel buttons -->\n            <div class="l-edit-controls flex-elem l-flex-row flex-align-end">\n                <mct-representation key="\'edit-action-buttons\'"\n                                    mct-object="domainObject"\n                                    class=\'flex-elem conclude-editing\'>\n                </mct-representation>\n\n            </div>\n            <mct-representation key="representation.selected.key"\n                                mct-object="representation.selected.key && domainObject"\n                                class="abs flex-elem grows object-holder-main scroll">\n            </mct-representation>\n        </div>\n    </div>\n    <mct-include key="\'conductor\'" class="abs holder flex-elem flex-fixed l-flex-row l-time-conductor-holder"></mct-include>\n</div>\n'}),n("text!platform/commonUI/browse/res/templates/items/grid-item.html",[],function(){return"<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n \"License\"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<!-- For selected, add class 'selected' to outer div -->\n<div class='item grid-item' ng-click='action.perform(\"navigate\")'>\n    <div class='contents abs'>\n        <div class='top-bar bar abs'>\n            <span class='icon-people' title='Shared'></span>\n            <mct-representation class=\"desktop-hide\" key=\"'info-button'\" mct-object=\"domainObject\"></mct-representation>\n        </div>\n        <div class='item-main abs lg'>\n            <span class=\"t-item-icon\" ng-class=\"{ 'l-icon-link':location.isLink() }\">\n                <span class=\"t-item-icon-glyph ng-binding {{type.getCssClass()}}\"></span>\n            </span>\n            <div class='abs item-open icon-pointer-right'></div>\n        </div>\n        <div class='bottom-bar bar abs'>\n            <div class='title'>{{model.name}}</div>\n            <div class='details'>\n                <span>{{type.getName()}}</span>\n                <span ng-show=\"model.composition !== undefined\">\n                    - {{model.composition.length}} Item<span ng-show=\"model.composition.length > 1\">s</span>\n                </span>\n            </div>\n        </div>\n    </div>\n</div>\n"}),n("text!platform/commonUI/browse/res/templates/browse/object-header.html",[],function(){return"<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n \"License\"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span class='type-icon flex-elem {{type.getCssClass()}}'></span>\n<span class=\"l-elem-wrapper l-flex-row flex-elem grows\">\n    <span ng-if=\"parameters.mode\" class='action flex-elem'>{{parameters.mode}}</span>\n    <span class='title-label flex-elem holder flex-can-shrink'>{{model.name}}</span>\n    <span class='t-object-alert t-alert-unsynced flex-elem holder' title='This object is not currently displaying real-time data'></span>\n    <mct-representation\n        key=\"'menu-arrow'\"\n        mct-object='domainObject'\n        class=\"flex-elem context-available-w\"></mct-representation>\n</span>"}),n("text!platform/commonUI/browse/res/templates/menu-arrow.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n\n<span ng-controller="MenuArrowController as menuArrow">\n    <a class=\'context-available\'\n       ng-click=\'menuArrow.showMenu($event)\'></a>\n</span>'}),n("text!platform/commonUI/browse/res/templates/back-arrow.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n\n<a class=\'s-icon-button icon-pointer-left\'\n   ng-show="context.getPath().length > 2"\n   ng-click="context.getParent().getCapability(\'action\').perform(\'navigate\')">\n</a>\n\n';
}),n("text!platform/commonUI/browse/res/templates/items/items.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class=\'items-holder grid abs\'>\n    <mct-representation key="\'grid-item\'"\n                        ng-repeat="childObject in composition"\n                        mct-object="childObject">\n    </mct-representation>\n</div>'}),n("text!platform/commonUI/browse/res/templates/browse/object-properties.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="ObjectInspectorController as controller">\n    <ul class="flex-elem grows l-inspector-part">\n        <li>\n            <em class="t-inspector-part-header">Properties</em>\n            <div class="inspector-properties"\n                 ng-repeat="data in metadata"\n                 ng-class="{ first:$index === 0 }">\n                <div class="label">{{ data.name }}</div>\n                <div class="value">{{ data.value }}</div>\n            </div>\n        </li>\n        <li ng-if="contextutalParents.length > 0">\n            <em class="t-inspector-part-header" title="The location of this linked object.">Location</em>\n            <div ng-if="primaryParents.length > 0" class="section-header">This Object</div>\n            <span class="inspector-location"\n                  ng-repeat="parent in contextutalParents"\n                  ng-class="{ last:($index + 1) === contextualParents.length }">\n                <mct-representation key="\'label\'"\n                                    mct-object="parent"\n                                    ng-model="ngModel"\n                                    ng-click="ngModel.selectedObject = parent"\n                                    class="location-item">\n                </mct-representation>\n            </span>\n        </li>\n        <li ng-if="primaryParents.length > 0">\n            <div class="section-header">Object\'s Original</div>\n            <span class="inspector-location"\n                  ng-repeat="parent in primaryParents"\n                  ng-class="{ last:($index + 1) === primaryParents.length }">\n                <mct-representation key="\'label\'"\n                                    mct-object="parent"\n                                    ng-model="ngModel"\n                                    ng-click="ngModel.selectedObject = parent"\n                                    class="location-item">\n                </mct-representation>\n            </span>\n        </li>\n    </ul>\n</div>'}),n("text!platform/commonUI/browse/res/templates/browse/inspector-region.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="InspectorController">\n    <div ng-repeat="region in regions">\n        <mct-representation\n                key="region.content.key"\n                mct-object="domainObject"\n                ng-model="ngModel">\n        </mct-representation>\n    </div>\n</div>\n'}),n("platform/commonUI/browse/bundle",["./src/BrowseController","./src/PaneController","./src/InspectorPaneController","./src/BrowseObjectController","./src/MenuArrowController","./src/navigation/NavigationService","./src/navigation/NavigateAction","./src/navigation/OrphanNavigationHandler","./src/windowing/NewTabAction","./src/windowing/FullscreenAction","./src/windowing/WindowTitler","text!./res/templates/browse.html","text!./res/templates/browse-object.html","text!./res/templates/items/grid-item.html","text!./res/templates/browse/object-header.html","text!./res/templates/menu-arrow.html","text!./res/templates/back-arrow.html","text!./res/templates/items/items.html","text!./res/templates/browse/object-properties.html","text!./res/templates/browse/inspector-region.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d,p,f,h,m,g,y,v,b,w){w.register("platform/commonUI/browse",{extensions:{routes:[{when:"/browse/:ids*?",template:d,reloadOnSearch:!1},{when:"",redirectTo:"/browse/"}],constants:[{key:"DEFAULT_PATH",value:"mine",priority:"fallback"}],controllers:[{key:"BrowseController",implementation:e,depends:["$scope","$route","$location","objectService","navigationService","urlService","DEFAULT_PATH"]},{key:"PaneController",implementation:t,priority:"preferred",depends:["$scope","agentService","$window"]},{key:"BrowseObjectController",implementation:i,depends:["$scope","$location","$route"]},{key:"MenuArrowController",implementation:r,depends:["$scope"]},{key:"InspectorPaneController",implementation:n,priority:"preferred",depends:["$scope","agentService","$window","navigationService"]}],representations:[{key:"browse-object",template:p,gestures:["drop"],uses:["view"]},{key:"grid-item",template:f,uses:["type","action","location"],gestures:["info","menu"]},{key:"object-header",template:h,uses:["type"]},{key:"menu-arrow",template:m,uses:["action"],gestures:["menu"]},{key:"back-arrow",uses:["context"],template:g},{key:"object-properties",template:v},{key:"inspector-region",template:b}],services:[{key:"navigationService",implementation:o,depends:["$window"]}],actions:[{key:"navigate",implementation:s,depends:["navigationService"]},{key:"window",name:"Open In New Tab",implementation:c,description:"Open in a new browser tab",category:["view-control","contextual"],depends:["urlService","$window"],group:"windowing",cssClass:"icon-new-window",priority:"preferred"},{key:"fullscreen",implementation:l,category:"view-control",group:"windowing",priority:"default"}],views:[{key:"items",name:"Items",cssClass:"icon-thumbs-strip",description:"Grid of available items",template:y,uses:["composition"],gestures:["drop"],type:"folder",editable:!1}],runs:[{implementation:u,depends:["navigationService","$rootScope","$document"]},{implementation:a,depends:["throttle","topic","navigationService"]}],licenses:[{name:"screenfull.js",version:"1.2.0",description:"Wrapper for cross-browser usage of fullscreen API",author:"Sindre Sorhus",website:"https://github.com/sindresorhus/screenfull.js/",copyright:"Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)",license:"license-mit",link:"https://github.com/sindresorhus/screenfull.js/blob/gh-pages/license"}]}})}),n("platform/commonUI/dialog/src/DialogService",[],function(){function e(e,t,n,i){this.overlayService=e,this.$q=t,this.$log=n,this.activeOverlay=void 0,this.findBody=function(){return i.find("body")}}return e.prototype.dismissOverlay=function(e){e.dismiss(),e===this.activeOverlay&&(this.activeOverlay=void 0)},e.prototype.getDialogResponse=function(e,t,n,i){function r(e){c.resolve(n?n():e),l.dismissOverlay(s)}function o(){c.reject(),l.findBody().off("keydown",a),l.dismissOverlay(s)}var s,a,c=this.$q.defer(),l=this;return a=function(e){27===e.keyCode&&o()},t.confirm=r,t.cancel=o,this.findBody().on("keydown",a),this.canShowDialog(t)?s=this.activeOverlay=this.overlayService.createOverlay(e,t,i||"t-dialog"):c.reject(),c.promise},e.prototype.getUserInput=function(e,t){function n(){return i.value}var i={title:e.name,message:e.message,structure:e,value:t};return this.getDialogResponse("overlay-dialog",i,n)},e.prototype.getUserChoice=function(e){return this.getDialogResponse("overlay-options",{dialog:e})},e.prototype.canShowDialog=function(e){return this.activeOverlay?(this.$log.warn(["Dialog already showing; ","unable to show ",e.title].join("")),!1):!0},e.prototype.showBlockingMessage=function(e){if(this.canShowDialog(e)){var t=this,n=this.overlayService.createOverlay("overlay-blocking-message",e,"t-dialog-sm");return this.activeOverlay=n,{dismiss:function(){t.dismissOverlay(n)}}}return!1},e}),n("platform/commonUI/dialog/src/OverlayService",[],function(){function e(e,t,n){this.$compile=t,this.findBody=function(){return e.find("body")},this.newScope=function(){return n.$new()}}var t='<mct-include ng-model="overlay" key="key" ng-class="typeClass"></mct-include>';return e.prototype.createOverlay=function(e,n,i){function r(){s.$destroy(),o.remove()}var o,s=this.newScope();return n=n||{cancel:r},s.overlay=n,s.key=e,s.typeClass=i||"t-dialog",o=this.$compile(t)(s),this.findBody().prepend(o),{dismiss:r}},e}),n("text!platform/commonUI/dialog/res/templates/overlay-dialog.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<mct-container key="overlay">\n    <mct-include key="\'form-dialog\'" ng-model="ngModel">\n    </mct-include>\n</mct-container>'}),n("text!platform/commonUI/dialog/res/templates/overlay-options.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<mct-container key="overlay">\n    <div class="abs top-bar">\n        <div class="title">{{ngModel.dialog.title}}</div>\n        <div class="hint">{{ngModel.dialog.hint}}</div>\n    </div>\n    <div class=\'abs editor\'>\n        <mct-include key="ngModel.dialog.template"\n                     parameters="ngModel.dialog.parameters"\n                     ng-model="ngModel.dialog.model">\n        </mct-include>\n    </div>\n    <div class="abs bottom-bar">\n        <a ng-repeat="option in ngModel.dialog.options"\n           href=\'\'\n           class="s-button lg"\n           title="{{option.description}}"\n           ng-click="ngModel.confirm(option.key)"\n           ng-class="{ major: $first, subtle: !$first }">\n            {{option.name}}\n        </a>\n    </div>\n</mct-container>'}),n("text!platform/commonUI/dialog/res/templates/dialog.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="abs top-bar">\n    <div class="title">{{ngModel.title}}</div>\n    <div class="hint">All fields marked <span class="req icon-asterisk"></span> are required.</div>\n</div>\n<div class=\'abs editor\'>\n    <mct-form ng-model="ngModel.value"\n              structure="ngModel.structure"\n              class="validates"\n              name="createForm">\n    </mct-form>\n</div>\n<div class="abs bottom-bar">\n    <a class=\'s-button major\'\n       ng-class="{ disabled: !createForm.$valid }"\n       ng-click="ngModel.confirm()">\n        OK\n    </a>\n    <a class=\'s-button\'\n       ng-click="ngModel.cancel()">\n        Cancel\n    </a>\n</div>'}),n("text!platform/commonUI/dialog/res/templates/overlay-blocking-message.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<mct-container key="overlay" class="t-message-single">\n    <mct-include key="\'message\'" ng-model="ngModel">\n    </mct-include>\n</mct-container>'}),n("text!platform/commonUI/dialog/res/templates/message.html",[],function(){return'<div class="l-message"\n     ng-class="\'message-severity-\' + ngModel.severity">\n    <div class="ui-symbol type-icon message-type"></div>\n    <div class="message-contents">\n        <div class="top-bar">\n            <div class="title">{{ngModel.title}}</div>\n            <div class="hint" ng-hide="ngModel.hint === undefined">{{ngModel.hint}}</div>\n        </div>\n        <div class="message-body">\n            <div class="message-action">\n                {{ngModel.actionText}}\n            </div>\n            <mct-include key="\'progress-bar\'"\n                         ng-model="ngModel"\n                         ng-show="ngModel.progress !== undefined || ngModel.unknownProgress"></mct-include>\n        </div>\n        <div class="bottom-bar">\n            <a ng-repeat="dialogOption in ngModel.options"\n               class="s-button major"\n               ng-click="dialogOption.callback()">\n                {{dialogOption.label}}\n            </a>\n            <a class="s-button major"\n               ng-if="ngModel.primaryOption"\n               ng-click="ngModel.primaryOption.callback()">\n                {{ngModel.primaryOption.label}}\n            </a>\n\n        </div>\n\n    </div>\n</div>'}),n("text!platform/commonUI/dialog/res/templates/overlay-message-list.html",[],function(){return'<mct-container key="overlay" class="t-message-list">\n    <div class="message-contents">\n        <div class="abs top-bar">\n            <div class="title">{{ngModel.dialog.title}}</div>\n            <div class="hint">Displaying {{ngModel.dialog.messages.length}} message<span ng-show="ngModel.dialog.messages.length > 1 ||\n                                                                                                  ngModel.dialog.messages.length == 0">s</span>\n            </div>\n        </div>\n        <div class="abs message-body">\n            <mct-include\n                    ng-repeat="msg in ngModel.dialog.messages | orderBy: \'-\'"\n                    key="\'message\'" ng-model="msg.model"></mct-include>\n        </div>\n        <div class="abs bottom-bar">\n            <a ng-repeat="dialogAction in ngModel.dialog.actions"\n               class="s-button major"\n               ng-click="dialogAction.action()">\n                {{dialogAction.label}}\n            </a>\n        </div>\n    </div>\n</mct-container>'}),n("text!platform/commonUI/dialog/res/templates/overlay.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="abs overlay" ng-class="{\'delayEntry100ms\' : ngModel.delay}">\n    <div class="abs blocker"></div>\n    <div class="abs holder">\n        <a ng-click="ngModel.cancel()"\n           ng-if="ngModel.cancel"\n           class="close icon-x"></a>\n        <div class="abs contents" ng-transclude></div>\n    </div>\n</div>'}),n("platform/commonUI/dialog/bundle",["./src/DialogService","./src/OverlayService","text!./res/templates/overlay-dialog.html","text!./res/templates/overlay-options.html","text!./res/templates/dialog.html","text!./res/templates/overlay-blocking-message.html","text!./res/templates/message.html","text!./res/templates/overlay-message-list.html","text!./res/templates/overlay.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l){l.register("platform/commonUI/dialog",{extensions:{services:[{key:"dialogService",implementation:e,depends:["overlayService","$q","$log","$document"]},{key:"overlayService",implementation:t,depends:["$document","$compile","$rootScope"]}],templates:[{key:"overlay-dialog",template:n},{key:"overlay-options",template:i},{key:"form-dialog",template:r},{key:"overlay-blocking-message",template:o},{key:"message",template:s},{key:"overlay-message-list",template:a}],containers:[{key:"overlay",template:c}]}})}),n("platform/commonUI/edit/src/controllers/EditActionController",[],function(){function e(e){function i(e){return{key:e,name:e.getMetadata().name,cssClass:e.getMetadata().cssClass}}function r(){e.saveActions=e.action?e.action.getActions(t):[],e.saveActionsAsMenuOptions=e.saveActions.map(i),e.saveActionMenuClickHandler=function(e){e.perform()},e.otherEditActions=e.action?e.action.getActions(n):[],e.actionPerformer=function(e){return e.perform.bind(e)}}e.$watch("action",r)}var t={category:"save"},n={category:"conclude-editing"};return e}),n("platform/commonUI/edit/src/controllers/EditPanesController",[],function(){function e(e){function t(e){var t=n.rootDomainObject,i=e&&e.getCapability("context"),r=i&&i.getTrueRoot(),o=t&&t.getId(),s=r&&r.getId();o!==s&&(n.rootDomainObject=r)}var n=this;e.$watch("domainObject",t)}return e.prototype.getRoot=function(){return this.rootDomainObject},e}),n("platform/commonUI/edit/src/controllers/ElementsController",[],function(){function e(e){function t(t){return"undefined"==typeof t?e.searchText:void(e.searchText=t)}function n(t){return e.searchText?-1!==t.getModel().name.toLowerCase().search(e.searchText.toLowerCase()):!0}e.filterBy=t,e.searchElements=n}return e}),n("platform/commonUI/edit/src/controllers/EditObjectController",[],function(){function e(e){var t=e,n=t&&t.getCapability("editor");return n&&n.isEditContextRoot()&&n.dirty()}function t(e){var t=e,n=t&&t.getCapability("editor");return n&&n.finish()}function n(n,i,r){function o(){function e(e){e.key===t&&(n.representation=n.representation||{},n.representation.selected=e)}var t=i.search().view;t&&(s&&s.useCapability("view")||[]).forEach(e)}this.scope=n;var s=n.domainObject,a=r.checkBeforeNavigation(function(){return e(s)?"Continuing will cause the loss of any unsaved changes.":!1});n.$on("$destroy",function(){a(),t(s)}),o(),n.doAction=function(e){return n[e]&&n[e]()}}return n}),n("platform/commonUI/edit/src/actions/EditAndComposeAction",[],function(){function e(e){this.domainObject=(e||{}).domainObject,this.selectedObject=(e||{}).selectedObject}return e.prototype.perform=function(){function e(){var e=t.domainObject&&t.domainObject.getCapability("composition");return e&&e.add(t.selectedObject)}var t=this,n=this.domainObject.getCapability("action").getActions("edit")[0];return n&&n.perform(),this.selectedObject&&e()},e}),n("platform/commonUI/edit/src/actions/EditAction",[],function(){function e(e,n,i,r){var o=(r||{}).domainObject;return o?(this.domainObject=o,this.$location=e,void(this.navigationService=n)):(i.warn(["No domain object to edit; ","edit action is not valid."].join("")),t)}var t={perform:function(){}};return e.prototype.perform=function(){this.navigationService.getNavigation()!==this.domainObject&&this.navigationService.setNavigation(this.domainObject),this.domainObject.useCapability("editor")},e.appliesTo=function(e){var t=(e||{}).domainObject,n=t&&t.getCapability("type");return n&&n.hasFeature("creation")&&t.hasCapability("editor")&&!t.getCapability("editor").isEditContextRoot()},e}),n("platform/commonUI/edit/src/actions/PropertiesDialog",[],function(){function e(e,t){this.type=e,this.model=t,this.properties=e.getProperties()}return e.prototype.getFormStructure=function(){return{name:"Edit "+this.model.name,sections:[{name:"Properties",rows:this.properties.map(function(e,t){var n=Object.create(e.getDefinition());return n.key=t,n}).filter(function(e){return e.control})}]}},e.prototype.getInitialFormValue=function(){var e=this.model;return this.properties.map(function(t){return t.getValue(e)})},e.prototype.updateModel=function(e,t){this.properties.forEach(function(n,i){n.setValue(e,t[i])})},e}),n("platform/commonUI/edit/src/actions/PropertiesAction",["./PropertiesDialog"],function(e){function t(e,t){this.domainObject=(t||{}).domainObject,this.dialogService=e}return t.prototype.perform=function(){function t(e,t){return r.useCapability("mutation",function(n){t.updateModel(n,e)})}function n(n){var i=new e(n,r.getModel());return o.getUserInput(i.getFormStructure(),i.getInitialFormValue()).then(function(e){return e&&t(e,i)})}var i=this.domainObject.getCapability("type"),r=this.domainObject,o=this.dialogService;return i&&n(i)},t.appliesTo=function(e){var t=(e||{}).domainObject,n=t&&t.getCapability("type"),i=n&&n.hasFeature("creation");return t&&i},t}),n("platform/commonUI/edit/src/actions/RemoveAction",[],function(){function e(e,t){this.domainObject=(t||{}).domainObject,this.navigationService=e}return e.prototype.perform=function(){function e(e){return e!==o.getId()}function t(t){t.composition=t.composition.filter(e)}function n(e,t){for(var n,i=r.getNavigation();i;){if(i.getId()===e.getId())return void r.setNavigation(t);n=i.getCapability("context"),i=n&&n.getParent()}}function i(e){var i=e.getCapability("context"),r=i.getParent();return n(e,r),r.useCapability("mutation",t)}var r=this.navigationService,o=this.domainObject;return i(o)},e.appliesTo=function(e){var t=(e||{}).domainObject,n=t&&t.getCapability("context"),i=n&&n.getParent(),r=i&&i.getCapability("type"),o=r&&r.hasFeature("creation");return void 0!==i&&Array.isArray(i.getModel().composition)&&o},e}),n("platform/commonUI/edit/src/actions/SaveInProgressDialog",[],function(){function e(e){this.dialogService=e,this.dialog=void 0}return e.prototype.show=function(){this.dialog=this.dialogService.showBlockingMessage({title:"Saving...",hint:"Do not navigate away from this page or close this browser tab while this message is displayed.",unknownProgress:!0,severity:"info",delay:!0})},e.prototype.hide=function(){this.dialog&&this.dialog.dismiss()},e}),n("platform/commonUI/edit/src/actions/SaveAction",["./SaveInProgressDialog"],function(e){function t(e,t,n){this.domainObject=(n||{}).domainObject,this.dialogService=e,this.notificationService=t}return t.prototype.perform=function(){function t(){return o.getCapability("editor").save()}function n(){s.hide(),r.notificationService.info("Save Succeeded")}function i(){s.hide(),r.notificationService.error("Save Failed")}var r=this,o=this.domainObject,s=new e(this.dialogService);return s.show(),t().then(n)["catch"](i)},t.appliesTo=function(e){var t=(e||{}).domainObject;return void 0!==t&&t.hasCapability("editor")&&t.getCapability("editor").isEditContextRoot()&&void 0!==t.getModel().persisted},t}),n("platform/commonUI/edit/src/actions/SaveAndStopEditingAction",["./SaveAction"],function(e){function t(e,t,n){this.context=n,this.domainObject=(n||{}).domainObject,this.dialogService=e,this.notificationService=t}return t.prototype.perform=function(){function t(){return n.getCapability("editor").finish()}var n=this.domainObject,i=new e(this.dialogService,this.notificationService,this.context);return i.perform().then(t)["catch"](t)},t.appliesTo=e.appliesTo,t}),n("platform/commonUI/edit/src/creation/CreateWizard",[],function(){function e(e,t,n){this.type=e.getCapability("type"),this.model=e.getModel(),this.domainObject=e,this.properties=this.type.getProperties(),this.parent=t,this.policyService=n}return e.prototype.getFormStructure=function(e){function t(e){var t=e&&e.getCapability("type");return t&&r.allow("composition",t,i)}var n=[],i=this.domainObject,r=this.policyService;return n.push({name:"Properties",rows:this.properties.map(function(e,t){var n=Object.create(e.getDefinition());return n.key=t,n}).filter(function(e){return e&&e.control})}),e&&n.push({name:"Location",cssClass:"grows",rows:[{name:"Save In",control:"locator",validate:t,key:"createParent"}]}),{sections:n,name:"Create a New "+this.type.getName()}},e.prototype.populateObjectFromInput=function(e){var t=this.getLocation(e),n=this.createModel(e);return n.location=t.getId(),this.domainObject.useCapability("mutation",function(){return n}),this.domainObject},e.prototype.getInitialFormValue=function(){var e=this.model,t=this.properties.map(function(t){return t.getValue(e)});return t.createParent=this.parent,t},e.prototype.getLocation=function(e){return e.createParent||this.parent},e.prototype.createModel=function(e){var t=JSON.parse(JSON.stringify(this.model));return t.type=this.type.getKey(),this.properties.forEach(function(n,i){n.setValue(t,e[i])}),t},e}),n("platform/commonUI/edit/src/actions/SaveAsAction",["../creation/CreateWizard","./SaveInProgressDialog"],function(e,t){function n(e,t,n,i,r,o){this.domainObject=(o||{}).domainObject,this.injectObjectService=function(){this.objectService=e.get("objectService")},this.policyService=t,this.dialogService=n,this.copyService=i,this.notificationService=r}function i(e){return function(){return e}}return n.prototype.createWizard=function(t){return new e(this.domainObject,t,this.policyService)},n.prototype.getObjectService=function(){return this.objectService||this.injectObjectService(),this.objectService},n.prototype.perform=function(){function e(e){return e&&e.getCapability("action").perform("navigate"),e}return this.save().then(e)},n.prototype.save=function(){function e(e){var t=m.createWizard(e);return m.dialogService.getUserInput(t.getFormStructure(!0),t.getInitialFormValue()).then(t.populateObjectFromInput.bind(t),function(e){return Promise.reject("user canceled")})}function n(e){return v.show(),e}function r(e){return v.hide(),e}function o(e){return m.getObjectService().getObjects([e]).then(function(t){return t[e]})}function s(e){return o(e.getModel().location)}function a(e){var t=e.getId()===g.getId()||e.getCapability("location").isOriginal();return t&&b.push(e),t}function c(e){return y.perform(g,e,a)}function l(e){return e.getCapability("persistence").refresh()}function u(e){return Promise.all(b.map(l)).then(i(e))}function d(e){return g.getCapability("editor").save().then(i(e))}function p(e){return g.getCapability("editor").finish().then(function(){return o(e.getId())})}function f(e){return m.notificationService.info("Save Succeeded"),e}function h(e){return r(),"user canceled"!==e&&m.notificationService.error("Save Failed"),!1}var m=this,g=this.domainObject,y=this.copyService,v=new t(this.dialogService),b=[];
return s(g).then(e).then(n).then(s).then(c).then(u).then(d).then(p).then(r).then(f)["catch"](h)},n.appliesTo=function(e){var t=(e||{}).domainObject;return void 0!==t&&t.hasCapability("editor")&&t.getCapability("editor").isEditContextRoot()&&void 0===t.getModel().persisted},n}),n("platform/commonUI/edit/src/actions/CancelAction",[],function(){function e(e){this.domainObject=e.domainObject}return e.prototype.perform=function(){function e(){var e;return n.getModel().persisted?n.getCapability("action").perform("navigate"):n.getCapability("location").getOriginal().then(function(t){return e=t.getCapability("context").getParent(),e.getCapability("action").perform("navigate")})}function t(){return n.getCapability("editor").finish()}var n=this.domainObject;return e().then(t)},e.appliesTo=function(e){var t=(e||{}).domainObject;return void 0!==t&&t.hasCapability("editor")&&t.getCapability("editor").isEditContextRoot()},e}),n("platform/commonUI/edit/src/policies/EditActionPolicy",[],function(){function e(e){this.policyService=e}function t(e){var t=(e||{}).domainObject;return t&&t.hasCapability("editor")&&t.getCapability("editor").isEditContextRoot()}return e.prototype.countEditableViews=function(e){var t,n,i=e.domainObject,r=0;return i?(t=i.getCapability("type"),n=i.useCapability("view"),(n||[]).forEach(function(e){(e.editable===!0||"plot"===e.key&&"telemetry.panel"===t.getKey()||"table"===e.key&&"table"===t.getKey()||"rt-table"===e.key&&"rttable"===t.getKey())&&r++}),r):r},e.prototype.allow=function(e,n){var i=e.getMetadata().key,r=(n||{}).category;return"edit"===i?this.countEditableViews(n)>0&&!t(n):"properties"===i&&"view-control"===r?this.countEditableViews(n)<1&&!t(n):!0},e}),n("platform/commonUI/edit/src/policies/EditableLinkPolicy",[],function(){function e(){}return e.prototype.allow=function(e,t){var n,i=e.getMetadata().key;return"link"===i?(n=t.selectedObject||t.domainObject,!(n.hasCapability("editor")&&n.getCapability("editor").inEditContext())):!0},e}),n("platform/commonUI/edit/src/policies/EditableMovePolicy",[],function(){function e(){}return e.prototype.allow=function(e,t){var n=t.domainObject,i=t.selectedObject,r=e.getMetadata().key,o=n.hasCapability("editor")&&n.getCapability("editor").inEditContext();return"move"===r&&o?!!i&&i.hasCapability("editor")&&i.getCapability("editor").inEditContext():!0},e}),n("platform/commonUI/edit/src/policies/EditContextualActionPolicy",[],function(){function e(e,t,n){this.navigationService=e,this.editModeBlacklist=t,this.nonEditContextBlacklist=n}return e.prototype.allow=function(e,t){var n=t.domainObject,i=this.navigationService.getNavigation(),r=e.getMetadata?e.getMetadata():{};return i.hasCapability("editor")&&i.getCapability("editor").isEditContextRoot()?n.hasCapability("editor")&&n.getCapability("editor").inEditContext()?-1===this.editModeBlacklist.indexOf(r.key):-1===this.nonEditContextBlacklist.indexOf(r.key):!0},e}),n("platform/commonUI/edit/src/representers/EditRepresenter",[],function(){function e(e,t){this.$log=e,this.$scope=t,this.$scope.commit=this.commit.bind(this)}return e.prototype.commit=function(e){var t=this.$scope.model,n=this.$scope.configuration,i=this.domainObject;this.$log.debug(["Committing ",i&&i.getModel().name,"("+(i&&i.getId())+"):",e].join(" ")),this.domainObject&&(this.key&&n&&(t.configuration=t.configuration||{},t.configuration[this.key]=n),i.useCapability("mutation",function(){return t}))},e.prototype.represent=function(e,t){this.domainObject=t,e?this.key=e.key:delete this.key},e.prototype.destroy=function(){},e}),n("platform/commonUI/edit/src/representers/EditToolbar",[],function(){function e(e,t){return e&&t}function t(e,t){return e||t}function n(e,t){function n(e){return s.properties.push(e),s.properties.length-1}function i(e,n){e&&(s.selection.forEach(function(t){"function"==typeof t[e]&&t[e](n)}),t())}function r(e){var t=Object.create(e||{});return e.property&&(t.key=n(e.property)),e.method&&(t.click=function(t){i(e.method,t)}),t}function o(e){var t=Object.create(e||{});return t.items=((e||{}).items||[]).map(r),t}var s=this;this.toolbarState=[],this.selection=void 0,this.properties=[],this.toolbarStructure=Object.create(e||{}),this.toolbarStructure.sections=((e||{}).sections||[]).map(o)}return n.prototype.isConsistent=function(e){function t(t){var s;void 0!==t[e]&&(s=i.lookupState(e,t),o&&(r=r&&s===n),n=s,o=!0)}var n,i=this,r=!0,o=!1;return i.selection.forEach(t),r},n.prototype.isApplicable=function(n){function i(e){return r&&void 0!==e[r]||o&&"function"==typeof e[o]}var r=(n||{}).property,o=(n||{}).method,s=!!(n||{}).exclusive;return this.selection.map(i).reduce(s?e:t,s)&&this.isConsistent(r)},n.prototype.lookupState=function(e,t){var n=t[e];return"function"==typeof n?n():n},n.prototype.setSelection=function(e){function t(e){var t=0;(e.items||[]).forEach(function(e){e.hidden=!i.isApplicable(e),t+=e.hidden?0:1}),e.hidden=!t}function n(e){var t;return i.selection.forEach(function(n){t=void 0!==n[e]?i.lookupState(e,n):t}),t}var i=this;this.selection=e,this.toolbarStructure.sections.forEach(t),this.toolbarState=this.properties.map(n)},n.prototype.getStructure=function(){return this.toolbarStructure},n.prototype.getState=function(){return this.toolbarState},n.prototype.updateState=function(e,t){function n(e,t){function n(n){void 0!==n[e]&&("function"==typeof n[e]?(r=r||n[e]()!==t,n[e](t)):(r=r||n[e]!==t,n[e]=t))}var r=!1;return i.selection.forEach(n),r}var i=this;return n(this.properties[e],t)},n}),n("platform/commonUI/edit/src/representers/EditToolbarSelection",[],function(){function e(){this.selection=[{}],this.selecting=!1,this.selectedObj=void 0}return e.prototype.selected=function(e){return e===this.selectedObj||e===this.selection[0]},e.prototype.select=function(e){return e===this.selection[0]?!1:(this.deselect(),this.selectedObj=e,this.selecting=!0,void this.selection.push(e))},e.prototype.deselect=function(){return this.selecting?(this.selecting=!1,this.selectedObj=void 0,this.selection.pop(),!0):!1},e.prototype.get=function(){return this.selectedObj},e.prototype.proxy=function(e){return arguments.length>0&&(this.selection[0]=e),this.selection[0]},e.prototype.all=function(){return this.selection},e}),n("platform/commonUI/edit/src/representers/EditToolbarRepresenter",["./EditToolbar","./EditToolbarSelection"],function(e,t){function n(e,t,n){function r(t){e.commit&&e.commit(t)}function o(e){c.toolbar&&(e=Array.isArray(e)?e:e?[e]:[],c.toolbar.setSelection(e),c.toolbarObject.structure=c.toolbar.getStructure(),c.toolbarObject.state=c.toolbar.getState())}function s(){return c.toolbarObject.state}function a(e){var t=(e||[]).map(function(e,t){return c.toolbar.updateState(t,e)}).reduce(function(e,t){return e||t},!1);t&&r("Changes from toolbar.")}var c=this;return this.setSelection=function(t){e.selection=t},this.clearExposedToolbar=function(){n.toolbar&&delete e.$parent[n.toolbar]},this.exposeToolbar=function(){e.$parent[c.attrs.toolbar]=c.toolbarObject},this.commit=r,this.attrs=n,this.updateSelection=o,this.toolbar=void 0,this.toolbarObject={},n&&n.toolbar?(e.$watchCollection(s,a),e.$watchCollection("selection.all()",o),e.$parent[n.toolbar]=this.toolbarObject,void 0):i}var i={represent:function(){},destroy:function(){}};return n.prototype.represent=function(n){function i(t){o.attrs.toolbar&&(o.toolbar=new e(t,o.commit),o.exposeToolbar())}var r=(n||{}).toolbar||{},o=this;i(r),this.setSelection(new t),this.updateSelection([])},n.prototype.destroy=function(){this.clearExposedToolbar()},n}),n("platform/commonUI/edit/src/capabilities/EditorCapability",[],function(){function e(e,t){this.transactionService=e,this.domainObject=t}function t(e){return e.getCapability("status").get("editing")}function n(e){return t(e)||e.hasCapability("context")&&n(e.getCapability("context").getParent())}return e.prototype.edit=function(){this.transactionService.startTransaction(),this.domainObject.getCapability("status").set("editing",!0)},e.prototype.inEditContext=function(){return n(this.domainObject)},e.prototype.isEditContextRoot=function(){return t(this.domainObject)},e.prototype.save=function(){var e=this.transactionService;return e.commit().then(function(){e.startTransaction()})},e.prototype.invoke=e.prototype.edit,e.prototype.finish=function(){var e=this.domainObject;return this.transactionService.cancel().then(function(){return e.getCapability("status").set("editing",!1),e})},e.prototype.dirty=function(){return this.transactionService.size()>0},e}),n("platform/commonUI/edit/src/capabilities/TransactionalPersistenceCapability",[],function(){function e(e,t,n,i){this.transactionManager=t,this.persistenceCapability=n,this.domainObject=i,this.$q=e}return e.prototype.persist=function(){var e=this.persistenceCapability;return this.transactionManager.isActive()?(this.transactionManager.addToTransaction(this.domainObject.getId(),e.persist.bind(e),e.refresh.bind(e)),this.$q.when(!0)):this.persistenceCapability.persist()},e.prototype.refresh=function(){return this.transactionManager.clearTransactionsFor(this.domainObject.getId()),this.persistenceCapability.refresh()},e.prototype.getSpace=function(){return this.persistenceCapability.getSpace()},e.prototype.persisted=function(){return this.persistenceCapability.persisted()},e}),n("platform/commonUI/edit/src/capabilities/TransactionCapabilityDecorator",["./TransactionalPersistenceCapability"],function(e){function t(e,t,n){this.capabilityService=n,this.transactionService=t,this.$q=e}return t.prototype.getCapabilities=function(){var t=this,n=this.capabilityService.getCapabilities.apply(this.capabilityService,arguments),i=n.persistence;return n.persistence=function(n){var r="function"==typeof i?i(n):i;return new e(t.$q,t.transactionService,r,n)},n},t}),n("platform/commonUI/edit/src/services/TransactionManager",[],function(){function e(e){this.transactionService=e,this.clearTransactionFns={}}return e.prototype.isActive=function(){return this.transactionService.isActive()},e.prototype.isScheduled=function(e){return!!this.clearTransactionFns[e]},e.prototype.addToTransaction=function(e,t,n){function i(e,t){return function(){return e().then(t)}}var r=this.releaseClearFn.bind(this,e);this.isScheduled(e)||(this.clearTransactionFns[e]=this.transactionService.addToTransaction(i(t,r),i(n,r)))},e.prototype.clearTransactionsFor=function(e){this.isScheduled(e)&&(this.clearTransactionFns[e](),this.releaseClearFn(e))},e.prototype.releaseClearFn=function(e){delete this.clearTransactionFns[e]},e}),n("platform/commonUI/edit/src/services/Transaction",[],function(){function e(e){this.$log=e,this.callbacks=[]}return e.prototype.add=function(e,t){var n={commit:e,cancel:t};return this.callbacks.push(n),function(){this.callbacks=this.callbacks.filter(function(e){return e!==n})}.bind(this)},e.prototype.size=function(){return this.callbacks.length},["commit","cancel"].forEach(function(t){e.prototype[t]=function(){for(var e,n=[];this.callbacks.length>0;){e=this.callbacks.shift();try{n.push(e[t]())}catch(i){this.$log.error("Error trying to "+t+" transaction.")}}return Promise.all(n)}}),e}),n("platform/commonUI/edit/src/services/NestedTransaction",["./Transaction"],function(e){function t(t){this.parent=t,e.call(this,t.$log)}return t.prototype=Object.create(e.prototype),t.prototype.commit=function(){return this.parent.add(e.prototype.commit.bind(this),e.prototype.cancel.bind(this)),Promise.resolve(!0)},t}),n("platform/commonUI/edit/src/services/TransactionService",["./Transaction","./NestedTransaction"],function(e,t){function n(e,t,n){this.$q=e,this.$log=t,this.cacheService=n,this.transactions=[]}return n.prototype.startTransaction=function(){var n=this.isActive()?new t(this.transactions[0]):new e(this.$log);this.transactions.push(n)},n.prototype.isActive=function(){return this.transactions.length>0},n.prototype.addToTransaction=function(e,t){return this.isActive()?this.activeTransaction().add(e,t):void this.$log.error("No transaction in progress")},n.prototype.activeTransaction=function(){return this.transactions[this.transactions.length-1]},n.prototype.commit=function(){var e=this.transactions.pop();return e?this.isActive()?e.commit():e.commit().then(function(e){return this.cacheService.flush(),e}.bind(this)):Promise.reject()},n.prototype.cancel=function(){var e=this.transactions.pop();return e?e.cancel():Promise.reject()},n.prototype.size=function(){return this.isActive()?this.activeTransaction().size():0},n}),n("platform/commonUI/edit/src/creation/CreateMenuController",[],function(){function e(e){function t(){e.createActions=e.action?e.action.getActions("create"):[]}e.$watch("action",t)}return e}),n("platform/commonUI/edit/src/creation/LocatorController",[],function(){function e(e,t,n){function i(r,o){var s=r&&r.getCapability("context"),a=s&&s.getRoot();return a&&a!==e.rootObject?(e.rootObject=void 0,t(function(){e.rootObject=s&&s.getRoot()||e.rootObject},0)):a||e.rootObject||n.getObjects(["ROOT"]).then(function(n){t(function(){e.rootObject=n.ROOT},0)}),e.treeModel.selectedObject=r,e.ngModel[e.field]=r,r&&e.structure&&e.structure.validate&&!e.structure.validate(r)?void i(o,void 0):void(e.ngModelController&&e.ngModelController.$setValidity("composition",!!e.treeModel.selectedObject))}e.treeModel={selectedObject:e.ngModel[e.field]},e.$watch("treeModel.selectedObject",i)}return e}),n("platform/commonUI/edit/src/creation/CreationPolicy",[],function(){function e(){}return e.prototype.allow=function(e){return e.hasFeature("creation")},e}),n("platform/commonUI/edit/src/creation/CreateAction",[],function(){function e(e,t,n){this.metadata={key:"create",cssClass:e.getCssClass(),name:e.getName(),type:e.getKey(),description:e.getDescription(),context:n},this.type=e,this.parent=t}return e.prototype.perform=function(){function e(){return o.finish()}function t(){return o.save().then(e)}function n(){return e()}var i,r,o,s=this.type.getInitialModel();return s.type=this.type.getKey(),s.location=this.parent.getId(),i=this.parent.useCapability("instantiation",s),o=i.hasCapability("editor")&&i.getCapability("editor"),r=i.getCapability("action").getActions("edit")[0],r?r.perform():o?(o.edit(),i.getCapability("action").perform("save-as").then(t,n)):void 0},e.prototype.getMetadata=function(){return this.metadata},e}),n("platform/commonUI/edit/src/creation/CreateActionProvider",["./CreateAction"],function(e){function t(e,t){this.typeService=e,this.policyService=t}return t.prototype.getActions=function(t){var n=t||{},i=n.key,r=n.domainObject,o=this;return"create"===i&&r?this.typeService.listTypes().filter(function(e){return o.policyService.allow("creation",e)}).map(function(t){return new e(t,r,n)}):[]},t}),n("platform/commonUI/edit/src/creation/AddAction",["./CreateWizard"],function(e){function t(e,t,n,i,r,o){this.metadata={key:"add",cssClass:e.getCssClass(),name:e.getName(),type:e.getKey(),description:e.getDescription(),context:n},this.type=e,this.parent=t,this.$q=i,this.dialogService=r,this.policyService=o}return t.prototype.perform=function(){function t(e){return o.populateObjectFromInput(e,r)}function n(e){return e.getCapability("persistence").persist().then(function(){return e})}function i(e){return a.getCapability("composition").add(e),n(a)}var r,o,s=this.type.getInitialModel(),a=this.parent;return s.type=this.type.getKey(),r=a.getCapability("instantiation").instantiate(s),r.useCapability("mutation",function(e){e.location=a.getId()}),o=new e(r,this.parent,this.policyService),this.dialogService.getUserInput(o.getFormStructure(!1),o.getInitialFormValue()).then(t).then(n).then(i)},t.prototype.getMetadata=function(){return this.metadata},t}),n("platform/commonUI/edit/src/creation/AddActionProvider",["./AddAction"],function(e){function t(e,t,n,i){this.typeService=t,this.dialogService=n,this.$q=e,this.policyService=i}return t.prototype.getActions=function(t){var n=t||{},i=n.key,r=n.domainObject;return"add"===i&&r?["timeline","activity"].map(function(t){return new e(this.typeService.getType(t),r,n,this.$q,this.dialogService,this.policyService)},this):[]},t}),n("platform/commonUI/edit/src/creation/CreationService",[],function(){function e(e,t){this.$q=e,this.$log=t}var t="Tried to create an object in non-persistent container.";return e.prototype.createObject=function(e,n){function i(){var e=n.getCapability("composition"),t=e&&e.add(o);return a.$q.when(t).then(function(e){return e?r.persist().then(function(){return e}):void a.$log.error("Could not modify "+n.getId())})}var r=n.getCapability("persistence"),o=n.useCapability("instantiation",e),s=o.getCapability("persistence"),a=this;return r&&s?s.persist().then(i):(a.$log.warn(t),a.$q.reject(new Error(t)))},e}),n("text!platform/commonUI/edit/res/templates/create/locator.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="LocatorController" class="selector-list">\n    <div class="wrapper">\n        <mct-representation key="\'tree\'"\n                            mct-object="rootObject"\n                            ng-model="treeModel">\n        </mct-representation>\n    </div>\n</div>\n'}),n("text!platform/commonUI/edit/res/templates/create/create-button.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="ClickAwayController as createController">\n    <div class="s-menu-button major create-button" ng-click="createController.toggle()">\n		<span class="title-label">Create</span>\n    </div>\n    <div class="menu super-menu" ng-show="createController.isActive()">\n        <mct-representation mct-object="domainObject" key="\'create-menu\'">\n        </mct-representation>\n    </div>\n</span>'}),n("text!platform/commonUI/edit/res/templates/create/create-menu.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="contents" ng-controller="CreateMenuController">\n    <div class="pane left menu-items">\n        <ul>\n            <li ng-repeat="createAction in createActions" ng-click="createAction.perform()">\n                <a ng-mouseover="representation.activeMetadata = createAction.getMetadata()"\n                   ng-mouseleave="representation.activeMetadata = undefined"\n                   class="menu-item-a {{ createAction.getMetadata().cssClass }}">\n                    {{createAction.getMetadata().name}}\n                </a>\n            </li>\n        </ul>\n    </div>\n    <div class="pane right menu-item-description">\n        <div class="desc-area icon {{ representation.activeMetadata.cssClass }}"></div>\n        <div class="desc-area title">\n            {{representation.activeMetadata.name}}\n        </div>\n        <div class="desc-area description">\n            {{representation.activeMetadata.description}}\n        </div>\n    </div>\n</div>\n'}),n("text!platform/commonUI/edit/res/templates/library.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<mct-representation key="\'tree\'"\n                    mct-object="parameters.domainObject"\n                    parameters="parameters">\n</mct-representation>'}),n("text!platform/commonUI/edit/res/templates/edit-object.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="abs l-flex-col" ng-controller="EditObjectController as EditObjectController">\n    <div class="holder flex-elem l-flex-row object-browse-bar ">\n        <div class="items-select left flex-elem l-flex-row grows">\n            <mct-representation key="\'back-arrow\'"\n                                mct-object="domainObject"\n                                class="flex-elem l-back"></mct-representation>\n            <mct-representation key="\'object-header\'"\n                                mct-object="domainObject"\n                                class="l-flex-row flex-elem grows object-header">\n            </mct-representation>\n        </div>\n        <div class="btn-bar right l-flex-row flex-elem flex-justify-end flex-fixed">\n            <mct-representation key="\'switcher\'"\n                                mct-object="domainObject"\n                                ng-model="representation">\n            </mct-representation>\n            <!-- Temporarily, on mobile, the action buttons are hidden-->\n            <mct-representation key="\'action-group\'"\n                                mct-object="domainObject"\n                                parameters="{ category: \'view-control\' }"\n                                class="mobile-hide">\n            </mct-representation>\n        </div>\n    </div>\n    <div class="holder l-flex-col flex-elem grows l-object-wrapper">\n        <div class="holder l-flex-col flex-elem grows l-object-wrapper-inner">\n            <!-- Toolbar and Save/Cancel buttons -->\n            <div class="l-edit-controls flex-elem l-flex-row flex-align-end">\n                <mct-toolbar name="mctToolbar"\n                             structure="toolbar.structure"\n                             ng-model="toolbar.state"\n                             class="flex-elem grows">\n                </mct-toolbar>\n                <mct-representation key="\'edit-action-buttons\'"\n                                    mct-object="domainObject"\n                                    class=\'flex-elem conclude-editing\'>\n                </mct-representation>\n\n            </div>\n            <mct-representation key="representation.selected.key"\n                                mct-object="representation.selected.key && domainObject"\n                                class="abs flex-elem grows object-holder-main scroll"\n                                toolbar="toolbar">\n            </mct-representation>\n        </div><!--/ l-object-wrapper-inner -->\n    </div>\n    <mct-representation mct-object="domainObject"\n                        key="\'time-conductor\'"\n                        class="abs holder flex-elem flex-fixed l-flex-row l-time-conductor-holder">\n    </mct-representation>\n\n</div>\n'}),n("text!platform/commonUI/edit/res/templates/edit-action-buttons.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="EditActionController">\n    <!-- If there\'s a single save action show a button, otherwise show a dropdown with all save actions. -->\n    <span ng-if="saveActions.length === 1">\n        <mct-control key="\'button\'"\n                     structure="{\n                        text: saveActions[0].getMetadata().name,\n                        click: actionPerformer(saveActions[0]),\n                        cssClass: \'major \' + saveActions[0].getMetadata().cssClass\n                     }">\n        </mct-control>\n    </span>\n\n    <span ng-if="saveActions.length > 1">\n        <mct-control key="\'menu-button\'"\n                     structure="{\n                        options: saveActionsAsMenuOptions,\n                        click: saveActionMenuClickHandler,\n                        cssClass: \'btn-bar right icon-save no-label major\'\n                     }">\n        </mct-control>\n    </span>\n\n    <span ng-repeat="currentAction in otherEditActions">\n        <mct-control key="\'button\'"\n                     structure="{\n                        text: currentAction.getMetadata().name,\n                        click: actionPerformer(currentAction),\n                        cssClass: currentAction.getMetadata().cssClass\n                     }">\n        </mct-control>\n    </span>\n</span>'}),n("text!platform/commonUI/edit/res/templates/elements.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="ElementsController" class="flex-elem l-flex-col holder grows">\n    <mct-include key="\'input-filter\'"\n                 class="flex-elem holder"\n                 ng-model="filterBy">\n    </mct-include>\n    <div class="flex-elem grows vscroll">\n        <ul class="tree">\n            <li ng-repeat="containedObject in composition | filter:searchElements">\n                <span class="tree-item">\n                    <mct-representation\n                            class="rep-object-label"\n                            key="\'label\'"\n                            mct-object="containedObject">\n                    </mct-representation>\n                </span>\n            </li>\n        </ul>\n    </div>\n</div>'}),n("text!platform/commonUI/edit/res/templates/topbar-edit.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class=\'top-bar edit abs\'>\n    <mct-representation key="\'object-header\'"\n                        mct-object="domainObject"\n                        parameters="{ mode: \'Edit\' }"\n                        class="l-flex-row flex-elem grows object-header">\n    </mct-representation>\n    <div class=\'buttons-main btn-bar buttons abs\'>\n        <mct-representation key="\'switcher\'"\n                            mct-object="domainObject"\n                            ng-model="ngModel">\n        </mct-representation>\n\n        <mct-representation key="\'edit-action-buttons\'"\n                            mct-object="domainObject"\n                            class=\'conclude-editing\'>\n        </mct-representation>\n    </div>\n</div>';
}),n("platform/commonUI/edit/bundle",["./src/controllers/EditActionController","./src/controllers/EditPanesController","./src/controllers/ElementsController","./src/controllers/EditObjectController","./src/actions/EditAndComposeAction","./src/actions/EditAction","./src/actions/PropertiesAction","./src/actions/RemoveAction","./src/actions/SaveAction","./src/actions/SaveAndStopEditingAction","./src/actions/SaveAsAction","./src/actions/CancelAction","./src/policies/EditActionPolicy","./src/policies/EditableLinkPolicy","./src/policies/EditableMovePolicy","./src/policies/EditContextualActionPolicy","./src/representers/EditRepresenter","./src/representers/EditToolbarRepresenter","./src/capabilities/EditorCapability","./src/capabilities/TransactionCapabilityDecorator","./src/services/TransactionManager","./src/services/TransactionService","./src/creation/CreateMenuController","./src/creation/LocatorController","./src/creation/CreationPolicy","./src/creation/CreateActionProvider","./src/creation/AddActionProvider","./src/creation/CreationService","text!./res/templates/create/locator.html","text!./res/templates/create/create-button.html","text!./res/templates/create/create-menu.html","text!./res/templates/library.html","text!./res/templates/edit-object.html","text!./res/templates/edit-action-buttons.html","text!./res/templates/elements.html","text!./res/templates/topbar-edit.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d,p,f,h,m,g,y,v,b,w,S,x,C,T,k,M,O,$,_,A,E,I,L,N,D,j){j.register("platform/commonUI/edit",{extensions:{controllers:[{key:"EditActionController",implementation:e,depends:["$scope"]},{key:"EditPanesController",implementation:t,depends:["$scope"]},{key:"ElementsController",implementation:n,depends:["$scope"]},{key:"EditObjectController",implementation:i,depends:["$scope","$location","navigationService"]},{key:"CreateMenuController",implementation:x,depends:["$scope"]},{key:"LocatorController",implementation:C,depends:["$scope","$timeout","objectService"]}],actions:[{key:"compose",implementation:r},{key:"edit",implementation:o,depends:["$location","navigationService","$log"],description:"Edit",category:"view-control",cssClass:"major icon-pencil"},{key:"properties",category:["contextual","view-control"],implementation:s,cssClass:"major icon-pencil",name:"Edit Properties...",description:"Edit properties of this object.",depends:["dialogService"]},{key:"remove",category:"contextual",implementation:a,cssClass:"icon-trash",name:"Remove",description:"Remove this object from its containing object.",depends:["navigationService"]},{key:"save-and-stop-editing",category:"save",implementation:l,name:"Save and Finish Editing",cssClass:"icon-save labeled",description:"Save changes made to these objects.",depends:["dialogService","notificationService"]},{key:"save",category:"save",implementation:c,name:"Save and Continue Editing",cssClass:"icon-save labeled",description:"Save changes made to these objects.",depends:["dialogService","notificationService"]},{key:"save-as",category:"save",implementation:u,name:"Save As...",cssClass:"icon-save labeled",description:"Save changes made to these objects.",depends:["$injector","policyService","dialogService","copyService","notificationService"],priority:"mandatory"},{key:"cancel",category:"conclude-editing",implementation:d,name:void 0,cssClass:"icon-x no-label",description:"Discard changes made to these objects.",depends:[]}],policies:[{category:"action",implementation:p},{category:"action",implementation:m,depends:["navigationService","editModeBlacklist","nonEditContextBlacklist"]},{category:"action",implementation:h},{category:"action",implementation:f},{implementation:T,category:"creation"}],templates:[{key:"edit-library",template:E}],representations:[{key:"edit-object",template:I,uses:["view"],gestures:["drop"]},{key:"edit-action-buttons",template:L,uses:["action"]},{key:"edit-elements",template:N,uses:["composition"],gestures:["drop"]},{key:"topbar-edit",template:D},{key:"create-button",template:_},{key:"create-menu",template:A,uses:["action"]}],components:[{type:"decorator",provides:"capabilityService",implementation:b,depends:["$q","transactionManager"],priority:"fallback"},{type:"provider",provides:"transactionService",implementation:S,depends:["$q","$log","cacheService"]},{key:"CreateActionProvider",provides:"actionService",type:"provider",implementation:k,depends:["typeService","policyService"]},{key:"AddActionProvider",provides:"actionService",type:"provider",implementation:M,depends:["$q","typeService","dialogService","policyService"]},{key:"CreationService",provides:"creationService",type:"provider",implementation:O,depends:["$q","$log"]}],representers:[{implementation:g,depends:["$log"]},{implementation:y}],constants:[{key:"editModeBlacklist",value:["copy","follow","link","locate"]},{key:"nonEditContextBlacklist",value:["copy","follow","properties","move","link","remove","locate"]}],capabilities:[{key:"editor",name:"Editor Capability",description:"Provides transactional editing capabilities",implementation:v,depends:["transactionService"]}],controls:[{key:"locator",template:$}],services:[{key:"transactionManager",implementation:w,depends:["transactionService"]}]}})}),n("platform/commonUI/formats/src/FormatProvider",[],function(){function e(e){function t(e){var t=e.key;t&&!n[t]&&(n[t]=new e)}var n={};e.forEach(t),this.formatMap=n}return e.prototype.getFormat=function(e){var t=this.formatMap[e];if(!t)throw new Error("FormatProvider: No format found for "+e);return t},e}),n("platform/commonUI/formats/src/UTCTimeFormat",["moment"],function(e){function t(){}function n(t){var n=e.utc(t);return[[".SSS",function(e){return e.milliseconds()}],[":ss",function(e){return e.seconds()}],["HH:mm",function(e){return e.minutes()}],["HH",function(e){return e.hours()}],["ddd DD",function(e){return e.days()&&1!==e.date()}],["MMM DD",function(e){return 1!==e.date()}],["MMMM",function(e){return e.month()}],["YYYY",function(){return!0}]].filter(function(e){return e[1](n)})[0][0]}var i="YYYY-MM-DD HH:mm:ss.SSS",r=[i,"YYYY-MM-DD HH:mm:ss","YYYY-MM-DD HH:mm","YYYY-MM-DD"];return t.prototype.timeUnits=function(t){var n=e.duration(t);return[["Decades",function(e){return e.years()>15}],["Years",function(e){return e.years()>1}],["Months",function(e){return 1===e.years()||e.months()>1}],["Days",function(e){return 1===e.months()||e.days()>1}],["Hours",function(e){return 1===e.days()||e.hours()>1}],["Minutes",function(e){return 1===e.hours()||e.minutes()>1}],["Seconds",function(e){return 1===e.minutes()||e.seconds()>1}],["Milliseconds",function(e){return!0}]].filter(function(e){return e[1](n)})[0][0]},t.prototype.format=function(t,r){if(void 0!==r){var o=n(t,r);if(o)return e.utc(t).format(o)}return e.utc(t).format(i)+"Z"},t.prototype.parse=function(t){return e.utc(t,r).valueOf()},t.prototype.validate=function(t){return e.utc(t,r).isValid()},t}),n("platform/commonUI/formats/src/DurationFormat",["moment"],function(e){function t(){}var n="HH:mm:ss",i=[n];return t.prototype.format=function(t){return e.utc(t).format(n)},t.prototype.parse=function(t){return e.duration(t).asMilliseconds()},t.prototype.validate=function(t){return e.utc(t,i).isValid()},t}),n("platform/commonUI/formats/bundle",["./src/FormatProvider","./src/UTCTimeFormat","./src/DurationFormat","legacyRegistry"],function(e,t,n,i){i.register("platform/commonUI/formats",{name:"Time services bundle",description:"Defines interfaces and provides default implementations for handling different time systems.",extensions:{components:[{provides:"formatService",type:"provider",implementation:e,depends:["formats[]"]}],formats:[{key:"utc",implementation:t},{key:"duration",implementation:n}],constants:[{key:"DEFAULT_TIME_FORMAT",value:"utc"}],licenses:[{name:"d3",version:"3.0.0",description:"Incorporates modified code from d3 Time Scales",author:"Mike Bostock",copyright:"Copyright 2010-2016 Mike Bostock. All rights reserved.",link:"https://github.com/d3/d3/blob/master/LICENSE"}]}})}),n("platform/commonUI/general/src/services/UrlService",[],function(){function e(e){this.$location=e}return e.prototype.urlForLocation=function(e,t){var n=t&&t.getCapability("context"),i=n?n.getPath():[],r=i.map(function(e){return e.getId()});return e+"/"+r.slice(1).join("/")},e.prototype.urlForNewTab=function(e,t){var n="?view="+this.$location.search().view,i="index.html#"+this.urlForLocation(e,t)+n;return i},e}),n("platform/commonUI/general/src/services/Popup",[],function(){function e(e,t){this.styles=t,this.element=e,e.css(t)}return e.prototype.dismiss=function(){this.element.remove()},e.prototype.goesLeft=function(){return!this.styles.left},e.prototype.goesRight=function(){return!this.styles.right},e.prototype.goesUp=function(){return!this.styles.top},e.prototype.goesDown=function(){return!this.styles.bottom},e}),n("platform/commonUI/general/src/services/PopupService",["./Popup"],function(e){function t(e,t){this.$document=e,this.$window=t}return t.prototype.display=function(t,n,i){function r(e,t){return 0>e?e+u[t]:e}var o,s,a=this.$document,c=this.$window,l=a.find("body"),u=[c.innerWidth,c.innerHeight],d={position:"absolute"};return i=i||{},s=[void 0!==i.offsetX?i.offsetX:0,void 0!==i.offsetY?i.offsetY:0],o=[i.marginX,i.marginY].map(function(e,t){return void 0===e?u[t]/2:e}).map(r),n=n.map(r),n[0]>o[0]?d.right=u[0]-n[0]+s[0]+"px":d.left=n[0]+s[0]+"px",n[1]>o[1]?d.bottom=u[1]-n[1]+s[1]+"px":d.top=n[1]+s[1]+"px",l.append(t),new e(t,d)},t}),n("platform/commonUI/general/src/SplashScreenManager",[],function(){function e(e){var t;e=e[0],t=e.querySelectorAll(".l-splash-holder")[0],t&&(t.className+=" fadeout",t.addEventListener("transitionend",function(){t.parentNode.removeChild(t)}))}return e}),n("platform/commonUI/general/src/StyleSheetLoader",[],function(){function e(e,t,n,i){function r(e){var t=a.createElement("link"),n=[i,e.bundle.path,e.bundle.resources,e.stylesheetUrl].join("/");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",n),s.append(t)}function o(e){return void 0===e.theme||e.theme===n}var s=t.find("head"),a=t[0];i=i||".",e.filter(o).forEach(r)}return e}),n("platform/commonUI/general/src/controllers/TimeRangeController",[],function(){function e(e){return 100*e+"%"}function t(e,t,n){return Math.max(t,Math.min(n,e))}function n(e){return{start:e.start,end:e.end}}function i(e,t,n,i,r){this.$scope=e,this.formatService=n,this.defaultFormat=i,this.now=r,this.tickCount=2,this.innerMinimumSpan=1e3,this.outerMinimumSpan=1e3,this.initialDragValue=void 0,this.formatter=n.getFormat(i),this.formStartChanged=!1,this.formEndChanged=!1,this.$timeout=t,this.$scope.ticks=[],this.updateViewFromModel(this.$scope.ngModel),this.updateFormModel(),["updateViewFromModel","updateSpanWidth","updateOuterStart","updateOuterEnd","updateFormat","validateStart","validateEnd","onFormStartChange","onFormEndChange"].forEach(function(e){this[e]=this[e].bind(this)},this),this.$scope.$watchCollection("ngModel",this.updateViewFromModel),this.$scope.$watch("spanWidth",this.updateSpanWidth),this.$scope.$watch("ngModel.outer.start",this.updateOuterStart),this.$scope.$watch("ngModel.outer.end",this.updateOuterEnd),this.$scope.$watch("parameters.format",this.updateFormat),this.$scope.$watch("formModel.start",this.onFormStartChange),this.$scope.$watch("formModel.end",this.onFormEndChange)}var r=150;return i.prototype.formatTimestamp=function(e){return this.formatter.format(e)},i.prototype.updateTicks=function(){var e,t,n,i,r,o;for(r=this.$scope.ngModel.outer.end,i=this.$scope.ngModel.outer.start,o=r-i,this.$scope.ticks=[],e=0;e<this.tickCount;e+=1)t=e/(this.tickCount-1),n=t*o+i,this.$scope.ticks.push(this.formatTimestamp(n))},i.prototype.updateSpanWidth=function(e){this.tickCount=Math.max(Math.floor(e/r),2),this.updateTicks()},i.prototype.updateViewForInnerSpanFromModel=function(t){var n=t.outer.end-t.outer.start;this.$scope.startInnerText=this.formatTimestamp(t.inner.start),this.$scope.endInnerText=this.formatTimestamp(t.inner.end),this.$scope.startInnerPct=e((t.inner.start-t.outer.start)/n),this.$scope.endInnerPct=e((t.outer.end-t.inner.end)/n)},i.prototype.defaultBounds=function(){var e=this.now();return{start:e-864e5,end:e}},i.prototype.updateViewFromModel=function(e){e=e||{},e.outer=e.outer||this.defaultBounds(),e.inner=e.inner||n(e.outer),this.$scope.ngModel=e,this.updateViewForInnerSpanFromModel(e),this.updateTicks()},i.prototype.startLeftDrag=function(){this.initialDragValue=this.$scope.ngModel.inner.start},i.prototype.startRightDrag=function(){this.initialDragValue=this.$scope.ngModel.inner.end},i.prototype.startMiddleDrag=function(){this.initialDragValue={start:this.$scope.ngModel.inner.start,end:this.$scope.ngModel.inner.end}},i.prototype.toMillis=function(e){var t=this.$scope.ngModel.outer.end-this.$scope.ngModel.outer.start;return e/this.$scope.spanWidth*t},i.prototype.leftDrag=function(e){var n=this.toMillis(e);this.$scope.ngModel.inner.start=t(this.initialDragValue+n,this.$scope.ngModel.outer.start,this.$scope.ngModel.inner.end-this.innerMinimumSpan),this.updateViewFromModel(this.$scope.ngModel)},i.prototype.rightDrag=function(e){var n=this.toMillis(e);this.$scope.ngModel.inner.end=t(this.initialDragValue+n,this.$scope.ngModel.inner.start+this.innerMinimumSpan,this.$scope.ngModel.outer.end),this.updateViewFromModel(this.$scope.ngModel)},i.prototype.middleDrag=function(e){var n=this.toMillis(e),i=0>n?"start":"end",r=0>n?"end":"start";this.$scope.ngModel.inner[i]=t(this.initialDragValue[i]+n,this.$scope.ngModel.outer.start,this.$scope.ngModel.outer.end),this.$scope.ngModel.inner[r]=this.$scope.ngModel.inner[i]+this.initialDragValue[r]-this.initialDragValue[i],this.updateViewFromModel(this.$scope.ngModel)},i.prototype.updateFormModel=function(){this.$scope.formModel={start:((this.$scope.ngModel||{}).outer||{}).start,end:((this.$scope.ngModel||{}).outer||{}).end}},i.prototype.updateOuterStart=function(){var e=this.$scope.ngModel;e.inner.start=Math.max(e.outer.start,e.inner.start),e.inner.end=Math.max(e.inner.start+this.innerMinimumSpan,e.inner.end),this.updateFormModel(),this.updateViewForInnerSpanFromModel(e),this.updateTicks()},i.prototype.updateOuterEnd=function(){var e=this.$scope.ngModel;e.inner.end=Math.min(e.outer.end,e.inner.end),e.inner.start=Math.min(e.inner.end-this.innerMinimumSpan,e.inner.start),this.updateFormModel(),this.updateViewForInnerSpanFromModel(e),this.updateTicks()},i.prototype.updateFormat=function(e){this.formatter=this.formatService.getFormat(e||this.defaultFormat),this.updateViewForInnerSpanFromModel(this.$scope.ngModel),this.updateTicks()},i.prototype.updateBoundsFromForm=function(){var e=this;this.$timeout(function(){e.formStartChanged&&(e.$scope.ngModel.outer.start=e.$scope.ngModel.inner.start=e.$scope.formModel.start,e.formStartChanged=!1),e.formEndChanged&&(e.$scope.ngModel.outer.end=e.$scope.ngModel.inner.end=e.$scope.formModel.end,e.formEndChanged=!1)})},i.prototype.onFormStartChange=function(e,t){this.formStartChanged||e===t||(this.formStartChanged=!0)},i.prototype.onFormEndChange=function(e,t){this.formEndChanged||e===t||(this.formEndChanged=!0)},i.prototype.validateStart=function(e){return e<=this.$scope.formModel.end-this.outerMinimumSpan},i.prototype.validateEnd=function(e){return e>=this.$scope.formModel.start+this.outerMinimumSpan},i}),n("platform/commonUI/general/src/controllers/DateTimePickerController",["moment"],function(e){function t(t,o){function s(){var t,n,i=e.utc({year:u,month:d}).day(0),r=[];for(t=0;6>t;t+=1)for(r.push([]),n=0;7>n;n+=1)r[t].push({year:i.year(),month:i.month(),day:i.date(),dayOfYear:i.dayOfYear()}),i.add(1,"days");return r}function a(){t.month=i[d],t.year=u,t.table=s()}function c(n){var i;i=e.utc(n),t.date={year:i.year(),month:i.month(),day:i.date()},t.time={hours:i.hour(),minutes:i.minute(),seconds:i.second()},p||(u=i.year(),d=i.month(),a())}function l(){var n=e.utc({year:t.date.year,month:t.date.month,day:t.date.day,hour:t.time.hours,minute:t.time.minutes,second:t.time.seconds});t.ngModel[t.field]=n.valueOf()}var u,d,p=!1;t.isInCurrentMonth=function(e){return e.month===d},t.isSelected=function(e){var n=t.date||{};return e.day===n.day&&e.month===n.month&&e.year===n.year},t.select=function(e){t.date=t.date||{},t.date.month=e.month,t.date.year=e.year,t.date.day=e.day,l()},t.dateEquals=function(e,t){return e.year===t.year&&e.month===t.month&&e.day===t.day},t.changeMonth=function(e){d+=e,d>11&&(d=0,u+=1),0>d&&(d=11,u-=1),p=!0,a()},t.nameFor=function(e){return n[e]},t.optionsFor=function(e){return r[e]},a(),t.ngModel[t.field]=void 0===t.ngModel[t.field]?o():t.ngModel[t.field],t.$watch("ngModel[field]",c),t.$watchCollection("date",l),t.$watchCollection("time",l)}var n={hours:"Hour",minutes:"Minute",seconds:"Second"},i=e.months(),r=function(){for(var e=[];e.length<60;)e.push(e.length);return{hours:e.slice(0,24),minutes:e,seconds:e}}();return t}),n("platform/commonUI/general/src/controllers/DateTimeFieldController",[],function(){function e(e,t,n){function i(t){c.validate(e.textValue)&&c.parse(e.textValue)===t||(e.textValue=c.format(t),e.textInvalid=!1,e.lastValidValue=e.textValue),e.pickerModel={value:t}}function r(t){e.textInvalid=!c.validate(t),e.textInvalid||(e.ngModel[e.field]=c.parse(t),e.lastValidValue=e.textValue)}function o(t){t!==e.ngModel[e.field]&&(e.ngModel[e.field]=t,i(t),e.ngBlur&&e.ngBlur(),e.picker.active&&(e.structure.validate&&e.structure.validate(e.ngModel[e.field])?e.picker.active=!1:e.structure.validate||(e.picker.active=!1)))}function s(r){c=t.getFormat(r||n),i(e.ngModel[e.field])}function a(){e.textValue=e.lastValidValue,r(e.textValue)}var c=t.getFormat(n);e.restoreTextValue=a,e.picker={active:!1},e.$watch("structure.format",s),e.$watch("ngModel[field]",i),e.$watch("pickerModel.value",o),e.$watch("textValue",r)}return e}),n("platform/commonUI/general/src/controllers/TreeNodeController",[],function(){function e(e,t){function n(e){return e&&e.getId&&e.getId()}function i(e,t,n){return n=n||0,n>=e.length||t[n]===e[n]&&i(e,t,n+1)}function r(){var t,r,o=e.domainObject,c=a,l=o&&o.getCapability("context"),u=c&&c.getCapability("context");s.isSelectedFlag=!1,l&&u&&(t=l.getPath().map(n),r=u.getPath().map(n),r.length>=t.length&&i(t,r)&&(t.length===r.length?s.isSelectedFlag=!0:(e.toggle&&e.toggle.setState(!0),s.trackExpansion())))}function o(e){a=e,r()}var s=this,a=(e.ngModel||{}).selectedObject;this.isSelectedFlag=!1,this.hasBeenExpandedFlag=!1,this.$timeout=t,this.$scope=e,e.$watch("ngModel.selectedObject",o),e.$watch("domainObject",r)}return e.prototype.select=function(){this.$scope.ngModel&&(this.$scope.ngModel.selectedObject=this.$scope.domainObject),(this.$scope.parameters||{}).callback&&this.$scope.parameters.callback(this.$scope.domainObject)},e.prototype.trackExpansion=function(){var e=this;e.hasBeenExpanded()||e.$timeout(function(){e.hasBeenExpandedFlag=!0},0)},e.prototype.hasBeenExpanded=function(){return this.hasBeenExpandedFlag},e.prototype.isSelected=function(){return this.isSelectedFlag},e}),n("platform/commonUI/general/src/controllers/ActionGroupController",[],function(){function e(e){function t(t){function n(e){var t=e.getMetadata(),n=t.group;n?(i[n]=i[n]||[],i[n].push(e)):r.push(e)}var i={},r=[];(t||[]).forEach(n),e.ungrouped=r,e.groups=Object.keys(i).sort().map(function(e){return i[e]})}function n(){var n=e.action,i=e.parameters||{},r=i.category;t(n&&r?n.getActions({category:r}):[])}e.$watch("domainObject",n),e.$watch("action",n),e.$watch("parameters.category",n),e.ungrouped=[],e.groups=[]}return e}),n("platform/commonUI/general/src/controllers/ToggleController",[],function(){function e(){this.state=!1,this.setState=this.setState.bind(this)}return e.prototype.isActive=function(){return this.state},e.prototype.setState=function(e){this.state=e},e.prototype.toggle=function(){this.state=!this.state},e}),n("platform/commonUI/general/src/controllers/ContextMenuController",[],function(){function e(e){function t(){e.menuActions=e.action?e.action.getActions({category:"contextual"}):[]}e.$watch("action",t)}return e}),n("platform/commonUI/general/src/controllers/ClickAwayController",[],function(){function e(e,t){var n=this;this.state=!1,this.$document=e,this.clickaway=function(){t(function(){n.deactivate()})}}return e.prototype.deactivate=function(){this.state=!1,this.$document.off("mouseup",this.clickaway)},e.prototype.activate=function(){this.state=!0,this.$document.on("mouseup",this.clickaway)},e.prototype.isActive=function(){return this.state},e.prototype.setState=function(e){this.state!==e&&this.toggle()},e.prototype.toggle=function(){this.state?this.deactivate():this.activate()},e}),n("platform/commonUI/general/src/controllers/ViewSwitcherController",[],function(){function e(e,t){function n(e,t){var n;if(t)for(n=0;n<e.length;n+=1)if(e[n].key===t.key)return e[n];return e[0]}function i(i){Array.isArray(i)&&t(function(){e.ngModel.selected=n(i,(e.ngModel||{}).selected)},0)}e.$watch("view",i)}return e}),n("platform/commonUI/general/src/controllers/BottomBarController",[],function(){function e(e){function t(e){return{template:e.template||"indicator",ngModel:"function"==typeof e?new e:e}}this.indicators=e.map(t)}return e.prototype.getIndicators=function(){return this.indicators},e}),n("platform/commonUI/general/src/controllers/GetterSetterController",[],function(){function e(e){function t(){"function"==typeof e.ngModel&&(e.getterSetter.value=e.ngModel())}function n(){"function"==typeof e.ngModel&&e.ngModel(e.getterSetter.value)}e.$watch("ngModel()",t),e.$watch("getterSetter.value",n),e.getterSetter={}}return e}),n("platform/commonUI/general/src/controllers/SelectorController",[],function(){function e(e,n){function i(){return c.selectedObject}function r(e){u.rootObject=e[t]}function o(e){var t=e&&e.getCapability("type");t&&t.instanceOf(n.structure.type)||(c.selectedObject=a),a=c.selectedObject}function s(t){function n(e){function n(t){return e[t]}u.selectedObjects=t.filter(n).map(n)}e.getObjects(t).then(n)}var a,c={},l={},u=this;n.$watch(i,o),n.$watchCollection(function(){return u.getField()},s),e.getObjects([t]).then(r),this.$scope=n,this.selectedObjects=[],this.treeModel=c,this.listModel=l}var t="ROOT";return e.prototype.setField=function(e){this.$scope.ngModel[this.$scope.field]=e},e.prototype.getField=function(){return this.$scope.ngModel[this.$scope.field]||[]},e.prototype.root=function(){return this.rootObject},e.prototype.select=function(e){var t=e&&e.getId(),n=this.getField()||[];t&&-1===n.indexOf(t)&&this.setField(n.concat([t]))},e.prototype.deselect=function(e){var t=e&&e.getId(),n=this.getField()||[];t&&-1!==n.indexOf(t)&&(this.setField(n.filter(function(e){return e!==t})),delete this.listModel.selectedObject)},e.prototype.selected=function(){return this.selectedObjects},e}),n("platform/commonUI/general/src/controllers/ObjectInspectorController",[],function(){function e(e,t){function n(){var t,n=e.ngModel.selectedObject,i=[];for(t=n&&n.hasCapability("context")&&n.getCapability("context").getParent();t&&"root"!==t.getModel().type&&t.hasCapability("context");)i.unshift(t),n=t,t=n.getCapability("context").getParent();e.contextutalParents=i}function i(n){var r;n||(n=e.ngModel.selectedObject,e.primaryParents=[]),r=n.getModel().location,r&&"root"!==r&&t.getObjects([r]).then(function(t){var n=t[r];e.primaryParents.unshift(n),i(n)})}function r(){e.metadata=e.ngModel.selectedObject&&e.ngModel.selectedObject.hasCapability("metadata")&&e.ngModel.selectedObject.useCapability("metadata")}e.primaryParents=[],e.contextutalParents=[],e.$watch("ngModel.selectedObject",function(){e.isLink=e.ngModel.selectedObject&&e.ngModel.selectedObject.hasCapability("location")&&e.ngModel.selectedObject.getCapability("location").isLink(),e.isLink?(i(),n()):(e.primaryParents=[],n()),r()})}return e}),n("platform/commonUI/general/src/controllers/BannerController",[],function(){function e(e,t,n){e.active=t.active,e.action=function(e,t){return t.stopPropagation(),e()},e.dismiss=function(e,t){t.stopPropagation(),e.dismissOrMinimize()},e.maximize=function(e){if("info"!==e.model.severity){var t;e.model.cancel=function(){t.dismiss()},e.onDismiss(function(){t.dismiss()}),t=n.showBlockingMessage(e.model)}}}return e}),n("platform/commonUI/general/src/directives/MCTContainer",[],function(){function e(e){var t={};return e.forEach(function(e){t[e.key]=e}),{restrict:"E",transclude:!0,scope:!0,link:function(e,n,i){var r=i.key,o=t[r],s="container",a={};o&&(s=o.alias||s,(o.attributes||[]).forEach(function(e){a[e]=i[e]})),e[s]=a},template:function(e,n){var i=n.key,r=t[i];return r?r.template:""}}}return e}),n("platform/commonUI/general/src/directives/MCTDrag",[],function(){function e(e){function t(t,n,i){function r(e){t.$eval(i[e],{delta:d,$event:u}),t.$apply()}function o(e){var t=[e.pageX,e.pageY];l=l||t,d=t.map(function(e,t){return e-l[t]}),u=e}function s(e){return o(e),r("mctDrag"),e.preventDefault(),!1}function a(e){return p.off("mouseup",a),p.off("mousemove",s),s(e),r("mctDragUp"),l=void 0,e.preventDefault(),!1}function c(e){return p.on("mouseup",a),p.on("mousemove",s),o(e),r("mctDragDown"),r("mctDrag"),e.preventDefault(),!1}var l,u,d,p=e.find("body");n.on("mousedown",c)}return{restrict:"A",link:t}}return e}),n("platform/commonUI/general/src/directives/MCTClickElsewhere",[],function(){function e(e){function t(t,n,i){function r(e){var r=e.clientX,o=e.clientY,s=n[0].getBoundingClientRect(),a=s.left,c=a+s.width,l=s.top,u=l+s.height;(a>r||r>c||l>o||o>u)&&t.$apply(function(){t.$eval(i.mctClickElsewhere)})}var o=e.find("body");o.on("mousedown",r),t.$on("$destroy",function(){o.off("mousedown",r)})}return{restrict:"A",link:t}}return e}),n("platform/commonUI/general/src/directives/MCTResize",[],function(){function e(e){function n(n,i,r){function o(){return r.mctResizeInterval?n.$eval(r.mctResizeInterval):t}function s(e){l&&l.width===e.width&&l.height===e.height||(n.$eval(r.mctResize,{bounds:e}),u||n.$apply(),l=e)}function a(){s({width:i[0].offsetWidth,height:i[0].offsetHeight}),d&&e(a,o(),!1)}function c(){d=!1}var l,u=!0,d=!0;n.$on("$destroy",c),a(),u=!1}return{restrict:"A",link:n}}var t=100;return e}),n("platform/commonUI/general/src/directives/MCTPopup",[],function(){function e(e,n){function i(i,r,o,s,a){var c=e(t)(i),l=r.parent()[0].getBoundingClientRect(),u=[l.left,l.top],d=n.display(c,u);c.addClass("t-popup"),a(function(e){c.append(e)}),i.$on("$destroy",function(){d.dismiss()})}return{restrict:"E",transclude:!0,link:i,scope:{}}}var t="<div></div>";return e}),n("platform/commonUI/general/src/directives/MCTScroll",[],function(){function e(e,t,n){function i(i,r,o){function s(e){r[0][t]=e}function a(){l.assign(i,r[0][t]),i.$apply(c)}var c=o[n],l=e(c);l.assign(i,r[0][t]),i.$watch(c,s),r.on("scroll",a)}return{restrict:"A",link:i}}return e}),n("platform/commonUI/general/src/directives/MCTSplitPane",[],function(){function e(e,s,a){function c(c,l,u){function d(e){return"vertical"===y.orientation?e.offsetWidth:e.offsetHeight}function p(e){var t,n=e.eq(y.reversed?2:0),i=e.eq(1),r=e.eq(y.reversed?0:2),o=d(i[0]);n.css(y.edge,"0px"),n.css(y.dimension,b-o+"px"),t=d(n[0]),n.css(y.dimension,t+"px"),i.css(y.edge,t+"px"),i.css(y.opposite,"auto"),r.css(y.edge,t+o+"px"),r.css(y.opposite,"0px"),b=t+o}function f(){var e=l.children();return 3!==e.length||"mct-splitter"!==e[1].nodeName.toLowerCase()?void s.warn(i):void p(e)}function h(){b=Math.max(b,0),b=Math.min(b,d(l[0]))}function m(e){var t=b;return"number"==typeof e&&(b=e,h(),f(),S.assign&&b!==t&&S.assign(c,b)),b}function g(e){l.children().toggleClass(e)}var y,v,b,w=u.anchor||t,S=e(u.position);return o[w]||(s.warn(r),w=t),y=o[w],c.$watch(u.position,m),l.addClass("split-layout"),l.addClass(y.orientation),m(d(l.children().eq(y.reversed?2:0)[0])),v=a(function(){m(m())},n,0,!1),c.$on("$destroy",function(){a.cancel(v)}),{position:m,toggleClass:g,anchor:function(){return y}}}return{restrict:"E",controller:["$scope","$element","$attrs",c]}}var t="left",n=15,i=["Invalid mct-split-pane contents.","This element should contain exactly three","child elements, where the middle-most element","is an mct-splitter."].join(" "),r=["Unknown anchor provided to mct-split-pane,","defaulting to",t+"."].join(" "),o={left:{edge:"left",opposite:"right",dimension:"width",orientation:"vertical"},right:{edge:"right",opposite:"left",dimension:"width",orientation:"vertical",reversed:!0},top:{edge:"top",opposite:"bottom",dimension:"height",orientation:"horizontal"},bottom:{edge:"bottom",opposite:"top",dimension:"height",orientation:"horizontal",reversed:!0}};return e}),n("platform/commonUI/general/src/directives/MCTSplitter",[],function(){function e(){function e(e,t,n,i){var r;t.addClass("splitter"),e.splitter={startMove:function(){r=i.position(),i.toggleClass("resizing")},move:function(e){var t=i.anchor(),n="vertical"===t.orientation?0:1,o=e[n]*(t.reversed?-1:1);i.position(r+o)},endMove:function(){i.toggleClass("resizing")}}}return{restrict:"E",require:"^mctSplitPane",link:e,template:t,scope:!0}}var t='<div class=\'abs\'mct-drag-down="splitter.startMove()" mct-drag="splitter.move(delta)" mct-drag-up="splitter.endMove()"></div>';return e}),!function(e,t){"function"==typeof n&&n.amd?n("zepto",[],function(){return t(e)}):t(e)}(this,function(e){var t=function(){function t(e){return null==e?String(e):K[Z.call(e)]||"object"}function n(e){return"function"==t(e)}function i(e){return null!=e&&e==e.window}function r(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function o(e){return"object"==t(e)}function s(e){return o(e)&&!i(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){var t=!!e&&"length"in e&&e.length,n=k.type(e);return"function"!=n&&!i(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function c(e){return E.call(e,function(e){return null!=e})}function l(e){return e.length>0?k.fn.concat.apply([],e):e}function u(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(e){return e in D?D[e]:D[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,t){return"number"!=typeof t||j[u(e)]?t:t+"px"}function f(e){var t,n;return N[e]||(t=L.createElement(e),L.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),N[e]=n),N[e]}function h(e){return"children"in e?I.call(e.children):k.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function m(e,t){var n,i=e?e.length:0;for(n=0;i>n;n++)this[n]=e[n];this.length=i,this.selector=t||""}function g(e,t,n){for(T in t)n&&(s(t[T])||ee(t[T]))?(s(t[T])&&!s(e[T])&&(e[T]={}),ee(t[T])&&!ee(e[T])&&(e[T]=[]),g(e[T],t[T],n)):t[T]!==C&&(e[T]=t[T])}function y(e,t){return null==t?k(e):k(e).filter(t)}function v(e,t,i,r){return n(t)?t.call(e,i,r):t}function b(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function w(e,t){var n=e.className||"",i=n&&n.baseVal!==C;return t===C?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function S(e){try{return e?"true"==e||("false"==e?!1:"null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?k.parseJSON(e):e):e}catch(t){return e}}function x(e,t){t(e);for(var n=0,i=e.childNodes.length;i>n;n++)x(e.childNodes[n],t)}var C,T,k,M,O,$,_=[],A=_.concat,E=_.filter,I=_.slice,L=e.document,N={},D={},j={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,P=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,U=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,V=/([A-Z])/g,B=["val","css","html","text","data","width","height","offset"],q=["after","prepend","before","append"],Y=L.createElement("table"),z=L.createElement("tr"),H={tr:L.createElement("tbody"),tbody:Y,thead:Y,tfoot:Y,td:z,th:z,"*":L.createElement("div")},W=/complete|loaded|interactive/,G=/^[\w-]*$/,K={},Z=K.toString,X={},J=L.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",
frameborder:"frameBorder",contenteditable:"contentEditable"},ee=Array.isArray||function(e){return e instanceof Array};return X.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;return o&&(r=J).appendChild(e),i=~X.qsa(r,t).indexOf(e),o&&J.removeChild(e),i},O=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},$=function(e){return E.call(e,function(t,n){return e.indexOf(t)==n})},X.fragment=function(e,t,n){var i,r,o;return P.test(e)&&(i=k(L.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(U,"<$1></$2>")),t===C&&(t=R.test(e)&&RegExp.$1),t in H||(t="*"),o=H[t],o.innerHTML=""+e,i=k.each(I.call(o.childNodes),function(){o.removeChild(this)})),s(n)&&(r=k(i),k.each(n,function(e,t){B.indexOf(e)>-1?r[e](t):r.attr(e,t)})),i},X.Z=function(e,t){return new m(e,t)},X.isZ=function(e){return e instanceof X.Z},X.init=function(e,t){var i;if(!e)return X.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&R.test(e))i=X.fragment(e,RegExp.$1,t),e=null;else{if(t!==C)return k(t).find(e);i=X.qsa(L,e)}else{if(n(e))return k(L).ready(e);if(X.isZ(e))return e;if(ee(e))i=c(e);else if(o(e))i=[e],e=null;else if(R.test(e))i=X.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==C)return k(t).find(e);i=X.qsa(L,e)}}return X.Z(i,e)},k=function(e,t){return X.init(e,t)},k.extend=function(e){var t,n=I.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){g(e,n,t)}),e},X.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],o=i||r?t.slice(1):t,s=G.test(o);return e.getElementById&&s&&i?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:I.call(s&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},k.contains=L.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},k.type=t,k.isFunction=n,k.isWindow=i,k.isArray=ee,k.isPlainObject=s,k.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},k.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},k.inArray=function(e,t,n){return _.indexOf.call(t,e,n)},k.camelCase=O,k.trim=function(e){return null==e?"":String.prototype.trim.call(e)},k.uuid=0,k.support={},k.expr={},k.noop=function(){},k.map=function(e,t){var n,i,r,o=[];if(a(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&o.push(n);else for(r in e)n=t(e[r],r),null!=n&&o.push(n);return l(o)},k.each=function(e,t){var n,i;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},k.grep=function(e,t){return E.call(e,t)},e.JSON&&(k.parseJSON=JSON.parse),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),k.fn={constructor:X.Z,length:0,forEach:_.forEach,reduce:_.reduce,push:_.push,sort:_.sort,splice:_.splice,indexOf:_.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=X.isZ(t)?t.toArray():t;return A.apply(X.isZ(this)?this.toArray():this,n)},map:function(e){return k(k.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return k(I.apply(this,arguments))},ready:function(e){return W.test(L.readyState)&&L.body?e(k):L.addEventListener("DOMContentLoaded",function(){e(k)},!1),this},get:function(e){return e===C?I.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return _.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return n(e)?this.not(this.not(e)):k(E.call(this,function(t){return X.matches(t,e)}))},add:function(e,t){return k($(this.concat(k(e,t))))},is:function(e){return this.length>0&&X.matches(this[0],e)},not:function(e){var t=[];if(n(e)&&e.call!==C)this.each(function(n){e.call(this,n)||t.push(this)});else{var i="string"==typeof e?this.filter(e):a(e)&&n(e.item)?I.call(e):k(e);this.forEach(function(e){i.indexOf(e)<0&&t.push(e)})}return k(t)},has:function(e){return this.filter(function(){return o(e)?k.contains(this,e):k(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!o(e)?e:k(e)},last:function(){var e=this[this.length-1];return e&&!o(e)?e:k(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?k(e).filter(function(){var e=this;return _.some.call(n,function(t){return k.contains(t,e)})}):1==this.length?k(X.qsa(this[0],e)):this.map(function(){return X.qsa(this,e)}):k()},closest:function(e,t){var n=[],i="object"==typeof e&&k(e);return this.each(function(o,s){for(;s&&!(i?i.indexOf(s)>=0:X.matches(s,e));)s=s!==t&&!r(s)&&s.parentNode;s&&n.indexOf(s)<0&&n.push(s)}),k(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=k.map(n,function(e){return(e=e.parentNode)&&!r(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return y(t,e)},parent:function(e){return y($(this.pluck("parentNode")),e)},children:function(e){return y(this.map(function(){return h(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||I.call(this.childNodes)})},siblings:function(e){return y(this.map(function(e,t){return E.call(h(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return k.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=n(e);if(this[0]&&!t)var i=k(e).get(0),r=i.parentNode||this.length>1;return this.each(function(n){k(this).wrapAll(t?e.call(this,n):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){k(this[0]).before(e=k(e));for(var t;(t=e.children()).length;)e=t.first();k(e).append(this)}return this},wrapInner:function(e){var t=n(e);return this.each(function(n){var i=k(this),r=i.contents(),o=t?e.call(this,n):e;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){k(this).replaceWith(k(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=k(this);(e===C?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return k(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return k(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;k(this).empty().append(v(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=v(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(o(e))for(T in e)b(this,T,e[T]);else b(this,e,v(this,t,n,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(e))?n:C},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){b(this,e)},this)})},prop:function(e,t){return e=Q[e]||e,1 in arguments?this.each(function(n){this[e]=v(this,t,n,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=Q[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var n="data-"+e.replace(V,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?S(i):C},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=v(this,e,t,this.value)})):this[0]&&(this[0].multiple?k(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=k(this),i=v(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;if(L.documentElement!==this[0]&&!k.contains(L.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(e,n){if(arguments.length<2){var i=this[0];if("string"==typeof e){if(!i)return;return i.style[O(e)]||getComputedStyle(i,"").getPropertyValue(e)}if(ee(e)){if(!i)return;var r={},o=getComputedStyle(i,"");return k.each(e,function(e,t){r[t]=i.style[O(t)]||o.getPropertyValue(t)}),r}}var s="";if("string"==t(e))n||0===n?s=u(e)+":"+p(e,n):this.each(function(){this.style.removeProperty(u(e))});else for(T in e)e[T]||0===e[T]?s+=u(T)+":"+p(T,e[T])+";":this.each(function(){this.style.removeProperty(u(T))});return this.each(function(){this.style.cssText+=";"+s})},index:function(e){return e?this.indexOf(k(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?_.some.call(this,function(e){return this.test(w(e))},d(e)):!1},addClass:function(e){return e?this.each(function(t){if("className"in this){M=[];var n=w(this),i=v(this,e,t,n);i.split(/\s+/g).forEach(function(e){k(this).hasClass(e)||M.push(e)},this),M.length&&w(this,n+(n?" ":"")+M.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===C)return w(this,"");M=w(this),v(this,e,t,M).split(/\s+/g).forEach(function(e){M=M.replace(d(e)," ")}),w(this,M.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var i=k(this),r=v(this,e,n,w(this));r.split(/\s+/g).forEach(function(e){(t===C?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===C?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===C?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=F.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(k(e).css("margin-top"))||0,n.left-=parseFloat(k(e).css("margin-left"))||0,i.top+=parseFloat(k(t[0]).css("border-top-width"))||0,i.left+=parseFloat(k(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||L.body;e&&!F.test(e.nodeName)&&"static"==k(e).css("position");)e=e.offsetParent;return e})}},k.fn.detach=k.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});k.fn[e]=function(n){var o,s=this[0];return n===C?i(s)?s["inner"+t]:r(s)?s.documentElement["scroll"+t]:(o=this.offset())&&o[e]:this.each(function(t){s=k(this),s.css(e,v(this,n,t,s[e]()))})}}),q.forEach(function(n,i){var r=i%2;k.fn[n]=function(){var n,o,s=k.map(arguments,function(e){var i=[];return n=t(e),"array"==n?(e.forEach(function(e){return e.nodeType!==C?i.push(e):k.zepto.isZ(e)?i=i.concat(e.get()):void(i=i.concat(X.fragment(e)))}),i):"object"==n||null==e?e:X.fragment(e)}),a=this.length>1;return s.length<1?this:this.each(function(t,n){o=r?n:n.parentNode,n=0==i?n.nextSibling:1==i?n.firstChild:2==i?n:null;var c=k.contains(L.documentElement,o);s.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!o)return k(t).remove();o.insertBefore(t,n),c&&x(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var n=t.ownerDocument?t.ownerDocument.defaultView:e;n.eval.call(n,t.innerHTML)}})})})},k.fn[r?n+"To":"insert"+(i?"Before":"After")]=function(e){return k(e)[n](this),this}}),X.Z.prototype=m.prototype=k.fn,X.uniq=$,X.deserializeValue=S,k.zepto=X,k}();return e.Zepto=t,void 0===e.$&&(e.$=t),function(t){function n(e){return e._zid||(e._zid=f++)}function i(e,t,i,s){if(t=r(t),t.ns)var a=o(t.ns);return(y[n(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||a.test(e.ns))&&(!i||n(e.fn)===n(i))&&(!s||e.sel==s)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function s(e,t){return e.del&&!b&&e.e in w||!!t}function a(e){return S[e]||b&&w[e]||e}function c(e,i,o,c,l,d,f){var h=n(e),m=y[h]||(y[h]=[]);i.split(/\s/).forEach(function(n){if("ready"==n)return t(document).ready(o);var i=r(n);i.fn=o,i.sel=l,i.e in S&&(o=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?i.fn.apply(this,arguments):void 0}),i.del=d;var h=d||o;i.proxy=function(t){if(t=u(t),!t.isImmediatePropagationStopped()){t.data=c;var n=h.apply(e,t._args==p?[t]:[t].concat(t._args));return n===!1&&(t.preventDefault(),t.stopPropagation()),n}},i.i=m.length,m.push(i),"addEventListener"in e&&e.addEventListener(a(i.e),i.proxy,s(i,f))})}function l(e,t,r,o,c){var l=n(e);(t||"").split(/\s/).forEach(function(t){i(e,t,r,o).forEach(function(t){delete y[l][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,s(t,c))})})}function u(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(k,function(t,i){var r=n[t];e[t]=function(){return this[i]=x,r&&r.apply(n,arguments)},e[i]=C}),e.timeStamp||(e.timeStamp=Date.now()),(n.defaultPrevented!==p?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function d(e){var t,n={originalEvent:e};for(t in e)T.test(t)||e[t]===p||(n[t]=e[t]);return u(n,e)}var p,f=1,h=Array.prototype.slice,m=t.isFunction,g=function(e){return"string"==typeof e},y={},v={},b="onfocusin"in e,w={focus:"focusin",blur:"focusout"},S={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:c,remove:l},t.proxy=function(e,i){var r=2 in arguments&&h.call(arguments,2);if(m(e)){var o=function(){return e.apply(i,r?r.concat(h.call(arguments)):arguments)};return o._zid=n(e),o}if(g(i))return r?(r.unshift(e[i],e),t.proxy.apply(null,r)):t.proxy(e[i],e);throw new TypeError("expected function")},t.fn.bind=function(e,t,n){return this.on(e,t,n)},t.fn.unbind=function(e,t){return this.off(e,t)},t.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var x=function(){return!0},C=function(){return!1},T=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,t,n){return this.on(t,e,n)},t.fn.undelegate=function(e,t,n){return this.off(t,e,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,r,o){var s,a,u=this;return e&&!g(e)?(t.each(e,function(e,t){u.on(e,n,i,t,o)}),u):(g(n)||m(r)||r===!1||(r=i,i=n,n=p),(r===p||i===!1)&&(r=i,i=p),r===!1&&(r=C),u.each(function(u,p){o&&(s=function(e){return l(p,e.type,r),r.apply(this,arguments)}),n&&(a=function(e){var i,o=t(e.target).closest(n,p).get(0);return o&&o!==p?(i=t.extend(d(e),{currentTarget:o,liveFired:p}),(s||r).apply(o,[i].concat(h.call(arguments,1)))):void 0}),c(p,e,r,i,n,a||s)}))},t.fn.off=function(e,n,i){var r=this;return e&&!g(e)?(t.each(e,function(e,t){r.off(e,n,t)}),r):(g(n)||m(i)||i===!1||(i=n,n=p),i===!1&&(i=C),r.each(function(){l(this,e,i,n)}))},t.fn.trigger=function(e,n){return e=g(e)||t.isPlainObject(e)?t.Event(e):u(e),e._args=n,this.each(function(){e.type in w&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var r,o;return this.each(function(s,a){r=d(g(e)?t.Event(e):e),r._args=n,r.target=a,t.each(i(a,e.type||e),function(e,t){return o=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(e,t){g(e)||(t=e,e=t.type);var n=document.createEvent(v[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),u(n)}}(t),function(t){function n(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function i(e,t,i,r){return e.global?n(t||w,i,r):void 0}function r(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function o(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function s(e,t){var n=t.context;return t.beforeSend.call(n,e,t)===!1||i(t,n,"ajaxBeforeSend",[e,t])===!1?!1:void i(t,n,"ajaxSend",[e,t])}function a(e,t,n,r){var o=n.context,s="success";n.success.call(o,e,s,t),r&&r.resolveWith(o,[e,s,t]),i(n,o,"ajaxSuccess",[t,n,e]),l(s,t,n)}function c(e,t,n,r,o){var s=r.context;r.error.call(s,n,t,e),o&&o.rejectWith(s,[n,t,e]),i(r,s,"ajaxError",[n,r,e||t]),l(t,n,r)}function l(e,t,n){var r=n.context;n.complete.call(r,t,e),i(n,r,"ajaxComplete",[t,n]),o(n)}function u(e,t,n){if(n.dataFilter==d)return e;var i=n.context;return n.dataFilter.call(i,e,t)}function d(){}function p(e){return e&&(e=e.split(";",2)[0]),e&&(e==k?"html":e==T?"json":x.test(e)?"script":C.test(e)&&"xml")||"text"}function f(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=f(e.url,e.data),e.data=void 0)}function m(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function g(e,n,i,r){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,c){o=t.type(c),r&&(n=i?r:r+"["+(a||"object"==o||"array"==o?n:"")+"]"),!r&&s?e.add(c.name,c.value):"array"==o||!i&&"object"==o?g(e,c,i,n):e.add(n,c)})}var y,v,b=+new Date,w=e.document,S=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,C=/^(?:text|application)\/xml/i,T="application/json",k="text/html",M=/^\s*$/,O=w.createElement("a");O.href=e.location.href,t.active=0,t.ajaxJSONP=function(n,i){if(!("type"in n))return t.ajax(n);var r,o,l=n.jsonpCallback,u=(t.isFunction(l)?l():l)||"Zepto"+b++,d=w.createElement("script"),p=e[u],f=function(e){t(d).triggerHandler("error",e||"abort")},h={abort:f};return i&&i.promise(h),t(d).on("load error",function(s,l){clearTimeout(o),t(d).off().remove(),"error"!=s.type&&r?a(r[0],h,n,i):c(null,l||"error",h,n,i),e[u]=p,r&&t.isFunction(p)&&p(r[0]),p=r=void 0}),s(h,n)===!1?(f("abort"),h):(e[u]=function(){r=arguments},d.src=n.url.replace(/\?(.+)=\?/,"?$1="+u),w.head.appendChild(d),n.timeout>0&&(o=setTimeout(function(){f("timeout")},n.timeout)),h)},t.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:k,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:d},t.ajax=function(n){var i,o,l=t.extend({},n||{}),m=t.Deferred&&t.Deferred();for(y in t.ajaxSettings)void 0===l[y]&&(l[y]=t.ajaxSettings[y]);r(l),l.crossDomain||(i=w.createElement("a"),i.href=l.url,i.href=i.href,l.crossDomain=O.protocol+"//"+O.host!=i.protocol+"//"+i.host),l.url||(l.url=e.location.toString()),(o=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,o)),h(l);var g=l.dataType,b=/\?.+=\?/.test(l.url);if(b&&(g="jsonp"),l.cache!==!1&&(n&&n.cache===!0||"script"!=g&&"jsonp"!=g)||(l.url=f(l.url,"_="+Date.now())),"jsonp"==g)return b||(l.url=f(l.url,l.jsonp?l.jsonp+"=?":l.jsonp===!1?"":"callback=?")),t.ajaxJSONP(l,m);var S,x=l.accepts[g],C={},T=function(e,t){C[e.toLowerCase()]=[e,t]},k=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:e.location.protocol,$=l.xhr(),_=$.setRequestHeader;if(m&&m.promise($),l.crossDomain||T("X-Requested-With","XMLHttpRequest"),T("Accept",x||"*/*"),(x=l.mimeType||x)&&(x.indexOf(",")>-1&&(x=x.split(",",2)[0]),$.overrideMimeType&&$.overrideMimeType(x)),(l.contentType||l.contentType!==!1&&l.data&&"GET"!=l.type.toUpperCase())&&T("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(v in l.headers)T(v,l.headers[v]);if($.setRequestHeader=T,$.onreadystatechange=function(){if(4==$.readyState){$.onreadystatechange=d,clearTimeout(S);var e,n=!1;if($.status>=200&&$.status<300||304==$.status||0==$.status&&"file:"==k){if(g=g||p(l.mimeType||$.getResponseHeader("content-type")),"arraybuffer"==$.responseType||"blob"==$.responseType)e=$.response;else{e=$.responseText;try{e=u(e,g,l),"script"==g?(1,eval)(e):"xml"==g?e=$.responseXML:"json"==g&&(e=M.test(e)?null:t.parseJSON(e))}catch(i){n=i}if(n)return c(n,"parsererror",$,l,m)}a(e,$,l,m)}else c($.statusText||null,$.status?"error":"abort",$,l,m)}},s($,l)===!1)return $.abort(),c(null,"abort",$,l,m),$;var A="async"in l?l.async:!0;if($.open(l.type,l.url,A,l.username,l.password),l.xhrFields)for(v in l.xhrFields)$[v]=l.xhrFields[v];for(v in C)_.apply($,C[v]);return l.timeout>0&&(S=setTimeout(function(){$.onreadystatechange=d,$.abort(),c(null,"timeout",$,l,m)},l.timeout)),$.send(l.data?l.data:null),$},t.get=function(){return t.ajax(m.apply(null,arguments))},t.post=function(){var e=m.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=m.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,s=e.split(/\s/),a=m(e,n,i),c=a.success;return s.length>1&&(a.url=s[0],r=s[1]),a.success=function(e){o.html(r?t("<div>").html(e.replace(S,"")).find(r):e),c&&c.apply(o,arguments)},t.ajax(a),this};var $=encodeURIComponent;t.param=function(e,n){var i=[];return i.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push($(e)+"="+$(n))},g(i,e,n),i.join("&").replace(/%20/g,"+")}}(t),function(e){e.fn.serializeArray=function(){var t,n,i=[],r=function(e){return e.forEach?e.forEach(r):void i.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(i,o){n=o.type,t=o.name,t&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&r(e(o).val())}),i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(){try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;e.getComputedStyle=function(e,t){try{return n(e,t)}catch(i){return null}}}}(),t}),n("text!platform/commonUI/general/res/templates/tree/node.html",[],function(){return'<span class="tree-item menus-to-left">\n</span>\n<span class="tree-item-subtree">\n</span>\n'}),n("text!platform/commonUI/general/res/templates/tree/toggle.html",[],function(){return"<span class='ui-symbol view-control flex-elem'>\n</span>\n"}),n("platform/commonUI/general/src/ui/ToggleView",["zepto","text!../../res/templates/tree/toggle.html"],function(e,t){function n(n){this.expanded=!!n,this.callbacks=[],this.el=e(t),this.el.on("click",function(){this.value(!this.expanded)}.bind(this))}return n.prototype.value=function(e){this.expanded=e,e?this.el.addClass("expanded"):this.el.removeClass("expanded"),this.callbacks.forEach(function(t){t(e)})},n.prototype.observe=function(e){return this.callbacks.push(e),function(){this.callbacks=this.callbacks.filter(function(t){return t!==e})}.bind(this)},n.prototype.elements=function(){return this.el},n}),n("text!platform/commonUI/general/res/templates/tree/tree-label.html",[],function(){return'<span class="rep-object-label">\n    <div class="t-object-label l-flex-row flex-elem grows">\n        <div class="t-item-icon flex-elem"></div>\n        <div class=\'t-title-label flex-elem grows\'></div>\n    </div>\n</span>\n'}),n("platform/commonUI/general/src/ui/TreeLabelView",["zepto","text!../../res/templates/tree/tree-label.html"],function(e,t){function n(n){this.el=e(t),this.gestureService=n}function i(e){var t=e.getCapability("location");return t.isLink()}function r(e){var t=e.getCapability("type");return t.getCssClass()}return n.prototype.updateView=function(e){var t=this.el.find(".t-title-label"),n=this.el.find(".t-item-icon");t.text(e?e.getModel().name:""),n.addClass(e?r(e):""),e&&i(e)?n.addClass("l-icon-link"):n.removeClass("l-icon-link")},n.prototype.model=function(e){this.unlisten&&(this.unlisten(),delete this.unlisten),this.activeGestures&&(this.activeGestures.destroy(),delete this.activeGestures),this.updateView(e),e&&(this.unlisten=e.getCapability("mutation").listen(this.updateView.bind(this,e)),this.activeGestures=this.gestureService.attachGestures(this.elements(),e,["info","menu","drag"]))},n.prototype.elements=function(){return this.el},n}),n("platform/commonUI/general/src/ui/TreeNodeView",["zepto","text!../../res/templates/tree/node.html","./ToggleView","./TreeLabelView"],function(e,t,n,i){function r(r,o,s){this.li=e("<li>"),this.statusClasses=[],this.toggleView=new n(!1),this.toggleView.observe(function(t){t?(this.subtreeView||(this.subtreeView=o(),this.subtreeView.model(this.activeObject),this.li.find(".tree-item-subtree").eq(0).append(e(this.subtreeView.elements()))),e(this.subtreeView.elements()).removeClass("hidden")):this.subtreeView&&e(this.subtreeView.elements()).addClass("hidden")}.bind(this)),this.labelView=new i(r),e(this.labelView.elements()).on("click",function(e){s(this.activeObject,e)}.bind(this)),this.li.append(e(t)),this.li.find("span").eq(0).append(e(this.toggleView.elements())).append(e(this.labelView.elements())),this.model(void 0)}function o(e){function t(e){return e.getId()}var n=e&&e.getCapability("context");return n?n.getPath().map(t):[]}return r.prototype.updateStatusClasses=function(e){this.statusClasses.forEach(function(e){this.li.removeClass(e)}.bind(this)),this.statusClasses=e.map(function(e){return"s-status-"+e}),this.statusClasses.forEach(function(e){this.li.addClass(e)}.bind(this))},r.prototype.model=function(t){this.unlisten&&this.unlisten(),this.activeObject=t,t&&t.hasCapability("composition")?e(this.toggleView.elements()).addClass("has-children"):e(this.toggleView.elements()).removeClass("has-children"),t&&t.hasCapability("status")&&(this.unlisten=t.getCapability("status").listen(this.updateStatusClasses.bind(this)),this.updateStatusClasses(t.getCapability("status").list())),this.labelView.model(t),this.subtreeView&&this.subtreeView.model(t)},r.prototype.value=function(e){var t=o(this.activeObject),n=o(e);this.onSelectionPath&&(this.li.find(".tree-item").eq(0).removeClass("selected"),this.subtreeView&&this.subtreeView.value(void 0)),this.onSelectionPath=!!e&&!!this.activeObject&&t.length<=n.length&&t.every(function(e,t){return n[t]===e}),this.onSelectionPath&&(t.length===n.length?this.li.find(".tree-item").eq(0).addClass("selected"):(this.toggleView.value(!0),this.subtreeView.value(e)))},r.prototype.elements=function(){return this.li},r}),n("text!platform/commonUI/general/res/templates/tree/wait-node.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<li class=\'tree-item t-wait-node loading\'>\n    <span class="t-title-label">Loading...</span>\n</li>\n'}),n("platform/commonUI/general/src/ui/TreeView",["zepto","./TreeNodeView","text!../../res/templates/tree/wait-node.html"],function(e,t,n){function i(t,n){this.ul=e('<ul class="tree"></ul>'),this.nodeViews=[],this.callbacks=[],this.selectFn=n||this.value.bind(this),this.gestureService=t,this.pending=!1}return i.prototype.newTreeView=function(){return new i(this.gestureService,this.selectFn)},i.prototype.setSize=function(n){for(var i;this.nodeViews.length<n;)i=new t(this.gestureService,this.newTreeView.bind(this),this.selectFn),this.nodeViews.push(i),this.ul.append(e(i.elements()));for(;this.nodeViews.length>n;)i=this.nodeViews.pop(),e(i.elements()).remove()},i.prototype.loadComposition=function(){function e(e,t){n.nodeViews[t].model(e)}function t(t){n.pending&&(n.pending=!1,n.nodeViews=[],n.ul.empty()),i===n.activeObject&&(n.setSize(t.length),t.forEach(e),n.updateNodeViewSelection())}var n=this,i=this.activeObject;i.useCapability("composition").then(t)},i.prototype.model=function(t){this.unlisten&&this.unlisten(),this.activeObject=t,this.ul.empty(),t&&t.hasCapability("composition")?(this.pending=!0,this.ul.append(e(n)),this.unlisten=t.getCapability("mutation").listen(this.loadComposition.bind(this)),this.loadComposition(t)):this.setSize(0)},i.prototype.updateNodeViewSelection=function(){this.nodeViews.forEach(function(e){e.value(this.selectedObject)}.bind(this))},i.prototype.value=function(e,t){this.selectedObject=e,this.updateNodeViewSelection(),this.callbacks.forEach(function(n){n(e,t)})},i.prototype.observe=function(e){return this.callbacks.push(e),function(){this.callbacks=this.callbacks.filter(function(t){return t!==e})}.bind(this)},i.prototype.elements=function(){return this.ul},i}),n("platform/commonUI/general/src/directives/MCTTree",["angular","../ui/TreeView"],function(e,t){function n(n){function i(i,r){function o(e,t){if(s!==e){if(!i.allowSelection(e))return void a.value(s);s=e,i.onSelection(e),i.selectedObject=e,t&&t instanceof MouseEvent&&i.$apply()}}i.allowSelection||(i.allowSelection=function(){return!0}),i.onSelection||(i.onSelection=function(){});var s=i.selectedObject,a=new t(n),c=a.observe(o);r.append(e.element(a.elements())),i.$watch("selectedObject",function(e){s=e,a.value(e)}),i.$watch("rootObject",a.model.bind(a)),i.$on("$destroy",c)}return{restrict:"E",link:i,scope:{rootObject:"=",selectedObject:"=",onSelection:"=?",allowSelection:"=?"}}}return n}),n("platform/commonUI/general/src/filters/ReverseFilter",[],function(){function e(){return function(e){return e&&e.toString().split("").reverse().join("")}}return e}),n("text!platform/commonUI/general/res/templates/bottombar.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class=\'abs bottom-bar ue-bottom-bar mobile-disable-select\' ng-controller="BottomBarController as bar">\n    <div id=\'status\' class=\'status-holder\'>\n        <mct-include ng-repeat="indicator in bar.getIndicators()"\n                     ng-model="indicator.ngModel"\n                     key="indicator.template"\n                     class="status-block-holder"\n                     ng-class=\'indicator.ngModel.getGlyphClass()\'>\n        </mct-include>\n    </div>\n    <mct-include key="\'message-banner\'"></mct-include>\n    <mct-include key="\'about-logo\'"></mct-include>\n</div>';
}),n("text!platform/commonUI/general/res/templates/controls/action-button.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<a class="s-button key-{{parameters.action.getMetadata().key}} {{parameters.action.getMetadata().cssClass}}"\n   ng-class="{ labeled: parameters.labeled }"\n   title="{{parameters.action.getMetadata().description}}"\n   ng-click="parameters.action.perform()">\n    <span class="title-label" ng-if="parameters.labeled">\n        {{parameters.action.getMetadata().name}}\n    </span>\n</a>\n'}),n("text!platform/commonUI/general/res/templates/controls/input-filter.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<!-- look at action-button for example -->\n<span class="t-filter l-filter s-filter"\n      ng-controller="GetterSetterController">\n	<input type="search"\n           class="t-filter-input"\n           ng-model="getterSetter.value"/>\n	<a class="clear-icon icon-x-in-circle"\n       ng-class="{show: !(getterSetter.value === \'\' || getterSetter.value === undefined)}"\n       ng-click="getterSetter.value = \'\'">\n    </a>\n</span>'}),n("text!platform/commonUI/general/res/templates/indicator.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<!-- DO NOT ADD SPACES BETWEEN THE SPANS - IT ADDS WHITE SPACE!! -->\n<div class=\'status block\'\n	 title="{{ngModel.getDescription()}}"\n	 ng-click=\'ngModel.configure()\'\n	 ng-show="ngModel.getText().length > 0">\n	<span class="status-indicator {{ngModel.getCssClass()}}"></span><span class="label"\n		  ng-class=\'ngModel.getTextClass()\'>\n		{{ngModel.getText()}}\n        <a class="s-button icon-gear" ng-if="ngModel.configure"></a>\n	</span><span class="count">\n	</span>\n</div>'}),n("text!platform/commonUI/general/res/templates/message-banner.html",[],function(){return'<div ng-controller="BannerController" ng-show="active.notification"\n     class="l-message-banner s-message-banner {{active.notification.model.severity}}" ng-class="{\n     \'minimized\': active.notification.model.minimized,\n     \'new\': !active.notification.model.minimized}"\n     ng-click="maximize(active.notification)">\n    <span class="banner-elem label">\n        {{active.notification.model.title}}\n    </span>\n    <span ng-show="active.notification.model.progress !== undefined || active.notification.model.unknownProgress">\n        <mct-include key="\'progress-bar\'" class="banner-elem"\n                     ng-model="active.notification.model">\n        </mct-include>\n    </span>\n    <a ng-hide="active.notification.model.primaryOption === undefined"\n       class="banner-elem l-action s-action"\n       ng-click="action(active.notification.model.primaryOption.callback, $event)">\n        {{active.notification.model.primaryOption.label}}\n    </a>\n    <a class="banner-elem close icon-x" ng-click="dismiss(active.notification, $event)"></a>\n</div>'}),n("text!platform/commonUI/general/res/templates/progress-bar.html",[],function(){return'<span class="l-progress-bar s-progress-bar"\n      ng-class="{ indeterminate:ngModel.unknownProgress }">\n    <span class="progress-amt-holder">\n        <span class="progress-amt" style="width: {{ngModel.progress}}%"></span>\n    </span>\n</span>\n<div class="progress-info hint" ng-hide="ngModel.progressText === undefined">\n    <span class="progress-amt-text" ng-show="ngModel.progress > 0">{{ngModel.progress}}% complete. </span>\n    {{ngModel.progressText}}\n</div>'}),n("text!platform/commonUI/general/res/templates/controls/time-controller.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="TimeRangeController as trCtrl" class="l-flex-col">\n    <form class="l-time-range-inputs-holder l-flex-row flex-elem"\n          ng-submit="trCtrl.updateBoundsFromForm()">\n        <span class="l-time-range-inputs-elem flex-elem icon-clock"></span>\n        <span class="l-time-range-inputs-elem t-inputs-w l-flex-row flex-elem">\n            <span class="l-time-range-input-w flex-elem">\n                <mct-control key="\'datetime-field\'"\n                             structure="{\n                                 format: parameters.format,\n                                 validate: trCtrl.validateStart\n                             }"\n                             ng-model="formModel"\n                             ng-blur="trCtrl.updateBoundsFromForm()"\n                             field="\'start\'"\n                             class="time-range-start">\n                </mct-control>\n            </span>\n\n            <span class="l-time-range-inputs-elem lbl flex-elem">to</span>\n\n            <span class="l-time-range-input-w flex-elem" ng-controller="ToggleController as t2">\n                <mct-control key="\'datetime-field\'"\n                             structure="{\n                                 format: parameters.format,\n                                 validate: trCtrl.validateEnd\n                             }"\n                             ng-model="formModel"\n                             ng-blur="trCtrl.updateBoundsFromForm()"\n                             field="\'end\'"\n                             class="time-range-end">\n                </mct-control>\n            </span>\n        </span>\n        <input type="submit" class="hidden">\n    </form>\n\n    <div class="l-time-range-slider-holder flex-elem">\n        <div class="l-time-range-slider">\n            <div class="slider"\n                 mct-resize="spanWidth = bounds.width">\n                <div class="knob knob-l"\n                     mct-drag-down="trCtrl.startLeftDrag()"\n                     mct-drag="trCtrl.leftDrag(delta[0])"\n                     ng-style="{ left: startInnerPct }">\n                    <div class="range-value">{{startInnerText}}</div>\n                </div>\n                <div class="knob knob-r"\n                     mct-drag-down="trCtrl.startRightDrag()"\n                     mct-drag="trCtrl.rightDrag(delta[0])"\n                     ng-style="{ right: endInnerPct }">\n                    <div class="range-value">{{endInnerText}}</div>\n                </div>\n                <div class="slot range-holder">\n                    <div class="range"\n                         mct-drag-down="trCtrl.startMiddleDrag()"\n                         mct-drag="trCtrl.middleDrag(delta[0])"\n                         ng-style="{\n                             left: startInnerPct,\n                             right: endInnerPct\n                         }">\n                        <div class="toi-line"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="l-time-range-ticks-holder flex-elem">\n        <div class="l-time-range-ticks">\n            <div\n                ng-repeat="tick in ticks track by $index"\n                ng-style="{ left: $index * (100 / (ticks.length - 1)) + \'%\' }"\n                class="tick tick-x"\n                >\n                <span class="l-time-range-tick-label">{{tick}}</span>\n            </div>\n        </div>\n    </div>\n</div>\n'}),n("text!platform/commonUI/general/res/templates/containers/accordion.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div\n    class="accordion-head"\n    ng-click="toggle.toggle()"\n    ng-class="{ expanded:!toggle.isActive() }"\n    >\n    {{container.label}}\n</div>\n<div\n    class="accordion-contents"\n    ng-show="!toggle.isActive()"\n    ng-transclude\n    >\n</div>\n'}),n("text!platform/commonUI/general/res/templates/subtree.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<mct-tree root-object="domainObject"\n    selected-object="ngModel.selectedObject"\n    on-selection="ngModel.onSelection"\n    allow-selection="ngModel.allowSelection">\n</mct-tree>\n\n'}),n("text!platform/commonUI/general/res/templates/tree.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<ul class="tree">\n    <li>\n        <mct-representation key="\'tree-node\'"\n                            mct-object="domainObject"\n                            ng-model="ngModel"\n                            parameters="parameters">\n        </mct-representation>\n    </li>\n</ul>\n'}),n("text!platform/commonUI/general/res/templates/tree-node.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="ToggleController as toggle">\n    <span ng-controller="TreeNodeController as treeNode">\n        <span\n            class="tree-item menus-to-left"\n            ng-class="{selected: treeNode.isSelected()}"\n            >\n            <span\n                class=\'ui-symbol view-control flex-elem\'\n                ng-class="{ \'has-children\': model.composition !== undefined, expanded: toggle.isActive() }"\n                ng-click="toggle.toggle(); treeNode.trackExpansion()"\n                >\n            </span>\n            <mct-representation\n                class="rep-object-label"\n                key="\'label\'"\n                mct-object="domainObject"\n                parameters="{suppressMenuOnEdit: true}"\n                ng-click="treeNode.select()"\n                >\n            </mct-representation>\n        </span>\n        <span\n            class="tree-item-subtree"\n            ng-show="toggle.isActive()"\n            ng-if="model.composition !== undefined"\n            >\n\n            <mct-representation key="\'subtree\'"\n                                ng-model="ngModel"\n                                parameters="parameters"\n                                mct-object="treeNode.hasBeenExpanded() && domainObject">\n            </mct-representation>\n\n        </span>\n    </span>\n</span>\n'}),n("text!platform/commonUI/general/res/templates/label.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="t-object-label l-flex-row flex-elem grows">\n    <div class="t-item-icon flex-elem {{type.getCssClass()}}" ng-class="{ \'l-icon-link\':location.isLink() }"></div>\n    <div class=\'t-title-label flex-elem grows\'>{{model.name}}</div>\n</div>\n'}),n("text!platform/commonUI/general/res/templates/controls/action-group.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="ActionGroupController">\n    <span ng-repeat="action in ungrouped">\n        <mct-include key="\'action-button\'" parameters="{ action: action }"></mct-include>\n    </span>\n    <span class="l-btn-set" ng-repeat="group in groups">\n        <span ng-repeat="action in group">\n            <mct-include key="\'action-button\'"\n                         parameters="{ action: action }"\n                         ng-class="{ first:$index == 0, last:$index == group.length - 1 }"\n	            >\n            </mct-include>\n        </span>\n    </span>\n</span>'}),n("text!platform/commonUI/general/res/templates/menu/context-menu.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="menu-element context-menu-wrapper mobile-disable-select" ng-controller="ContextMenuController">\n    <div class="menu context-menu">\n        <ul>\n            <li ng-repeat="menuAction in menuActions"\n                ng-click="menuAction.perform()"\n                title="{{menuAction.getMetadata().description}}"\n                class="{{menuAction.getMetadata().cssClass}}">\n                {{menuAction.getMetadata().name}}\n            </li>\n        </ul>\n    </div>\n</div>'}),n("text!platform/commonUI/general/res/templates/controls/switcher.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="ViewSwitcherController">\n    <div class="view-switcher menu-element s-menu-button {{ngModel.selected.cssClass}}"\n	    ng-if="view.length > 1"\n	    ng-controller="ClickAwayController as toggle">\n\n        <span class="l-click-area"\n	        ng-click="toggle.toggle()"\n	        title="{{ngModel.selected.name}}"></span>\n        <span class="title-label">{{ngModel.selected.name}}</span>\n\n        <div class="menu" ng-show="toggle.isActive()">\n            <ul>\n                <li ng-repeat="option in view"\n                    ng-click="ngModel.selected = option; toggle.setState(false)"\n                    class="{{option.cssClass}}">\n                    {{option.name}}\n                </li>\n            </ul>\n        </div>\n    </div>\n</span>'}),n("text!platform/commonUI/general/res/templates/object-inspector.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span class="l-inspect">\n    <div ng-controller="PaneController">\n        <mct-split-pane class=\'abs contents split-layout\' anchor=\'bottom\'>\n            <div class="split-pane-component pane top">\n                <div class="abs holder holder-inspector l-flex-col">\n                    <div class="pane-header flex-elem">Inspection</div>\n                    <mct-representation\n                            key="\'inspector-region\'"\n                            mct-object="domainObject"\n                            ng-model="ngModel"\n                            class="flex-elem grows vscroll l-flex-col">\n                    </mct-representation>\n                </div>\n            </div>\n            <mct-splitter class="splitter-inspect-panel mobile-hide"></mct-splitter>\n            <div class="split-pane-component pane bottom">\n                <div class="abs holder holder-elements l-flex-col">\n                    <em class="flex-elem t-inspector-part-header">Elements</em>\n                    <mct-representation\n                            key="\'edit-elements\'"\n                            mct-object="domainObject"\n                            class="flex-elem l-flex-col holder grows current-elements">\n                    </mct-representation>\n                </div>\n            </div>\n        </mct-split-pane>\n    </div>\n</span>\n'}),n("text!platform/commonUI/general/res/templates/controls/selector.html",[],function(){return"<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n \"License\"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class='form-control complex channel-selector cols cols-32'\n     ng-controller=\"SelectorController as selector\">\n    <div class='col col-15'>\n        <div class='line field-hints'>Available</div>\n        <!--div id='_form_filter' class='line filter'>\n            <input type='text' class='control filter' name='filter-available' />\n            <a class='icon ui-symbol t-available-trigger'\n               href=''\n               title=\"Filter is case sensitive\">M</a>\n        </div>\n\n        <div class=\"line\">\n            Showing {{shown}} of {{count}} available options.\n        </div -->\n\n        <div class='line treeview' name='available'>\n            <mct-representation key=\"'tree'\"\n                                mct-object=\"selector.root()\"\n                                ng-model=\"selector.treeModel\">\n            </mct-representation>\n        </div>\n    </div>\n    <div class='col col-2'>\n        <div class='btn-holder valign-mid btns-add-remove'>\n            <a class='s-button major'\n               ng-click=\"selector.select(selector.treeModel.selectedObject)\">\n                <span class='ui-symbol'>&gt;</span>\n            </a>\n            <a class='s-button major'\n               ng-click=\"selector.deselect(selector.listModel.selectedObject)\">\n                <span class='ui-symbol'>&lt;</span>\n            </a>\n        </div>\n    </div>\n    <div class='col col-15'>\n        <div class='line field-hints'>Selected</div>\n        <!-- div id='_form_filter' class='line filter'>\n            <input type='text' class='control filter' name='filter-selected' />\n            <a class='icon ui-symbol t-selected-trigger'\n               href=''\n               title=\"Filter is case sensitive\">\n                M\n            </a>\n        </div>\n        <div class=\"line\">\n            Showing {{shown}} of {{count}} available options.\n        </div -->\n\n        <div class='line treeview l-tree-item-flat-list' name='selected'>\n            <ul class=\"tree\">\n                <li ng-repeat=\"selectedObject in selector.selected()\">\n	                <span\n		                class=\"tree-item\"\n		                ng-class=\"{selected: selector.listModel.selectedObject === selectedObject }\"\n		                >\n                    <mct-representation\n	                    key=\"'label'\"\n	                    mct-object=\"selectedObject\"\n	                    ng-click=\"selector.listModel.selectedObject = selectedObject\"\n	                    >\n                    </mct-representation>\n					</span>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>"}),n("text!platform/commonUI/general/res/templates/controls/datetime-picker.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n\n<div ng-controller="DateTimePickerController" class="l-datetime-picker s-datetime-picker s-menu">\n	<div class="holder">\n		<div class="l-month-year-pager">\n			<a class="pager prev" ng-click="changeMonth(-1)"></a>\n			<span class="val">{{month}} {{year}}</span>\n			<a class="pager next" ng-click="changeMonth(1)"></a>\n		</div>\n		<div class="l-calendar">\n			<ul class="l-cal-row l-header">\n				<li ng-repeat="day in [\'Su\',\'Mo\',\'Tu\',\'We\',\'Th\',\'Fr\',\'Sa\']">{{day}}</li>\n			</ul>\n			<ul class="l-cal-row l-body" ng-repeat="row in table">\n				<li ng-repeat="cell in row"\n					ng-click="select(cell)"\n					ng-class=\'{ "in-month": isInCurrentMonth(cell), selected: isSelected(cell) }\'>\n					<div class="prime">{{cell.day}}</div>\n					<div class="sub">{{cell.dayOfYear}}</div>\n				</li>\n			</ul>\n		</div>\n	</div>\n	<div class="l-time-selects complex datetime"\n			ng-show="options">\n		<div class="field-hints">\n			<span class="hint time md"\n				  ng-repeat="key in [\'hours\', \'minutes\', \'seconds\']"\n				  ng-if="options[key]">\n				{{nameFor(key)}}\n			</span>\n		</div>\n		<div>\n			<span class="field control time md"\n				  ng-repeat="key in [\'hours\', \'minutes\', \'seconds\']"\n				  ng-if="options[key]">\n				<div class=\'form-control select\'>\n					<select size="1"\n							ng-model="time[key]"\n							ng-options="i for i in optionsFor(key)">\n					</select>\n				</div>\n			</span>\n		</div>\n	</div>\n</div>\n';
}),n("text!platform/commonUI/general/res/templates/controls/datetime-field.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="DateTimeFieldController">\n    <input type="text"\n           ng-model="textValue"\n           ng-blur="restoreTextValue(); ngBlur()"\n           ng-mouseup="ngMouseup()"\n           ng-disabled="ngDisabled"\n           ng-class="{\n                        error: textInvalid ||\n                            (structure.validate &&\n                                !structure.validate(ngModel[field])),\n                        \'picker-icon\': structure.format === \'utc\' || !structure.format\n                     }">\n    </input>\n    <a class="ui-symbol icon icon-calendar"\n       ng-if="!picker.active && (structure.format === \'utc\' || !structure.format)"\n       ng-click="picker.active = !picker.active"></a>\n    <!-- If picker active show icon with no onclick to prevent double registration of clicks -->\n    <a class="ui-symbol icon icon-calendar" ng-if="picker.active"></a>\n    <mct-popup ng-if="picker.active">\n        <div mct-click-elsewhere="picker.active = false">\n            <mct-control key="\'datetime-picker\'"\n                         ng-model="pickerModel"\n                         field="\'value\'">\n            </mct-control>\n        </div>\n    </mct-popup>\n</span>\n'}),n("platform/commonUI/general/bundle",["./src/services/UrlService","./src/services/PopupService","./src/SplashScreenManager","./src/StyleSheetLoader","./src/controllers/TimeRangeController","./src/controllers/DateTimePickerController","./src/controllers/DateTimeFieldController","./src/controllers/TreeNodeController","./src/controllers/ActionGroupController","./src/controllers/ToggleController","./src/controllers/ContextMenuController","./src/controllers/ClickAwayController","./src/controllers/ViewSwitcherController","./src/controllers/BottomBarController","./src/controllers/GetterSetterController","./src/controllers/SelectorController","./src/controllers/ObjectInspectorController","./src/controllers/BannerController","./src/directives/MCTContainer","./src/directives/MCTDrag","./src/directives/MCTClickElsewhere","./src/directives/MCTResize","./src/directives/MCTPopup","./src/directives/MCTScroll","./src/directives/MCTSplitPane","./src/directives/MCTSplitter","./src/directives/MCTTree","./src/filters/ReverseFilter","text!./res/templates/bottombar.html","text!./res/templates/controls/action-button.html","text!./res/templates/controls/input-filter.html","text!./res/templates/indicator.html","text!./res/templates/message-banner.html","text!./res/templates/progress-bar.html","text!./res/templates/controls/time-controller.html","text!./res/templates/containers/accordion.html","text!./res/templates/subtree.html","text!./res/templates/tree.html","text!./res/templates/tree-node.html","text!./res/templates/label.html","text!./res/templates/controls/action-group.html","text!./res/templates/menu/context-menu.html","text!./res/templates/controls/switcher.html","text!./res/templates/object-inspector.html","text!./res/templates/controls/selector.html","text!./res/templates/controls/datetime-picker.html","text!./res/templates/controls/datetime-field.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d,p,f,h,m,g,y,v,b,w,S,x,C,T,k,M,O,$,_,A,E,I,L,N,D,j,R,P,U,F,V,B,q,Y,z,H,W){W.register("platform/commonUI/general",{name:"General UI elements",description:"General UI elements, meant to be reused across modes",resources:"res",extensions:{services:[{key:"urlService",implementation:e,depends:["$location"]},{key:"popupService",implementation:t,depends:["$document","$window"]}],runs:[{implementation:i,depends:["stylesheets[]","$document","THEME","ASSETS_PATH"]},{implementation:n,depends:["$document"]}],filters:[{implementation:O,key:"reverse"}],stylesheets:[{stylesheetUrl:"css/normalize.min.css",priority:"mandatory"}],templates:[{key:"bottombar",template:$},{key:"action-button",template:_},{key:"input-filter",template:A},{key:"indicator",template:E},{key:"message-banner",template:I},{key:"progress-bar",template:L},{key:"time-controller",template:N}],controllers:[{key:"TimeRangeController",implementation:r,depends:["$scope","$timeout","formatService","DEFAULT_TIME_FORMAT","now"]},{key:"DateTimePickerController",implementation:o,depends:["$scope","now"]},{key:"DateTimeFieldController",implementation:s,depends:["$scope","formatService","DEFAULT_TIME_FORMAT"]},{key:"TreeNodeController",implementation:a,depends:["$scope","$timeout","navigationService"]},{key:"ActionGroupController",implementation:c,depends:["$scope"]},{key:"ToggleController",implementation:l},{key:"ContextMenuController",implementation:u,depends:["$scope"]},{key:"ClickAwayController",implementation:d,depends:["$document","$timeout"]},{key:"ViewSwitcherController",implementation:p,depends:["$scope","$timeout"]},{key:"BottomBarController",implementation:f,depends:["indicators[]"]},{key:"GetterSetterController",implementation:h,depends:["$scope"]},{key:"SelectorController",implementation:m,depends:["objectService","$scope"]},{key:"ObjectInspectorController",implementation:g,depends:["$scope","objectService"]},{key:"BannerController",implementation:y,depends:["$scope","notificationService","dialogService"]}],directives:[{key:"mctContainer",implementation:v,depends:["containers[]"]},{key:"mctDrag",implementation:b,depends:["$document"]},{key:"mctClickElsewhere",implementation:w,depends:["$document"]},{key:"mctResize",implementation:S,depends:["$timeout"]},{key:"mctPopup",implementation:x,depends:["$compile","popupService"]},{key:"mctScrollX",implementation:C,depends:["$parse","MCT_SCROLL_X_PROPERTY","MCT_SCROLL_X_ATTRIBUTE"]},{key:"mctScrollY",implementation:C,depends:["$parse","MCT_SCROLL_Y_PROPERTY","MCT_SCROLL_Y_ATTRIBUTE"]},{key:"mctSplitPane",implementation:T,depends:["$parse","$log","$interval"]},{key:"mctSplitter",implementation:k},{key:"mctTree",implementation:M,depends:["gestureService"]}],constants:[{key:"MCT_SCROLL_X_PROPERTY",value:"scrollLeft"},{key:"MCT_SCROLL_X_ATTRIBUTE",value:"mctScrollX"},{key:"MCT_SCROLL_Y_PROPERTY",value:"scrollTop"},{key:"MCT_SCROLL_Y_ATTRIBUTE",value:"mctScrollY"},{key:"THEME",value:"unspecified",priority:"fallback"},{key:"ASSETS_PATH",value:".",priority:"fallback"}],containers:[{key:"accordion",template:D,attributes:["label"]}],representations:[{key:"tree",template:j,uses:["composition"],type:"root",priority:"preferred"},{key:"tree",template:R},{key:"subtree",template:j,uses:["composition"]},{key:"tree-node",template:P,uses:["action"]},{key:"label",template:U,uses:["type","location"],gestures:["drag","menu","info"]},{key:"node",template:U,uses:["type"],gestures:["drag","menu"]},{key:"action-group",template:F,uses:["action"]},{key:"context-menu",template:V,uses:["action"]},{key:"switcher",template:B,uses:["view"]},{key:"object-inspector",template:q}],controls:[{key:"selector",template:Y},{key:"datetime-picker",template:z},{key:"datetime-field",template:H}],licenses:[{name:"Normalize.css",version:"1.1.2",description:"Browser style normalization",author:"Nicolas Gallagher, Jonathan Neal",website:"http://necolas.github.io/normalize.css/",copyright:"Copyright (c) Nicolas Gallagher and Jonathan Neal",license:"license-mit",link:"https://github.com/necolas/normalize.css/blob/v1.1.2/LICENSE.md"},{name:"Zepto",version:"1.1.6",description:"DOM manipulation",author:"Thomas Fuchs",website:"http://zeptojs.com/",copyright:"Copyright (c) 2010-2016 Thomas Fuchs",license:"license-mit",link:"https://github.com/madrobby/zepto/blob/master/MIT-LICENSE"}]}})}),n("platform/commonUI/inspect/src/gestures/InfoGesture",[],function(){function e(e,t,n,i,r,o){var s=this;this.showBubbleCallback=function(e){s.showBubble(e)},this.hideBubbleCallback=function(e){s.hideBubble(e)},this.trackPositionCallback=function(e){s.trackPosition(e)},this.element=r,this.$timeout=e,this.infoService=n,this.delay=i,this.domainObject=o,t.isMobile()||r.on("mouseenter",this.showBubbleCallback)}return e.prototype.trackPosition=function(e){this.mousePosition=[e.clientX,e.clientY]},e.prototype.hideBubble=function(){this.dismissBubble&&(this.dismissBubble(),this.element.off("mouseleave",this.hideBubbleCallback),this.dismissBubble=void 0),this.pendingBubble&&(this.$timeout.cancel(this.pendingBubble),this.element.off("mousemove",this.trackPositionCallback),this.element.off("mouseleave",this.hideBubbleCallback),this.pendingBubble=void 0),this.mousePosition=void 0},e.prototype.showBubble=function(e){function t(){n.dismissBubble=n.infoService.display("info-table",n.domainObject.getModel().name,n.domainObject.useCapability("metadata"),n.mousePosition),n.element.off("mousemove",n.trackPositionCallback),n.pendingBubble=void 0}var n=this;this.trackPosition(e),this.pendingBubble||(this.element.on("mousemove",this.trackPositionCallback),this.pendingBubble=this.$timeout(t,this.delay),this.element.on("mouseleave",this.hideBubbleCallback))},e.prototype.destroy=function(){this.hideBubble(),this.element.off("mouseenter",this.showBubbleCallback)},e}),n("platform/commonUI/inspect/src/gestures/InfoButtonGesture",[],function(){function e(e,t,n,i,r){function o(e){l=[e.clientX-22,e.clientY]}function s(){c&&(c(),c=void 0),u.off("touchstart",s)}function a(e){o(e),e.stopPropagation(),c=n.display("info-table",r.getModel().name,r.useCapability("metadata"),l),u.on("touchstart",function(e){e.preventDefault(),s(),u.unbind("touchstart")})}var c,l,u=e.find("body");return t.isMobile()&&i.on("click",a),{destroy:function(){s(),i.off("click",a)}}}return e}),n("platform/commonUI/inspect/src/InfoConstants",{BUBBLE_TEMPLATE:'<mct-container key="bubble" bubble-title="{{bubbleTitle}}" bubble-layout="{{bubbleLayout}}"><mct-include key="bubbleTemplate" ng-model="bubbleModel"></mct-include></mct-container>',BUBBLE_OPTIONS:{offsetX:0,offsetY:-26},BUBBLE_MOBILE_POSITION:[0,-25],BUBBLE_MARGIN_LR:10,BUBBLE_MAX_WIDTH:300}),n("platform/commonUI/inspect/src/services/InfoService",["../InfoConstants"],function(e){function t(e,t,n,i){this.$compile=e,this.$rootScope=t,this.popupService=n,this.agentService=i}var n=e.BUBBLE_TEMPLATE,i=e.BUBBLE_MOBILE_POSITION,r=e.BUBBLE_OPTIONS;return t.prototype.display=function(t,o,s,a){var c,l,u,d=this.$compile,p=this.$rootScope,f=p.$new(),h=d("<span></span>")(f),m=e.BUBBLE_MARGIN_LR+e.BUBBLE_MAX_WIDTH;return c=Object.create(r),c.marginX=-m,this.agentService.isPhone()&&(a=i,c={}),l=this.popupService.display(h,a,c),f.bubbleModel=s,f.bubbleTemplate=t,f.bubbleTitle=o,f.bubbleLayout=[l.goesUp()?"arw-btm":"arw-top",l.goesLeft()?"arw-right":"arw-left"].join(" "),u=d(n)(f),h.append(u),function(){l.dismiss(),f.$destroy()}},t}),n("text!platform/commonUI/inspect/res/info-table.html",[],function(){return'<table>\n    <tr ng-repeat="property in ngModel">\n        <td class="label">{{property.name}}</td>\n        <td title="{{property.value}}" class="value align-{{property.align}}">\n            {{property.value}}\n        </td>\n    </tr>\n</table>\n'}),n("text!platform/commonUI/inspect/res/info-bubble.html",[],function(){return'<mct-container\n	key="bubble"\n	bubble-title="{{parameters.title}}"\n	bubble-layout="{{parameters.layout}}"\n	>\n    <mct-include key="info-table"\n                 ng-model="ngModel">\n    </mct-include>\n</mct-container>\n'}),n("text!platform/commonUI/inspect/res/bubble.html",[],function(){return'    <div class="t-infobubble s-infobubble l-infobubble-wrapper {{bubble.bubbleLayout}}">\n        <div class="l-infobubble">\n            <div ng-show="bubble.bubbleTitle.length > 0"\n                 class="title">\n                {{bubble.bubbleTitle}}\n            </div>\n            <span ng-transclude></span>\n        </div>\n    </div>\n'}),n("text!platform/commonUI/inspect/res/templates/info-button.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n\n<!--The icon for the info button appearing in a grid item (list in folder)-->\n<a class=\'s-icon-button icon-info\'></a>\n'}),n("platform/commonUI/inspect/bundle",["./src/gestures/InfoGesture","./src/gestures/InfoButtonGesture","./src/services/InfoService","text!./res/info-table.html","text!./res/info-bubble.html","text!./res/bubble.html","text!./res/templates/info-button.html","legacyRegistry"],function(e,t,n,i,r,o,s,a){a.register("platform/commonUI/inspect",{extensions:{templates:[{key:"info-table",template:i},{key:"info-bubble",template:r}],containers:[{key:"bubble",template:o,attributes:["bubbleTitle","bubbleLayout"],alias:"bubble"}],gestures:[{key:"info",implementation:e,depends:["$timeout","agentService","infoService","INFO_HOVER_DELAY"]},{key:"infobutton",implementation:t,depends:["$document","agentService","infoService"]}],services:[{key:"infoService",implementation:n,depends:["$compile","$rootScope","popupService","agentService"]}],constants:[{key:"INFO_HOVER_DELAY",value:2e3}],representations:[{key:"info-button",template:s,gestures:["infobutton"]}]}})}),n("platform/commonUI/mobile/src/DeviceMatchers",[],function(){return{mobile:function(e){return e.isMobile()},phone:function(e){return e.isPhone()},tablet:function(e){return e.isTablet()},desktop:function(e){return!e.isMobile()},portrait:function(e){return e.isPortrait()},landscape:function(e){return e.isLandscape()},touch:function(e){return e.isTouch()}}}),n("platform/commonUI/mobile/src/MCTDevice",["./DeviceMatchers"],function(e){function t(t){function n(n){return n=n||"",n.split(" ").every(function(n){var i=e[n];return i&&i(t)})}function i(e,t,i,r,o){n(i.mctDevice)&&o(function(e){t.replaceWith(e)})}return{link:i,transclude:"element",priority:601,terminal:!0,restrict:"A"}}return t}),n("platform/commonUI/mobile/src/AgentService",[],function(){function e(e){var t=e.navigator.userAgent,n=t.match(/iPad|iPhone|Android/i)||[];this.userAgent=t,this.mobileName=n[0],this.$window=e,this.touchEnabled=void 0!==e.ontouchstart}return e.prototype.isMobile=function(){return!!this.mobileName},e.prototype.isPhone=function(){return"iPhone"===this.mobileName},e.prototype.isTablet=function(){return this.isMobile()&&!this.isPhone()},e.prototype.isPortrait=function(){return this.$window.innerWidth<this.$window.innerHeight},e.prototype.isLandscape=function(){return!this.isPortrait()},e.prototype.isTouch=function(){return this.touchEnabled},e.prototype.isBrowser=function(e){return e=e.toLowerCase(),-1!==this.userAgent.toLowerCase().indexOf(e)},e}),n("platform/commonUI/mobile/src/DeviceClassifier",["./DeviceMatchers"],function(e){function t(t,n){var i=n.find("body");Object.keys(e).forEach(function(n){e[n](t)&&i.addClass(n)})}return t}),n("platform/commonUI/mobile/bundle",["./src/MCTDevice","./src/AgentService","./src/DeviceClassifier","legacyRegistry"],function(e,t,n,i){i.register("platform/commonUI/mobile",{extensions:{directives:[{key:"mctDevice",implementation:e,depends:["agentService"]}],services:[{key:"agentService",implementation:t,depends:["$window"]}],runs:[{implementation:n,depends:["agentService","$document"]}]}})}),n("platform/commonUI/notification/src/NotificationIndicatorController",[],function(){function e(e,t,n){e.notifications=t.notifications,e.highest=t.highest,e.showNotificationsList=function(){n.getDialogResponse("overlay-message-list",{dialog:{title:"Messages",messages:t.notifications}})}}return e}),n("platform/commonUI/notification/src/NotificationIndicator",[],function(){function e(){}return e.template="notificationIndicatorTemplate",e}),n("platform/commonUI/notification/src/NotificationService",[],function(){function e(e,t,n,i){this.notifications=[],this.$timeout=e,this.highest={severity:"info"},this.AUTO_DISMISS_TIMEOUT=n,this.MINIMIZE_ANIMATION_TIMEOUT=i,this.topic=t,this.active={}}return e.prototype.minimize=function(e,t){var n=e.notifications.indexOf(t);e.active.timeout&&(e.$timeout.cancel(e.active.timeout),delete e.active.timeout),n>=0&&(t.model.minimized=!0,e.$timeout(function(){e.setActiveNotification(e.selectNextNotification())},e.MINIMIZE_ANIMATION_TIMEOUT))},e.prototype.dismiss=function(e,t){var n=e.notifications.indexOf(t);e.active.timeout&&(e.$timeout.cancel(e.active.timeout),delete e.active.timeout),n>=0&&e.notifications.splice(n,1),e.setActiveNotification(e.selectNextNotification()),this.setHighestSeverity()},e.prototype.dismissOrMinimize=function(e){var t=e.model;"info"===t.severity?t.autoDismiss===!1?e.minimize():e.dismiss():e.minimize()},e.prototype.getActiveNotification=function(){return this.active.notification},e.prototype.info=function(e){var t="string"==typeof e?{title:e}:e;return t.severity="info",this.notify(t)},e.prototype.alert=function(e){var t="string"==typeof e?{title:e}:e;return t.severity="alert",this.notify(t)},e.prototype.error=function(e){var t="string"==typeof e?{title:e}:e;return t.severity="error",this.notify(t)},e.prototype.setHighestSeverity=function(){var e={info:1,alert:2,error:3};this.highest.severity=this.notifications.reduce(function(t,n){return e[n.model.severity]>e[t]?n.model.severity:t},"info")},e.prototype.notify=function(e){var t,n=this,i=n.active.notification,r=this.topic();return e.severity=e.severity||"info",t={model:e,minimize:function(){n.minimize(n,t)},dismiss:function(){n.dismiss(n,t),r.notify()},dismissOrMinimize:function(){n.dismissOrMinimize(t)},onDismiss:function(e){r.listen(e)}},e.dismissable!==!1&&(e.options=e.options||[],e.options.unshift({label:"Dismiss",callback:function(){t.dismiss()}})),this.notifications.push(t),this.setHighestSeverity(),this.active.notification?this.active.timeout||(this.active.timeout=this.$timeout(function(){i.dismissOrMinimize()},this.AUTO_DISMISS_TIMEOUT)):this.setActiveNotification(t),t},e.prototype.setActiveNotification=function(e){var t;return this.active.notification=e,e?(t="info"===e.model.severity?!0:e.model.autoDismiss,void(t||this.selectNextNotification()?this.active.timeout=this.$timeout(function(){e.dismissOrMinimize()},this.AUTO_DISMISS_TIMEOUT):delete this.active.timeout)):void delete this.active.timeout},e.prototype.selectNextNotification=function(){for(var e,t=0;t<this.notifications.length;t++)if(e=this.notifications[t],!e.model.minimized&&e!==this.active.notification)return e},e}),n("text!platform/commonUI/notification/res/notification-indicator.html",[],function(){return'<!-- DO NOT ADD SPACES BETWEEN THE SPANS - IT ADDS WHITE SPACE!! -->\n<a ng-click="showNotificationsList()" ng-show="notifications.length > 0" class="status block"\n      ng-class="highest.severity"\n      ng-controller="NotificationIndicatorController">\n    <span class="status-indicator icon-bell"></span><span class="label">\n      {{notifications.length}} Notifications\n    </span><span class="count">{{notifications.length}}</span>\n\n</a>\n'}),n("platform/commonUI/notification/bundle",["./src/NotificationIndicatorController","./src/NotificationIndicator","./src/NotificationService","text!./res/notification-indicator.html","legacyRegistry"],function(e,t,n,i,r){r.register("platform/commonUI/notification",{extensions:{constants:[{key:"DEFAULT_AUTO_DISMISS",value:3e3},{key:"FORCE_AUTO_DISMISS",value:1e3},{key:"MINIMIZE_TIMEOUT",value:300}],templates:[{key:"notificationIndicatorTemplate",template:i}],controllers:[{key:"NotificationIndicatorController",implementation:e,depends:["$scope","notificationService","dialogService"]}],indicators:[{implementation:t,priority:"fallback"}],services:[{key:"notificationService",implementation:n,depends:["$timeout","topic","DEFAULT_AUTO_DISMISS","MINIMIZE_TIMEOUT"]}]}})}),n("platform/commonUI/regions/src/InspectorController",["../../browse/src/InspectorRegion"],function(e){function t(t,n){function i(e){return e.regions&&e.regions.filter(function(e){return n.allow("region",e,s)})}function r(){t.regions=i(a.getDefinition().inspector||new e)}var o,s=t.domainObject,a=s.getCapability("type");o=s.getCapability("status").listen(r),t.$on("$destroy",function(){o()}),r()}return t}),n("platform/commonUI/regions/src/EditableRegionPolicy",[],function(){function e(){}return e.prototype.allow=function(e,t){return e.modes?t.hasCapability("editor")&&t.getCapability("editor").inEditContext()?-1!==e.modes.indexOf("edit"):-1!==e.modes.indexOf("browse"):!0},e}),n("platform/commonUI/regions/bundle",["./src/InspectorController","./src/EditableRegionPolicy","legacyRegistry"],function(e,t,n){n.register("platform/commonUI/regions",{extensions:{controllers:[{key:"InspectorController",implementation:e,depends:["$scope","policyService"]}],policies:[{category:"region",implementation:t}]}})}),n("platform/commonUI/themes/espresso/bundle",["legacyRegistry"],function(e){e.register("platform/commonUI/themes/espresso",{name:"Espresso",description:"Espresso theme: dark and rich",extensions:{stylesheets:[{stylesheetUrl:"css/theme-espresso.css",priority:1e3}],constants:[{key:"THEME",value:"espresso"}]}})}),n("platform/commonUI/themes/snow/bundle",["legacyRegistry"],function(e){e.register("platform/commonUI/themes/snow",{name:"Snow",description:"Snow theme: light and cool",extensions:{stylesheets:[{stylesheetUrl:"css/theme-snow.css",priority:1e3}],constants:[{key:"THEME",value:"snow"}]}})}),n("platform/containment/src/CompositionPolicy",[],function(){function e(){}return e.prototype.allow=function(e,t){var n=e.getDefinition();return n.contains?n.contains.some(function(e){return"string"==typeof e?e===t.getCapability("type").getKey():(Array.isArray(e.has)||(e.has=[e.has]),e.has.every(function(e){return t.hasCapability(e)}))}):!0},e}),n("platform/containment/src/CompositionMutabilityPolicy",[],function(){function e(){}return e.prototype.allow=function(e){return e.hasFeature("creation")},e}),n("platform/containment/src/CompositionModelPolicy",[],function(){function e(){}return e.prototype.allow=function(e){return Array.isArray((e.getInitialModel()||{}).composition)},e}),n("platform/containment/src/ComposeActionPolicy",[],function(){function e(e){this.getPolicyService=function(){return e.get("policyService")}}return e.prototype.allowComposition=function(e,t){var n=e&&e.getCapability("type");return this.policyService=this.policyService||this.getPolicyService(),e.getId()!==t.getId()&&this.policyService.allow("composition",n,t)},e.prototype.allow=function(e,t){return"compose"===e.getMetadata().key?this.allowComposition((t||{}).domainObject,(t||{}).selectedObject):!0},e}),n("platform/containment/bundle",["./src/CompositionPolicy","./src/CompositionMutabilityPolicy","./src/CompositionModelPolicy","./src/ComposeActionPolicy","legacyRegistry"],function(e,t,n,i,r){r.register("platform/containment",{extensions:{policies:[{category:"composition",implementation:e,message:"Objects of this type cannot contain objects of that type."},{category:"composition",implementation:t,message:"Objects of this type cannot be modified."},{category:"composition",implementation:n,message:"Objects of this type cannot contain other objects."},{category:"action",implementation:i,depends:["$injector"],message:"Objects of this type cannot contain objects of that type."}]}})}),n("platform/core/src/objects/DomainObjectProvider",[],function(){function e(e,t){this.modelService=e,this.instantiate=t}return e.prototype.getObjects=function(e){function t(t){var n={};return e.forEach(function(e){t[e]&&(n[e]=i(t[e],e))}),n}var n=this.modelService,i=this.instantiate;return n.getModels(e).then(t)},e}),n("platform/core/src/capabilities/CoreCapabilityProvider",[],function(){function e(e,t){function n(t,n){return e.filter(function(e){return e.appliesTo?e.appliesTo(t,n):!0})}function i(e){var n={};return e.forEach(function(e){e.key?n[e.key]=n[e.key]||e:t.warn("No key defined for capability; skipping.")}),n}function r(e,t){return i(n(e,t))}return{getCapabilities:r}}return e}),n("platform/core/src/models/StaticModelProvider",[],function(){function e(e,t,n){function i(e){"object"!=typeof e||"string"!=typeof e.id||"object"!=typeof e.model?n.warn(["Skipping malformed domain object model exposed by ",((e||{}).bundle||{}).path].join("")):r[e.id]=e.model}var r={};e.forEach(i),this.modelMap=r,this.$q=t}return e.prototype.getModels=function(e){var t=this.modelMap,n={};return e.forEach(function(e){n[e]=t[e]}),this.$q.when(n)},e}),n("platform/core/src/models/ModelAggregator",[],function(){function e(e,t){this.providers=t,this.$q=e}function t(e,t){var n=(e||{}).modified||Number.NEGATIVE_INFINITY,i=(t||{}).modified||Number.NEGATIVE_INFINITY;return n>i?e:t||e}function n(e,n){var i={};return n.forEach(function(n){e.forEach(function(e){e[n]&&(i[n]=t(i[n],e[n]))})}),i}return e.prototype.getModels=function(e){return this.$q.all(this.providers.map(function(t){return t.getModels(e)})).then(function(t){return n(t,e)})},e}),n("platform/core/src/models/ModelCacheService",[],function(){function e(){this.cache={}}return e.prototype.put=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e.prototype.has=function(e){return this.cache.hasOwnProperty(e)},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.all=function(){return this.cache},e.prototype.flush=function(){this.cache={}},e}),n("platform/core/src/models/PersistedModelProvider",[],function(){function e(e,t,n,i){this.persistenceService=e,this.$q=t,this.now=n,this.defaultSpace=i}return e.prototype.getModels=function(e){function t(e){return a.readObject(e.space,e.key)}function n(e){return e&&void 0===e.persisted&&(e.persisted=void 0!==e.modified?e.modified:l()),e}function i(e,t){var n={};return e.forEach(function(e,i){var r=e.id;t[i]&&(n[r]=t[i])}),n}function r(e){return c.all(e.map(t)).then(function(t){return i(e,t.map(n))})}function o(e){return s.filter(function(t){return-1!==e.indexOf(t.space)})}var s,a=this.persistenceService,c=this.$q,l=this.now,u=this.defaultSpace;return s=e.map(function(e){var t=e.split(":");return t.length>1?{id:e,space:t[0],key:t.slice(1).join(":")}:{id:e,space:u,key:e}}),a.listSpaces().then(o).then(r)},e}),n("platform/core/src/models/CachingModelDecorator",[],function(){function e(e,t){this.cacheService=e,this.modelService=t}return e.prototype.getModels=function(e){var t=e.filter(function(e){return this.cacheService.has(e)},this),n=e.filter(function(e){return!this.cacheService.has(e)},this);return t.length?this.modelService.getModels(n).then(function(e){return t.forEach(function(t){e[t]=this.cacheService.get(t)},this),e}.bind(this)):this.modelService.getModels(n)},e}),n("platform/core/src/models/MissingModelDecorator",[],function(){function e(e){this.modelService=e}function t(e){return{type:"unknown",name:"Missing: "+e}}return e.prototype.getModels=function(e){function n(n){var i={};return e.forEach(function(e){i[e]=n[e]||t(e)}),i}return this.modelService.getModels(e).then(n)},e}),n("platform/core/src/types/TypePropertyConversion",[],function(){function e(e){return{toModelValue:function(t){return t&&t.map(e.toModelValue)},toFormValue:function(t){return t&&t.map(e.toFormValue)}}}function t(r){if(r&&r.length>i.length&&-1!==r.indexOf(i,r.length-i.length))return new e(new t(r.substring(0,r.length-i.length)));if(!n[r])throw new Error("Unknown conversion type: "+r);return n[r]}var n={number:{toModelValue:parseFloat,toFormValue:function(e){return"number"==typeof e?e.toString(10):void 0}},identity:{toModelValue:function(e){return e},toFormValue:function(e){return e}}},i="[]";return t}),n("platform/core/src/types/TypeProperty",["./TypePropertyConversion"],function(e){function t(t){this.conversion=new e(t.conversion||"identity"),this.propertyDefinition=t}function n(e){var t;if(!Array.isArray(e)||0===e.length)return!1;for(t=0;t<e.length;t+=1)if(void 0!==e[t])return!1;return!0}function i(e,t,n){Array.isArray(t)?t.length>1?(e[t[0]]=e[t[0]]||{},i(e[t[0]],t.slice(1),n)):1===t.length&&(e[t[0]]=n):e[t]=n}function r(e,t){var n;if(e)return Array.isArray(t)?t.length>0?(n=e[t[0]],t.length>1?r(n,t.slice(1)):n):void 0:e[t]}return t.prototype.getValue=function(e){var t=this.propertyDefinition.property||this.propertyDefinition.key,n=t&&r(e,t);return Array.isArray(this.propertyDefinition.items)&&(n=n||new Array(this.propertyDefinition.items.length)),this.conversion.toFormValue(n)},t.prototype.setValue=function(e,t){var r=this.propertyDefinition.property||this.propertyDefinition.key;return t=n(t)?void 0:t,t=this.conversion.toModelValue(t),r?i(e,r,t):void 0},t.prototype.getDefinition=function(){return this.propertyDefinition},t}),n("platform/core/src/types/TypeImpl",["./TypeProperty"],function(e){function t(e){var t=e.inherits||[],n={};(e.features||[]).forEach(function(e){n[e]=!0}),this.typeDef=e,this.featureSet=n,this.inheritList=t}return t.prototype.getKey=function(){return this.typeDef.key},t.prototype.getName=function(){return this.typeDef.name},t.prototype.getDescription=function(){return this.typeDef.description},t.prototype.getCssClass=function(){return this.typeDef.cssClass},t.prototype.getProperties=function(){return(this.typeDef.properties||[]).map(function(t){return new e(t)})},t.prototype.getInitialModel=function(){return JSON.parse(JSON.stringify(this.typeDef.model||{}))},t.prototype.getDefinition=function(){return this.typeDef},t.prototype.instanceOf=function(e){var t=this.typeDef,n=this.inheritList;return e===t.key?!0:n.indexOf(e)>-1?!0:e?null!==e&&"object"==typeof e&&e.getKey?this.instanceOf(e.getKey()):!1:!0},t.prototype.hasFeature=function(e){return this.featureSet[e]||!1},t}),n("platform/core/src/types/MergeModels",[],function(){function e(t,n,i){function r(e,t){return e.concat(t)}function o(t,n){var r={};return Object.keys(t).forEach(function(o){r[o]=n.hasOwnProperty(o)?e(t[o],n[o],(i||{})[o]):t[o]}),Object.keys(n).forEach(function(e){t.hasOwnProperty(e)||(r[e]=n[e])}),r}function s(e,t){return t}var a;return(a=i&&Function.isFunction(i)?i:Array.isArray(t)&&Array.isArray(n)?r:t instanceof Object&&n instanceof Object?o:s)(t,n)}return e}),n("platform/core/src/types/TypeProvider",["./TypeImpl","./MergeModels"],function(e,t){function n(e,t){Object.keys(t).forEach(function(n){e[n]=t[n]})}function i(e){var t={};return e?e.filter(function(e){return e instanceof Object&&!(e instanceof String)?!0:t[e]?!1:t[e]=!0}):e}function r(e){var r=e.reduce(function(e,i){var r={};return n(r,e),n(r,i),
a.forEach(function(n){e[n]&&i[n]&&(r[n]=t(e[n],i[n]))}),s.forEach(function(t){(e[t]||i[t])&&(r[t]=(e[t]||[]).concat(i[t]||[]))}),r},{});return s.forEach(function(e){r[e]&&(r[e]=i(r[e]))}),r}function o(e){var t=e,n=function(e){var t={};return e.forEach(function(e){var n=e.key;n&&(t[n]=(t[n]||[]).concat(e))}),t}(t);this.typeMap={},this.typeDefinitions=n,this.rawTypeDefinitions=e}var s=["inherits","capabilities","properties","features"],a=["model"];return o.prototype.listTypes=function(){var e=this;return i(this.rawTypeDefinitions.filter(function(e){return e.key}).map(function(e){return e.key}).map(function(t){return e.getType(t)}))},o.prototype.getType=function(t){function n(){return a.undefinedType=a.undefinedType||r(a.rawTypeDefinitions.filter(function(e){return!e.key}))}function i(e){return Array.isArray(e)?e:[e]}function o(e){function t(e){var t=s[e]||[],a=t.map(function(e){return i(e.inherits||[])}).reduce(function(e,t){return e.concat(t)},[]),c=r([n()].concat(a.map(o)).concat(t));return c.model=c.model||{},c.model.name=c.model.name||"Unnamed "+(c.name||"Object"),c}return a.typeMap[e]=a.typeMap[e]||t(e)}var s=this.typeDefinitions,a=this;return new e(o(t))},o}),n("platform/core/src/actions/ActionProvider",[],function(){function e(e,t){var n=this;this.$log=t,this.actions=e,this.actionsByKey={},this.actionsByCategory={},e.forEach(function(e){var t=e.category||[];t=Array.isArray(t)?t:[t],t.forEach(function(t){n.actionsByCategory[t]=n.actionsByCategory[t]||[],n.actionsByCategory[t].push(e)}),e.key&&(n.actionsByKey[e.key]=n.actionsByKey[e.key]||[],n.actionsByKey[e.key].push(e))})}return e.prototype.getActions=function(e){function t(e,t){var n,i=new e(t);return i.getMetadata||(n=Object.create(e.definition||{}),n.context=t,i.getMetadata=function(){return n}),i}function n(e,n){function i(e){return e.appliesTo?e.appliesTo(n):!0}function r(e){try{return t(e,n)}catch(i){return void a.error(["Could not instantiate action",e.key,"due to:",i.message].join(" "))}}function o(e){return void 0!==e}return(e||[]).filter(i).map(r).filter(o)}var i,r=e||{},o=r.category,s=r.key,a=this.$log;return i=this.actions,s?(i=this.actionsByKey[s],o&&(i=i.filter(function(e){return e.category===o}))):o&&(i=this.actionsByCategory[o]),n(i,r)},e}),n("platform/core/src/actions/ActionAggregator",[],function(){function e(e){this.actionProviders=e}return e.prototype.getActions=function(e){return this.actionProviders.map(function(t){return t.getActions(e)}).reduce(function(e,t){return e.concat(t)},[])},e}),n("platform/core/src/actions/LoggingActionDecorator",[],function(){function e(e,t){this.$log=e,this.actionService=t}return e.prototype.getActions=function(){function e(e){var t=Object.create(e),i=e.getMetadata()||{},r=i.context||{},o=r.domainObject;return t.perform=function(){return n.info(["Performing action ",i.key," upon ",o&&o.getId()].join("")),e.perform.apply(e,arguments)},t}var t=this.actionService,n=this.$log;return t.getActions.apply(t,arguments).map(e)},e}),n("platform/core/src/views/ViewProvider",[],function(){function e(e,t){function n(e){var n=e.key;return n||t.warn(["No key specified for view in ",(e.bundle||{}).path,"; omitting this view."].join("")),n}this.views=e.filter(n)}return e.prototype.getViews=function(e){function t(e,t,n){function i(t){return e.hasCapability(t)||n&&o.doesDelegateCapability(t)}function r(e,t){return e&&t}var o=e.getCapability("delegation");return n=n&&void 0!==o,t.map(i).reduce(r,!0)}function n(e,t){var n=t&&(t.getDefinition()||{}).views,i=!0;return e.type&&(i=i&&t&&t.instanceOf(e.type)),Array.isArray(n)&&(i=i&&n.indexOf(e.key)>-1),i}var i=e.useCapability("type");return this.views.filter(function(r){return n(r,i)&&t(e,r.needs||[],r.delegation||!1)})},e}),function(e){"use strict";function i(){var t=e.crypto||e.msCrypto;if(!l&&t&&t.getRandomValues)try{var n=new Uint8Array(16);p=l=function(){return t.getRandomValues(n),n},l()}catch(i){}if(!l){var r=new Array(16);u=l=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function r(){if("function"==typeof t)try{var e=t("crypto").randomBytes;d=l=e&&function(){return e(16)},l()}catch(n){}}function o(e,t,n){var i=t&&n||0,r=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>r&&(t[i+r++]=g[e])});16>r;)t[i+r++]=0;return t}function s(e,t){var n=t||0,i=m;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}function a(e,t,n){var i=t&&n||0,r=t||[];e=e||{};var o=null!=e.clockseq?e.clockseq:w,a=null!=e.msecs?e.msecs:(new Date).getTime(),c=null!=e.nsecs?e.nsecs:x+1,l=a-S+(c-x)/1e4;if(0>l&&null==e.clockseq&&(o=o+1&16383),(0>l||a>S)&&null==e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");S=a,x=c,w=o,a+=122192928e5;var u=(1e4*(268435455&a)+c)%4294967296;r[i++]=u>>>24&255,r[i++]=u>>>16&255,r[i++]=u>>>8&255,r[i++]=255&u;var d=a/4294967296*1e4&268435455;r[i++]=d>>>8&255,r[i++]=255&d,r[i++]=d>>>24&15|16,r[i++]=d>>>16&255,r[i++]=o>>>8|128,r[i++]=255&o;for(var p=e.node||b,f=0;6>f;f++)r[i+f]=p[f];return t?t:s(r)}function c(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new h(16):null,e=null),e=e||{};var r=e.random||(e.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;16>o;o++)t[i+o]=r[o];return t||s(r)}var l,u,d,p,f;e?i():r();for(var h="function"==typeof Buffer?Buffer:Array,m=[],g={},y=0;256>y;y++)m[y]=(y+256).toString(16).substr(1),g[m[y]]=y;var v=l(),b=[1|v[0],v[1],v[2],v[3],v[4],v[5]],w=16383&(v[6]<<8|v[7]),S=0,x=0,C=c;C.v1=a,C.v4=c,C.parse=o,C.unparse=s,C.BufferClass=h,C._rng=l,C._mathRNG=u,C._nodeRNG=d,C._whatwgRNG=p,"undefined"!=typeof module&&module.exports?module.exports=C:"function"==typeof n&&n.amd?n("uuid",[],function(){return C}):(f=e.uuid,C.noConflict=function(){return e.uuid=f,C},e.uuid=C)}("undefined"!=typeof window?window:null),n("platform/core/src/identifiers/Identifier",[],function(){function e(e,n){var i=e.indexOf(t);i>-1?(this.key=e.substring(i+1),this.space=e.substring(0,i),this.definedSpace=this.space):(this.key=e,this.space=n,this.definedSpace=void 0)}var t=":";return e.prototype.getKey=function(){return this.key},e.prototype.getSpace=function(){return this.space},e.prototype.getDefinedSpace=function(){return this.definedSpace},e}),n("platform/core/src/identifiers/IdentifierProvider",["uuid","./Identifier"],function(e,t){function n(e){this.defaultSpace=e}return n.prototype.generate=function(t){var n=e();return void 0!==t&&(n=t+":"+n),n},n.prototype.parse=function(e){return new t(e,this.defaultSpace)},n}),n("platform/core/src/capabilities/CompositionCapability",[],function(){function e(e,t,n){this.injectObjectService=function(){this.objectService=e.get("objectService")},this.contextualize=t,this.domainObject=n}return e.prototype.add=function(e,t){function n(e){var t;for(t=0;t<e.length;t+=1)if(e[t].getId()===s)return e[t]}function i(e){return e&&o.invoke().then(n)}function r(e){t=isNaN(t)?c.length:t,t=Math.min(c.length,t),-1!==l&&e.composition.splice(l,1),e.composition.splice(t,0,s)}var o=this,s="string"==typeof e?e:e.getId(),a=o.domainObject.getModel(),c=a.composition,l=c.indexOf(s);return isNaN(t)&&-1!==l||t===l?i(!0):this.domainObject.useCapability("mutation",r).then(i)},e.prototype.invoke=function(){function e(e){return t.filter(function(t){return e[t]}).map(function(t){return r(e[t],n)})}var t,n=this.domainObject,i=n.getModel(),r=this.contextualize;return this.objectService||this.injectObjectService(),this.lastPromise&&this.lastModified===i.modified||(t=i.composition||[],this.lastModified=i.modified,this.lastPromise=this.objectService.getObjects(t).then(e)),this.lastPromise},e.appliesTo=function(e){return Array.isArray((e||{}).composition)},e}),n("platform/core/src/capabilities/RelationshipCapability",[],function(){function e(e,t){this.injectObjectService=function(){this.objectService=e.get("objectService")},this.lastPromise={},this.domainObject=t}return e.prototype.listRelationships=function(){function e(e){return Array.isArray(t[e])}var t=(this.domainObject.getModel()||{}).relationships||{};return Object.keys(t).filter(e).sort()},e.prototype.getRelatedObjects=function(e){function t(e){return n.map(function(t){return e[t]}).filter(function(e){return e})}var n,i=this.domainObject.getModel();return this.lastModified!==i.modified&&(this.lastPromise={},this.lastModified=i.modified),this.lastPromise[e]||(n=(i.relationships||{})[e]||[],this.lastModified=i.modified,this.objectService||this.injectObjectService(),this.lastPromise[e]=this.objectService.getObjects(n).then(t)),this.lastPromise[e]},e.appliesTo=function(e){return!!(e||{}).relationships},e}),n("platform/core/src/types/TypeCapability",[],function(){function e(e,t){var n=t.getModel().type,i=e.getType(n);return Object.create(i)}return e}),n("platform/core/src/actions/ActionCapability",[],function(){function e(e,t,n){this.$q=e,this.actionService=t,this.domainObject=n}return e.prototype.getActions=function(e){var t="string"==typeof e?{key:e}:e||{},n=Object.create(t);return n.domainObject=this.domainObject,this.actionService.getActions(n)},e.prototype.perform=function(e){var t=this.getActions(e);return this.$q.when(t&&t.length>0?t[0].perform():void 0)},e}),n("platform/core/src/views/ViewCapability",[],function(){function e(e,t){this.viewService=e,this.domainObject=t}return e.prototype.invoke=function(){return this.viewService.getViews(this.domainObject)},e}),n("platform/core/src/capabilities/PersistenceCapability",[],function(){function e(e,t,n,i,r,o){this.modified=o.getModel().modified,this.domainObject=o,this.cacheService=e,this.identifierService=n,this.persistenceService=t,this.notificationService=i,this.$q=r}function t(e,t){return e?e:t.reject("Error persisting object")}function n(e){return e&&e.message?e.message:e&&"string"==typeof e?e:"unknown error"}function i(e,t,i,r){var o="Unable to persist "+t.getModel().name;return e&&(o+=": "+n(e)),i.error({title:"Error persisting "+t.getModel().name,hint:o,dismissable:!0}),r.reject(e)}return e.prototype.persist=function(){var e=this,n=this.domainObject,r=n.getModel(),o=r.modified,s=r.persisted,a=this.persistenceService,c=void 0!==s?this.persistenceService.updateObject:this.persistenceService.createObject;return void 0!==s&&s===o?this.$q.when(!0):(n.useCapability("mutation",function(e){e.persisted=o},o),c.apply(a,[this.getSpace(),this.getKey(),n.getModel()]).then(function(n){return t(n,e.$q)})["catch"](function(t){return i(t,n,e.notificationService,e.$q)}))},e.prototype.refresh=function(){function e(e){var n=e.modified;return t.useCapability("mutation",function(){return e},n)}var t=this.domainObject;return void 0===t.getModel().persisted?this.$q.when(!0):this.persistenceService.readObject(this.getSpace(),this.getKey()).then(e)},e.prototype.getSpace=function(){var e=this.domainObject.getId();return this.identifierService.parse(e).getSpace()},e.prototype.persisted=function(){return void 0!==this.domainObject.getModel().persisted},e.prototype.getKey=function(){var e=this.domainObject.getId();return this.identifierService.parse(e).getKey()},e}),n("platform/core/src/capabilities/MetadataCapability",["moment"],function(e){function t(e){this.domainObject=e}var n="YYYY-MM-DD HH:mm:ss";return t.prototype.invoke=function(){function t(e){var t=typeof e.value;return"string"===t||"number"===t}function i(t){return"number"==typeof t?e.utc(t).format(n)+" UTC":void 0}function r(){function e(e){return{name:e.getDefinition().name,value:e.getValue(a)}}var t=s.getCapability("type");return(t?t.getProperties():[]).map(e)}function o(){var e=s.getCapability("type");return[{name:"Updated",value:i(a.modified)},{name:"Type",value:e&&e.getName()}]}var s=this.domainObject,a=s.getModel();return r().concat(o()).filter(t)},t}),n("platform/core/src/capabilities/MutationCapability",[],function(){function e(e,t){Object.keys(e).forEach(function(t){delete e[t]}),Object.keys(t).forEach(function(n){e[n]=t[n]})}function t(e){return(e||{}).then?e:{then:function(n){return t(n(e))}}}function n(e,t,n){this.generalMutationTopic=e(i),this.specificMutationTopic=e(r+n.getId()),this.now=t,this.domainObject=n}var i="mutation",r="mutation:";return n.prototype.mutate=function(n,i){function r(e){c.notify(s),l.notify(e)}function o(t){var n=t||d;return t!==!1&&(u!==n&&e(u,n),u.modified=p?i:a(),r(u)),t!==!1}var s=this.domainObject,a=this.now,c=this.generalMutationTopic,l=this.specificMutationTopic,u=s.getModel(),d=JSON.parse(JSON.stringify(u)),p=arguments.length>1;return t(n(d)).then(o)},n.prototype.listen=function(e){return this.specificMutationTopic.listen(e)},n.prototype.invoke=n.prototype.mutate,n}),n("platform/core/src/capabilities/DelegationCapability",[],function(){function e(e,t){var n=t.getCapability("type"),i=this;this.$q=e,this.delegateCapabilities={},this.domainObject=t,n&&n.getDefinition&&(n.getDefinition().delegates||[]).forEach(function(e){i.delegateCapabilities[e]=!0})}return e.prototype.getDelegates=function(e){function t(e){return function(t){return t.filter(function(t){return t.hasCapability(e)})}}function n(){return i.useCapability("composition")}var i=this.domainObject;return this.doesDelegateCapability(e)?n().then(t(e)):this.$q.when([])},e.prototype.doesDelegateCapability=function(e){return!!this.delegateCapabilities[e]},e.prototype.invoke=e.prototype.getDelegates,e}),n("platform/core/src/capabilities/InstantiationCapability",[],function(){function e(e,t,n,i){this.$injector=e,this.identifierService=t,this.domainObject=i,this.now=n}return e.prototype.instantiate=function(e){var t=this.identifierService.parse(this.domainObject.getId()),n=t.getDefinedSpace(),i=this.identifierService.generate(n);e.modified=this.now(),this.instantiateFn=this.instantiateFn||this.$injector.get("instantiate");var r=this.instantiateFn(e,i);return this.contextualizeFn=this.contextualizeFn||this.$injector.get("contextualize"),this.contextualizeFn(r,this.domainObject)},e.prototype.invoke=e.prototype.instantiate,e}),n("platform/core/src/runs/TransactingMutationListener",[],function(){function e(e,t,n){var i=e("mutation");i.listen(function(e){var i=e.getCapability("persistence"),r=t.isActive();n.put(e.getId(),e.getModel()),r||t.startTransaction(),t.addToTransaction(i.persist.bind(i),i.refresh.bind(i)),r||t.commit()})}return e}),n("platform/core/src/services/Now",[],function(){function e(){return function(){return Date.now()}}return e}),n("platform/core/src/services/Throttle",[],function(){function e(e){return function(t,n,i){function r(){return o=void 0,t.apply(null,s)}var o,s=[];return n=n||0,i=i||!1,function(){return s=Array.prototype.slice.apply(arguments,[0]),o=o||e(r,n,i)}}}return e}),n("platform/core/src/services/Topic",[],function(){function e(e){function n(){var n=[];return{listen:function(e){return n.push(e),function(){n=n.filter(function(t){return t!==e})}},notify:function(i){n.forEach(function(n){try{n(i)}catch(r){e.error(t+r.message),e.error(r)}})}}}var i={};return function(e){return arguments.length<1?n():(i[e]=i[e]||n(),i[e])}}var t="Error when notifying listener: ";return e}),n("platform/core/src/capabilities/ContextCapability",[],function(){function e(e,t){this.parentObject=e,this.domainObject=t}return e.prototype.getParent=function(){return this.parentObject},e.prototype.getPath=function(){var e=this.parentObject,t=e&&e.getCapability("context"),n=t?t.getPath():[this.parentObject];return n.concat([this.domainObject])},e.prototype.getRoot=function(){var e=this.parentObject&&this.parentObject.getCapability("context");return e?e.getRoot():this.parentObject||this.domainObject},e}),n("platform/core/src/capabilities/ContextualDomainObject",["./ContextCapability"],function(e){function t(t,n){var i=Object.create(t),r=new e(n,t);return i.getCapability=function(e){return"context"===e?r:t.getCapability.apply(this,arguments)},i}return t}),n("platform/core/src/services/Contextualize",["../capabilities/ContextualDomainObject"],function(e){function t(t){function n(e,n){var i=n&&n.getModel(),r=(i||{}).composition||[];-1===r.indexOf(e)&&t.warn(["Attempted to contextualize",e,"in",n&&n.getId(),"but that object does not contain",e,"in its composition.","Unexpected behavior may follow."].join(" "))}return function(t,i){var r=t.getCapability("editor");return r&&r.inEditContext()||n(t.getId(),i),new e(t,i)}}return t}),n("platform/core/src/services/Instantiate",["../objects/DomainObjectImpl"],function(e){function t(t,n,i){return function(r,o){var s=t.getCapabilities(r);return o=o||n.generate(),i.put(o,r),new e(o,r,s)}}return t}),n("platform/core/bundle",["./src/objects/DomainObjectProvider","./src/capabilities/CoreCapabilityProvider","./src/models/StaticModelProvider","./src/models/ModelAggregator","./src/models/ModelCacheService","./src/models/PersistedModelProvider","./src/models/CachingModelDecorator","./src/models/MissingModelDecorator","./src/types/TypeProvider","./src/actions/ActionProvider","./src/actions/ActionAggregator","./src/actions/LoggingActionDecorator","./src/views/ViewProvider","./src/identifiers/IdentifierProvider","./src/capabilities/CompositionCapability","./src/capabilities/RelationshipCapability","./src/types/TypeCapability","./src/actions/ActionCapability","./src/views/ViewCapability","./src/capabilities/PersistenceCapability","./src/capabilities/MetadataCapability","./src/capabilities/MutationCapability","./src/capabilities/DelegationCapability","./src/capabilities/InstantiationCapability","./src/runs/TransactingMutationListener","./src/services/Now","./src/services/Throttle","./src/services/Topic","./src/services/Contextualize","./src/services/Instantiate","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d,p,f,h,m,g,y,v,b,w,S,x,C,T,k,M,O,$,_,A){A.register("platform/core",{name:"Open MCT Core",description:"Defines core concepts of Open MCT.",sources:"src",configuration:{paths:{uuid:"uuid"}},extensions:{versions:[{name:"Version",value:"0.12.1-SNAPSHOT",priority:999},{name:"Built",value:"2017-02-27T10:10:33Z",description:"The date on which this version of the client was built.",priority:990},{name:"Revision",value:"f44acda05e6e59f96d9ccb2a440e43ebeed5af2a",description:"A unique revision identifier for the client sources.",priority:995},{name:"Branch",value:"master",description:"The name of the branch that was used during the build.",priority:994}],components:[{provides:"objectService",type:"provider",implementation:e,depends:["modelService","instantiate"]},{provides:"capabilityService",type:"provider",implementation:t,depends:["capabilities[]","$log"]},{provides:"modelService",type:"provider",implementation:n,depends:["models[]","$q","$log"]},{provides:"modelService",type:"aggregator",implementation:i,depends:["$q"]},{provides:"modelService",type:"provider",implementation:o,depends:["persistenceService","$q","now","PERSISTENCE_SPACE"]},{provides:"modelService",type:"decorator",implementation:s,depends:["cacheService"]},{provides:"modelService",type:"decorator",priority:"fallback",implementation:a},{provides:"typeService",type:"provider",implementation:c,depends:["types[]"]},{provides:"actionService",type:"provider",implementation:l,depends:["actions[]","$log"]},{provides:"actionService",type:"aggregator",implementation:u},{provides:"actionService",type:"decorator",implementation:d,depends:["$log"]},{provides:"viewService",type:"provider",implementation:p,depends:["views[]","$log"]},{provides:"identifierService",type:"provider",implementation:f,depends:["PERSISTENCE_SPACE"]}],types:[{properties:[{control:"textfield",name:"Title",key:"name",property:"name",pattern:"\\S+",required:!0,cssClass:"l-input-lg"},{name:"Notes",key:"notes",property:"notes",control:"textarea",required:!1,cssClass:"l-textarea-sm"}]},{key:"root",name:"Root",cssClass:"icon-folder"},{key:"folder",name:"Folder",cssClass:"icon-folder",features:"creation",description:"Create folders to organize other objects or links to objects.",priority:1e3,model:{composition:[]}},{key:"unknown",name:"Unknown Type",cssClass:"icon-object-unknown"},{name:"Unknown Type",cssClass:"icon-object-unknown"}],capabilities:[{key:"composition",implementation:h,depends:["$injector","contextualize"]},{key:"relationship",implementation:m,depends:["$injector"]},{key:"type",implementation:g,depends:["typeService"]},{key:"action",implementation:y,depends:["$q","actionService"]},{key:"view",implementation:v,depends:["viewService"]},{key:"persistence",implementation:b,depends:["cacheService","persistenceService","identifierService","notificationService","$q"]},{key:"metadata",implementation:w},{key:"mutation",implementation:S,depends:["topic","now"]},{key:"delegation",implementation:x,depends:["$q"]},{key:"instantiation",implementation:C,depends:["$injector","identifierService","now"]}],services:[{key:"cacheService",implementation:r},{key:"now",implementation:k},{key:"throttle",implementation:M,depends:["$timeout"]},{key:"topic",implementation:O,depends:["$log"]},{key:"contextualize",implementation:$,depends:["$log"]},{key:"instantiate",implementation:_,depends:["capabilityService","identifierService","cacheService"]}],runs:[{implementation:T,depends:["topic","transactionService","cacheService"]}],constants:[{key:"PERSISTENCE_SPACE",value:"mct"}],licenses:[{name:"Math.uuid.js",version:"1.4.7",description:"Unique identifer generation (code adapted.)",author:"Robert Kieffer",website:"https://github.com/broofa/node-uuid",copyright:"Copyright (c) 2010-2012 Robert Kieffer",license:"license-mit",link:"http://opensource.org/licenses/MIT"}]}})}),n("platform/entanglement/src/actions/AbstractComposeAction",[],function(){function e(e,t,n,i,r,o){i.selectedObject?(this.newParent=i.domainObject,this.object=i.selectedObject):this.object=i.domainObject,this.currentParent=this.object.getCapability("context").getParent(),this.context=i,this.policyService=e,this.locationService=t,this.composeService=n,this.verb=r||"Compose",this.suffix=o||"To a New Location"}return e.prototype.cloneContext=function(){var e={},t=this.context;return Object.keys(t).forEach(function(n){e[n]=t[n]}),e},e.prototype.perform=function(){var e,t,n,i=this,r=this.locationService,o=this.composeService,s=this.currentParent,a=this.newParent,c=this.object;return a?o.perform(c,a):(e=[this.verb,c.getModel().name,this.suffix].join(" "),t=this.verb+" To",n=function(e){var t=i.cloneContext();return t.selectedObject=c,t.domainObject=e,o.validate(c,e)&&i.policyService.allow("action",i,t)},r.getLocationFromUser(e,t,n,s).then(function(e){return o.perform(c,e)}))},e.appliesTo=function(e){var t=e.selectedObject||e.domainObject;return!(!t||!t.hasCapability("context"))},e}),n("platform/entanglement/src/actions/MoveAction",["./AbstractComposeAction"],function(e){function t(t,n,i,r){e.apply(this,[t,n,i,r,"Move"])}return t.prototype=Object.create(e.prototype),t.appliesTo=e.appliesTo,t}),n("platform/entanglement/src/actions/CopyAction",["./AbstractComposeAction"],function(e){function t(t,n,i,r,o,s,a){this.dialog=void 0,this.notification=void 0,this.dialogService=o,this.notificationService=s,this.$log=t,e.call(this,n,i,r,a,"Duplicate","To a Location")}return t.prototype=Object.create(e.prototype),t.prototype.progress=function(e,t,n){"preparing"!==e.toLowerCase()||this.dialog?"copying"===e.toLowerCase()&&(this.dialog&&this.dialog.dismiss(),this.notification||(this.notification=this.notificationService.notify({title:"Copying objects",unknownProgress:!1,severity:"info"})),this.notification.model.progress=n/t*100,this.notification.model.title=["Copied ",n,"of ",t,"objects"].join(" ")):this.dialog=this.dialogService.showBlockingMessage({title:"Preparing to copy objects",hint:"Do not navigate away from this page or close this browser tab while this message is displayed.",unknownProgress:!0,severity:"info"})},t.prototype.perform=function(){function t(){r.notification.dismiss(),r.notificationService.info("Copying complete.")}function n(e){var t,n={title:"Error copying objects.",severity:"error",hint:e.message,minimized:!0,options:[{label:"OK",callback:function(){t.dismiss()}}]};r.dialog.dismiss(),r.notification&&r.notification.dismiss(),r.$log.error("Error copying objects. ",e),r.notificationService.notify(n),t=r.dialogService.showBlockingMessage(n)}function i(e){r.progress(e.phase,e.totalObjects,e.processed)}var r=this;return e.prototype.perform.call(this).then(t,n,i)},t.appliesTo=e.appliesTo,t}),n("platform/entanglement/src/actions/LinkAction",["./AbstractComposeAction"],function(e){function t(t,n,i,r){e.apply(this,[t,n,i,r,"Link"])}return t.prototype=Object.create(e.prototype),t.appliesTo=e.appliesTo,t}),n("platform/entanglement/src/actions/GoToOriginalAction",[],function(){function e(e){this.domainObject=e.domainObject}return e.prototype.perform=function(){return this.domainObject.getCapability("location").getOriginal().then(function(e){var t=e.getCapability("action");return t&&t.perform("navigate")})},e.appliesTo=function(e){var t=e.domainObject;return t&&t.hasCapability("location")&&t.getCapability("location").isLink()},e}),n("platform/entanglement/src/actions/SetPrimaryLocationAction",[],function(){function e(e){this.domainObject=e.domainObject}return e.prototype.perform=function(){var e=this.domainObject.getCapability("location");return e.setPrimaryLocation(e.getContextualLocation())},e.appliesTo=function(e){var t=e.domainObject;return t&&t.hasCapability("location")&&void 0===t.getModel().location},e}),n("platform/entanglement/src/services/LocatingCreationDecorator",[],function(){function e(e){this.creationService=e}return e.prototype.createObject=function(e,t){return t&&t.getId&&(e.location=t.getId()),this.creationService.createObject(e,t)},e}),n("platform/entanglement/src/services/LocatingObjectDecorator",[],function(){function e(e,t,n,i){this.contextualize=e,this.$log=n,this.objectService=i,this.$q=t}return e.prototype.getObjects=function(e){function t(e,n){function s(o){var s=(o||{})[e],a=s&&s.getModel(),c=(a||{}).location;return c?n[e]?(i.warn(["LocatingObjectDecorator detected a cycle","while attempted to define a context for",e+";","no context will be added and unexpected behavior","may follow."].join(" ")),s):(n[e]=!0,t(c,n).then(function(e){return r(s,e)})):s}return o.getObjects([e]).then(s)}var n=this.$q,i=this.$log,r=this.contextualize,o=this.objectService,s={};return e.forEach(function(e){s[e]=t(e,{})}),n.all(s)},e}),n("platform/entanglement/src/policies/CopyPolicy",[],function(){function e(){}function t(e){var t=e&&e.getCapability("type");return!(!t||!t.hasFeature("creation"))}function n(e){return e.selectedObject||e.domainObject}return e.prototype.allow=function(e,i){var r=e.getMetadata().key;return"copy"===r?t(n(i)):!0},e}),n("platform/entanglement/src/policies/CrossSpacePolicy",[],function(){function e(){}function t(e){var t=e&&e.getCapability("persistence");return t&&t.getSpace()}function n(e){var n=e.domainObject,i=e.selectedObject;return void 0!==i&&void 0!==n&&t(n)!==t(i)}var i=["move"];return e.prototype.allow=function(e,t){var r=e.getMetadata().key;return-1!==i.indexOf(r)?!n(t):!0},e}),n("platform/entanglement/src/policies/MovePolicy",[],function(){function e(){}function t(e){var t=e.getCapability("context");return t&&t.getParent()}function n(e){var t=e&&e.getCapability("type");return!(!t||!t.hasFeature("creation"))}function i(e){return e.selectedObject||e.domainObject}return e.prototype.allow=function(e,r){var o=e.getMetadata().key;return"move"===o?n(i(r))&&n(t(i(r))):!0},e}),n("platform/entanglement/src/capabilities/LocationCapability",[],function(){function e(e,t,n){return this.domainObject=n,this.$q=e,this.$injector=t,this}return e.prototype.getOriginal=function(){var e;return this.isOriginal()?this.$q.when(this.domainObject):(e=this.domainObject.getId(),this.objectService=this.objectService||this.$injector.get("objectService"),this.objectService.getObjects([e]).then(function(t){return t[e]}))},e.prototype.setPrimaryLocation=function(e){return this.domainObject.useCapability("mutation",function(t){t.location=e})},e.prototype.getContextualLocation=function(){var e=this.domainObject.getCapability("context");if(e)return e.getParent().getId()},e.prototype.isLink=function(){var e=this.domainObject.getModel();return e.location!==this.getContextualLocation()},e.prototype.isOriginal=function(){return!this.isLink()},e}),n("platform/entanglement/src/services/MoveService",[],function(){function e(e,t){this.policyService=e,this.linkService=t}return e.prototype.validate=function(e,t){var n=e.getCapability("context").getParent();return t&&t.getId?t.getId()===n.getId()?!1:t.getId()===e.getId()?!1:-1!==t.getModel().composition.indexOf(e.getId())?!1:this.policyService.allow("composition",t.getCapability("type"),e):!1},e.prototype.perform=function(e,t){function n(t){var n=t.getCapability("location"),i=e.getCapability("location");if(n&&i)return i.isOriginal()?n.setPrimaryLocation(n.getContextualLocation()):void 0}if(!this.validate(e,t))throw new Error("Tried to move objects without validating first.");return this.linkService.perform(e,t).then(n).then(function(){return e.getCapability("action").perform("remove")})},e}),n("platform/entanglement/src/services/LinkService",[],function(){function e(e){this.policyService=e}return e.prototype.validate=function(e,t){return t&&t.getId?t.getId()===e.getId()?!1:t.hasCapability("composition")?-1!==t.getModel().composition.indexOf(e.getId())?!1:this.policyService.allow("composition",t.getCapability("type"),e):!1:!1},e.prototype.perform=function(e,t){if(!this.validate(e,t))throw new Error("Tried to link objects without validating first.");return t.getCapability("composition").add(e)},e}),n("platform/entanglement/src/services/CopyTask",[],function(){function e(e,t,n,i){this.domainObject=e,this.parent=t,this.firstClone=void 0,this.$q=i,this.deferred=void 0,this.filter=n,this.persisted=0,this.clones=[],this.idMap={}}function t(e,t,n){return t.getModel().composition.push(e.getId()),n&&void 0===e.getModel().location&&(e.getModel().location=t.getId()),e}function n(e){var t=JSON.parse(JSON.stringify(e));return t.composition&&(t.composition=[]),delete t.persisted,delete t.modified,delete t.location,t}function i(e){return e.$q.all(e.clones.map(function(t){return t.getCapability("persistence").persist().then(function(){e.deferred.notify({phase:"copying",totalObjects:e.clones.length,processed:++e.persisted})})})).then(function(){return e})}function r(e){return e.parent.getCapability("composition").add(e.firstClone).then(function(t){return e.parent.getCapability("persistence").persist().then(function(){return t})})}return e.prototype.rewriteIdentifiers=function(e,t){function n(e){return"string"==typeof e&&t[e]||e}Array.isArray(e)?e.forEach(function(i,r){e[r]=n(i),this.rewriteIdentifiers(e[r],t)},this):e&&"object"==typeof e&&Object.keys(e).forEach(function(i){var r=e[i];e[i]=n(r),t[i]&&(delete e[i],e[t[i]]=r),this.rewriteIdentifiers(r,t)},this)},e.prototype.copyComposees=function(e,n,i){var r=this,o={};return(e||[]).reduce(function(e,s){return e.then(function(){return r.copy(s,i).then(function(e){return o[s.getId()]=e.getId(),t(e,n,e!==s)})})},r.$q.when(void 0)).then(function(){return r.rewriteIdentifiers(n.getModel(),o),r.clones.push(n),n})},e.prototype.copy=function(e){var t,i=this;return this.filter(e)?(t=this.parent.useCapability("instantiation",n(e.getModel())),this.$q.when(e.useCapability("composition")).then(function(n){return i.deferred.notify({phase:"preparing"}),i.copyComposees(n,t,e)})):i.$q.when(e)},e.prototype.buildCopyPlan=function(){var e=this;return this.copy(e.domainObject,e.parent).then(function(t){return t!==e.domainObject&&(t.getModel().location=e.parent.getId()),e.firstClone=t,e})},e.prototype.perform=function(){return this.deferred=this.$q.defer(),this.buildCopyPlan().then(i).then(r).then(this.deferred.resolve,this.deferred.reject),this.deferred.promise},e}),n("platform/entanglement/src/services/CopyService",["./CopyTask"],function(e){
function t(e,t){this.$q=e,this.policyService=t}return t.prototype.validate=function(e,t){return t&&t.getId?t.getId()===e.getId()?!1:this.policyService.allow("composition",t.getCapability("type"),e):!1},t.prototype.perform=function(t,n,i){function r(e){return(!i||i(e))&&o.allow("creation",e.getCapability("type"))}var o=this.policyService;if(this.validate(t,n))return new e(t,n,r,this.$q).perform();throw new Error("Tried to copy objects without validating first.")},t}),n("platform/entanglement/src/services/LocationService",[],function(){function e(e){return{getLocationFromUser:function(t,n,i,r){var o,s;return o={sections:[{name:"Location",cssClass:"grows",rows:[{name:n,control:"locator",validate:i,key:"location"}]}],name:t},s={location:r},e.getUserInput(o,s).then(function(e){return e.location})}}}return e}),n("platform/entanglement/bundle",["./src/actions/MoveAction","./src/actions/CopyAction","./src/actions/LinkAction","./src/actions/GoToOriginalAction","./src/actions/SetPrimaryLocationAction","./src/services/LocatingCreationDecorator","./src/services/LocatingObjectDecorator","./src/policies/CopyPolicy","./src/policies/CrossSpacePolicy","./src/policies/MovePolicy","./src/capabilities/LocationCapability","./src/services/MoveService","./src/services/LinkService","./src/services/CopyService","./src/services/LocationService","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d,p,f,h,m){m.register("platform/entanglement",{name:"Entanglement",description:"Tools to assist you in entangling the world of WARP.",configuration:{},extensions:{actions:[{key:"move",name:"Move",description:"Move object to another location.",cssClass:"icon-move",category:"contextual",implementation:e,depends:["policyService","locationService","moveService"]},{key:"copy",name:"Duplicate",description:"Duplicate object to another location.",cssClass:"icon-duplicate",category:"contextual",implementation:t,depends:["$log","policyService","locationService","copyService","dialogService","notificationService"]},{key:"link",name:"Create Link",description:"Create Link to object in another location.",cssClass:"icon-link",category:"contextual",implementation:n,depends:["policyService","locationService","linkService"]},{key:"follow",name:"Go To Original",description:"Go to the original, un-linked instance of this object.",cssClass:"",category:"contextual",implementation:i},{key:"locate",name:"Set Primary Location",description:"Set a domain object's primary location.",cssClass:"",category:"contextual",implementation:r}],components:[{type:"decorator",provides:"creationService",implementation:o},{type:"decorator",provides:"objectService",implementation:s,depends:["contextualize","$q","$log"]}],policies:[{category:"action",implementation:c},{category:"action",implementation:a},{category:"action",implementation:l}],capabilities:[{key:"location",name:"Location Capability",description:"Provides a capability for retrieving the location of an object based upon it's context.",implementation:u,depends:["$q","$injector"]}],services:[{key:"moveService",name:"Move Service",description:"Provides a service for moving objects",implementation:d,depends:["policyService","linkService","$q"]},{key:"linkService",name:"Link Service",description:"Provides a service for linking objects",implementation:p,depends:["policyService"]},{key:"copyService",name:"Copy Service",description:"Provides a service for copying objects",implementation:f,depends:["$q","policyService","now"]},{key:"locationService",name:"Location Service",description:"Provides a service for prompting a user for locations.",implementation:h,depends:["dialogService"]}],licenses:[]}})}),n("platform/execution/src/WorkerService",[],function(){function e(e,t){function n(e){var t=e.key;if(!i[t]){if(e.scriptUrl)i[t]=[e.bundle.path,e.bundle.sources,e.scriptUrl].join("/");else if(e.scriptText){var n=new Blob([e.scriptText],{type:"application/javascript"});i[t]=URL.createObjectURL(n)}r[t]=e.shared}}var i={},r={};(t||[]).forEach(n),this.workerUrls=i,this.sharedWorkers=r,this.Worker=e.Worker,this.SharedWorker=e.SharedWorker}return e.prototype.run=function(e){var t=this.workerUrls[e],n=this.sharedWorkers[e]?this.SharedWorker:this.Worker;return t&&n&&new n(t)},e}),n("platform/execution/bundle",["./src/WorkerService","legacyRegistry"],function(e,t){t.register("platform/execution",{extensions:{services:[{key:"workerService",implementation:e,depends:["$window","workers[]"]}]}})}),!function(e,t){"function"==typeof n&&n.amd?n("csv",[],t):"object"==typeof module&&module.exports?module.exports=t():e.CSV=t()}(this,function(){"use strict";function e(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function t(e){return"string"==typeof e}function n(e){return!isNaN(+e)}function i(e){return 0==e||1==e}function r(e){return null==e}function o(e){return null!=e}function s(e,t){return o(e)?e:t}function a(e,t){for(var n=0,i=e.length;i>n&&t(e[n],n)!==!1;n+=1);}function c(e){return e.replace(/"/g,'\\"')}function l(e){return"attrs["+e+"]"}function u(e,t){return n(e)?"Number("+l(t)+")":i(e)?"Boolean("+l(t)+" == true)":"String("+l(t)+")"}function d(e,n,i,r){var o=[];return 3==arguments.length?(n?g(n)?a(i,function(i,r){t(n[r])?n[r]=n[r].toLowerCase():e[n[r]]=n[r],o.push("deserialize[cast["+r+"]]("+l(r)+")")}):a(i,function(e,t){o.push(u(e,t))}):a(i,function(e,t){o.push(l(t))}),o="return ["+o.join(",")+"]"):(n?g(n)?a(i,function(i,s){t(n[s])?n[s]=n[s].toLowerCase():e[n[s]]=n[s],o.push('"'+c(r[s])+'": deserialize[cast['+s+"]]("+l(s)+")")}):a(i,function(e,t){o.push('"'+c(r[t])+'": '+u(e,t))}):a(i,function(e,t){o.push('"'+c(r[t])+'": '+l(t))}),o="return {"+o.join(",")+"}"),Function("attrs","deserialize","cast",o)}function p(e,t){var n,i=0;return a(t,function(t){var r,o=t;-1!=f.indexOf(t)&&(o="\\"+o),r=e.match(RegExp(o,"g")),r&&r.length>i&&(i=r.length,n=t)}),n||t[0]}var f=["|","^"],h=[",",";","  ","|","^"],m=["\r\n","\r","\n"],g=Array.isArray||function(e){return"[object Array]"===toString.call(e)},y=function(){function n(e,n){if(n||(n={}),g(e))this.mode="encode";else{if(!t(e))throw Error("Incompatible format!");this.mode="parse"}this.data=e,this.options={header:s(n.header,!1),cast:s(n.cast,!0)};var i=n.lineDelimiter||n.line,r=n.cellDelimiter||n.delimiter;this.isParser()?(this.options.lineDelimiter=i||p(this.data,m),this.options.cellDelimiter=r||p(this.data,h),this.data=o(this.data,this.options.lineDelimiter)):this.isEncoder()&&(this.options.lineDelimiter=i||"\r\n",this.options.cellDelimiter=r||",")}function i(e,t,n,i,r){e(new t(n,i,r))}function o(e,t){return e.slice(-t.length)!=t&&(e+=t),e}function c(n){return g(n)?"array":e(n)?"object":t(n)?"string":r(n)?"null":"primitive"}return n.prototype.set=function(e,t){return this.options[e]=t},n.prototype.isParser=function(){return"parse"==this.mode},n.prototype.isEncoder=function(){return"encode"==this.mode},n.prototype.parse=function(e){function t(){c={escaped:!1,quote:!1,cell:!0}}function n(){m.cell=""}function r(){m.line=[]}function o(e){m.line.push(c.escaped?e.slice(1,-1).replace(/""/g,'"'):e),n(),t()}function s(e){o(e.slice(0,1-f.lineDelimiter.length))}function a(){h?g(h)?(l=d(y,f.cast,m.line,h),(a=function(){i(e,l,m.line,y,f.cast)})()):h=m.line:(l||(l=d(y,f.cast,m.line)),(a=function(){i(e,l,m.line,y,f.cast)})())}if("parse"==this.mode){if(0===this.data.trim().length)return[];var c,l,u,p=this.data,f=this.options,h=f.header,m={cell:"",line:[]},y=this.deserialize;e||(u=[],e=function(e){u.push(e)}),1==f.lineDelimiter.length&&(s=o);var v,b,w,S=p.length,x=f.cellDelimiter.charCodeAt(0),C=f.lineDelimiter.charCodeAt(f.lineDelimiter.length-1);for(t(),v=0,b=0;S>v;v++)w=p.charCodeAt(v),c.cell&&(c.cell=!1,34==w)?c.escaped=!0:c.escaped&&34==w?c.quote=!c.quote:(c.escaped&&c.quote||!c.escaped)&&(w==x?(o(m.cell+p.slice(b,v)),b=v+1):w==C&&(s(m.cell+p.slice(b,v)),b=v+1,(m.line.length>1||""!==m.line[0])&&a(),r()));return u?u:this}},n.prototype.deserialize={string:function(e){return e+""},number:function(e){return+e},"boolean":function(e){return!!e}},n.prototype.serialize={object:function(e){var t=this,n=Object.keys(e),i=Array(n.length);return a(n,function(n,r){i[r]=t[c(e[n])](e[n])}),i},array:function(e){var t=this,n=Array(e.length);return a(e,function(e,i){n[i]=t[c(e)](e)}),n},string:function(e){return'"'+(e+"").replace(/"/g,'""')+'"'},"null":function(){return""},primitive:function(e){return e}},n.prototype.encode=function(e){function n(e){return e.join(s.cellDelimiter)}if("encode"==this.mode){if(0==this.data.length)return"";var i,r,o=this.data,s=this.options,l=s.header,u=o[0],d=this.serialize,p=0;e||(r=Array(o.length),e=function(e,t){r[t+p]=e}),l&&(g(l)||(i=Object.keys(u),l=i),e(n(d.array(l)),0),p=1);var f,h=c(u);return"array"==h?(g(s.cast)?(f=Array(s.cast.length),a(s.cast,function(e,n){t(e)?f[n]=e.toLowerCase():(f[n]=e,d[e]=e)})):(f=Array(u.length),a(u,function(e,t){f[t]=c(e)})),a(o,function(t,i){var r=Array(f.length);a(t,function(e,t){r[t]=d[f[t]](e)}),e(n(r),i)})):"object"==h&&(i=Object.keys(u),g(s.cast)?(f=Array(s.cast.length),a(s.cast,function(e,n){t(e)?f[n]=e.toLowerCase():(f[n]=e,d[e]=e)})):(f=Array(i.length),a(i,function(e,t){f[t]=c(u[e])})),a(o,function(t,r){var o=Array(i.length);a(i,function(e,n){o[n]=d[f[n]](t[e])}),e(n(o),r)})),r?r.join(s.lineDelimiter):this}},n.prototype.forEach=function(e){return this[this.mode](e)},n}();return y.parse=function(e,t){return new y(e,t).parse()},y.encode=function(e,t){return new y(e,t).encode()},y.forEach=function(e,t,n){return 2==arguments.length&&(n=t),new y(e,t).forEach(n)},y}),n("platform/exporters/ExportService",["csv"],function(e){function t(e){this.saveAs=e}return t.prototype.exportCSV=function(t,n){var i=n&&n.headers||Object.keys(t[0]||{}).sort(),r=n&&n.filename||"export.csv",o=new e(t,{header:i}).encode(),s=new Blob([o],{type:"text/csv"});this.saveAs(s,r)},t}),function(e,t){"use strict";"function"==typeof n&&n.amd?n("saveAs",[],function(){return t(e)}):e.saveAs=e.saveAs||t(e)}(this,function(e,t){"use strict";function n(t,n){return e.navigator.msSaveOrOpenBlob(l(t),n)}function i(e,t){return new r(e,t)}function r(e,n){function i(){S=u().createObjectURL(e),m.href=S,m.download=n,x(function(){f(),s(T),d(S),T.readyState=T.DONE},0)}function r(){if(h.chrome&&k&&k!==b){var t=e.slice||e.webkitSlice;e=t.call(e,0,e.size,b),M=!0}}function o(){y&&"download"!==n&&(n+=".download"),(k===b||y)&&(C=h)}function p(){(M||!S)&&(S=u().createObjectURL(e)),w(S)}function w(e,n,i){if(C)C.location.href=e;else{var r=h.open(e,"_blank");r===t&&(h.location.href=e)}T.readyState=T.DONE,i?a(T,"writeend",i):s(T),d(n||e)}this.blob=e=l(e),this.saveUsingObjectURLs=p,this.execSave=w;var S,C,T=this,k=e.type,M=!1;return T.readyState=T.INIT,n=n||"download",g?i():(r(),o(),v?c(T):p())}function o(){var e=this;e.readyState=e.DONE,a(e,"abort")}function s(e){a(e,"writestart progress write writeend".split(" "))}function a(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(o){p(o)}}}function c(e){function t(t){t.root.getDirectory("temp",r,i(n),e.saveUsingObjectURLs)}function n(t){function n(e){e.remove(function(){s()})}function o(t){"NotFoundError"===t.name?s():e.saveUsingObjectURLs()}function s(){t.getFile(name,r,i(a),e.saveUsingObjectURLs)}function a(t){function n(n){function i(n){e.execSave(t.toURL(),t,n)}function r(){var t=n.error;t.code!==t.ABORT_ERR&&e.saveUsingObjectURLs()}function o(){"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=e["on"+t]})}function s(){n.abort(),e.readyState=e.DONE}n.onwriteend=i,n.onerror=r,o(),n.write(blob),e.abort=s,e.readyState=e.WRITING}t.createWriter(i(n),e.saveUsingObjectURLs)}t.getFile(name,{create:!1},i(n),i(o))}function i(t){return function(){return e.readyState!==e.DONE?t.apply(this,arguments):void 0}}w+=e.blob.size;var r={create:!0,exclusive:!1};v(h.TEMPORARY,w,i(t),e.saveUsingObjectURLs)}function l(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function u(){return h.URL||h.webkitURL||h}function d(e){function t(){"string"==typeof e?u().revokeObjectURL(e):e.remove(function(){})}setTimeout(t,S)}function p(e){x(function(){throw e},0)}function f(){var e=new MouseEvent("click");m.dispatchEvent(e)}if(e.navigator!==t){if(/MSIE [1-9]\./.test(e.navigator.userAgent))return;if(e.navigator.msSaveOrOpenBlob)return n}var h=e.self||e.window||e.content,m=h.document.createElementNS("http://www.w3.org/1999/xhtml","a"),g="download"in m,y=h.webkitRequestFileSystem,v=h.requestFileSystem||y||h.mozRequestFileSystem,b="application/octet-stream",w=0,S=500,x=h.setImmediate||h.setTimeout,C=r.prototype;return C.abort=o,C.INIT=0,C.WRITING=1,C.DONE=2,C.readyState=C.INIT,C.error=null,C.onwritestart=null,C.onprogress=null,C.onwrite=null,C.onabort=null,C.onerror=null,C.onwriteend=null,i}),n("platform/exporters/bundle",["./ExportService","saveAs","legacyRegistry"],function(e,t,n){n.register("platform/exporters",{extensions:{services:[{key:"exportService",implementation:function(){return new e(t)}}],licenses:[{name:"CSV.js",version:"3.6.4",author:"Kash Nouroozi",description:"Encoder for CSV (comma separated values) export",website:"https://github.com/knrz/CSV.js",copyright:"Copyright (c) 2014 Kash Nouroozi",license:"license-mit",link:"https://github.com/knrz/CSV.js/blob/3.6.4/LICENSE"},{name:"FileSaver.js",version:"0.0.2",author:"Eli Grey",description:"File download initiator (for file exports)",website:"https://github.com/eligrey/FileSaver.js/",copyright:"Copyright  2015 Eli Grey.",license:"license-mit",link:"https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md"}]}})}),n("platform/features/clock/src/indicators/ClockIndicator",["moment"],function(e){function t(t,n){var i=this;this.text="",t.listen(function(t){i.text=e.utc(t).format(n)+" UTC"})}return t.prototype.getGlyphClass=function(){return"no-collapse float-right subdued"},t.prototype.getCssClass=function(){return"icon-clock"},t.prototype.getText=function(){return this.text},t.prototype.getDescription=function(){return""},t}),n("platform/features/clock/src/services/TickerService",[],function(){function e(e,t){function n(){var r=t(),o=r%1e3;r>=i.last+1e3&&(i.callbacks.forEach(function(e){e(r)}),i.last=r-o),e(n,1e3-o,!0)}var i=this;n(),this.callbacks=[],this.last=t()-1e3}return e.prototype.listen=function(e){var t=this;return t.callbacks.push(e),e(this.last),function(){t.callbacks=t.callbacks.filter(function(t){return t!==e})}},e}),n("platform/features/clock/src/controllers/ClockController",["moment"],function(e){function t(t,n){function i(){var t=e.utc(s);l.textValue=c&&t.format(c),l.ampmValue=t.format("A")}function r(e){s=e,i()}function o(e){var t;void 0!==e&&(t=e[0],l.use24="clock24"===e[1],c=l.use24?t.replace("hh","HH"):t,i())}var s,a,c,l=this;t.$watch("model.clockFormat",o),a=n.listen(r),t.$on("$destroy",a)}return t.prototype.zone=function(){return"UTC"},t.prototype.text=function(){return this.textValue},t.prototype.ampm=function(){return this.use24?"":this.ampmValue},t}),function(e){n("moment-duration-format",["moment"],function(){return function(){!function(e,n){function i(e){var t="";if(e=parseInt(e,10),!e||1>e)return t;for(;e;)t+="0",e-=1;return t}function r(e,t,n){return null==e&&(e=""),e=""+e,(n?e:"")+i(t-e.length)+(n?"":e)}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}function c(e,t){var n,i=0,r=e.length;for("function"!=typeof t&&(n=t,t=function(e){return e===n});r>i;){if(t(e[i]))return e[i];i+=1}}function l(e,t){var n=0,i=e.length;if(e&&i)for(;i>n;){if(t(e[n],n)===!1)return;n+=1}}function u(e,t){var n=0,i=e.length,r=[];if(!e||!i)return r;for(;i>n;)r[n]=t(e[n],n),n+=1;return r}function d(e,t){return u(e,function(e){return e[t]})}function p(e){var t=[];return l(e,function(e){e&&t.push(e)}),t}function f(e){var t=[];return l(e,function(e){c(t,e)||t.push(e)}),t}function h(e,t){var n=[];return l(e,function(e){l(t,function(t){e===t&&n.push(e)})}),f(n)}function m(e,t){var n=[];return l(e,function(i,r){return t(i)?void 0:(n=e.slice(r),!1)}),n}function g(e,t){var n=e.slice().reverse();return m(n,t).reverse()}function y(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var v;if("function"==typeof t)try{v=t("moment")}catch(b){}if(!v&&e.moment&&(v=e.moment),!v)throw"Moment Duration Format cannot find Moment.js";v.duration.fn.format=function(){var e,t,n,a,b,w,S=[].slice.call(arguments),x=y({},this.format.defaults),C=v.duration(this);return x.duration=this,l(S,function(e){return"string"==typeof e||"function"==typeof e?void(x.template=e):"number"==typeof e?void(x.precision=e):void(s(e)&&y(x,e))}),n=x.types=o(x.types)?x.types:x.types.split(" "),"function"==typeof x.template&&(x.template=x.template.apply(x)),e=new RegExp(u(n,function(e){return x[e].source}).join("|"),"g"),a=function(e){return c(n,function(t){return x[t].test(e)})},t=u(x.template.match(e),function(e,t){var n=a(e),i=e.length;return{index:t,length:i,token:"escape"===n?e.replace(x.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}},this),b=h(n,f(p(d(t,"type")))),b.length?(l(b,function(e,n){var i,r,o,s,a;i=C.as(e),r=i>0?Math.floor(i):Math.ceil(i),o=i-r,s=n+1===b.length,a=!n,l(t,function(t){t.type===e&&(y(t,{value:i,wholeValue:r,decimalValue:o,isLeast:s,isMost:a}),a&&null==x.forceLength&&t.length>1&&(x.forceLength=!0))}),C.subtract(r,e)}),x.trim&&(t=("left"===x.trim?m:g)(t,function(e){return!(e.isLeast||null!=e.type&&e.wholeValue)})),w=!1,"right"===x.trim&&t.reverse(),t=u(t,function(e){var t,n;if(!e.type)return e.token;if(t=e.isLeast&&x.precision<0?(Math.floor(e.wholeValue*Math.pow(10,x.precision))*Math.pow(10,-x.precision)).toString():e.wholeValue.toString(),t=t.replace(/^\-/,""),e.length>1&&(w||e.isMost||x.forceLength)&&(t=r(t,e.length)),e.isLeast&&x.precision>0)switch(n=e.decimalValue.toString().replace(/^\-/,"").split(/\.|e\-/),n.length){case 1:t+="."+r(n[0],x.precision,!0).slice(0,x.precision);break;case 2:t+="."+r(n[1],x.precision,!0).slice(0,x.precision);break;case 3:t+="."+r(i(+n[2]-1)+(n[0]||"0")+n[1],x.precision,!0).slice(0,x.precision);break;default:throw"Moment Duration Format: unable to parse token decimal value."}return e.isMost&&e.value<0&&(t="-"+t),w=!0,t}),"right"===x.trim&&t.reverse(),t.join("")):d(t,"token").join("")},v.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){var e=this.types,t=this.duration,n=a(e,function(e){return t._data[e]});switch(n){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}}}(this)}.apply(e,arguments)})}(this),n("platform/features/clock/src/controllers/TimerFormatter",["moment","moment-duration-format"],function(e){function t(){}function n(e){return Math.abs(1e3*Math.floor(e/1e3))}var i="HH:mm:ss",r="d[D] HH:mm:ss";return t.prototype["short"]=function(t){return e.duration(n(t),"ms").format(i,{trim:!1})},t.prototype["long"]=function(t){return e.duration(n(t),"ms").format(r,{trim:!1})},t}),n("platform/features/clock/src/controllers/TimerController",["./TimerFormatter"],function(e){function t(e,t,i){function r(){var e=f-p;d&&!isNaN(e)?(m.textValue=d(e),m.signValue=0>e?"-":e>=1e3?"+":"",m.signCssClass=0>e?"icon-minus":e>=1e3?"icon-plus":""):(m.textValue="",m.signValue="",m.signCssClass="")}function o(e){d=n[e]||n["long"]}function s(e){p=e}function a(e){var t=e.getModel(),n=t.timestamp,i=t.timerFormat,a=e.getCapability("action"),c=void 0===n?"timer.start":"timer.restart";o(i),s(n),m.relevantAction=a&&a.getActions(c)[0],r()}function c(e){e&&a(e)}function l(){c(e.domainObject)}function u(){var n=m.signValue,o=m.textValue;f=i(),r(),(n!==m.signValue||o!==m.textValue)&&e.$apply(),h&&t.requestAnimationFrame(u)}var d,p,f,h=!0,m=this;t.requestAnimationFrame(u),e.$watch("domainObject",c),e.$watch("model.modified",l),e.$on("$destroy",function(){h=!1}),this.$scope=e,this.signValue="",this.textValue="",this.updateObject=a}var n=new e;return t.prototype.buttonCssClass=function(){return this.relevantAction?this.relevantAction.getMetadata().cssClass:""},t.prototype.buttonText=function(){return this.relevantAction?this.relevantAction.getMetadata().name:""},t.prototype.clickButton=function(){this.relevantAction&&(this.relevantAction.perform(),this.updateObject(this.$scope.domainObject))},t.prototype.sign=function(){return this.signValue},t.prototype.signClass=function(){return this.signCssClass},t.prototype.text=function(){return this.textValue},t}),n("platform/features/clock/src/controllers/RefreshingController",[],function(){function e(e,t){function n(){var t=e.domainObject&&e.domainObject.getCapability("persistence");return t&&t.refresh()}var i;i=t.listen(n),e.$on("$destroy",i)}return e}),n("platform/features/clock/src/actions/AbstractStartTimerAction",[],function(){function e(e,t){this.domainObject=t.domainObject,this.now=e}return e.prototype.perform=function(){function e(e){e.timestamp=n()}var t=this.domainObject,n=this.now;return t.useCapability("mutation",e)},e}),n("platform/features/clock/src/actions/StartTimerAction",["./AbstractStartTimerAction"],function(e){function t(t,n){e.apply(this,[t,n])}return t.prototype=Object.create(e.prototype),t.appliesTo=function(e){var t=e.domainObject&&e.domainObject.getModel()||{};return"timer"===t.type&&void 0===t.timestamp},t}),n("platform/features/clock/src/actions/RestartTimerAction",["./AbstractStartTimerAction"],function(e){function t(t,n){e.apply(this,[t,n])}return t.prototype=Object.create(e.prototype),t.appliesTo=function(e){var t=e.domainObject&&e.domainObject.getModel()||{};return"timer"===t.type&&void 0!==t.timestamp},t}),n("text!platform/features/clock/res/templates/clock.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="l-time-display l-digital l-clock s-clock" ng-controller="ClockController as clock">\n	<div class="l-elem-wrapper">\n	    <span class="l-elem timezone">\n	        {{clock.zone()}}\n	    </span>\n	    <span class="l-elem value active">\n	        {{clock.text()}}\n	    </span>\n	    <span class="l-elem ampm">\n	        {{clock.ampm()}}\n	    </span>\n	</div>\n</div>'}),n("text!platform/features/clock/res/templates/timer.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="l-time-display l-digital l-timer s-timer" ng-controller="TimerController as timer">\n	<div class="l-elem-wrapper l-flex-row">\n		<a ng-click="timer.clickButton()"\n			title="{{timer.buttonText()}}"\n			class="flex-elem control s-icon-button {{timer.buttonCssClass()}}"></a>\n	    <span class="flex-elem l-value {{timer.signClass()}}">\n	        <span class="value"\n		        ng-class="{ active:timer.text() }">{{timer.text() || "--:--:--"}}\n            </span>\n	    </span>\n	    <span ng-controller="RefreshingController"></span>\n	</div>\n</div>'}),n("platform/features/clock/bundle",["./src/indicators/ClockIndicator","./src/services/TickerService","./src/controllers/ClockController","./src/controllers/TimerController","./src/controllers/RefreshingController","./src/actions/StartTimerAction","./src/actions/RestartTimerAction","text!./res/templates/clock.html","text!./res/templates/timer.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l){l.register("platform/features/clock",{name:"Clocks/Timers",descriptions:"Domain objects for displaying current & relative times.",configuration:{paths:{"moment-duration-format":"moment-duration-format"},shim:{"moment-duration-format":{deps:["moment"]}}},extensions:{constants:[{key:"CLOCK_INDICATOR_FORMAT",value:"YYYY/MM/DD HH:mm:ss"}],indicators:[{implementation:e,depends:["tickerService","CLOCK_INDICATOR_FORMAT"],priority:"preferred"}],services:[{key:"tickerService",implementation:t,depends:["$timeout","now"]}],controllers:[{key:"ClockController",implementation:n,depends:["$scope","tickerService"]},{key:"TimerController",implementation:i,depends:["$scope","$window","now"]},{key:"RefreshingController",implementation:r,depends:["$scope","tickerService"]}],views:[{key:"clock",type:"clock",editable:!1,template:a},{key:"timer",type:"timer",editable:!1,template:c}],actions:[{key:"timer.start",implementation:o,depends:["now"],category:"contextual",name:"Start",cssClass:"icon-play",priority:"preferred"},{key:"timer.restart",implementation:s,depends:["now"],category:"contextual",name:"Restart at 0",cssClass:"icon-refresh",priority:"preferred"}],types:[{key:"clock",name:"Clock",cssClass:"icon-clock",description:"A UTC-based clock that supports a variety of display formats. Clocks can be added to Display Layouts.",priority:101,features:["creation"],properties:[{key:"clockFormat",name:"Display Format",control:"composite",items:[{control:"select",options:[{value:"YYYY/MM/DD hh:mm:ss",name:"YYYY/MM/DD hh:mm:ss"},{value:"YYYY/DDD hh:mm:ss",name:"YYYY/DDD hh:mm:ss"},{value:"hh:mm:ss",name:"hh:mm:ss"}],cssClass:"l-inline"},{control:"select",options:[{value:"clock12",name:"12hr"},{value:"clock24",name:"24hr"}],cssClass:"l-inline"}]}],model:{clockFormat:["YYYY/MM/DD hh:mm:ss","clock12"]}},{key:"timer",name:"Timer",cssClass:"icon-timer",description:"A timer that counts up or down to a datetime. Timers can be started, stopped and reset whenever needed, and support a variety of display formats. Each Timer displays the same value to all users. Timers can be added to Display Layouts.",priority:100,features:["creation"],properties:[{key:"timestamp",control:"datetime",name:"Target"},{key:"timerFormat",control:"select",name:"Display Format",options:[{value:"long",name:"DDD hh:mm:ss"},{value:"short",name:"hh:mm:ss"}]}],model:{timerFormat:"DDD hh:mm:ss"}}],licenses:[{name:"moment-duration-format",version:"1.3.0",author:"John Madhavan-Reese",description:"Duration parsing/formatting",website:"https://github.com/jsmreese/moment-duration-format",copyright:"Copyright 2014 John Madhavan-Reese",license:"license-mit",link:"https://github.com/jsmreese/moment-duration-format/blob/master/LICENSE"}]}})}),n("text!platform/features/layout/res/templates/fixed.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="t-fixed-position l-fixed-position"\n     ng-controller="FixedController as controller">\n\n    <!-- Background grid -->\n    <div class="l-grid-holder" ng-click="controller.clearSelection()">\n        <div class="l-grid l-grid-x"\n             ng-style="{ \'background-size\': controller.getGridSize() [0] + \'px 100%\' }"></div>\n        <div class="l-grid l-grid-y"\n             ng-style="{ \'background-size\': \'100% \' + controller.getGridSize() [1] + \'px\' }"></div>\n    </div>\n\n    <!-- Fixed position elements -->\n    <div ng-repeat="element in controller.getElements()"\n         class="l-fixed-position-item"\n         ng-class="{ \'s-not-selected\': controller.selected() && !controller.selected(element) }"\n         ng-style="element.style"\n         ng-click="controller.select(element)">\n        <mct-include key="element.template"\n                     parameters="{ gridSize: controller.getGridSize() }"\n                     ng-model="element">\n        </mct-include>\n    </div>\n\n    <!-- Selection highlight, handles -->\n    <span ng-if="controller.selected()">\n        <div class="l-fixed-position-item s-selectable s-selected s-moveable"\n             mct-drag-down="controller.moveHandle().startDrag(controller.selected())"\n             mct-drag="controller.moveHandle().continueDrag(delta)"\n             mct-drag-up="controller.moveHandle().endDrag()"\n             ng-style="controller.selected().style">\n        </div>\n        <div ng-repeat="handle in controller.handles()"\n             class="l-fixed-position-item-handle"\n             ng-style="handle.style()"\n             mct-drag-down="handle.startDrag()"\n             mct-drag="handle.continueDrag(delta)"\n             mct-drag-up="handle.endDrag()">\n        </div>\n    </span>\n\n</div>\n'}),n("platform/features/fixed/bundle",["text!../layout/res/templates/fixed.html","legacyRegistry"],function(e,t){t.register("platform/features/fixed",{name:"Fixed position components.",description:"Plug in adding Fixed Position object type.",extensions:{views:[{key:"fixed-display",name:"Fixed Position Display",cssClass:"icon-box-with-dashed-lines",type:"telemetry.fixed",template:e,uses:["composition"],editable:!0,toolbar:{sections:[{items:[{method:"add",cssClass:"icon-plus",control:"menu-button",text:"Add",options:[{name:"Box",cssClass:"icon-box",key:"fixed.box"},{name:"Line",cssClass:"icon-line-horz",key:"fixed.line"},{name:"Text",cssClass:"icon-T",key:"fixed.text"},{name:"Image",cssClass:"icon-image",key:"fixed.image"}]}]},{items:[{method:"order",cssClass:"icon-layers",
control:"menu-button",title:"Layering",description:"Move the selected object above or below other objects",options:[{name:"Move to Top",cssClass:"icon-arrow-double-up",key:"top"},{name:"Move Up",cssClass:"icon-arrow-up",key:"up"},{name:"Move Down",cssClass:"icon-arrow-down",key:"down"},{name:"Move to Bottom",cssClass:"icon-arrow-double-down",key:"bottom"}]},{property:"fill",cssClass:"icon-paint-bucket",title:"Fill color",description:"Set fill color",control:"color"},{property:"stroke",cssClass:"icon-line-horz",title:"Border color",description:"Set border color",control:"color"},{property:"color",cssClass:"icon-T",title:"Text color",description:"Set text color",mandatory:!0,control:"color"},{property:"url",cssClass:"icon-image",control:"dialog-button",title:"Image Properties",description:"Edit image properties",dialog:{control:"textfield",name:"Image URL",cssClass:"l-input-lg",required:!0}},{property:"text",cssClass:"icon-gear",control:"dialog-button",title:"Text Properties",description:"Edit text properties",dialog:{control:"textfield",name:"Text",required:!0}},{method:"showTitle",cssClass:"icon-two-parts-both",control:"button",title:"Show title",description:"Show telemetry element title"},{method:"hideTitle",cssClass:"icon-two-parts-one-only",control:"button",title:"Hide title",description:"Hide telemetry element title"}]},{items:[{method:"remove",control:"button",cssClass:"icon-trash"}]}]}}],types:[{key:"telemetry.fixed",name:"Fixed Position Display",cssClass:"icon-box-with-dashed-lines",description:"Collect and display telemetry elements in alphanumeric format in a simple canvas workspace. Elements can be positioned and sized. Lines, boxes and images can be added as well.",priority:899,delegates:["telemetry"],features:"creation",contains:[{has:"telemetry"}],model:{layoutGrid:[64,16],composition:[]},properties:[{name:"Layout Grid",control:"composite",items:[{name:"Horizontal grid (px)",control:"textfield",cssClass:"l-input-sm l-numeric"},{name:"Vertical grid (px)",control:"textfield",cssClass:"l-input-sm l-numeric"}],pattern:"^(\\d*[1-9]\\d*)?$",property:"layoutGrid",conversion:"number[]"}],views:["fixed-display"]}]}})}),n("platform/features/conductor/core/src/ui/TimeConductorMode",[],function(){function e(e,t,n){this.conductor=t,this.mdata=e,this.deltasVal=void 0,this.source=void 0,this.sourceUnlisten=void 0,this.systems=n,this.availableSources=void 0,this.changeTimeSystem=this.changeTimeSystem.bind(this),this.tick=this.tick.bind(this),t.timeSystem()&&this.changeTimeSystem(t.timeSystem()),t.on("timeSystem",this.changeTimeSystem),"fixed"===e.key?this.availableSystems=n:this.availableSystems=n.filter(function(t){return t.tickSources().some(function(t){return e.key===t.metadata.mode})})}return e.prototype.changeTimeSystem=function(e){var t=e.defaults()||{bounds:{start:0,end:0},deltas:{start:0,end:0}};this.conductor.bounds(t.bounds),this.deltas(t.deltas);var n=this.mdata.key,i=e.tickSources();i&&(this.availableSources=i.filter(function(e){return e.metadata.mode===n})),this.tickSource(this.availableTickSources(e)[0])},e.prototype.metadata=function(){return this.mdata},e.prototype.availableTimeSystems=function(){return this.availableSystems},e.prototype.availableTickSources=function(e){return this.availableSources},e.prototype.tickSource=function(e){return arguments.length>0&&(this.sourceUnlisten&&this.sourceUnlisten(),this.source=e,e?(this.sourceUnlisten=e.listen(this.tick),this.conductor.follow(!0)):this.conductor.follow(!1)),this.source},e.prototype.destroy=function(){this.conductor.off("timeSystem",this.changeTimeSystem),this.sourceUnlisten&&this.sourceUnlisten()},e.prototype.tick=function(e){var t=this.deltas(),n=e,i=e;t&&(n=e-t.start,i=e+t.end),this.conductor.bounds({start:n,end:i})},e.prototype.deltas=function(e){if(0!==arguments.length){var t=this.calculateBoundsFromDeltas(e);this.deltasVal=e,"fixed"!==this.metadata().key&&this.conductor.bounds(t)}return this.deltasVal},e.prototype.calculateBoundsFromDeltas=function(e){var t=this.conductor.bounds().end;this.deltasVal&&void 0!==this.deltasVal.end&&(t-=this.deltasVal.end);var n={start:t-e.start,end:t+e.end};return n},e.prototype.calculateZoom=function(e){var t={};if(this.tickSource())t.deltas={start:e,end:this.deltasVal.end},t.bounds=this.calculateBoundsFromDeltas(t.deltas);else{var n=this.conductor.bounds(),i=n.start+(n.end-n.start)/2;n.start=i-e/2,n.end=i+e/2,t.bounds=n}return t},e}),n("platform/features/conductor/core/src/ui/TimeConductorViewService",["EventEmitter","./TimeConductorMode"],function(e,t){function n(t,n){function i(e,t){return t.tickSources().some(function(t){return t.metadata.mode===e})}e.call(this),this.systems=n.map(function(e){return e()}),this.conductor=t.conductor,this.currentMode=void 0,this.availModes={fixed:{key:"fixed",cssClass:"icon-calendar",label:"Fixed",name:"Fixed Timespan Mode",description:"Query and explore data that falls between two fixed datetimes."}};var r=function(e){return this.systems.filter(i.bind(this,e))}.bind(this);if(r("realtime").length>0){var o={key:"realtime",cssClass:"icon-clock",label:"Real-time",name:"Real-time Mode",description:"Monitor real-time streaming data as it comes in. The Time Conductor and displays will automatically advance themselves based on a UTC clock."};this.availModes[o.key]=o}if(r("lad").length>0){var s={key:"lad",cssClass:"icon-database",label:"LAD",name:"LAD Mode",description:"Latest Available Data mode monitors real-time streaming data as it comes in. The Time Conductor and displays will only advance when data becomes available."};this.availModes[s.key]=s}}return n.prototype=Object.create(e.prototype),n.prototype.mode=function(e){function n(e,t){return e.filter(function(e){return e.metadata.key===t.metadata.key}).length>0}if(1===arguments.length){var i=this.conductor.timeSystem(),r=this.availableModes(),o=r[e];this.currentMode&&this.currentMode.destroy(),this.currentMode=new t(o,this.conductor,this.systems),i&&n(this.currentMode.availableTimeSystems(),i)||(i=this.currentMode.availableTimeSystems()[0],this.conductor.timeSystem(i,i.defaults().bounds))}return this.currentMode?this.currentMode.metadata().key:void 0},n.prototype.deltas=function(){return this.currentMode.deltas.apply(this.currentMode,arguments)},n.prototype.availableModes=function(){return this.availModes},n.prototype.availableTimeSystems=function(){return this.currentMode.availableTimeSystems()},n.prototype.zoom=function(e){var t=this.currentMode.calculateZoom(e);return this.emit("zoom",t),t},n}),n("platform/features/conductor/core/src/ui/TimeConductorValidation",[],function(){function e(t){var n=this;this.conductor=t,Object.keys(e.prototype).filter(function(t){return"function"==typeof e.prototype[t]}).forEach(function(e){n[e]=n[e].bind(n)})}return e.prototype.validateStart=function(e){var t=this.conductor.bounds();return this.conductor.validateBounds({start:e,end:t.end})===!0},e.prototype.validateEnd=function(e){var t=this.conductor.bounds();return this.conductor.validateBounds({start:t.start,end:e})===!0},e.prototype.validateStartDelta=function(e){return!isNaN(e)&&e>0},e.prototype.validateEndDelta=function(e){return!isNaN(e)&&e>=0},e}),n("platform/features/conductor/core/src/ui/TimeConductorController",["./TimeConductorValidation"],function(e){function t(n,i,r,o,s,a,c,l){var u=this;Object.keys(t.prototype).filter(function(e){return"function"==typeof t.prototype[e]}).forEach(function(e){u[e]=u[e].bind(u)}),this.$scope=n,this.$window=i,this.$location=r,this.conductorViewService=s,this.conductor=o.conductor,this.modes=s.availableModes(),this.validation=new e(this.conductor),this.formatService=a,void 0===this.modes[c]&&(c="fixed"),this.DEFAULT_MODE=c,this.timeSystems=s.systems,this.initializeScope();var d=JSON.parse(JSON.stringify(this.$location.search()));this.setStateFromSearchParams(d);var p=this.conductor.timeSystem();p&&this.changeTimeSystem(this.conductor.timeSystem());var f=this.conductorViewService.deltas();f&&this.setFormFromDeltas(f);var h=this.conductor.bounds();h&&void 0!==h.start&&void 0!==h.end&&this.changeBounds(h),this.$scope.$on("$routeUpdate",function(){this.setStateFromSearchParams(this.$location.search())}.bind(this)),this.conductor.on("bounds",this.changeBounds),this.conductor.on("timeSystem",this.changeTimeSystem),this.$scope.showTimeConductor=l}var n={MODE:"tc.mode",TIME_SYSTEM:"tc.timeSystem",START_BOUND:"tc.startBound",END_BOUND:"tc.endBound",START_DELTA:"tc.startDelta",END_DELTA:"tc.endDelta"};return t.prototype.setParam=function(e,t){this.$location.search(e,t)},t.prototype.initializeScope=function(){this.$scope.boundsModel=this.conductor.bounds(),this.$scope.timeSystemModel={},this.$scope.modeModel={options:this.conductorViewService.availableModes()},this.$scope.$watch("modeModel.selectedKey",this.setMode),this.conductorViewService.on("pan",this.onPan),this.conductorViewService.on("pan-stop",this.onPanStop),this.$scope.$on("$destroy",this.destroy)},t.prototype.setStateFromSearchParams=function(e){(void 0===e[n.MODE]||e[n.MODE]!==this.$scope.modeModel.selectedKey)&&this.setMode(e[n.MODE]||this.DEFAULT_MODE),e[n.TIME_SYSTEM]&&e[n.TIME_SYSTEM]!==this.conductor.timeSystem().metadata.key&&this.selectTimeSystemByKey(e[n.TIME_SYSTEM]);var t="fixed"!==e[n.MODE]&&e[n.START_DELTA]&&e[n.END_DELTA]&&!isNaN(e[n.START_DELTA])&&!isNaN(e[n.END_DELTA]);t&&this.setDeltas({startDelta:parseInt(e[n.START_DELTA]),endDelta:parseInt(e[n.END_DELTA])});var i="fixed"===e[n.MODE]&&e[n.START_BOUND]&&e[n.END_BOUND]&&!isNaN(e[n.START_BOUND])&&!isNaN(e[n.END_BOUND]);i&&this.conductor.bounds({start:parseInt(e[n.START_BOUND]),end:parseInt(e[n.END_BOUND])})},t.prototype.destroy=function(){this.conductor.off("bounds",this.changeBounds),this.conductor.off("timeSystem",this.changeTimeSystem),this.conductorViewService.off("pan",this.onPan),this.conductorViewService.off("pan-stop",this.onPanStop)},t.prototype.changeBounds=function(e){this.zooming||this.panning||(this.setFormFromBounds(e),"fixed"===this.conductorViewService.mode()&&(this.setParam(n.START_BOUND,e.start),this.setParam(n.END_BOUND,e.end)))},t.prototype.setFormFromBounds=function(e){this.zooming||this.panning||(this.$scope.boundsModel.start=e.start,this.$scope.boundsModel.end=e.end,this.supportsZoom&&(this.currentZoom=this.toSliderValue(e.end-e.start),this.toTimeUnits(e.end-e.start)),this.pendingUpdate||(this.pendingUpdate=!0,this.$window.requestAnimationFrame(function(){this.pendingUpdate=!1,this.$scope.$digest()}.bind(this))))},t.prototype.setFormFromMode=function(e){this.$scope.modeModel.selectedKey=e,this.$scope.timeSystemModel.options=this.conductorViewService.availableTimeSystems().map(function(e){return e.metadata})},t.prototype.setFormFromDeltas=function(e){this.$scope.boundsModel.startDelta=e.start,this.$scope.boundsModel.endDelta=e.end},t.prototype.setFormFromTimeSystem=function(e){var t=this.$scope.timeSystemModel;t.selected=e,t.format=e.formats()[0],t.deltaFormat=e.deltaFormat(),this.supportsZoom&&(t.minZoom=e.defaults().zoom.min,t.maxZoom=e.defaults().zoom.max)},t.prototype.setBounds=function(e){this.conductor.bounds({start:e.start,end:e.end})},t.prototype.setDeltas=function(e){var t={start:e.startDelta,end:e.endDelta};this.validation.validateStartDelta(t.start)&&this.validation.validateEndDelta(t.end)&&(this.conductorViewService.deltas(t),this.setParam(n.START_DELTA,t.start),this.setParam(n.END_DELTA,t.end))},t.prototype.setMode=function(e,t){if(this.setParam(n.MODE,e),e!==t)if(this.conductorViewService.mode(e),this.setFormFromMode(e),"fixed"===e)this.setParam(n.START_DELTA,void 0),this.setParam(n.END_DELTA,void 0);else{this.setParam(n.START_BOUND,void 0),this.setParam(n.END_BOUND,void 0);var i=this.conductorViewService.deltas();i&&(this.setParam(n.START_DELTA,i.start),this.setParam(n.END_DELTA,i.end))}},t.prototype.selectTimeSystemByKey=function(e){var t=this.timeSystems.filter(function(t){return t.metadata.key===e})[0];t&&(this.supportsZoom=!(!t.defaults()||!t.defaults().zoom),this.conductor.timeSystem(t,t.defaults().bounds))},t.prototype.changeTimeSystem=function(e){if(this.setParam(n.TIME_SYSTEM,e.metadata.key),e&&e!==this.$scope.timeSystemModel.selected&&(this.supportsZoom=!(!e.defaults()||!e.defaults().zoom),this.setFormFromTimeSystem(e),e.defaults())){var t=e.defaults().deltas||{start:0,end:0},i=e.defaults().bounds||{start:0,end:0};this.setFormFromDeltas(t),this.setFormFromBounds(i)}},t.prototype.toSliderValue=function(e){var t=this.conductor.timeSystem();if(t){var n=this.conductor.timeSystem().defaults().zoom,i=e/(n.min-n.max);return 1-Math.pow(i,.25)}},t.prototype.toTimeUnits=function(e){if(this.conductor.timeSystem()){var t=this.formatService.getFormat(this.conductor.timeSystem().formats()[0]);this.$scope.timeUnits=t.timeUnits&&t.timeUnits(e)}},t.prototype.onZoom=function(e){var t=this.conductor.timeSystem().defaults().zoom,n=Math.pow(1-e,4)*(t.min-t.max),i=this.conductorViewService.zoom(n);this.$scope.boundsModel.start=i.bounds.start,this.$scope.boundsModel.end=i.bounds.end,this.toTimeUnits(i.bounds.end-i.bounds.start),i.deltas&&this.setFormFromDeltas(i.deltas)},t.prototype.onZoomStop=function(){this.setBounds(this.$scope.boundsModel),this.setDeltas(this.$scope.boundsModel),this.zooming=!1,this.conductorViewService.emit("zoom-stop")},t.prototype.onPan=function(e){this.panning=!0,this.$scope.boundsModel.start=e.start,this.$scope.boundsModel.end=e.end},t.prototype.onPanStop=function(){this.panning=!1},t}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof n&&n.amd?n("d3",["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function n(e){return 1===e.length&&(e=i(e)),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);r>i;){var o=i+r>>>1;e(t[o],n)<0?i=o+1:r=o}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);r>i;){var o=i+r>>>1;e(t[o],n)>0?r=o:i=o+1}return i}}}function i(e){return function(n,i){return t(e(n),i)}}function r(e,t){return e>t?-1:t>e?1:t>=e?0:NaN}function o(e){return null===e?NaN:+e}function s(e,t){var n,i,r=e.length,s=0,a=0,c=-1,l=0;if(null==t)for(;++c<r;)isNaN(n=o(e[c]))||(i=n-s,s+=i/++l,a+=i*(n-s));else for(;++c<r;)isNaN(n=o(t(e[c],c,e)))||(i=n-s,s+=i/++l,a+=i*(n-s));return l>1?a/(l-1):void 0}function a(e,t){var n=s(e,t);return n?Math.sqrt(n):n}function c(e,t){var n,i,r,o=-1,s=e.length;if(null==t){for(;++o<s;)if(null!=(i=e[o])&&i>=i){n=r=i;break}for(;++o<s;)null!=(i=e[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<s;)if(null!=(i=t(e[o],o,e))&&i>=i){n=r=i;break}for(;++o<s;)null!=(i=t(e[o],o,e))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]}function l(e){return function(){return e}}function u(e){return e}function d(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):3>r?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}function p(e,t,n){var i=f(e,t,n);return d(Math.ceil(e/i)*i,Math.floor(t/i)*i+i/2,i)}function f(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=Ih?r*=10:o>=Lh?r*=5:o>=Nh&&(r*=2),e>t?-r:r}function h(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function m(){function e(e){var r,o,s=e.length,a=new Array(s);for(r=0;s>r;++r)a[r]=t(e[r],r,e);var c=n(a),l=c[0],u=c[1],d=i(a,l,u);Array.isArray(d)||(d=p(l,u,d));for(var f=d.length;d[0]<=l;)d.shift(),--f;for(;d[f-1]>=u;)d.pop(),--f;var h,m=new Array(f+1);for(r=0;f>=r;++r)h=m[r]=[],h.x0=r>0?d[r-1]:l,h.x1=f>r?d[r]:u;for(r=0;s>r;++r)o=a[r],o>=l&&u>=o&&m[Oh(d,o,0,f)].push(e[r]);return m}var t=u,n=c,i=h;return e.value=function(n){return arguments.length?(t="function"==typeof n?n:l(n),e):t},e.domain=function(t){return arguments.length?(n="function"==typeof t?t:l([t[0],t[1]]),e):n},e.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:l(Array.isArray(t)?Ah.call(t):t),e):i},e}function g(e,t,n){if(null==n&&(n=o),i=e.length){if((t=+t)<=0||2>i)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),a=+n(e[s],s,e),c=+n(e[s+1],s+1,e);return a+(c-a)*(r-s)}}function y(e,n,i){return e=Eh.call(e,o).sort(t),Math.ceil((i-n)/(2*(g(e,.75)-g(e,.25))*Math.pow(e.length,-1/3)))}function v(e,t,n){return Math.ceil((n-t)/(3.5*a(e)*Math.pow(e.length,-1/3)))}function b(e,t){var n,i,r=-1,o=e.length;if(null==t){for(;++r<o;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=t(e[r],r,e))&&i>=i){n=i;break}for(;++r<o;)null!=(i=t(e[r],r,e))&&i>n&&(n=i)}return n}function w(e,t){var n,i=0,r=e.length,s=-1,a=r;if(null==t)for(;++s<r;)isNaN(n=o(e[s]))?--a:i+=n;else for(;++s<r;)isNaN(n=o(t(e[s],s,e)))?--a:i+=n;return a?i/a:void 0}function S(e,n){var i,r=[],s=e.length,a=-1;if(null==n)for(;++a<s;)isNaN(i=o(e[a]))||r.push(i);else for(;++a<s;)isNaN(i=o(n(e[a],a,e)))||r.push(i);return g(r.sort(t),.5)}function x(e){for(var t,n,i,r=e.length,o=-1,s=0;++o<r;)s+=e[o].length;for(n=new Array(s);--r>=0;)for(i=e[r],t=i.length;--t>=0;)n[--s]=i[t];return n}function C(e,t){var n,i,r=-1,o=e.length;if(null==t){for(;++r<o;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=t(e[r],r,e))&&i>=i){n=i;break}for(;++r<o;)null!=(i=t(e[r],r,e))&&n>i&&(n=i)}return n}function T(e){for(var t=0,n=e.length-1,i=e[0],r=new Array(0>n?0:n);n>t;)r[t]=[i,i=e[++t]];return r}function k(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i}function M(e,n){if(i=e.length){var i,r,o=0,s=0,a=e[s];for(n||(n=t);++o<i;)(n(r=e[o],a)<0||0!==n(a,a))&&(a=r,s=o);return 0===n(a,a)?s:void 0}}function O(e,t,n){for(var i,r,o=(null==n?e.length:n)-(t=null==t?0:+t);o;)r=Math.random()*o--|0,i=e[o+t],e[o+t]=e[r+t],e[r+t]=i;return e}function $(e,t){var n,i=0,r=e.length,o=-1;if(null==t)for(;++o<r;)(n=+e[o])&&(i+=n);else for(;++o<r;)(n=+t(e[o],o,e))&&(i+=n);return i}function _(e){if(!(r=e.length))return[];for(var t=-1,n=C(e,A),i=new Array(n);++t<n;)for(var r,o=-1,s=i[t]=new Array(r);++o<r;)s[o]=e[o][t];return i}function A(e){return e.length}function E(){return _(arguments)}function I(){}function L(e,t){var n=new I;if(e instanceof I)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var i,r=-1,o=e.length;if(null==t)for(;++r<o;)n.set(r,e[r]);else for(;++r<o;)n.set(t(i=e[r],r,e),i)}else if(e)for(var s in e)n.set(s,e[s]);return n}function N(){function e(t,r,s,a){if(r>=o.length)return null!=i?i(t):null!=n?t.sort(n):t;for(var c,l,u,d=-1,p=t.length,f=o[r++],h=L(),m=s();++d<p;)(u=h.get(c=f(l=t[d])+""))?u.push(l):h.set(c,[l]);return h.each(function(t,n){a(m,n,e(t,r,s,a))}),m}function t(e,n){if(++n>o.length)return e;var r,a=s[n-1];return null!=i&&n>=o.length?r=e.entries():(r=[],e.each(function(e,i){r.push({key:i,values:t(e,n)})})),null!=a?r.sort(function(e,t){return a(e.key,t.key)}):r}var n,i,r,o=[],s=[];return r={object:function(t){return e(t,0,D,j)},map:function(t){return e(t,0,R,P)},entries:function(n){return t(e(n,0,R,P),0)},key:function(e){return o.push(e),r},sortKeys:function(e){return s[o.length-1]=e,r},sortValues:function(e){return n=e,r},rollup:function(e){return i=e,r}}}function D(){return{}}function j(e,t,n){e[t]=n}function R(){return L()}function P(e,t,n){e.set(t,n)}function U(){}function F(e,t){var n=new U;if(e instanceof U)e.each(function(e){n.add(e)});else if(e){var i=-1,r=e.length;if(null==t)for(;++i<r;)n.add(e[i]);else for(;++i<r;)n.add(t(e[i],i,e))}return n}function V(e){var t=[];for(var n in e)t.push(n);return t}function B(e){var t=[];for(var n in e)t.push(e[n]);return t}function q(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}function Y(e,t){return e=null==e?0:+e,t=null==t?1:+t,1===arguments.length?(t=e,e=0):t-=e,function(){return Math.random()*t+e}}function z(e,t){var n,i;return e=null==e?0:+e,t=null==t?1:+t,function(){var r;if(null!=n)r=n,n=null;else do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*r*Math.sqrt(-2*Math.log(i)/i)}}function H(){var e=z.apply(this,arguments);return function(){return Math.exp(e())}}function W(e){return function(){for(var t=0,n=0;e>n;++n)t+=Math.random();return t}}function G(e){var t=W(e);return function(){return t()/e}}function K(e){return function(){return-Math.log(1-Math.random())/e}}function Z(e){return+e}function X(e){return e*e}function J(e){return e*(2-e)}function Q(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function ee(e){return e*e*e}function te(e){return--e*e*e+1}function ne(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function ie(e){return 1-Math.cos(e*Bh)}function re(e){return Math.sin(e*Bh)}function oe(e){return(1-Math.cos(Vh*e))/2}function se(e){return Math.pow(2,10*e-10)}function ae(e){return 1-Math.pow(2,-10*e)}function ce(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function le(e){return 1-Math.sqrt(1-e*e)}function ue(e){return Math.sqrt(1- --e*e)}function de(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}function pe(e){return 1-fe(1-e)}function fe(e){return(e=+e)<qh?Jh*e*e:zh>e?Jh*(e-=Yh)*e+Hh:Gh>e?Jh*(e-=Wh)*e+Kh:Jh*(e-=Zh)*e+Xh}function he(e){return((e*=2)<=1?1-fe(1-e):fe(e-1)+1)/2}function me(e){for(var t,n=-1,i=e.length,r=e[i-1],o=0;++n<i;)t=r,r=e[n],o+=t[1]*r[0]-t[0]*r[1];return o/2}function ge(e){for(var t,n,i=-1,r=e.length,o=0,s=0,a=e[r-1],c=0;++i<r;)t=a,a=e[i],c+=n=t[0]*a[1]-a[0]*t[1],o+=(t[0]+a[0])*n,s+=(t[1]+a[1])*n;return c*=3,[o/c,s/c]}function ye(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ve(e,t){return e[0]-t[0]||e[1]-t[1]}function be(e){for(var t=e.length,n=[0,1],i=2,r=2;t>r;++r){for(;i>1&&ye(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function we(e){if((n=e.length)<3)return null;var t,n,i=new Array(n),r=new Array(n);for(t=0;n>t;++t)i[t]=[+e[t][0],+e[t][1],t];for(i.sort(ve),t=0;n>t;++t)r[t]=[i[t][0],-i[t][1]];var o=be(i),s=be(r),a=s[0]===o[0],c=s[s.length-1]===o[o.length-1],l=[];for(t=o.length-1;t>=0;--t)l.push(e[i[o[t]][2]]);for(t=+a;t<s.length-c;++t)l.push(e[i[s[t]][2]]);return l}function Se(e,t){for(var n,i,r=e.length,o=e[r-1],s=t[0],a=t[1],c=o[0],l=o[1],u=!1,d=0;r>d;++d)o=e[d],n=o[0],i=o[1],i>a!=l>a&&(c-n)*(a-i)/(l-i)+n>s&&(u=!u),c=n,l=i;return u}function xe(e){for(var t,n,i=-1,r=e.length,o=e[r-1],s=o[0],a=o[1],c=0;++i<r;)t=s,n=a,o=e[i],s=o[0],a=o[1],t-=s,n-=a,c+=Math.sqrt(t*t+n*n);return c}function Ce(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function Te(){return new Ce}function ke(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Me(this.cover(t,n),t,n,e)}function Me(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,o,s,a,c,l,u,d,p,f=e._root,h={data:i},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!f)return e._root=h,e;for(;f.length;)if((l=t>=(o=(m+y)/2))?m=o:y=o,(u=n>=(s=(g+v)/2))?g=s:v=s,r=f,!(f=f[d=u<<1|l]))return r[d]=h,e;if(a=+e._x.call(null,f.data),c=+e._y.call(null,f.data),t===a&&n===c)return h.next=f,r?r[d]=h:e._root=h,e;do r=r?r[d]=new Array(4):e._root=new Array(4),(l=t>=(o=(m+y)/2))?m=o:y=o,(u=n>=(s=(g+v)/2))?g=s:v=s;while((d=u<<1|l)===(p=(c>=s)<<1|a>=o));return r[p]=f,r[d]=h,e}function Oe(e){var t,n,i,r,o=e.length,s=new Array(o),a=new Array(o),c=1/0,l=1/0,u=-(1/0),d=-(1/0);for(n=0;o>n;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(r=+this._y.call(null,t))||(s[n]=i,a[n]=r,c>i&&(c=i),i>u&&(u=i),l>r&&(l=r),r>d&&(d=r));for(c>u&&(c=this._x0,u=this._x1),l>d&&(l=this._y0,d=this._y1),this.cover(c,l).cover(u,d),n=0;o>n;++n)Me(this,s[n],a[n],e[n]);return this}function $e(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{if(!(n>e||e>r||i>t||t>o))return this;var s,a,c=r-n,l=this._root;switch(a=((i+o)/2>t)<<1|(n+r)/2>e){case 0:do s=new Array(4),s[a]=l,l=s;while(c*=2,r=n+c,o=i+c,e>r||t>o);break;case 1:do s=new Array(4),s[a]=l,l=s;while(c*=2,n=r-c,o=i+c,n>e||t>o);break;case 2:do s=new Array(4),s[a]=l,l=s;while(c*=2,r=n+c,i=o-c,e>r||i>t);break;case 3:do s=new Array(4),s[a]=l,l=s;while(c*=2,n=r-c,i=o-c,n>e||i>t)}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}function _e(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ae(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ee(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Ie(e,t,n){var i,r,o,s,a,c,l,u=this._x0,d=this._y0,p=this._x1,f=this._y1,h=[],m=this._root;for(m&&h.push(new Ee(m,u,d,p,f)),null==n?n=1/0:(u=e-n,d=t-n,p=e+n,f=t+n,n*=n);c=h.pop();)if(!(!(m=c.node)||(r=c.x0)>p||(o=c.y0)>f||(s=c.x1)<u||(a=c.y1)<d))if(m.length){var g=(r+s)/2,y=(o+a)/2;h.push(new Ee(m[3],g,y,s,a),new Ee(m[2],r,y,g,a),new Ee(m[1],g,o,s,y),new Ee(m[0],r,o,g,y)),(l=(t>=y)<<1|e>=g)&&(c=h[h.length-1],h[h.length-1]=h[h.length-1-l],h[h.length-1-l]=c)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),w=v*v+b*b;if(n>w){var S=Math.sqrt(n=w);u=e-S,d=t-S,p=e+S,f=t+S,i=m.data}}return i}function Le(e){if(isNaN(o=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var t,n,i,r,o,s,a,c,l,u,d,p,f=this._root,h=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((l=o>=(a=(h+g)/2))?h=a:g=a,(u=s>=(c=(m+y)/2))?m=c:y=c,t=f,!(f=f[d=u<<1|l]))return this;if(!f.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,p=d)}for(;f.data!==e;)if(i=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,i?(r?i.next=r:delete i.next,this):t?(r?t[d]=r:delete t[d],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[p]=f:this._root=f),this):(this._root=r,this)}function Ne(e){for(var t=0,n=e.length;n>t;++t)this.remove(e[t]);return this}function De(){return this._root}function je(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Re(e){var t,n,i,r,o,s,a=[],c=this._root;for(c&&a.push(new Ee(c,this._x0,this._y0,this._x1,this._y1));t=a.pop();)if(!e(c=t.node,i=t.x0,r=t.y0,o=t.x1,s=t.y1)&&c.length){var l=(i+o)/2,u=(r+s)/2;(n=c[3])&&a.push(new Ee(n,l,u,o,s)),(n=c[2])&&a.push(new Ee(n,i,u,l,s)),(n=c[1])&&a.push(new Ee(n,l,r,o,u)),(n=c[0])&&a.push(new Ee(n,i,r,l,u))}return this}function Pe(e){var t,n=[],i=[];for(this._root&&n.push(new Ee(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var r=t.node;if(r.length){var o,s=t.x0,a=t.y0,c=t.x1,l=t.y1,u=(s+c)/2,d=(a+l)/2;(o=r[0])&&n.push(new Ee(o,s,a,u,d)),(o=r[1])&&n.push(new Ee(o,u,a,c,d)),(o=r[2])&&n.push(new Ee(o,s,d,u,l)),(o=r[3])&&n.push(new Ee(o,u,d,c,l))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function Ue(e){return e[0]}function Fe(e){return arguments.length?(this._x=e,this):this._x}function Ve(e){return e[1]}function Be(e){return arguments.length?(this._y=e,this):this._y}function qe(e,t,n){var i=new Ye(null==t?Ue:t,null==n?Ve:n,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function Ye(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function ze(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function He(e){if(!(e>=1))throw new Error;this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function We(e){if(!e._start)try{Ge(e)}catch(t){e._tasks[e._ended+e._active-1]&&Ze(e,t)}}function Ge(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,n=e._tasks[t],i=n.length-1,r=n[i];n[i]=Ke(e,t),--e._waiting,++e._active,n=r.apply(null,n),e._tasks[t]&&(e._tasks[t]=n||mm)}}function Ke(e,t){return function(n,i){e._tasks[t]&&(--e._active,++e._ended,e._tasks[t]=null,null==e._error&&(null!=n?Ze(e,n):(e._data[t]=i,e._waiting?We(e):Xe(e))))}}function Ze(e,t){var n,i=e._tasks.length;for(e._error=t,e._data=void 0,e._waiting=NaN;--i>=0;)if((n=e._tasks[i])&&(e._tasks[i]=null,n.abort))try{n.abort()}catch(e){}e._active=NaN,Xe(e)}function Xe(e){!e._active&&e._call&&e._call(e._error,e._data)}function Je(e){return new He(arguments.length?+e:1/0)}function Qe(e){return function(){return e}}function et(e){return e.innerRadius}function tt(e){return e.outerRadius}function nt(e){return e.startAngle}function it(e){return e.endAngle}function rt(e){return e&&e.padAngle}function ot(e){return e>=1?vm:-1>=e?-vm:Math.asin(e)}function st(e,t,n,i,r,o,s,a){var c=n-e,l=i-t,u=s-r,d=a-o,p=(u*(t-o)-d*(e-r))/(d*c-u*l);return[e+p*c,t+p*l]}function at(e,t,n,i,r,o,s){var a=e-n,c=t-i,l=(s?o:-o)/Math.sqrt(a*a+c*c),u=l*c,d=-l*a,p=e+u,f=t+d,h=n+u,m=i+d,g=(p+h)/2,y=(f+m)/2,v=h-p,b=m-f,w=v*v+b*b,S=r-o,x=p*m-h*f,C=(0>b?-1:1)*Math.sqrt(Math.max(0,S*S*w-x*x)),T=(x*b-v*C)/w,k=(-x*v-b*C)/w,M=(x*b+v*C)/w,O=(-x*v+b*C)/w,$=T-g,_=k-y,A=M-g,E=O-y;return $*$+_*_>A*A+E*E&&(T=M,k=O),{cx:T,cy:k,x01:-u,y01:-d,x11:T*(r/S-1),y11:k*(r/S-1)}}function ct(){function e(){var e,l,u=+t.apply(this,arguments),d=+n.apply(this,arguments),p=o.apply(this,arguments)-vm,f=s.apply(this,arguments)-vm,h=Math.abs(f-p),m=f>p;if(c||(c=e=Te()),u>d&&(l=d,d=u,u=l),d>gm)if(h>bm-gm)c.moveTo(d*Math.cos(p),d*Math.sin(p)),c.arc(0,0,d,p,f,!m),u>gm&&(c.moveTo(u*Math.cos(f),u*Math.sin(f)),c.arc(0,0,u,f,p,m));else{var g,y,v=p,b=f,w=p,S=f,x=h,C=h,T=a.apply(this,arguments)/2,k=T>gm&&(r?+r.apply(this,arguments):Math.sqrt(u*u+d*d)),M=Math.min(Math.abs(d-u)/2,+i.apply(this,arguments)),O=M,$=M;if(k>gm){var _=ot(k/u*Math.sin(T)),A=ot(k/d*Math.sin(T));(x-=2*_)>gm?(_*=m?1:-1,w+=_,S-=_):(x=0,w=S=(p+f)/2),(C-=2*A)>gm?(A*=m?1:-1,v+=A,b-=A):(C=0,v=b=(p+f)/2)}var E=d*Math.cos(v),I=d*Math.sin(v),L=u*Math.cos(S),N=u*Math.sin(S);if(M>gm){var D=d*Math.cos(b),j=d*Math.sin(b),R=u*Math.cos(w),P=u*Math.sin(w);if(ym>h){var U=x>gm?st(E,I,R,P,D,j,L,N):[L,N],F=E-U[0],V=I-U[1],B=D-U[0],q=j-U[1],Y=1/Math.sin(Math.acos((F*B+V*q)/(Math.sqrt(F*F+V*V)*Math.sqrt(B*B+q*q)))/2),z=Math.sqrt(U[0]*U[0]+U[1]*U[1]);O=Math.min(M,(u-z)/(Y-1)),$=Math.min(M,(d-z)/(Y+1))}}C>gm?$>gm?(g=at(R,P,E,I,d,$,m),y=at(D,j,L,N,d,$,m),c.moveTo(g.cx+g.x01,g.cy+g.y01),M>$?c.arc(g.cx,g.cy,$,Math.atan2(g.y01,g.x01),Math.atan2(y.y01,y.x01),!m):(c.arc(g.cx,g.cy,$,Math.atan2(g.y01,g.x01),Math.atan2(g.y11,g.x11),!m),c.arc(0,0,d,Math.atan2(g.cy+g.y11,g.cx+g.x11),Math.atan2(y.cy+y.y11,y.cx+y.x11),!m),c.arc(y.cx,y.cy,$,Math.atan2(y.y11,y.x11),Math.atan2(y.y01,y.x01),!m))):(c.moveTo(E,I),c.arc(0,0,d,v,b,!m)):c.moveTo(E,I),u>gm&&x>gm?O>gm?(g=at(L,N,D,j,u,-O,m),y=at(E,I,R,P,u,-O,m),c.lineTo(g.cx+g.x01,g.cy+g.y01),M>O?c.arc(g.cx,g.cy,O,Math.atan2(g.y01,g.x01),Math.atan2(y.y01,y.x01),!m):(c.arc(g.cx,g.cy,O,Math.atan2(g.y01,g.x01),Math.atan2(g.y11,g.x11),!m),c.arc(0,0,u,Math.atan2(g.cy+g.y11,g.cx+g.x11),Math.atan2(y.cy+y.y11,y.cx+y.x11),m),c.arc(y.cx,y.cy,O,Math.atan2(y.y11,y.x11),Math.atan2(y.y01,y.x01),!m))):c.arc(0,0,u,S,w,m):c.lineTo(L,N)}else c.moveTo(0,0);return c.closePath(),e?(c=null,e+""||null):void 0}var t=et,n=tt,i=Qe(0),r=null,o=nt,s=it,a=rt,c=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-ym/2;return[Math.cos(i)*e,Math.sin(i)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Qe(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Qe(+t),e):n},e.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:Qe(+t),e):i},e.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Qe(+t),e):r},e.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Qe(+t),e):o},e.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:Qe(+t),e):s},e.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Qe(+t),e):a},e.context=function(t){return arguments.length?(c=null==t?null:t,e):c},e}function lt(e){this._context=e}function ut(e){return new lt(e)}function dt(e){return e[0]}function pt(e){return e[1]}function ft(){function e(e){var a,c,l,u=e.length,d=!1;for(null==r&&(s=o(l=Te())),a=0;u>=a;++a)!(u>a&&i(c=e[a],a,e))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(c,a,e),+n(c,a,e));return l?(s=null,l+""||null):void 0;
}var t=dt,n=pt,i=Qe(!0),r=null,o=ut,s=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Qe(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Qe(+t),e):n},e.defined=function(t){return arguments.length?(i="function"==typeof t?t:Qe(!!t),e):i},e.curve=function(t){return arguments.length?(o=t,null!=r&&(s=o(r)),e):o},e.context=function(t){return arguments.length?(null==t?r=s=null:s=o(r=t),e):r},e}function ht(){function e(e){var t,u,d,p,f,h=e.length,m=!1,g=new Array(h),y=new Array(h);for(null==a&&(l=c(f=Te())),t=0;h>=t;++t){if(!(h>t&&s(p=e[t],t,e))===m)if(m=!m)u=t,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),d=t-1;d>=u;--d)l.point(g[d],y[d]);l.lineEnd(),l.areaEnd()}m&&(g[t]=+n(p,t,e),y[t]=+r(p,t,e),l.point(i?+i(p,t,e):g[t],o?+o(p,t,e):y[t]))}return f?(l=null,f+""||null):void 0}function t(){return ft().defined(s).curve(c).context(a)}var n=dt,i=null,r=Qe(0),o=pt,s=Qe(!0),a=null,c=ut,l=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:Qe(+t),i=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:Qe(+t),e):n},e.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Qe(+t),e):i},e.y=function(t){return arguments.length?(r="function"==typeof t?t:Qe(+t),o=null,e):r},e.y0=function(t){return arguments.length?(r="function"==typeof t?t:Qe(+t),e):r},e.y1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:Qe(+t),e):o},e.lineX0=e.lineY0=function(){return t().x(n).y(r)},e.lineY1=function(){return t().x(n).y(o)},e.lineX1=function(){return t().x(i).y(r)},e.defined=function(t){return arguments.length?(s="function"==typeof t?t:Qe(!!t),e):s},e.curve=function(t){return arguments.length?(c=t,null!=a&&(l=c(a)),e):c},e.context=function(t){return arguments.length?(null==t?a=l=null:l=c(a=t),e):a},e}function mt(e,t){return e>t?-1:t>e?1:t>=e?0:NaN}function gt(e){return e}function yt(){function e(e){var a,c,l,u,d,p=e.length,f=0,h=new Array(p),m=new Array(p),g=+r.apply(this,arguments),y=Math.min(bm,Math.max(-bm,o.apply(this,arguments)-g)),v=Math.min(Math.abs(y)/p,s.apply(this,arguments)),b=v*(0>y?-1:1);for(a=0;p>a;++a)(d=m[h[a]=a]=+t(e[a],a,e))>0&&(f+=d);for(null!=n?h.sort(function(e,t){return n(m[e],m[t])}):null!=i&&h.sort(function(t,n){return i(e[t],e[n])}),a=0,l=f?(y-p*b)/f:0;p>a;++a,g=u)c=h[a],d=m[c],u=g+(d>0?d*l:0)+b,m[c]={data:e[c],index:a,value:d,startAngle:g,endAngle:u,padAngle:v};return m}var t=gt,n=mt,i=null,r=Qe(0),o=Qe(bm),s=Qe(0);return e.value=function(n){return arguments.length?(t="function"==typeof n?n:Qe(+n),e):t},e.sortValues=function(t){return arguments.length?(n=t,i=null,e):n},e.sort=function(t){return arguments.length?(i=t,n=null,e):i},e.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Qe(+t),e):r},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Qe(+t),e):o},e.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Qe(+t),e):s},e}function vt(e){this._curve=e}function bt(e){function t(t){return new vt(e(t))}return t._curve=e,t}function wt(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(bt(e)):t()._curve},e}function St(){return wt(ft().curve(wm))}function xt(){var e=ht().curve(wm),t=e.curve,n=e.lineX0,i=e.lineX1,r=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return wt(n())},delete e.lineX0,e.lineEndAngle=function(){return wt(i())},delete e.lineX1,e.lineInnerRadius=function(){return wt(r())},delete e.lineY0,e.lineOuterRadius=function(){return wt(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t(bt(e)):t()._curve},e}function Ct(){function e(){var e;return i||(i=e=Te()),t.apply(this,arguments).draw(i,+n.apply(this,arguments)),e?(i=null,e+""||null):void 0}var t=Qe(Sm),n=Qe(64),i=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:Qe(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:Qe(+t),e):n},e.context=function(t){return arguments.length?(i=null==t?null:t,e):i},e}function Tt(){}function kt(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Mt(e){this._context=e}function Ot(e){return new Mt(e)}function $t(e){this._context=e}function _t(e){return new $t(e)}function At(e){this._context=e}function Et(e){return new At(e)}function It(e,t){this._basis=new Mt(e),this._beta=t}function Lt(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Nt(e,t){this._context=e,this._k=(1-t)/6}function Dt(e,t){this._context=e,this._k=(1-t)/6}function jt(e,t){this._context=e,this._k=(1-t)/6}function Rt(e,t,n){var i=e._x1,r=e._y1,o=e._x2,s=e._y2;if(e._l01_a>gm){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>gm){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/u,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(i,r,o,s,e._x2,e._y2)}function Pt(e,t){this._context=e,this._alpha=t}function Ut(e,t){this._context=e,this._alpha=t}function Ft(e,t){this._context=e,this._alpha=t}function Vt(e){this._context=e}function Bt(e){return new Vt(e)}function qt(e){return 0>e?-1:1}function Yt(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||0>r&&-0),s=(n-e._y1)/(r||0>i&&-0),a=(o*r+s*i)/(i+r);return(qt(o)+qt(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function zt(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ht(e,t,n){var i=e._x0,r=e._y0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,r+a*t,o-a,s-a*n,o,s)}function Wt(e){this._context=e}function Gt(e){this._context=new Kt(e)}function Kt(e){this._context=e}function Zt(e){return new Wt(e)}function Xt(e){return new Gt(e)}function Jt(e){this._context=e}function Qt(e){var t,n,i=e.length-1,r=new Array(i),o=new Array(i),s=new Array(i);for(r[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;i-1>t;++t)r[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[i-1]=2,o[i-1]=7,s[i-1]=8*e[i-1]+e[i],t=1;i>t;++t)n=r[t]/o[t-1],o[t]-=n,s[t]-=n*s[t-1];for(r[i-1]=s[i-1]/o[i-1],t=i-2;t>=0;--t)r[t]=(s[t]-r[t+1])/o[t];for(o[i-1]=(e[i]+r[i-1])/2,t=0;i-1>t;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function en(e){return new Jt(e)}function tn(e,t){this._context=e,this._t=t}function nn(e){return new tn(e,.5)}function rn(e){return new tn(e,0)}function on(e){return new tn(e,1)}function sn(e,t){if((i=e.length)>1)for(var n,i,r=1,o=e[t[0]],s=o.length;i>r;++r){n=o,o=e[t[r]];for(var a=0;s>a;++a)o[a][1]+=o[a][0]=isNaN(n[a][1])?n[a][0]:n[a][1]}}function an(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function cn(e,t){return e[t]}function ln(){function e(e){var o,s,a=t.apply(this,arguments),c=e.length,l=a.length,u=new Array(l);for(o=0;l>o;++o){for(var d,p=a[o],f=u[o]=new Array(c),h=0;c>h;++h)f[h]=d=[0,+r(e[h],p,h,e)],d.data=e[h];f.key=p}for(o=0,s=n(u);l>o;++o)u[s[o]].index=o;return i(u,s),u}var t=Qe([]),n=an,i=sn,r=cn;return e.keys=function(n){return arguments.length?(t="function"==typeof n?n:Qe(Wm.call(n)),e):t},e.value=function(t){return arguments.length?(r="function"==typeof t?t:Qe(+t),e):r},e.order=function(t){return arguments.length?(n=null==t?an:"function"==typeof t?t:Qe(Wm.call(t)),e):n},e.offset=function(t){return arguments.length?(i=null==t?sn:t,e):i},e}function un(e,t){if((i=e.length)>0){for(var n,i,r,o=0,s=e[0].length;s>o;++o){for(r=n=0;i>n;++n)r+=e[n][o][1]||0;if(r)for(n=0;i>n;++n)e[n][o][1]/=r}sn(e,t)}}function dn(e,t){if((n=e.length)>0){for(var n,i=0,r=e[t[0]],o=r.length;o>i;++i){for(var s=0,a=0;n>s;++s)a+=e[s][i][1]||0;r[i][1]+=r[i][0]=-a/2}sn(e,t)}}function pn(e,t){if((r=e.length)>0&&(i=(n=e[t[0]]).length)>0){for(var n,i,r,o=0,s=1;i>s;++s){for(var a=0,c=0,l=0;r>a;++a){for(var u=e[t[a]],d=u[s][1]||0,p=u[s-1][1]||0,f=(d-p)/2,h=0;a>h;++h){var m=e[t[h]],g=m[s][1]||0,y=m[s-1][1]||0;f+=g-y}c+=d,l+=f*d}n[s-1][1]+=n[s-1][0]=o,c&&(o-=l/c)}n[s-1][1]+=n[s-1][0]=o,sn(e,t)}}function fn(e){var t=e.map(hn);return an(e).sort(function(e,n){return t[e]-t[n]})}function hn(e){for(var t,n=0,i=-1,r=e.length;++i<r;)(t=+e[i][1])&&(n+=t);return n}function mn(e){return fn(e).reverse()}function gn(e){var t,n,i=e.length,r=e.map(hn),o=an(e).sort(function(e,t){return r[t]-r[e]}),s=0,a=0,c=[],l=[];for(t=0;i>t;++t)n=o[t],a>s?(s+=r[n],c.push(n)):(a+=r[n],l.push(n));return l.reverse().concat(c)}function yn(e){return an(e).reverse()}function vn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bn(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function wn(){}function Sn(e){var t;return e=(e+"").trim().toLowerCase(),(t=Zm.exec(e))?(t=parseInt(t[1],16),new Mn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=Xm.exec(e))?xn(parseInt(t[1],16)):(t=Jm.exec(e))?new Mn(t[1],t[2],t[3],1):(t=Qm.exec(e))?new Mn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=eg.exec(e))?Cn(t[1],t[2],t[3],t[4]):(t=tg.exec(e))?Cn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ng.exec(e))?On(t[1],t[2]/100,t[3]/100,1):(t=ig.exec(e))?On(t[1],t[2]/100,t[3]/100,t[4]):rg.hasOwnProperty(e)?xn(rg[e]):"transparent"===e?new Mn(NaN,NaN,NaN,0):null}function xn(e){return new Mn(e>>16&255,e>>8&255,255&e,1)}function Cn(e,t,n,i){return 0>=i&&(e=t=n=NaN),new Mn(e,t,n,i)}function Tn(e){return e instanceof wn||(e=Sn(e)),e?(e=e.rgb(),new Mn(e.r,e.g,e.b,e.opacity)):new Mn}function kn(e,t,n,i){return 1===arguments.length?Tn(e):new Mn(e,t,n,null==i?1:i)}function Mn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function On(e,t,n,i){return 0>=i?e=t=n=NaN:0>=n||n>=1?e=t=NaN:0>=t&&(e=NaN),new An(e,t,n,i)}function $n(e){if(e instanceof An)return new An(e.h,e.s,e.l,e.opacity);if(e instanceof wn||(e=Sn(e)),!e)return new An;if(e instanceof An)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,c=(o+r)/2;return a?(s=t===o?(n-i)/a+6*(i>n):n===o?(i-t)/a+2:(t-n)/a+4,a/=.5>c?o+r:2-o-r,s*=60):a=c>0&&1>c?0:s,new An(s,a,c,e.opacity)}function _n(e,t,n,i){return 1===arguments.length?$n(e):new An(e,t,n,null==i?1:i)}function An(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function En(e,t,n){return 255*(60>e?t+(n-t)*e/60:180>e?n:240>e?t+(n-t)*(240-e)/60:t)}function In(e){if(e instanceof Nn)return new Nn(e.l,e.a,e.b,e.opacity);if(e instanceof Vn){var t=e.h*og;return new Nn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof Mn||(e=Tn(e));var n=Pn(e.r),i=Pn(e.g),r=Pn(e.b),o=Dn((.4124564*n+.3575761*i+.1804375*r)/cg),s=Dn((.2126729*n+.7151522*i+.072175*r)/lg),a=Dn((.0193339*n+.119192*i+.9503041*r)/ug);return new Nn(116*s-16,500*(o-s),200*(s-a),e.opacity)}function Ln(e,t,n,i){return 1===arguments.length?In(e):new Nn(e,t,n,null==i?1:i)}function Nn(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function Dn(e){return e>hg?Math.pow(e,1/3):e/fg+dg}function jn(e){return e>pg?e*e*e:fg*(e-dg)}function Rn(e){return 255*(.0031308>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Pn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Un(e){if(e instanceof Vn)return new Vn(e.h,e.c,e.l,e.opacity);e instanceof Nn||(e=In(e));var t=Math.atan2(e.b,e.a)*sg;return new Vn(0>t?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Fn(e,t,n,i){return 1===arguments.length?Un(e):new Vn(e,t,n,null==i?1:i)}function Vn(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function Bn(e){if(e instanceof Yn)return new Yn(e.h,e.s,e.l,e.opacity);e instanceof Mn||(e=Tn(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(xg*i+wg*t-Sg*n)/(xg+wg-Sg),o=i-r,s=(bg*(n-r)-yg*o)/vg,a=Math.sqrt(s*s+o*o)/(bg*r*(1-r)),c=a?Math.atan2(s,o)*sg-120:NaN;return new Yn(0>c?c+360:c,a,r,e.opacity)}function qn(e,t,n,i){return 1===arguments.length?Bn(e):new Yn(e,t,n,null==i?1:i)}function Yn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function zn(e,t,n,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*i+s*r)/6}function Hn(e){var t=e.length-1;return function(n){var i=0>=n?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],s=i>0?e[i-1]:2*r-o,a=t-1>i?e[i+2]:2*o-r;return zn((n-i/t)*t,s,r,o,a)}}function Wn(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],a=e[(i+2)%t];return zn((n-i/t)*t,r,o,s,a)}}function Gn(e){return function(){return e}}function Kn(e,t){return function(n){return e+n*t}}function Zn(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Xn(e,t){var n=t-e;return n?Kn(e,n>180||-180>n?n-360*Math.round(n/360):n):Gn(isNaN(e)?t:e)}function Jn(e){return 1===(e=+e)?Qn:function(t,n){return n-t?Zn(t,n,e):Gn(isNaN(t)?n:t)}}function Qn(e,t){var n=t-e;return n?Kn(e,n):Gn(isNaN(e)?t:e)}function ei(e){return function(t){var n,i,r=t.length,o=new Array(r),s=new Array(r),a=new Array(r);for(n=0;r>n;++n)i=kn(t[n]),o[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return o=e(o),s=e(s),a=e(a),i.opacity=1,function(e){return i.r=o(e),i.g=s(e),i.b=a(e),i+""}}}function ti(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,o=new Array(i),s=new Array(i);for(n=0;r>n;++n)o[n]=ci(e[n],t[n]);for(;i>n;++n)s[n]=t[n];return function(e){for(n=0;r>n;++n)s[n]=o[n](e);return s}}function ni(e,t){var n=new Date;return e=+e,t-=e,function(i){return n.setTime(e+t*i),n}}function ii(e,t){return e=+e,t-=e,function(n){return e+t*n}}function ri(e,t){var n,i={},r={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(n in t)n in e?i[n]=ci(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}function oi(e){return function(){return e}}function si(e){return function(t){return e(t)+""}}function ai(e,t){var n,i,r,o=Ag.lastIndex=Eg.lastIndex=0,s=-1,a=[],c=[];for(e+="",t+="";(n=Ag.exec(e))&&(i=Eg.exec(t));)(r=i.index)>o&&(r=t.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:ii(n,i)})),o=Eg.lastIndex;return o<t.length&&(r=t.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?c[0]?si(c[0].x):oi(t):(t=c.length,function(e){for(var n,i=0;t>i;++i)a[(n=c[i]).i]=n.x(e);return a.join("")})}function ci(e,t){var n,i=typeof t;return null==t||"boolean"===i?Gn(t):("number"===i?ii:"string"===i?(n=Sn(t))?(t=n,Og):ai:t instanceof Sn?Og:t instanceof Date?ni:Array.isArray(t)?ti:isNaN(t)?ri:ii)(e,t)}function li(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}}function ui(e,t,n,i,r,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,c/=a),t*n>e*i&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*Ig,skewX:Math.atan(c)*Ig,scaleX:s,scaleY:a}}function di(e){return"none"===e?Lg:(Cg||(Cg=document.createElement("DIV"),Tg=document.documentElement,kg=document.defaultView),Cg.style.transform=e,e=kg.getComputedStyle(Tg.appendChild(Cg),null).getPropertyValue("transform"),Tg.removeChild(Cg),e=e.slice(7,-1).split(","),ui(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function pi(e){return null==e?Lg:(Mg||(Mg=document.createElementNS("http://www.w3.org/2000/svg","g")),Mg.setAttribute("transform",e),(e=Mg.transform.baseVal.consolidate())?(e=e.matrix,ui(e.a,e.b,e.c,e.d,e.e,e.f)):Lg)}function fi(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}function o(e,i,r,o,s,a){if(e!==r||i!==o){var c=s.push("translate(",null,t,null,n);a.push({i:c-4,x:ii(e,r)},{i:c-2,x:ii(i,o)})}else(r||o)&&s.push("translate("+r+t+o+n)}function s(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:ii(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}function a(e,t,n,o){e!==t?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:ii(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}function c(e,t,n,i,o,s){if(e!==n||t!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:ii(e,n)},{i:a-2,x:ii(t,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}return function(t,n){var i=[],r=[];return t=e(t),n=e(n),o(t.translateX,t.translateY,n.translateX,n.translateY,i,r),s(t.rotate,n.rotate,i,r),a(t.skewX,n.skewX,i,r),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,i,r),t=n=null,function(e){for(var t,n=-1,o=r.length;++n<o;)i[(t=r[n]).i]=t.x(e);return i.join("")}}}function hi(e){return((e=Math.exp(e))+1/e)/2}function mi(e){return((e=Math.exp(e))-1/e)/2}function gi(e){return((e=Math.exp(2*e))-1)/(e+1)}function yi(e,t){var n,i,r=e[0],o=e[1],s=e[2],a=t[0],c=t[1],l=t[2],u=a-r,d=c-o,p=u*u+d*d;if(Ug>p)i=Math.log(l/s)/jg,n=function(e){return[r+e*u,o+e*d,s*Math.exp(jg*e*i)]};else{var f=Math.sqrt(p),h=(l*l-s*s+Pg*p)/(2*s*Rg*f),m=(l*l-s*s-Pg*p)/(2*l*Rg*f),g=Math.log(Math.sqrt(h*h+1)-h),y=Math.log(Math.sqrt(m*m+1)-m);i=(y-g)/jg,n=function(e){var t=e*i,n=hi(g),a=s/(Rg*f)*(n*gi(jg*t+g)-mi(g));return[r+a*u,o+a*d,s*n/hi(jg*t+g)]}}return n.duration=1e3*i,n}function vi(e){return function(t,n){var i=e((t=_n(t)).h,(n=_n(n)).h),r=Qn(t.s,n.s),o=Qn(t.l,n.l),s=Qn(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=r(e),t.l=o(e),t.opacity=s(e),t+""}}}function bi(e,t){var n=Qn((e=Ln(e)).l,(t=Ln(t)).l),i=Qn(e.a,t.a),r=Qn(e.b,t.b),o=Qn(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=r(t),e.opacity=o(t),e+""}}function wi(e){return function(t,n){var i=e((t=Fn(t)).h,(n=Fn(n)).h),r=Qn(t.c,n.c),o=Qn(t.l,n.l),s=Qn(t.opacity,n.opacity);return function(e){return t.h=i(e),t.c=r(e),t.l=o(e),t.opacity=s(e),t+""}}}function Si(e){return function t(n){function i(t,i){var r=e((t=qn(t)).h,(i=qn(i)).h),o=Qn(t.s,i.s),s=Qn(t.l,i.l),a=Qn(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=o(e),t.l=s(Math.pow(e,n)),t.opacity=a(e),t+""}}return n=+n,i.gamma=t,i}(1)}function xi(e,t){for(var n=new Array(t),i=0;t>i;++i)n[i]=e(i/(t-1));return n}function Ci(){for(var e,t=0,n=arguments.length,i={};n>t;++t){if(!(e=arguments[t]+"")||e in i)throw new Error("illegal type: "+e);i[e]=[]}return new Ti(i)}function Ti(e){this._=e}function ki(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function Mi(e,t){for(var n,i=0,r=e.length;r>i;++i)if((n=e[i]).name===t)return n.value}function Oi(e,t,n){for(var i=0,r=e.length;r>i;++i)if(e[i].name===t){e[i]=Hg,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}function $i(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function _i(e,t){var n=$i(e);return function(i,r){return t(n(i),r,e)}}function Ai(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var i in e)i in t||n.push(t[i]=i)}),n}function Ei(e){function t(e,t){var i,r,o=n(e,function(e,n){return i?i(e,n-1):(r=e,void(i=t?_i(e,t):$i(e)))});return o.columns=r,o}function n(e,t){function n(){if(u>=l)return s;if(r)return r=!1,o;var t,n=u;if(34===e.charCodeAt(n)){for(var i=n;i++<l;)if(34===e.charCodeAt(i)){if(34!==e.charCodeAt(i+1))break;++i}return u=i+2,t=e.charCodeAt(i+1),13===t?(r=!0,10===e.charCodeAt(i+2)&&++u):10===t&&(r=!0),e.slice(n+1,i).replace(/""/g,'"')}for(;l>u;){var a=1;if(t=e.charCodeAt(u++),10===t)r=!0;else if(13===t)r=!0,10===e.charCodeAt(u)&&(++u,++a);else if(t!==c)continue;return e.slice(n,u-a)}return e.slice(n)}for(var i,r,o={},s={},a=[],l=e.length,u=0,d=0;(i=n())!==s;){for(var p=[];i!==o&&i!==s;)p.push(i),i=n();t&&null==(p=t(p,d++))||a.push(p)}return a}function i(t,n){return null==n&&(n=Ai(t)),[n.map(s).join(e)].concat(t.map(function(t){return n.map(function(e){return s(t[e])}).join(e)})).join("\n")}function r(e){return e.map(o).join("\n")}function o(t){return t.map(s).join(e)}function s(e){return null==e?"":a.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}var a=new RegExp('["'+e+"\n]"),c=e.charCodeAt(0);return{parse:t,parseRows:n,format:i,formatRows:r}}function Ii(e,t){function n(e){var t,n=l.status;if(!n&&Ni(l)||n>=200&&300>n||304===n){if(o)try{t=o.call(i,l)}catch(e){return void a.call("error",i,e)}else t=l;a.call("load",i,t)}else a.call("error",i,e)}var i,r,o,s,a=Ci("beforesend","progress","load","error"),c=L(),l=new XMLHttpRequest,u=null,d=null,p=0;if("undefined"==typeof XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=n:l.onreadystatechange=function(e){l.readyState>3&&n(e)},l.onprogress=function(e){a.call("progress",i,e)},i={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c.get(e):(null==t?c.remove(e):c.set(e,t+""),i)},mimeType:function(e){return arguments.length?(r=null==e?null:e+"",i):r},responseType:function(e){return arguments.length?(s=e,i):s},timeout:function(e){return arguments.length?(p=+e,i):p},user:function(e){return arguments.length<1?u:(u=null==e?null:e+"",i)},password:function(e){return arguments.length<1?d:(d=null==e?null:e+"",i)},response:function(e){return o=e,i},get:function(e,t){return i.send("GET",e,t)},post:function(e,t){return i.send("POST",e,t)},send:function(t,n,o){return l.open(t,e,!0,u,d),null==r||c.has("accept")||c.set("accept",r+",*/*"),l.setRequestHeader&&c.each(function(e,t){l.setRequestHeader(t,e)}),null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=s&&(l.responseType=s),p>0&&(l.timeout=p),null==o&&"function"==typeof n&&(o=n,n=null),null!=o&&1===o.length&&(o=Li(o)),null!=o&&i.on("error",o).on("load",function(e){o(null,e)}),a.call("beforesend",i,l),l.send(null==n?null:n),i},abort:function(){return l.abort(),i},on:function(){var e=a.on.apply(a,arguments);return e===a?i:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return i.get(t)}return i}function Li(e){return function(t,n){e(null==t?n:null)}}function Ni(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Di(e,t){return function(n,i){var r=Ii(n).mimeType(e).response(t);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return r.get(i)}return r}}function ji(e,t){return function(n,i,r){arguments.length<3&&(r=i,i=null);var o=Ii(n).mimeType(e);return o.row=function(e){return arguments.length?o.response(Ri(t,i=e)):i},o.row(i),r?o.get(r):o}}function Ri(e,t){return function(n){return e(n.responseText,t)}}function Pi(){return gy||(by(Ui),gy=vy.now()+yy)}function Ui(){gy=0}function Fi(){this._call=this._time=this._next=null}function Vi(e,t,n){var i=new Fi;return i.restart(e,t,n),i}function Bi(){Pi(),++dy;for(var e,t=Wg;t;)(e=gy-t._time)>=0&&t._call.call(null,e),t=t._next;--dy}function qi(e){gy=(my=e||vy.now())+yy,dy=py=0;try{Bi()}finally{dy=0,zi(),gy=0}}function Yi(){var e=vy.now(),t=e-my;t>hy&&(yy-=t,my=e)}function zi(){for(var e,t,n=Wg,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Wg=t);Gg=e,Hi(i)}function Hi(e){if(!dy){py&&(py=clearTimeout(py));var t=e-gy;t>24?(1/0>e&&(py=setTimeout(qi,t)),fy&&(fy=clearInterval(fy))):(fy||(fy=setInterval(Yi,hy)),dy=1,by(qi))}}function Wi(e,t,n){var i=new Fi;return t=null==t?0:+t,i.restart(function(n){i.stop(),e(n+t)},t,n),i}function Gi(e,t,n){var i=new Fi,r=t;return null==t?(i.restart(e,t,n),i):(t=+t,n=null==n?Pi():+n,i.restart(function o(s){s+=r,i.restart(o,r+=t,n),e(s)},t,n),i)}function Ki(e,t,n,i){function r(t){return e(t=new Date(+t)),t}return r.floor=r,r.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},r.round=function(e){var t=r(e),n=r.ceil(e);return n-e>e-t?t:n},r.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},r.range=function(n,i,o){var s=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(i>n&&o>0))return s;do s.push(new Date(+n));while(t(n,o),e(n),i>n);return s},r.filter=function(n){return Ki(function(t){for(;e(t),!n(t);)t.setTime(t-1)},function(e,i){for(;--i>=0;)for(;t(e,1),!n(e););})},n&&(r.count=function(t,i){return wy.setTime(+t),Sy.setTime(+i),e(wy),e(Sy),Math.floor(n(wy,Sy))},r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r.filter(i?function(t){return i(t)%e===0}:function(t){return r.count(0,t)%e===0}):r:null}),r}function Zi(e){return Ki(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ky)/$y})}function Xi(e){return Ki(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/$y})}function Ji(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Qi(e){return e=Ji(Math.abs(e)),e?e[1]:NaN}function er(e,t){return function(n,i){for(var r=n.length,o=[],s=0,a=e[0],c=0;r>0&&a>0&&(c+a+1>i&&(a=Math.max(1,i-c)),o.push(n.substring(r-=a,r+a)),!((c+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function tr(e,t){e=e.toPrecision(t);e:for(var n,i=e.length,r=1,o=-1;i>r;++r)switch(e[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break e;default:o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(n+1):e}function nr(e,t){var n=Ji(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(Tv=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ji(e,Math.max(0,t+o-1))[0]}function ir(e,t){var n=Ji(e,t);if(!n)return e+"";var i=n[0],r=n[1];return 0>r?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}function rr(e){return new or(e)}function or(e){if(!(t=Ov.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",i=t[2]||">",r=t[3]||"-",o=t[4]||"",s=!!t[5],a=t[6]&&+t[6],c=!!t[7],l=t[8]&&+t[8].slice(1),u=t[9]||"";"n"===u?(c=!0,u="g"):Mv[u]||(u=""),(s||"0"===n&&"="===i)&&(s=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=o,this.zero=s,this.width=a,this.comma=c,this.precision=l,this.type=u}function sr(e){return e}function ar(e){function t(e){function t(e){var t,r,c,v=h,b=m;if("c"===f)b=g(e)+b,e="";else{e=+e;var w=(0>e||0>1/e)&&(e*=-1,!0);if(e=g(e,p),w)for(t=-1,r=e.length,w=!1;++t<r;)if(c=e.charCodeAt(t),c>48&&58>c||"x"===f&&c>96&&103>c||"X"===f&&c>64&&71>c){w=!0;break}if(v=(w?"("===a?a:"-":"-"===a||"("===a?"":a)+v,b=b+("s"===f?_v[8+Tv/3]:"")+(w&&"("===a?")":""),y)for(t=-1,r=e.length;++t<r;)if(c=e.charCodeAt(t),48>c||c>57){b=(46===c?o+e.slice(t+1):e.slice(t))+b,e=e.slice(0,t);break}}d&&!l&&(e=i(e,1/0));var S=v.length+e.length+b.length,x=u>S?new Array(u-S+1).join(n):"";switch(d&&l&&(e=i(x+e,x.length?u-b.length:1/0),x=""),s){case"<":return v+e+b+x;case"=":return v+x+e+b;case"^":return x.slice(0,S=x.length>>1)+v+e+b+x.slice(S)}return x+v+e+b}e=rr(e);var n=e.fill,s=e.align,a=e.sign,c=e.symbol,l=e.zero,u=e.width,d=e.comma,p=e.precision,f=e.type,h="$"===c?r[0]:"#"===c&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",m="$"===c?r[1]:/[%p]/.test(f)?"%":"",g=Mv[f],y=!f||/[defgprs%]/.test(f);return p=null==p?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),t.toString=function(){return e+""},t}function n(e,n){var i=t((e=rr(e),e.type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Qi(n)/3))),o=Math.pow(10,-r),s=_v[8+r/3];return function(e){return i(o*e)+s}}var i=e.grouping&&e.thousands?er(e.grouping,e.thousands):sr,r=e.currency,o=e.decimal;return{format:t,formatPrefix:n}}function cr(t){return $v=ar(t),e.format=$v.format,e.formatPrefix=$v.formatPrefix,$v}function lr(e){return Math.max(0,-Qi(Math.abs(e)))}function ur(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qi(t)/3)))-Qi(Math.abs(e)))}function dr(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qi(t)-Qi(e))+1}function pr(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fr(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function hr(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function mr(e){function t(e,t){return function(n){var i,r,o,s=[],a=-1,c=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++a<l;)37===e.charCodeAt(a)&&(s.push(e.slice(c,a)),null!=(r=Ev[i=e.charAt(++a)])?i=e.charAt(++a):r="e"===i?" ":"0",(o=t[i])&&(i=o(n,r)),s.push(i),c=a+1);return s.push(e.slice(c,a)),s.join("")}}function n(e,t){return function(n){var r=hr(1900),o=i(r,e,n+="",0);if(o!=n.length)return null;if("p"in r&&(r.H=r.H%12+12*r.p),"W"in r||"U"in r){"w"in r||(r.w="W"in r?1:0);var s="Z"in r?fr(hr(r.y)).getUTCDay():t(hr(r.y)).getDay();r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(s+5)%7:r.w+7*r.U-(s+6)%7}return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,fr(r)):t(r)}}function i(e,t,n,i){for(var r,o,s=0,a=t.length,c=n.length;a>s;){if(i>=c)return-1;if(r=t.charCodeAt(s++),37===r){if(r=t.charAt(s++),o=B[r in Ev?t.charAt(s++):r],!o||(i=o(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function r(e,t,n){var i=A.exec(t.slice(n));return i?(e.p=E[i[0].toLowerCase()],n+i[0].length):-1}function o(e,t,n){var i=N.exec(t.slice(n));return i?(e.w=D[i[0].toLowerCase()],n+i[0].length):-1}function s(e,t,n){var i=I.exec(t.slice(n));return i?(e.w=L[i[0].toLowerCase()],n+i[0].length):-1}function a(e,t,n){var i=P.exec(t.slice(n));return i?(e.m=U[i[0].toLowerCase()],n+i[0].length):-1}function c(e,t,n){var i=j.exec(t.slice(n));return i?(e.m=R[i[0].toLowerCase()],n+i[0].length):-1}function l(e,t,n){return i(e,x,t,n)}function u(e,t,n){return i(e,C,t,n)}function d(e,t,n){return i(e,T,t,n)}function p(e){return O[e.getDay()]}function f(e){return M[e.getDay()]}function h(e){return _[e.getMonth()]}function m(e){return $[e.getMonth()]}function g(e){return k[+(e.getHours()>=12)]}function y(e){return O[e.getUTCDay()]}function v(e){return M[e.getUTCDay()]}function b(e){return _[e.getUTCMonth()]}function w(e){return $[e.getUTCMonth()]}function S(e){return k[+(e.getUTCHours()>=12)]}var x=e.dateTime,C=e.date,T=e.time,k=e.periods,M=e.days,O=e.shortDays,$=e.months,_=e.shortMonths,A=vr(k),E=br(k),I=vr(M),L=br(M),N=vr(O),D=br(O),j=vr($),R=br($),P=vr(_),U=br(_),F={a:p,A:f,b:h,B:m,c:null,d:Nr,e:Nr,H:Dr,I:jr,j:Rr,L:Pr,m:Ur,M:Fr,p:g,S:Vr,U:Br,w:qr,W:Yr,x:null,X:null,y:zr,Y:Hr,Z:Wr,"%":co},V={a:y,A:v,b:b,B:w,c:null,d:Gr,e:Gr,H:Kr,I:Zr,j:Xr,L:Jr,m:Qr,M:eo,p:S,S:to,U:no,w:io,W:ro,x:null,X:null,y:oo,Y:so,Z:ao,"%":co},B={a:o,A:s,b:a,B:c,c:l,d:Or,e:Or,H:_r,I:_r,j:$r,L:Ir,m:Mr,M:Ar,p:r,S:Er,U:Sr,w:wr,W:xr,x:u,X:d,y:Tr,Y:Cr,Z:kr,"%":Lr};return F.x=t(C,F),F.X=t(T,F),F.c=t(x,F),V.x=t(C,V),V.X=t(T,V),V.c=t(x,V),{format:function(e){var n=t(e+="",F);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",pr);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",V);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,fr);return t.toString=function(){return e},t}}}function gr(e,t,n){var i=0>e?"-":"",r=(i?-e:e)+"",o=r.length;return i+(n>o?new Array(n-o+1).join(t)+r:r)}function yr(e){return e.replace(Nv,"\\$&")}function vr(e){return new RegExp("^(?:"+e.map(yr).join("|")+")","i")}function br(e){for(var t={},n=-1,i=e.length;++n<i;)t[e[n].toLowerCase()]=n;return t}function wr(e,t,n){var i=Iv.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Sr(e,t,n){var i=Iv.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function xr(e,t,n){var i=Iv.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function Cr(e,t,n){var i=Iv.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Tr(e,t,n){var i=Iv.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function kr(e,t,n){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Mr(e,t,n){var i=Iv.exec(t.slice(n,n+2));
return i?(e.m=i[0]-1,n+i[0].length):-1}function Or(e,t,n){var i=Iv.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function $r(e,t,n){var i=Iv.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function _r(e,t,n){var i=Iv.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Ar(e,t,n){var i=Iv.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Er(e,t,n){var i=Iv.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Ir(e,t,n){var i=Iv.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Lr(e,t,n){var i=Lv.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Nr(e,t){return gr(e.getDate(),t,2)}function Dr(e,t){return gr(e.getHours(),t,2)}function jr(e,t){return gr(e.getHours()%12||12,t,2)}function Rr(e,t){return gr(1+Dy.count(Qy(e),e),t,3)}function Pr(e,t){return gr(e.getMilliseconds(),t,3)}function Ur(e,t){return gr(e.getMonth()+1,t,2)}function Fr(e,t){return gr(e.getMinutes(),t,2)}function Vr(e,t){return gr(e.getSeconds(),t,2)}function Br(e,t){return gr(Ry.count(Qy(e),e),t,2)}function qr(e){return e.getDay()}function Yr(e,t){return gr(Py.count(Qy(e),e),t,2)}function zr(e,t){return gr(e.getFullYear()%100,t,2)}function Hr(e,t){return gr(e.getFullYear()%1e4,t,4)}function Wr(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gr(t/60|0,"0",2)+gr(t%60,"0",2)}function Gr(e,t){return gr(e.getUTCDate(),t,2)}function Kr(e,t){return gr(e.getUTCHours(),t,2)}function Zr(e,t){return gr(e.getUTCHours()%12||12,t,2)}function Xr(e,t){return gr(1+ov.count(Cv(e),e),t,3)}function Jr(e,t){return gr(e.getUTCMilliseconds(),t,3)}function Qr(e,t){return gr(e.getUTCMonth()+1,t,2)}function eo(e,t){return gr(e.getUTCMinutes(),t,2)}function to(e,t){return gr(e.getUTCSeconds(),t,2)}function no(e,t){return gr(av.count(Cv(e),e),t,2)}function io(e){return e.getUTCDay()}function ro(e,t){return gr(cv.count(Cv(e),e),t,2)}function oo(e,t){return gr(e.getUTCFullYear()%100,t,2)}function so(e,t){return gr(e.getUTCFullYear()%1e4,t,4)}function ao(){return"+0000"}function co(){return"%"}function lo(t){return Av=mr(t),e.timeFormat=Av.format,e.timeParse=Av.parse,e.utcFormat=Av.utcFormat,e.utcParse=Av.utcParse,Av}function uo(e){return e.toISOString()}function po(e){var t=new Date(e);return isNaN(t)?null:t}function fo(e){function t(t){var o=t+"",s=n.get(o);if(!s){if(r!==Vv)return r;n.set(o,s=i.push(t))}return e[(s-1)%e.length]}var n=L(),i=[],r=Vv;return e=null==e?[]:Fv.call(e),t.domain=function(e){if(!arguments.length)return i.slice();i=[],n=L();for(var r,o,s=-1,a=e.length;++s<a;)n.has(o=(r=e[s])+"")||n.set(o,i.push(r));return t},t.range=function(n){return arguments.length?(e=Fv.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(r=e,t):r},t.copy=function(){return fo().domain(i).range(e).unknown(r)},t}function ho(){function e(){var e=r().length,i=s[1]<s[0],p=s[i-0],f=s[1-i];t=(f-p)/Math.max(1,e-c+2*l),a&&(t=Math.floor(t)),p+=(f-p-t*(e-c))*u,n=t*(1-c),a&&(p=Math.round(p),n=Math.round(n));var h=d(e).map(function(e){return p+t*e});return o(i?h.reverse():h)}var t,n,i=fo().unknown(void 0),r=i.domain,o=i.range,s=[0,1],a=!1,c=0,l=0,u=.5;return delete i.unknown,i.domain=function(t){return arguments.length?(r(t),e()):r()},i.range=function(t){return arguments.length?(s=[+t[0],+t[1]],e()):s.slice()},i.rangeRound=function(t){return s=[+t[0],+t[1]],a=!0,e()},i.bandwidth=function(){return n},i.step=function(){return t},i.round=function(t){return arguments.length?(a=!!t,e()):a},i.padding=function(t){return arguments.length?(c=l=Math.max(0,Math.min(1,t)),e()):c},i.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},i.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},i.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),e()):u},i.copy=function(){return ho().domain(r()).range(s).round(a).paddingInner(c).paddingOuter(l).align(u)},e()}function mo(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return mo(t())},e}function go(){return mo(ho().paddingInner(1))}function yo(e){return function(){return e}}function vo(e){return+e}function bo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:yo(t)}function wo(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return t>=e?0:e>=n?1:i(e)}}}function So(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return 0>=e?t:e>=1?n:i(e)}}}function xo(e,t,n,i){var r=e[0],o=e[1],s=t[0],a=t[1];return r>o?(r=n(o,r),s=i(a,s)):(r=n(r,o),s=i(s,a)),function(e){return s(r(e))}}function Co(e,t,n,i){var r=Math.min(e.length,t.length)-1,o=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)o[a]=n(e[a],e[a+1]),s[a]=i(t[a],t[a+1]);return function(t){var n=Oh(e,t,1,r)-1;return s[n](o[n](t))}}function To(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function ko(e,t){function n(){return r=Math.min(a.length,c.length)>2?Co:xo,o=s=null,i}function i(t){return(o||(o=r(a,c,u?wo(e):e,l)))(+t)}var r,o,s,a=Bv,c=Bv,l=ci,u=!1;return i.invert=function(e){return(s||(s=r(c,a,bo,u?So(t):t)))(+e)},i.domain=function(e){return arguments.length?(a=Uv.call(e,vo),n()):a.slice()},i.range=function(e){return arguments.length?(c=Fv.call(e),n()):c.slice()},i.rangeRound=function(e){return c=Fv.call(e),l=li,n()},i.clamp=function(e){return arguments.length?(u=!!e,n()):u},i.interpolate=function(e){return arguments.length?(l=e,n()):l},n()}function Mo(t,n,i){var r,o=t[0],s=t[t.length-1],a=f(o,s,null==n?10:n);switch(i=rr(null==i?",f":i),i.type){case"s":var c=Math.max(Math.abs(o),Math.abs(s));return null!=i.precision||isNaN(r=ur(a,c))||(i.precision=r),e.formatPrefix(i,c);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=dr(a,Math.max(Math.abs(o),Math.abs(s))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=lr(a))||(i.precision=r-2*("%"===i.type))}return e.format(i)}function Oo(e){var t=e.domain;return e.ticks=function(e){var n=t();return p(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Mo(t(),e,n)},e.nice=function(n){var i=t(),r=i.length-1,o=null==n?10:n,s=i[0],a=i[r],c=f(s,a,o);return c&&(c=f(Math.floor(s/c)*c,Math.ceil(a/c)*c,o),i[0]=Math.floor(s/c)*c,i[r]=Math.ceil(a/c)*c,t(i)),e},e}function $o(){var e=ko(bo,ii);return e.copy=function(){return To(e,$o())},Oo(e)}function _o(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=Uv.call(n,vo),e):t.slice()},e.copy=function(){return _o().domain(t)},Oo(e)}function Ao(e,t){e=e.slice();var n,i=0,r=e.length-1,o=e[i],s=e[r];return o>s&&(n=i,i=r,r=n,n=o,o=s,s=n),e[i]=t.floor(o),e[r]=t.ceil(s),e}function Eo(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:yo(t)}function Io(e,t){return 0>e?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function Lo(e){return isFinite(e)?+("1e"+e):0>e?0:e}function No(e){return 10===e?Lo:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function Do(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function jo(e){return function(t){return-e(-t)}}function Ro(){function t(){return o=Do(r),s=No(r),i()[0]<0&&(o=jo(o),s=jo(s)),n}var n=ko(Eo,Io).domain([1,10]),i=n.domain,r=10,o=Do(10),s=No(10);return n.base=function(e){return arguments.length?(r=+e,t()):r},n.domain=function(e){return arguments.length?(i(e),t()):i()},n.ticks=function(e){var t,n=i(),a=n[0],c=n[n.length-1];(t=a>c)&&(f=a,a=c,c=f);var l,u,d,f=o(a),h=o(c),m=null==e?10:+e,g=[];if(!(r%1)&&m>h-f){if(f=Math.round(f)-1,h=Math.round(h)+1,a>0){for(;h>f;++f)for(u=1,l=s(f);r>u;++u)if(d=l*u,!(a>d)){if(d>c)break;g.push(d)}}else for(;h>f;++f)for(u=r-1,l=s(f);u>=1;--u)if(d=l*u,!(a>d)){if(d>c)break;g.push(d)}}else g=p(f,h,Math.min(h-f,m)).map(s);return t?g.reverse():g},n.tickFormat=function(t,i){if(null==i&&(i=10===r?".0e":","),"function"!=typeof i&&(i=e.format(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,r*t/n.ticks().length);return function(e){var t=e/s(Math.round(o(e)));return r-.5>t*r&&(t*=r),a>=t?i(e):""}},n.nice=function(){return i(Ao(i(),{floor:function(e){return s(Math.floor(o(e)))},ceil:function(e){return s(Math.ceil(o(e)))}}))},n.copy=function(){return To(n,Ro().base(r))},n}function Po(e,t){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}function Uo(){function e(e,t){return(t=Po(t,n)-(e=Po(e,n)))?function(i){return(Po(i,n)-e)/t}:yo(t)}function t(e,t){return t=Po(t,n)-(e=Po(e,n)),function(i){return Po(e+t*i,1/n)}}var n=1,i=ko(e,t),r=i.domain;return i.exponent=function(e){return arguments.length?(n=+e,r(r())):n},i.copy=function(){return To(i,Uo().exponent(n))},Oo(i)}function Fo(){return Uo().exponent(.5)}function Vo(){function e(){var e=0,t=Math.max(1,r.length);for(o=new Array(t-1);++e<t;)o[e-1]=g(i,e/t);return n}function n(e){return isNaN(e=+e)?void 0:r[Oh(o,e)]}var i=[],r=[],o=[];return n.invertExtent=function(e){var t=r.indexOf(e);return 0>t?[NaN,NaN]:[t>0?o[t-1]:i[0],t<o.length?o[t]:i[i.length-1]]},n.domain=function(n){if(!arguments.length)return i.slice();i=[];for(var r,o=0,s=n.length;s>o;++o)r=n[o],null==r||isNaN(r=+r)||i.push(r);return i.sort(t),e()},n.range=function(t){return arguments.length?(r=Fv.call(t),e()):r.slice()},n.quantiles=function(){return o.slice()},n.copy=function(){return Vo().domain(i).range(r)},n}function Bo(){function e(e){return e>=e?s[Oh(o,e,0,r)]:void 0}function t(){var t=-1;for(o=new Array(r);++t<r;)o[t]=((t+1)*i-(t-r)*n)/(r+1);return e}var n=0,i=1,r=1,o=[.5],s=[0,1];return e.domain=function(e){return arguments.length?(n=+e[0],i=+e[1],t()):[n,i]},e.range=function(e){return arguments.length?(r=(s=Fv.call(e)).length-1,t()):s.slice()},e.invertExtent=function(e){var t=s.indexOf(e);return 0>t?[NaN,NaN]:1>t?[n,o[0]]:t>=r?[o[r-1],i]:[o[t-1],o[t]]},e.copy=function(){return Bo().domain([n,i]).range(s)},Oo(e)}function qo(){function e(e){return e>=e?n[Oh(t,e,0,i)]:void 0}var t=[.5],n=[0,1],i=1;return e.domain=function(r){return arguments.length?(t=Fv.call(r),i=Math.min(t.length,n.length-1),e):t.slice()},e.range=function(r){return arguments.length?(n=Fv.call(r),i=Math.min(t.length,n.length-1),e):n.slice()},e.invertExtent=function(e){var i=n.indexOf(e);return[t[i-1],t[i]]},e.copy=function(){return qo().domain(t).range(n)},e}function Yo(e){return new Date(e)}function zo(e){return e instanceof Date?+e:+new Date(+e)}function Ho(e,t,i,r,o,s,a,c,l){function u(n){return(a(n)<n?g:s(n)<n?y:o(n)<n?v:r(n)<n?b:t(n)<n?i(n)<n?w:S:e(n)<n?x:C)(n)}function d(t,i,r,o){if(null==t&&(t=10),"number"==typeof t){var s=Math.abs(r-i)/t,a=n(function(e){return e[2]}).right(T,s);a===T.length?(o=f(i/Kv,r/Kv,t),t=e):a?(a=T[s/T[a-1][2]<T[a][2]/s?a-1:a],o=a[1],t=a[0]):(o=f(i,r,t),t=c)}return null==o?t:t.every(o)}var p=ko(bo,ii),h=p.invert,m=p.domain,g=l(".%L"),y=l(":%S"),v=l("%I:%M"),b=l("%I %p"),w=l("%a %d"),S=l("%b %d"),x=l("%B"),C=l("%Y"),T=[[a,1,qv],[a,5,5*qv],[a,15,15*qv],[a,30,30*qv],[s,1,Yv],[s,5,5*Yv],[s,15,15*Yv],[s,30,30*Yv],[o,1,zv],[o,3,3*zv],[o,6,6*zv],[o,12,12*zv],[r,1,Hv],[r,2,2*Hv],[i,1,Wv],[t,1,Gv],[t,3,3*Gv],[e,1,Kv]];return p.invert=function(e){return new Date(h(e))},p.domain=function(e){return arguments.length?m(Uv.call(e,zo)):m().map(Yo)},p.ticks=function(e,t){var n,i=m(),r=i[0],o=i[i.length-1],s=r>o;return s&&(n=r,r=o,o=n),n=d(e,r,o,t),n=n?n.range(r,o+1):[],s?n.reverse():n},p.tickFormat=function(e,t){return null==t?u:l(t)},p.nice=function(e,t){var n=m();return(e=d(e,n[0],n[n.length-1],t))?m(Ao(n,e)):p},p.copy=function(){return To(p,Ho(e,t,i,r,o,s,a,c,l))},p}function Wo(){return Ho(Qy,Xy,Ry,Dy,Ly,Ey,_y,xy,e.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function Go(){return Ho(Cv,Sv,av,ov,iv,tv,_y,xy,e.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function Ko(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}function Zo(e){(0>e||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return ib.h=360*e-100,ib.s=1.5-1.5*t,ib.l=.8-.9*t,ib+""}function Xo(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Jo(e){function t(t){var o=(t-n)/(i-n);return e(r?Math.max(0,Math.min(1,o)):o)}var n=0,i=1,r=!1;return t.domain=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.clamp=function(e){return arguments.length?(r=!!e,t):r},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return Jo(e).domain([n,i]).clamp(r)},Oo(t)}function Qo(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),lb.hasOwnProperty(t)?{space:lb[t],local:e}:e}function es(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cb&&t.documentElement.namespaceURI===cb?t.createElement(e):t.createElementNS(n,e)}}function ts(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ns(e){var t=Qo(e);return(t.local?ts:es)(t)}function is(){return new rs}function rs(){this._="@"+(++ub).toString(36)}function os(e,t,n){return e=ss(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ss(t,n,i){return function(r){var o=e.event;e.event=r;try{t.call(this,this.__data__,n,i)}finally{e.event=o}}}function as(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function cs(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,o=t.length;o>i;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function ls(e,t,n){var i=mb.hasOwnProperty(e.type)?os:ss;return function(r,o,s){var a,c=this.__on,l=i(t,o,s);if(c)for(var u=0,d=c.length;d>u;++u)if((a=c[u]).type===e.type&&a.name===e.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=l,a.capture=n),void(a.value=t);this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,capture:n},c?c.push(a):this.__on=[a]}}function us(e,t,n){var i,r,o=as(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?ls:cs,null==n&&(n=!1),i=0;s>i;++i)this.each(a(o[i],t,n));return this}var a=this.node().__on;if(a)for(var c,l=0,u=a.length;u>l;++l)for(i=0,c=a[l];s>i;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value}function ds(t,n,i,r){var o=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(i,r)}finally{e.event=o}}function ps(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function fs(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}function hs(e){var t=ps();return t.changedTouches&&(t=t.changedTouches[0]),fs(e,t)}function ms(){}function gs(e){return null==e?ms:function(){return this.querySelector(e)}}function ys(e){"function"!=typeof e&&(e=gs(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;n>r;++r)for(var o,s,a=t[r],c=a.length,l=i[r]=new Array(c),u=0;c>u;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),l[u]=s);return new La(i,this._parents)}function vs(){return[]}function bs(e){return null==e?vs:function(){return this.querySelectorAll(e)}}function ws(e){"function"!=typeof e&&(e=bs(e));for(var t=this._groups,n=t.length,i=[],r=[],o=0;n>o;++o)for(var s,a=t[o],c=a.length,l=0;c>l;++l)(s=a[l])&&(i.push(e.call(s,s.__data__,l,a)),r.push(s));return new La(i,r)}function Ss(e){"function"!=typeof e&&(e=hb(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;n>r;++r)for(var o,s=t[r],a=s.length,c=i[r]=[],l=0;a>l;++l)(o=s[l])&&e.call(o,o.__data__,l,s)&&c.push(o);return new La(i,this._parents)}function xs(e){return new Array(e.length)}function Cs(){return new La(this._enter||this._groups.map(xs),this._parents)}function Ts(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function ks(e){return function(){return e}}function Ms(e,t,n,i,r,o){for(var s,a=0,c=t.length,l=o.length;l>a;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):n[a]=new Ts(e,o[a]);for(;c>a;++a)(s=t[a])&&(r[a]=s)}function Os(e,t,n,i,r,o,s){var a,c,l,u={},d=t.length,p=o.length,f=new Array(d);for(a=0;d>a;++a)(c=t[a])&&(f[a]=l=yb+s.call(c,c.__data__,a,t),l in u?r[a]=c:u[l]=c);for(a=0;p>a;++a)l=yb+s.call(e,o[a],a,o),(c=u[l])?(i[a]=c,c.__data__=o[a],u[l]=null):n[a]=new Ts(e,o[a]);for(a=0;d>a;++a)(c=t[a])&&u[f[a]]===c&&(r[a]=c)}function $s(e,t){if(!e)return f=new Array(this.size()),l=-1,this.each(function(e){f[++l]=e}),f;var n=t?Os:Ms,i=this._parents,r=this._groups;"function"!=typeof e&&(e=ks(e));for(var o=r.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;o>l;++l){var u=i[l],d=r[l],p=d.length,f=e.call(u,u&&u.__data__,l,i),h=f.length,m=a[l]=new Array(h),g=s[l]=new Array(h),y=c[l]=new Array(p);n(u,d,m,g,y,f,t);for(var v,b,w=0,S=0;h>w;++w)if(v=m[w]){for(w>=S&&(S=w+1);!(b=g[S])&&++S<h;);v._next=b||null}}return s=new La(s,i),s._enter=a,s._exit=c,s}function _s(){return new La(this._exit||this._groups.map(xs),this._parents)}function As(e){for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;o>a;++a)for(var c,l=t[a],u=n[a],d=l.length,p=s[a]=new Array(d),f=0;d>f;++f)(c=l[f]||u[f])&&(p[f]=c);for(;i>a;++a)s[a]=t[a];return new La(s,this._parents)}function Es(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this}function Is(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ls);for(var n=this._groups,i=n.length,r=new Array(i),o=0;i>o;++o){for(var s,a=n[o],c=a.length,l=r[o]=new Array(c),u=0;c>u;++u)(s=a[u])&&(l[u]=s);l.sort(t)}return new La(r,this._parents).order()}function Ls(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function Ns(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ds(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function js(){for(var e=this._groups,t=0,n=e.length;n>t;++t)for(var i=e[t],r=0,o=i.length;o>r;++r){var s=i[r];if(s)return s}return null}function Rs(){var e=0;return this.each(function(){++e}),e}function Ps(){return!this.node()}function Us(e){for(var t=this._groups,n=0,i=t.length;i>n;++n)for(var r,o=t[n],s=0,a=o.length;a>s;++s)(r=o[s])&&e.call(r,r.__data__,s,o);return this}function Fs(e){return function(){this.removeAttribute(e)}}function Vs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bs(e,t){return function(){this.setAttribute(e,t)}}function qs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ys(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function zs(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Hs(e,t){var n=Qo(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?Vs:Fs:"function"==typeof t?n.local?zs:Ys:n.local?qs:Bs)(n,t))}function Ws(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Gs(e){return function(){this.style.removeProperty(e)}}function Ks(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Zs(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Xs(e,t,n){var i;return arguments.length>1?this.each((null==t?Gs:"function"==typeof t?Zs:Ks)(e,t,null==n?"":n)):Ws(i=this.node()).getComputedStyle(i,null).getPropertyValue(e)}function Js(e){return function(){delete this[e]}}function Qs(e,t){return function(){this[e]=t}}function ea(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ta(e,t){return arguments.length>1?this.each((null==t?Js:"function"==typeof t?ea:Qs)(e,t)):this.node()[e]}function na(e){return e.trim().split(/^|\s+/)}function ia(e){return e.classList||new ra(e)}function ra(e){this._node=e,this._names=na(e.getAttribute("class")||"")}function oa(e,t){for(var n=ia(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function sa(e,t){for(var n=ia(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function aa(e){return function(){oa(this,e)}}function ca(e){return function(){sa(this,e)}}function la(e,t){return function(){(t.apply(this,arguments)?oa:sa)(this,e)}}function ua(e,t){var n=na(e+"");if(arguments.length<2){for(var i=ia(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?la:t?aa:ca)(n,t))}function da(){this.textContent=""}function pa(e){return function(){this.textContent=e}}function fa(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ha(e){return arguments.length?this.each(null==e?da:("function"==typeof e?fa:pa)(e)):this.node().textContent}function ma(){this.innerHTML=""}function ga(e){return function(){this.innerHTML=e}}function ya(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function va(e){return arguments.length?this.each(null==e?ma:("function"==typeof e?ya:ga)(e)):this.node().innerHTML}function ba(){this.nextSibling&&this.parentNode.appendChild(this)}function wa(){return this.each(ba)}function Sa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xa(){return this.each(Sa)}function Ca(e){var t="function"==typeof e?e:ns(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ta(){return null}function ka(e,t){var n="function"==typeof e?e:ns(e),i=null==t?Ta:"function"==typeof t?t:gs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ma(){var e=this.parentNode;e&&e.removeChild(this)}function Oa(){return this.each(Ma)}function $a(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _a(e,t,n){var i=Ws(e),r=i.CustomEvent;r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Aa(e,t){return function(){return _a(this,e,t)}}function Ea(e,t){return function(){return _a(this,e,t.apply(this,arguments))}}function Ia(e,t){return this.each(("function"==typeof t?Ea:Aa)(e,t))}function La(e,t){this._groups=e,this._parents=t}function Na(){return new La([[document.documentElement]],vb)}function Da(e){return"string"==typeof e?new La([[document.querySelector(e)]],[document.documentElement]):new La([[e]],vb)}function ja(e){return"string"==typeof e?new La([document.querySelectorAll(e)],[document.documentElement]):new La([null==e?[]:e],vb)}function Ra(e,t,n){arguments.length<3&&(n=t,t=ps().changedTouches);for(var i,r=0,o=t?t.length:0;o>r;++r)if((i=t[r]).identifier===n)return fs(e,i);return null}function Pa(e,t){null==t&&(t=ps().touches);for(var n=0,i=t?t.length:0,r=new Array(i);i>n;++n)r[n]=fs(e,t[n]);return r}function Ua(e,t,n,i,r,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};qa(e,n,{name:t,index:i,group:r,on:bb,tween:wb,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Sb})}function Fa(e,t){var n=e.__transition;if(!n||!(n=n[t])||n.state>Sb)throw new Error("too late");return n}function Va(e,t){var n=e.__transition;if(!n||!(n=n[t])||n.state>Cb)throw new Error("too late");return n}function Ba(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("too late");return n}function qa(e,t,n){function i(e){n.state=xb,n.delay<=e?r(e-n.delay):n.timer.restart(r,n.delay,n.time)}function r(i){var r,c,l,u;for(r in a)u=a[r],u.name===n.name&&(u.state===Tb?(u.state=Mb,u.timer.stop(),u.on.call("interrupt",e,e.__data__,u.index,u.group),delete a[r]):t>+r&&(u.state=Mb,u.timer.stop(),delete a[r]));if(Wi(function(){n.state===Tb&&(n.timer.restart(o,n.delay,n.time),o(i))}),n.state=Cb,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Cb){for(n.state=Tb,s=new Array(l=n.tween.length),r=0,c=-1;l>r;++r)(u=n.tween[r].value.call(e,e.__data__,n.index,n.group))&&(s[++c]=u);s.length=c+1}}function o(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.state=kb,1),o=-1,c=s.length;++o<c;)s[o].call(null,r);if(n.state===kb){n.state=Mb,n.timer.stop(),n.on.call("end",e,e.__data__,n.index,n.group);for(o in a)if(+o!==t)return void delete a[t];delete e.__transition}}var s,a=e.__transition;a[t]=n,n.timer=Vi(i,0,n.time)}function Ya(e,t){var n,i,r,o=e.__transition,s=!0;if(o){t=null==t?null:t+"";for(r in o)(n=o[r]).name===t?(i=n.state===Tb,n.state=Mb,n.timer.stop(),i&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete e.__transition}}function za(e){return this.each(function(){Ya(this,e)})}function Ha(e,t){var n,i;return function(){var r=Va(this,e),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;a>s;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Wa(e,t,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Va(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},c=0,l=r.length;l>c;++c)if(r[c].name===t){r[c]=a;break}c===l&&r.push(a)}o.tween=r}}function Ga(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=Ba(this.node(),n).tween,o=0,s=r.length;s>o;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((null==t?Ha:Wa)(n,e,t))}function Ka(e,t,n){var i=e._id;return e.each(function(){var e=Va(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Ba(e,i).value[t]}}function Za(e,t){var n;return("number"==typeof t?ii:t instanceof Sn?Og:(n=Sn(t))?(t=n,Og):ai)(e,t)}function Xa(e){return function(){this.removeAttribute(e)}}function Ja(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qa(e,t,n){var i,r;return function(){var o=this.getAttribute(e);return o===n?null:o===i?r:r=t(i=o,n)}}function ec(e,t,n){var i,r;return function(){var o=this.getAttributeNS(e.space,e.local);return o===n?null:o===i?r:r=t(i=o,n)}}function tc(e,t,n){var i,r,o;return function(){var s,a=n(this);return null==a?void this.removeAttribute(e):(s=this.getAttribute(e),s===a?null:s===i&&a===r?o:o=t(i=s,r=a))}}function nc(e,t,n){var i,r,o;return function(){var s,a=n(this);return null==a?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),s===a?null:s===i&&a===r?o:o=t(i=s,r=a))}}function ic(e,t){var n=Qo(e),i="transform"===n?Dg:Za;return this.attrTween(e,"function"==typeof t?(n.local?nc:tc)(n,i,Ka(this,"attr."+e,t)):null==t?(n.local?Ja:Xa)(n):(n.local?ec:Qa)(n,i,t))}function rc(e,t){function n(){var n=this,i=t.apply(n,arguments);return i&&function(t){n.setAttributeNS(e.space,e.local,i(t))}}return n._value=t,n}function oc(e,t){function n(){var n=this,i=t.apply(n,arguments);return i&&function(t){n.setAttribute(e,i(t))}}return n._value=t,n}function sc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=Qo(e);return this.tween(n,(i.local?rc:oc)(i,t))}function ac(e,t){return function(){Fa(this,e).delay=+t.apply(this,arguments)}}function cc(e,t){return t=+t,function(){Fa(this,e).delay=t}}function lc(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ac:cc)(t,e)):Ba(this.node(),t).delay}function uc(e,t){return function(){Va(this,e).duration=+t.apply(this,arguments)}}function dc(e,t){return t=+t,function(){Va(this,e).duration=t}}function pc(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?uc:dc)(t,e)):Ba(this.node(),t).duration}function fc(e,t){if("function"!=typeof t)throw new Error;return function(){Va(this,e).ease=t}}function hc(e){var t=this._id;return arguments.length?this.each(fc(t,e)):Ba(this.node(),t).ease}function mc(e){"function"!=typeof e&&(e=hb(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;n>r;++r)for(var o,s=t[r],a=s.length,c=i[r]=[],l=0;a>l;++l)(o=s[l])&&e.call(o,o.__data__,l,s)&&c.push(o);return new jc(i,this._parents,this._name,this._id)}function gc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;o>a;++a)for(var c,l=t[a],u=n[a],d=l.length,p=s[a]=new Array(d),f=0;d>f;++f)(c=l[f]||u[f])&&(p[f]=c);for(;i>a;++a)s[a]=t[a];return new jc(s,this._parents,this._name,this._id)}function yc(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function vc(e,t,n){var i,r,o=yc(t)?Fa:Va;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}function bc(e,t){var n=this._id;return arguments.length<2?Ba(this.node(),n).on.on(e):this.each(vc(n,e,t))}function wc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Sc(){return this.on("end.remove",wc(this._id))}function xc(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=gs(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;r>s;++s)for(var a,c,l=i[s],u=l.length,d=o[s]=new Array(u),p=0;u>p;++p)(a=l[p])&&(c=e.call(a,a.__data__,p,l))&&("__data__"in a&&(c.__data__=a.__data__),d[p]=c,Ua(d[p],t,n,p,d,Ba(a,n)));return new jc(o,this._parents,t,n)}function Cc(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=bs(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;r>a;++a)for(var c,l=i[a],u=l.length,d=0;u>d;++d)if(c=l[d]){for(var p,f=e.call(c,c.__data__,d,l),h=Ba(c,n),m=0,g=f.length;g>m;++m)(p=f[m])&&Ua(p,t,n,m,f,h);o.push(f),s.push(c)}return new jc(o,s,t,n)}function Tc(){return new Ob(this._groups,this._parents)}function kc(e,t){var n,i,r;return function(){var o=Ws(this).getComputedStyle(this,null),s=o.getPropertyValue(e),a=(this.style.removeProperty(e),o.getPropertyValue(e));return s===a?null:s===n&&a===i?r:r=t(n=s,i=a)}}function Mc(e){return function(){this.style.removeProperty(e)}}function Oc(e,t,n){var i,r;return function(){var o=Ws(this).getComputedStyle(this,null).getPropertyValue(e);return o===n?null:o===i?r:r=t(i=o,n)}}function $c(e,t,n){var i,r,o;return function(){var s=Ws(this).getComputedStyle(this,null),a=s.getPropertyValue(e),c=n(this);return null==c&&(this.style.removeProperty(e),c=s.getPropertyValue(e)),a===c?null:a===i&&c===r?o:o=t(i=a,r=c)}}function _c(e,t,n){var i="transform"==(e+="")?Ng:Za;return null==t?this.styleTween(e,kc(e,i)).on("end.style."+e,Mc(e)):this.styleTween(e,"function"==typeof t?$c(e,i,Ka(this,"style."+e,t)):Oc(e,i,t),n)}function Ac(e,t,n){function i(){var i=this,r=t.apply(i,arguments);return r&&function(t){i.style.setProperty(e,r(t),n)}}return i._value=t,i}function Ec(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,Ac(e,t,null==n?"":n))}function Ic(e){return function(){this.textContent=e}}function Lc(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function Nc(e){return this.tween("text","function"==typeof e?Lc(Ka(this,"text",e)):Ic(null==e?"":e+""))}function Dc(){for(var e=this._name,t=this._id,n=Pc(),i=this._groups,r=i.length,o=0;r>o;++o)for(var s,a=i[o],c=a.length,l=0;c>l;++l)if(s=a[l]){var u=Ba(s,t);Ua(s,e,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new jc(i,this._parents,e,n)}function jc(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Rc(e){return Na().transition(e)}function Pc(){return++$b}function Uc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Ab.time=Pi(),Ab;return n}function Fc(e){var t,n;e instanceof jc?(t=e._id,e=e._name):(t=Pc(),
(n=Ab).time=Pi(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;r>o;++o)for(var s,a=i[o],c=a.length,l=0;c>l;++l)(s=a[l])&&Ua(s,e,t,l,a,n||Uc(s,t));return new jc(i,this._parents,e,t)}function Vc(e,t){var n,i,r=e.__transition;if(r){t=null==t?null:t+"";for(i in r)if((n=r[i]).state>xb&&n.name===t)return new jc([[e]],Eb,t,+i)}return null}function Bc(e){return e}function qc(e,t,n){var i=e(n);return"translate("+(isFinite(i)?i:t(n))+",0)"}function Yc(e,t,n){var i=e(n);return"translate(0,"+(isFinite(i)?i:t(n))+")"}function zc(e){var t=e.bandwidth()/2;return function(n){return e(n)+t}}function Hc(){return!this.__axis}function Wc(e,t){function n(n){var l,u=null==r?t.ticks?t.ticks.apply(t,i):t.domain():r,d=null==o?t.tickFormat?t.tickFormat.apply(t,i):Bc:o,p=Math.max(s,0)+c,f=e===Lb||e===Db?qc:Yc,h=t.range(),m=h[0]+.5,g=h[h.length-1]+.5,y=(t.bandwidth?zc:Bc)(t.copy()),v=n.selection?n.selection():n,b=v.selectAll(".domain").data([null]),w=v.selectAll(".tick").data(u,t).order(),S=w.exit(),x=w.enter().append("g").attr("class","tick"),C=w.select("line"),T=w.select("text"),k=e===Lb||e===jb?-1:1,M=e===jb||e===Nb?(l="x","y"):(l="y","x");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),w=w.merge(x),C=C.merge(x.append("line").attr("stroke","#000").attr(l+"2",k*s).attr(M+"1",.5).attr(M+"2",.5)),T=T.merge(x.append("text").attr("fill","#000").attr(l,k*p).attr(M,.5).attr("dy",e===Lb?"0em":e===Db?".71em":".32em")),n!==v&&(b=b.transition(n),w=w.transition(n),C=C.transition(n),T=T.transition(n),S=S.transition(n).attr("opacity",Rb).attr("transform",function(e){return f(y,this.parentNode.__axis||y,e)}),x.attr("opacity",Rb).attr("transform",function(e){return f(this.parentNode.__axis||y,y,e)})),S.remove(),b.attr("d",e===jb||e==Nb?"M"+k*a+","+m+"H0.5V"+g+"H"+k*a:"M"+m+","+k*a+"V0.5H"+g+"V"+k*a),w.attr("opacity",1).attr("transform",function(e){return f(y,y,e)}),C.attr(l+"2",k*s),T.attr(l,k*p).text(d),v.filter(Hc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Nb?"start":e===jb?"end":"middle"),v.each(function(){this.__axis=y})}var i=[],r=null,o=null,s=6,a=6,c=3;return n.scale=function(e){return arguments.length?(t=e,n):t},n.ticks=function(){return i=Ib.call(arguments),n},n.tickArguments=function(e){return arguments.length?(i=null==e?[]:Ib.call(e),n):i.slice()},n.tickValues=function(e){return arguments.length?(r=null==e?null:Ib.call(e),n):r&&r.slice()},n.tickFormat=function(e){return arguments.length?(o=e,n):o},n.tickSize=function(e){return arguments.length?(s=a=+e,n):s},n.tickSizeInner=function(e){return arguments.length?(s=+e,n):s},n.tickSizeOuter=function(e){return arguments.length?(a=+e,n):a},n.tickPadding=function(e){return arguments.length?(c=+e,n):c},n}function Gc(e){return Wc(Lb,e)}function Kc(e){return Wc(Nb,e)}function Zc(e){return Wc(Db,e)}function Xc(e){return Wc(jb,e)}function Jc(e,t){return e.parent===t.parent?1:2}function Qc(e){return e.reduce(el,0)/e.length}function el(e,t){return e+t.x}function tl(e){return 1+e.reduce(nl,0)}function nl(e,t){return Math.max(e,t.y)}function il(e){for(var t;t=e.children;)e=t[0];return e}function rl(e){for(var t;t=e.children;)e=t[t.length-1];return e}function ol(){function e(e){var o,s=0;e.eachAfter(function(e){var n=e.children;n?(e.x=Qc(n),e.y=tl(n)):(e.x=o?s+=t(e,o):0,e.y=0,o=e)});var a=il(e),c=rl(e),l=a.x-t(a,c)/2,u=c.x+t(c,a)/2;return e.eachAfter(r?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*i}:function(t){t.x=(t.x-l)/(u-l)*n,t.y=(1-(e.y?t.y/e.y:1))*i})}var t=Jc,n=1,i=1,r=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(r=!1,n=+t[0],i=+t[1],e):r?null:[n,i]},e.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],i=+t[1],e):r?[n,i]:null},e}function sl(e){var t,n,i,r,o=this,s=[o];do for(t=s.reverse(),s=[];o=t.pop();)if(e(o),n=o.children)for(i=0,r=n.length;r>i;++i)s.push(n[i]);while(s.length);return this}function al(e){for(var t,n,i=this,r=[i];i=r.pop();)if(e(i),t=i.children)for(n=t.length-1;n>=0;--n)r.push(t[n]);return this}function cl(e){for(var t,n,i,r=this,o=[r],s=[];r=o.pop();)if(s.push(r),t=r.children)for(n=0,i=t.length;i>n;++n)o.push(t[n]);for(;r=s.pop();)e(r);return this}function ll(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function ul(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function dl(e){for(var t=this,n=pl(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function pl(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function fl(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function hl(){var e=[];return this.each(function(t){e.push(t)}),e}function ml(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function gl(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function yl(e,t){var n,i,r,o,s,a=new xl(e),c=+e.value&&(a.value=e.value),l=[a];for(null==t&&(t=bl);n=l.pop();)if(c&&(n.value=+n.data.value),(r=t(n.data))&&(s=r.length))for(n.children=new Array(s),o=s-1;o>=0;--o)l.push(i=n.children[o]=new xl(r[o])),i.parent=n,i.depth=n.depth+1;return a.eachBefore(Sl)}function vl(){return yl(this).eachBefore(wl)}function bl(e){return e.children}function wl(e){e.data=e.data.data}function Sl(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function xl(e){this.data=e,this.depth=this.height=0,this.parent=null}function Cl(e){this._=e,this.next=null}function Tl(e){for(var t,n=(e=e.slice()).length,i=null,r=i;n;){var o=new Cl(e[n-1]);r=r?r.next=o:i=o,e[t]=e[--n]}return{head:i,tail:r}}function kl(e){return Ol(Tl(e),[])}function Ml(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r-t.r;return r*r+1e-6>n*n+i*i}function Ol(e,t){var n,i,r,o=null,s=e.head;switch(t.length){case 1:n=$l(t[0]);break;case 2:n=_l(t[0],t[1]);break;case 3:n=Al(t[0],t[1],t[2])}for(;s;)r=s._,i=s.next,n&&Ml(n,r)?o=s:(o?(e.tail=o,o.next=null):e.head=e.tail=null,t.push(r),n=Ol(e,t),t.pop(),e.head?(s.next=e.head,e.head=s):(s.next=null,e.head=e.tail=s),o=e.tail,o.next=i),s=i;return e.tail=o,n}function $l(e){return{x:e.x,y:e.y,r:e.r}}function _l(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,s=t.y,a=t.r,c=o-n,l=s-i,u=a-r,d=Math.sqrt(c*c+l*l);return{x:(n+o+c/d*u)/2,y:(i+s+l/d*u)/2,r:(d+r+a)/2}}function Al(e,t,n){var i=e.x,r=e.y,o=e.r,s=t.x,a=t.y,c=t.r,l=n.x,u=n.y,d=n.r,p=2*(i-s),f=2*(r-a),h=2*(c-o),m=i*i+r*r-o*o-s*s-a*a+c*c,g=2*(i-l),y=2*(r-u),v=2*(d-o),b=i*i+r*r-o*o-l*l-u*u+d*d,w=g*f-p*y,S=(f*b-y*m)/w-i,x=(y*h-f*v)/w,C=(g*m-p*b)/w-r,T=(p*v-g*h)/w,k=x*x+T*T-1,M=2*(S*x+C*T+o),O=S*S+C*C-o*o,$=(-M-Math.sqrt(M*M-4*k*O))/(2*k);return{x:S+x*$+i,y:C+T*$+r,r:$}}function El(e,t,n){var i=e.x,r=e.y,o=t.r+n.r,s=e.r+n.r,a=t.x-i,c=t.y-r,l=a*a+c*c;if(l){var u=.5+((s*=s)-(o*=o))/(2*l),d=Math.sqrt(Math.max(0,2*o*(s+l)-(s-=l)*s-o*o))/(2*l);n.x=i+u*a+d*c,n.y=r+u*c-d*a}else n.x=i+s,n.y=r}function Il(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return r*r>n*n+i*i}function Ll(e,t,n){var i=e.x-t,r=e.y-n;return i*i+r*r}function Nl(e){this._=e,this.next=null,this.previous=null}function Dl(e){if(!(r=e.length))return 0;var t,n,i,r;if(t=e[0],t.x=0,t.y=0,!(r>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(r>2))return t.r+n.r;El(n,t,i=e[2]);var o,s,a,c,l,u,d,p=t.r*t.r,f=n.r*n.r,h=i.r*i.r,m=p+f+h,g=p*t.x+f*n.x+h*i.x,y=p*t.y+f*n.y+h*i.y;t=new Nl(t),n=new Nl(n),i=new Nl(i),t.next=i.previous=n,n.next=t.previous=i,i.next=n.previous=t;e:for(a=3;r>a;++a){if(El(t._,n._,i=e[a]),i=new Nl(i),(l=t.previous)===(c=n.next)){if(Il(c._,i._)){t=n,n=c,--a;continue e}}else{u=c._.r,d=l._.r;do if(d>=u){if(Il(c._,i._)){n=c,t.next=n,n.previous=t,--a;continue e}c=c.next,u+=c._.r}else{if(Il(l._,i._)){t=l,t.next=n,n.previous=t,--a;continue e}l=l.previous,d+=l._.r}while(c!==l.next)}for(i.previous=t,i.next=n,t.next=n.previous=n=i,m+=h=i._.r*i._.r,g+=h*i._.x,y+=h*i._.y,p=Ll(t._,o=g/m,s=y/m);(i=i.next)!==n;)(h=Ll(i._,o,s))<p&&(t=i,p=h);n=t.next}for(t=[n._],i=n;(i=i.next)!==n;)t.push(i._);for(i=kl(t),a=0;r>a;++a)t=e[a],t.x-=i.x,t.y-=i.y;return i.r}function jl(e){return Dl(e),e}function Rl(e){return null==e?null:Pl(e)}function Pl(e){if("function"!=typeof e)throw new Error;return e}function Ul(){return 0}function Fl(e){return function(){return e}}function Vl(e){return Math.sqrt(e.value)}function Bl(){function e(e){return e.x=n/2,e.y=i/2,t?e.eachBefore(ql(t)).eachAfter(Yl(r,.5)).eachBefore(zl(1)):e.eachBefore(ql(Vl)).eachAfter(Yl(Ul,1)).eachAfter(Yl(r,e.r/Math.min(n,i))).eachBefore(zl(Math.min(n,i)/(2*e.r))),e}var t=null,n=1,i=1,r=Ul;return e.radius=function(n){return arguments.length?(t=Rl(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.padding=function(t){return arguments.length?(r="function"==typeof t?t:Fl(+t),e):r},e}function ql(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Yl(e,t){return function(n){if(i=n.children){var i,r,o,s=i.length,a=e(n)*t||0;if(a)for(r=0;s>r;++r)i[r].r+=a;if(o=Dl(i),a)for(r=0;s>r;++r)i[r].r-=a;n.r=o+a}}}function zl(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Hl(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Wl(e,t,n,i,r){for(var o,s=e.children,a=-1,c=s.length,l=e.value&&(i-t)/e.value;++a<c;)o=s[a],o.y0=n,o.y1=r,o.x0=t,o.x1=t+=o.value*l}function Gl(){function e(e){var s=e.height+1;return e.x0=e.y0=r,e.x1=n,e.y1=i/s,e.eachBefore(t(i,s)),o&&e.eachBefore(Hl),e}function t(e,t){return function(n){n.children&&Wl(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var i=n.x0,o=n.y0,s=n.x1-r,a=n.y1-r;i>s&&(i=s=(i+s)/2),o>a&&(o=a=(o+a)/2),n.x0=i,n.y0=o,n.x1=s,n.y1=a}}var n=1,i=1,r=0,o=!1;return e.round=function(t){return arguments.length?(o=!!t,e):o},e.size=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.padding=function(t){return arguments.length?(r=+t,e):r},e}function Kl(e){return e.id}function Zl(e){return e.parentId}function Xl(){function e(e){var i,r,o,s,a,c,l,u=e.length,d=new Array(u),p={};for(r=0;u>r;++r)i=e[r],a=d[r]=new xl(i),null!=(c=t(i,r,e))&&(c+="")&&(l=Pb+(a.id=c),p[l]=l in p?Fb:a);for(r=0;u>r;++r)if(a=d[r],c=n(e[r],r,e),null!=c&&(c+="")){if(s=p[Pb+c],!s)throw new Error("missing: "+c);if(s===Fb)throw new Error("ambiguous: "+c);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=Ub,o.eachBefore(function(e){e.depth=e.parent.depth+1,--u}).eachBefore(Sl),o.parent=null,u>0)throw new Error("cycle");return o}var t=Kl,n=Zl;return e.id=function(n){return arguments.length?(t=Pl(n),e):t},e.parentId=function(t){return arguments.length?(n=Pl(t),e):n},e}function Jl(e,t){return e.parent===t.parent?1:2}function Ql(e){var t=e.children;return t?t[0]:e.t}function eu(e){var t=e.children;return t?t[t.length-1]:e.t}function tu(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function nu(e){for(var t,n=0,i=0,r=e.children,o=r.length;--o>=0;)t=r[o],t.z+=n,t.m+=n,n+=t.s+(i+=t.c)}function iu(e,t,n){return e.a.parent===t.parent?e.a:n}function ru(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function ou(e){for(var t,n,i,r,o,s=new ru(e,0),a=[s];t=a.pop();)if(i=t._.children)for(t.children=new Array(o=i.length),r=o-1;r>=0;--r)a.push(n=t.children[r]=new ru(i[r],r)),n.parent=t;return(s.parent=new ru(null,0)).children=[s],s}function su(){function e(e){var i=ou(e);if(i.eachAfter(t),i.parent.m=-i.z,i.eachBefore(n),c)e.eachBefore(r);else{var l=e,u=e,d=e;e.eachBefore(function(e){e.x<l.x&&(l=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)});var p=l===u?1:o(l,u)/2,f=p-l.x,h=s/(u.x+p+f),m=a/(d.depth||1);e.eachBefore(function(e){e.x=(e.x+f)*h,e.y=e.depth*m})}return e}function t(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t){nu(e);var s=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+o(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+o(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var i,r=e,s=e,a=t,c=r.parent.children[0],l=r.m,u=s.m,d=a.m,p=c.m;a=eu(a),r=Ql(r),a&&r;)c=Ql(c),s=eu(s),s.a=e,i=a.z+d-r.z-l+o(a._,r._),i>0&&(tu(iu(a,e,n),e,i),l+=i,u+=i),d+=a.m,l+=r.m,p+=c.m,u+=s.m;a&&!eu(s)&&(s.t=a,s.m+=d-u),r&&!Ql(c)&&(c.t=r,c.m+=l-p,n=e)}return n}function r(e){e.x*=s,e.y=e.depth*a}var o=Jl,s=1,a=1,c=null;return e.separation=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(c=!1,s=+t[0],a=+t[1],e):c?null:[s,a]},e.nodeSize=function(t){return arguments.length?(c=!0,s=+t[0],a=+t[1],e):c?[s,a]:null},e}function au(e,t,n,i,r){for(var o,s=e.children,a=-1,c=s.length,l=e.value&&(r-n)/e.value;++a<c;)o=s[a],o.x0=t,o.x1=i,o.y0=n,o.y1=n+=o.value*l}function cu(e,t,n,i,r,o){for(var s,a,c,l,u,d,p,f,h,m,g,y,v=[],b=t.children,w=0,S=b.length,x=t.value;S>w;){for(l=r-n,u=o-i,p=f=d=b[w].value,g=Math.max(u/l,l/u)/(x*e),y=d*d*g,m=Math.max(f/y,y/p),c=w+1;S>c;++c){if(d+=a=b[c].value,p>a&&(p=a),a>f&&(f=a),y=d*d*g,h=Math.max(f/y,y/p),h>m){d-=a;break}m=h}v.push(s={value:d,dice:u>l,children:b.slice(w,c)}),s.dice?Wl(s,n,i,r,x?i+=u*d/x:o):au(s,n,i,x?n+=l*d/x:r,o),x-=d,w=c}return v}function lu(){function e(e){return e.x0=e.y0=0,e.x1=r,e.y1=o,e.eachBefore(t),s=[0],i&&e.eachBefore(Hl),e}function t(e){var t=s[e.depth],i=e.x0+t,r=e.y0+t,o=e.x1-t,p=e.y1-t;i>o&&(i=o=(i+o)/2),r>p&&(r=p=(r+p)/2),e.x0=i,e.y0=r,e.x1=o,e.y1=p,e.children&&(t=s[e.depth+1]=a(e)/2,i+=d(e)-t,r+=c(e)-t,o-=l(e)-t,p-=u(e)-t,i>o&&(i=o=(i+o)/2),r>p&&(r=p=(r+p)/2),n(e,i,r,o,p))}var n=Bb,i=!1,r=1,o=1,s=[0],a=Ul,c=Ul,l=Ul,u=Ul,d=Ul;return e.round=function(t){return arguments.length?(i=!!t,e):i},e.size=function(t){return arguments.length?(r=+t[0],o=+t[1],e):[r,o]},e.tile=function(t){return arguments.length?(n=Pl(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:Fl(+t),e):a},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(c="function"==typeof t?t:Fl(+t),e):c},e.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:Fl(+t),e):l},e.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Fl(+t),e):u},e.paddingLeft=function(t){return arguments.length?(d="function"==typeof t?t:Fl(+t),e):d},e}function uu(e,t,n,i,r){function o(e,t,n,i,r,s,a){if(e>=t-1){var l=c[e];return l.x0=i,l.y0=r,l.x1=s,void(l.y1=a)}for(var d=u[e],p=n/2+d,f=e+1,h=t-1;h>f;){var m=f+h>>>1;u[m]<p?f=m+1:h=m}var g=u[f]-d,y=n-g;if(a-r>s-i){var v=(r*y+a*g)/n;o(e,f,g,i,r,s,v),o(f,t,y,i,v,s,a)}else{var b=(i*y+s*g)/n;o(e,f,g,i,r,b,a),o(f,t,y,b,r,s,a)}}var s,a,c=e.children,l=c.length,u=new Array(l+1);for(u[0]=a=s=0;l>s;++s)u[s+1]=a+=c[s].value;o(0,l,e.value,t,n,i,r)}function du(e,t,n,i,r){(1&e.depth?au:Wl)(e,t,n,i,r)}function pu(e,t){function n(){var n,r,o=i.length,s=0,a=0;for(n=0;o>n;++n)r=i[n],s+=r.x,a+=r.y;for(s=s/o-e,a=a/o-t,n=0;o>n;++n)r=i[n],r.x-=s,r.y-=a}var i;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){i=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n}function fu(e){return function(){return e}}function hu(){return 1e-6*(Math.random()-.5)}function mu(e){return e.x+e.vx}function gu(e){return e.y+e.vy}function yu(e){function t(){function e(e,n,i,r,s){var a=e.data,f=e.r,h=d+f;if(!a)return n>l+h||l-h>r||i>u+h||u-h>s;if(a.index>t){var m=l-a.x-a.vx,g=u-a.y-a.vy,y=m*m+g*g;h*h>y&&(0===m&&(m=hu(),y+=m*m),0===g&&(g=hu(),y+=g*g),y=(h-(y=Math.sqrt(y)))/y*o,c.vx+=(m*=y)*(h=(f*=f)/(p+f)),c.vy+=(g*=y)*h,a.vx-=m*(h=1-h),a.vy-=g*h)}}for(var t,a,c,l,u,d,p,f=i.length,h=0;s>h;++h)for(a=qe(i,mu,gu).visitAfter(n),t=0;f>t;++t)c=i[t],d=r[t],p=d*d,l=c.x+c.vx,u=c.y+c.vy,a.visit(e)}function n(e){if(e.data)return e.r=r[e.data.index];for(var t=e.r=0;4>t;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}var i,r,o=1,s=1;return"function"!=typeof e&&(e=fu(null==e?1:+e)),t.initialize=function(t){var n,o=(i=t).length;for(r=new Array(o),n=0;o>n;++n)r[n]=+e(i[n],n,i)},t.iterations=function(e){return arguments.length?(s=+e,t):s},t.strength=function(e){return arguments.length?(o=+e,t):o},t.radius=function(n){return arguments.length?(e="function"==typeof n?n:fu(+n),t):e},t}function vu(e,t){return t}function bu(e){function t(e){return 1/Math.min(l[e.source.index],l[e.target.index])}function n(t){for(var n=0,i=e.length;h>n;++n)for(var r,o,c,l,d,p,f,m=0;i>m;++m)r=e[m],o=r.source,c=r.target,l=c.x+c.vx-o.x-o.vx||hu(),d=c.y+c.vy-o.y-o.vy||hu(),p=Math.sqrt(l*l+d*d),p=(p-a[m])/p*t*s[m],l*=p,d*=p,c.vx-=l*(f=u[m]),c.vy-=d*f,o.vx+=l*(f=1-f),o.vy+=d*f}function i(){if(c){var t,n,i=c.length,p=e.length,f=L(c,d);for(t=0,l=new Array(i);i>t;++t)l[t]=0;for(t=0;p>t;++t)n=e[t],n.index=t,"object"!=typeof n.source&&(n.source=f.get(n.source)),"object"!=typeof n.target&&(n.target=f.get(n.target)),++l[n.source.index],++l[n.target.index];for(t=0,u=new Array(p);p>t;++t)n=e[t],u[t]=l[n.source.index]/(l[n.source.index]+l[n.target.index]);s=new Array(p),r(),a=new Array(p),o()}}function r(){if(c)for(var t=0,n=e.length;n>t;++t)s[t]=+p(e[t],t,e)}function o(){if(c)for(var t=0,n=e.length;n>t;++t)a[t]=+f(e[t],t,e)}var s,a,c,l,u,d=vu,p=t,f=fu(30),h=1;return null==e&&(e=[]),n.initialize=function(e){c=e,i()},n.links=function(t){return arguments.length?(e=t,i(),n):e},n.id=function(e){return arguments.length?(d=e,n):d},n.iterations=function(e){return arguments.length?(h=+e,n):h},n.strength=function(e){return arguments.length?(p="function"==typeof e?e:fu(+e),r(),n):p},n.distance=function(e){return arguments.length?(f="function"==typeof e?e:fu(+e),o(),n):f},n}function wu(e){return e.x}function Su(e){return e.y}function xu(e){function t(){n(),f.call("tick",o),a>s&&(p.stop(),f.call("end",o))}function n(){var t,n,i=e.length;for(s+=(l-s)*c,d.each(function(e){e(s)}),t=0;i>t;++t)n=e[t],null==n.fx?n.x+=n.vx*=u:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=u:(n.y=n.fy,n.vy=0)}function i(){for(var t,n=0,i=e.length;i>n;++n){if(t=e[n],t.index=n,isNaN(t.x)||isNaN(t.y)){var r=Yb*Math.sqrt(n),o=n*zb;t.x=r*Math.cos(o),t.y=r*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function r(t){return t.initialize&&t.initialize(e),t}var o,s=1,a=.001,c=1-Math.pow(a,1/300),l=0,u=.6,d=L(),p=Vi(t),f=Ci("tick","end");return null==e&&(e=[]),i(),o={tick:n,restart:function(){return p.restart(t),o},stop:function(){return p.stop(),o},nodes:function(t){return arguments.length?(e=t,i(),d.each(r),o):e},alpha:function(e){return arguments.length?(s=+e,o):s},alphaMin:function(e){return arguments.length?(a=+e,o):a},alphaDecay:function(e){return arguments.length?(c=+e,o):+c},alphaTarget:function(e){return arguments.length?(l=+e,o):l},velocityDecay:function(e){return arguments.length?(u=1-e,o):1-u},force:function(e,t){return arguments.length>1?(null==t?d.remove(e):d.set(e,r(t)),o):d.get(e)},find:function(t,n,i){var r,o,s,a,c,l=0,u=e.length;for(null==i?i=1/0:i*=i,l=0;u>l;++l)a=e[l],r=t-a.x,o=n-a.y,s=r*r+o*o,i>s&&(c=a,i=s);return c},on:function(e,t){return arguments.length>1?(f.on(e,t),o):f.on(e)}}}function Cu(){function e(e){var t,a=r.length,c=qe(r,wu,Su).visitAfter(n);for(s=e,t=0;a>t;++t)o=r[t],c.visit(i)}function t(){if(r){var e,t=r.length;for(a=new Array(t),e=0;t>e;++e)a[e]=+c(r[e],e,r)}}function n(e){var t,n,i,r,o,s=0;if(e.length){for(i=r=o=0;4>o;++o)(t=e[o])&&(n=t.value)&&(s+=n,i+=n*t.x,r+=n*t.y);e.x=i/s,e.y=r/s}else{t=e,t.x=t.data.x,t.y=t.data.y;do s+=a[t.data.index];while(t=t.next)}e.value=s}function i(e,t,n,i){if(!e.value)return!0;var r=e.x-o.x,c=e.y-o.y,p=i-t,f=r*r+c*c;if(f>p*p/d)return u>f&&(0===r&&(r=hu(),f+=r*r),0===c&&(c=hu(),f+=c*c),l>f&&(f=Math.sqrt(l*f)),o.vx+=r*e.value*s/f,o.vy+=c*e.value*s/f),!0;if(!(e.length||f>=u)){(e.data!==o||e.next)&&(0===r&&(r=hu(),f+=r*r),0===c&&(c=hu(),f+=c*c),l>f&&(f=Math.sqrt(l*f)));do e.data!==o&&(p=a[e.data.index]*s/f,o.vx+=r*p,o.vy+=c*p);while(e=e.next)}}var r,o,s,a,c=fu(-30),l=1,u=1/0,d=.81;return e.initialize=function(e){r=e,t()},e.strength=function(n){return arguments.length?(c="function"==typeof n?n:fu(+n),t(),e):c},e.distanceMin=function(t){return arguments.length?(l=t*t,e):Math.sqrt(l)},e.distanceMax=function(t){return arguments.length?(u=t*t,e):Math.sqrt(u)},e.theta=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e}function Tu(e){function t(e){for(var t,n=0,s=i.length;s>n;++n)t=i[n],t.vx+=(o[n]-t.x)*r[n]*e}function n(){if(i){var t,n=i.length;for(r=new Array(n),o=new Array(n),t=0;n>t;++t)r[t]=isNaN(o[t]=+e(i[t],t,i))?0:+s(i[t],t,i)}}var i,r,o,s=fu(.1);return"function"!=typeof e&&(e=fu(null==e?0:+e)),t.initialize=function(e){i=e,n()},t.strength=function(e){return arguments.length?(s="function"==typeof e?e:fu(+e),n(),t):s},t.x=function(i){return arguments.length?(e="function"==typeof i?i:fu(+i),n(),t):e},t}function ku(e){function t(e){for(var t,n=0,s=i.length;s>n;++n)t=i[n],t.vy+=(o[n]-t.y)*r[n]*e}function n(){if(i){var t,n=i.length;for(r=new Array(n),o=new Array(n),t=0;n>t;++t)r[t]=isNaN(o[t]=+e(i[t],t,i))?0:+s(i[t],t,i)}}var i,r,o,s=fu(.1);return"function"!=typeof e&&(e=fu(null==e?0:+e)),t.initialize=function(e){i=e,n()},t.strength=function(e){return arguments.length?(s="function"==typeof e?e:fu(+e),n(),t):s},t.y=function(i){return arguments.length?(e="function"==typeof i?i:fu(+i),n(),t):e},t}function Mu(){e.event.stopImmediatePropagation()}function Ou(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function $u(e){var t=e.document.documentElement,n=Da(e).on("dragstart.drag",Ou,!0);"onselectstart"in t?n.on("selectstart.drag",Ou,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _u(e,t){var n=e.document.documentElement,i=Da(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ou,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Au(e){return function(){return e}}function Eu(e,t,n,i,r,o,s,a,c,l){this.target=e,this.type=t,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=s,this.dx=a,this.dy=c,this._=l}function Iu(){return!e.event.button}function Lu(){return this.parentNode}function Nu(t){return null==t?{x:e.event.x,y:e.event.y}:t}function Du(){function t(e){e.on("mousedown.drag",n).on("touchstart.drag",o).on("touchmove.drag",s).on("touchend.drag touchcancel.drag",a).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!u&&d.apply(this,arguments)){var t=c("mouse",p.apply(this,arguments),hs,this,arguments);t&&(Da(e.event.view).on("mousemove.drag",i,!0).on("mouseup.drag",r,!0),$u(e.event.view),Mu(),l=!1,t("start"))}}function i(){Ou(),l=!0,h.mouse("drag")}function r(){Da(e.event.view).on("mousemove.drag mouseup.drag",null),_u(e.event.view,l),Ou(),h.mouse("end")}function o(){if(d.apply(this,arguments)){var t,n,i=e.event.changedTouches,r=p.apply(this,arguments),o=i.length;for(t=0;o>t;++t)(n=c(i[t].identifier,r,Ra,this,arguments))&&(Mu(),n("start"))}}function s(){var t,n,i=e.event.changedTouches,r=i.length;for(t=0;r>t;++t)(n=h[i[t].identifier])&&(Ou(),n("drag"))}function a(){var t,n,i=e.event.changedTouches,r=i.length;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),t=0;r>t;++t)(n=h[i[t].identifier])&&(Mu(),n("end"))}function c(n,i,r,o,s){var a,c,l,u=r(i,n),d=m.copy();return ds(new Eu(t,"beforestart",a,n,g,u[0],u[1],0,0,d),function(){return null!=(e.event.subject=a=f.apply(o,s))&&(c=a.x-u[0]||0,l=a.y-u[1]||0,!0)})?function p(e){var f,m=u;switch(e){case"start":h[n]=p,f=g++;break;case"end":delete h[n],--g;case"drag":u=r(i,n),f=g}ds(new Eu(t,e,a,n,f,u[0]+c,u[1]+l,u[0]-m[0],u[1]-m[1],d),d.apply,d,[e,o,s])}:void 0}var l,u,d=Iu,p=Lu,f=Nu,h={},m=Ci("start","drag","end"),g=0;return t.filter=function(e){return arguments.length?(d="function"==typeof e?e:Au(!!e),t):d},t.container=function(e){return arguments.length?(p="function"==typeof e?e:Au(e),t):p},t.subject=function(e){return arguments.length?(f="function"==typeof e?e:Au(e),t):f},t.on=function(){var e=m.on.apply(m,arguments);return e===m?t:e},t}function ju(e){return function(){return e}}function Ru(e){return e[0]}function Pu(e){return e[1]}function Uu(){this._=null}function Fu(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Vu(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Bu(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function qu(e){for(;e.L;)e=e.L;return e}function Yu(e,t,n,i){var r=[null,null],o=Zb.push(r)-1;return r.left=e,r.right=t,n&&Hu(r,e,t,n),i&&Hu(r,t,e,i),Gb[e.index].halfedges.push(o),Gb[t.index].halfedges.push(o),r}function zu(e,t,n){var i=[t,n];return i.left=e,i}function Hu(e,t,n,i){e[0]||e[1]?e.left===n?e[1]=i:e[0]=i:(e[0]=i,e.left=t,e.right=n)}function Wu(e,t,n,i,r){var o,s=e[0],a=e[1],c=s[0],l=s[1],u=a[0],d=a[1],p=0,f=1,h=u-c,m=d-l;if(o=t-c,h||!(o>0)){if(o/=h,0>h){if(p>o)return;f>o&&(f=o)}else if(h>0){if(o>f)return;o>p&&(p=o)}if(o=i-c,h||!(0>o)){if(o/=h,0>h){if(o>f)return;o>p&&(p=o)}else if(h>0){if(p>o)return;f>o&&(f=o)}if(o=n-l,m||!(o>0)){if(o/=m,0>m){if(p>o)return;f>o&&(f=o)}else if(m>0){if(o>f)return;o>p&&(p=o)}if(o=r-l,m||!(0>o)){if(o/=m,0>m){if(o>f)return;o>p&&(p=o)}else if(m>0){if(p>o)return;f>o&&(f=o)}return!(p>0||1>f)||(p>0&&(e[0]=[c+p*h,l+p*m]),1>f&&(e[1]=[c+f*h,l+f*m]),!0)}}}}}function Gu(e,t,n,i,r){var o=e[1];if(o)return!0;var s,a,c=e[0],l=e.left,u=e.right,d=l[0],p=l[1],f=u[0],h=u[1],m=(d+f)/2,g=(p+h)/2;if(h===p){if(t>m||m>=i)return;if(d>f){if(c){if(c[1]>=r)return}else c=[m,n];o=[m,r]}else{if(c){if(c[1]<n)return}else c=[m,r];o=[m,n]}}else if(s=(d-f)/(h-p),a=g-s*m,-1>s||s>1)if(d>f){if(c){if(c[1]>=r)return}else c=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(c){if(c[1]<n)return}else c=[(r-a)/s,r];o=[(n-a)/s,n]}else if(h>p){if(c){if(c[0]>=i)return}else c=[t,s*t+a];o=[i,s*i+a]}else{if(c){if(c[0]<t)return}else c=[i,s*i+a];o=[t,s*t+a]}return e[0]=c,e[1]=o,!0}function Ku(e,t,n,i){for(var r,o=Zb.length;o--;)Gu(r=Zb[o],e,t,n,i)&&Wu(r,e,t,n,i)&&(Math.abs(r[0][0]-r[1][0])>Qb||Math.abs(r[0][1]-r[1][1])>Qb)||delete Zb[o]}function Zu(e){return Gb[e.index]={site:e,halfedges:[]}}function Xu(e,t){var n=e.site,i=t.left,r=t.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Ju(e,t){return t[+(t.left!==e.site)]}function Qu(e,t){return t[+(t.left===e.site)]}function ed(){for(var e,t,n,i,r=0,o=Gb.length;o>r;++r)if((e=Gb[r])&&(i=(t=e.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;i>n;++n)s[n]=n,a[n]=Xu(e,Zb[t[n]]);for(s.sort(function(e,t){return a[t]-a[e]}),n=0;i>n;++n)a[n]=t[s[n]];for(n=0;i>n;++n)t[n]=a[n]}}function td(e,t,n,i){var r,o,s,a,c,l,u,d,p,f,h,m,g=Gb.length,y=!0;for(r=0;g>r;++r)if(o=Gb[r]){for(s=o.site,c=o.halfedges,a=c.length;a--;)Zb[c[a]]||c.splice(a,1);for(a=0,l=c.length;l>a;)f=Qu(o,Zb[c[a]]),h=f[0],m=f[1],u=Ju(o,Zb[c[++a%l]]),d=u[0],p=u[1],(Math.abs(h-d)>Qb||Math.abs(m-p)>Qb)&&(c.splice(a,0,Zb.push(zu(s,f,Math.abs(h-e)<Qb&&i-m>Qb?[e,Math.abs(d-e)<Qb?p:i]:Math.abs(m-i)<Qb&&n-h>Qb?[Math.abs(p-i)<Qb?d:n,i]:Math.abs(h-n)<Qb&&m-t>Qb?[n,Math.abs(d-n)<Qb?p:t]:Math.abs(m-t)<Qb&&h-e>Qb?[Math.abs(p-t)<Qb?d:e,t]:null))-1),++l);l&&(y=!1)}if(y){var v,b,w,S=1/0;for(r=0,y=null;g>r;++r)(o=Gb[r])&&(s=o.site,v=s[0]-e,b=s[1]-t,w=v*v+b*b,S>w&&(S=w,y=o));if(y){var x=[e,t],C=[e,i],T=[n,i],k=[n,t];y.halfedges.push(Zb.push(zu(s=y.site,x,C))-1,Zb.push(zu(s,C,T))-1,Zb.push(zu(s,T,k))-1,Zb.push(zu(s,k,x))-1)}}for(r=0;g>r;++r)(o=Gb[r])&&(o.halfedges.length||delete Gb[r])}function nd(){Fu(this),this.x=this.y=this.arc=this.site=this.cy=null}function id(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,o=n.site;if(i!==o){var s=r[0],a=r[1],c=i[0]-s,l=i[1]-a,u=o[0]-s,d=o[1]-a,p=2*(c*d-l*u);if(!(p>=-ew)){var f=c*c+l*l,h=u*u+d*d,m=(d*f-l*h)/p,g=(c*h-u*f)/p,y=Xb.pop()||new nd;y.arc=e,y.site=r,y.x=m+s,y.y=(y.cy=g+a)+Math.sqrt(m*m+g*g),e.circle=y;for(var v=null,b=Kb._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){v=b.P;break}b=b.L}else{if(!b.R){v=b;break}b=b.R}Kb.insert(v,y),v||(Hb=y)}}}}function rd(e){var t=e.circle;t&&(t.P||(Hb=t.N),Kb.remove(t),Xb.push(t),Fu(t),e.circle=null)}function od(){Fu(this),this.edge=this.site=this.circle=null}function sd(e){var t=Jb.pop()||new od;return t.site=e,t}function ad(e){rd(e),Wb.remove(e),Jb.push(e),Fu(e)}function cd(e){var t=e.circle,n=t.x,i=t.cy,r=[n,i],o=e.P,s=e.N,a=[e];ad(e);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<Qb&&Math.abs(i-c.circle.cy)<Qb;)o=c.P,a.unshift(c),ad(c),c=o;a.unshift(c),rd(c);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Qb&&Math.abs(i-l.circle.cy)<Qb;)s=l.N,a.push(l),ad(l),l=s;a.push(l),rd(l);var u,d=a.length;for(u=1;d>u;++u)l=a[u],c=a[u-1],Hu(l.edge,c.site,l.site,r);c=a[0],l=a[d-1],l.edge=Yu(c.site,l.site,null,r),id(c),id(l)}function ld(e){for(var t,n,i,r,o=e[0],s=e[1],a=Wb._;a;)if(i=ud(a,s)-o,i>Qb)a=a.L;else{if(r=o-dd(a,s),!(r>Qb)){i>-Qb?(t=a.P,n=a):r>-Qb?(t=a,n=a.N):t=n=a;break}if(!a.R){t=a;break}a=a.R}Zu(e);var c=sd(e);if(Wb.insert(t,c),t||n){if(t===n)return rd(t),n=sd(t.site),Wb.insert(c,n),c.edge=n.edge=Yu(t.site,c.site),id(t),void id(n);if(!n)return void(c.edge=Yu(t.site,c.site));rd(t),rd(n);var l=t.site,u=l[0],d=l[1],p=e[0]-u,f=e[1]-d,h=n.site,m=h[0]-u,g=h[1]-d,y=2*(p*g-f*m),v=p*p+f*f,b=m*m+g*g,w=[(g*v-f*b)/y+u,(p*b-m*v)/y+d];Hu(n.edge,l,h,w),c.edge=Yu(l,e,null,w),n.edge=Yu(e,h,null,w),id(t),id(n)}}function ud(e,t){var n=e.site,i=n[0],r=n[1],o=r-t;if(!o)return i;var s=e.P;if(!s)return-(1/0);n=s.site;var a=n[0],c=n[1],l=c-t;if(!l)return a;var u=a-i,d=1/o-1/l,p=u/l;return d?(-p+Math.sqrt(p*p-2*d*(u*u/(-2*l)-c+l/2+r-o/2)))/d+i:(i+a)/2}function dd(e,t){var n=e.N;if(n)return ud(n,t);var i=e.site;return i[1]===t?i[0]:1/0}function pd(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function fd(e,t){return t[1]-e[1]||t[0]-e[0]}function hd(e,t){var n,i,r,o=e.sort(fd).pop();for(Zb=[],Gb=new Array(e.length),Wb=new Uu,Kb=new Uu;;)if(r=Hb,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(ld(o),n=o[0],i=o[1]),o=e.pop();else{if(!r)break;cd(r.arc)}if(ed(),t){var s=+t[0][0],a=+t[0][1],c=+t[1][0],l=+t[1][1];Ku(s,a,c,l),td(s,a,c,l)}this.edges=Zb,this.cells=Gb,Wb=Kb=Zb=Gb=null}function md(){function e(e){return new hd(e.map(function(i,r){var o=[Math.round(t(i,r,e)/Qb)*Qb,Math.round(n(i,r,e)/Qb)*Qb];return o.index=r,o.data=i,o}),i)}var t=Ru,n=Pu,i=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:ju(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:ju(+t),e):n},e.extent=function(t){return arguments.length?(i=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},e.size=function(t){return arguments.length?(i=null==t?null:[[0,0],[+t[0],+t[1]]],e):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},e}function gd(e){return function(){return e}}function yd(e,t,n){this.target=e,this.type=t,this.transform=n}function vd(e,t,n){this.k=e,this.x=t,this.y=n}function bd(e){return e.__zoom||tw}function wd(){e.event.stopImmediatePropagation()}function Sd(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function xd(){return!e.event.button}function Cd(){var e,t,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,e=n.width.baseVal.value,t=n.height.baseVal.value):(e=n.clientWidth,t=n.clientHeight),[[0,0],[e,t]]}function Td(){return this.__zoom||tw}function kd(){function t(e){e.on("wheel.zoom",l).on("mousedown.zoom",u).on("dblclick.zoom",d).on("touchstart.zoom",p).on("touchmove.zoom",f).on("touchend.zoom touchcancel.zoom",h).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",Td)}function n(e,t){return t=Math.max(b,Math.min(w,t)),t===e.k?e:new vd(t,e.x,e.y)}function i(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;
return i===e.x&&r===e.y?e:new vd(e.k,i,r)}function r(e,t){var n=Math.min(0,e.invertX(t[0][0])-S)||Math.max(0,e.invertX(t[1][0])-x),i=Math.min(0,e.invertY(t[0][1])-C)||Math.max(0,e.invertY(t[1][1])-T);return n||i?e.translate(n,i):e}function o(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function s(e,t,n){e.on("start.zoom",function(){a(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){a(this,arguments).end()}).tween("zoom",function(){var e=this,i=arguments,r=a(e,i),s=v.apply(e,i),c=n||o(s),l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,d="function"==typeof t?t.apply(e,i):t,p=yi(u.invert(c).concat(l/u.k),d.invert(c).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=p(e),n=l/t[2];e=new vd(n,c[0]-t[0]*n,c[1]-t[1]*n)}r.zoom(null,e)}})}function a(e,t){for(var n,i=0,r=M.length;r>i;++i)if((n=M[i]).that===e)return n;return new c(e,t)}function c(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=v.apply(e,t)}function l(){function t(){o.wheel=null,o.end()}if(y.apply(this,arguments)){var o=a(this,arguments),s=this.__zoom,c=Math.max(b,Math.min(w,s.k*Math.pow(2,-e.event.deltaY*(e.event.deltaMode?120:1)/500))),l=hs(this);if(o.wheel)o.mouse[0][0]===l[0]&&o.mouse[0][1]===l[1]||(o.mouse[1]=s.invert(o.mouse[0]=l)),clearTimeout(o.wheel);else{if(s.k===c)return;o.mouse=[l,s.invert(l)],Ya(this),o.start()}Sd(),o.wheel=setTimeout(t,_),o.zoom("mouse",r(i(n(s,c),o.mouse[0],o.mouse[1]),o.extent))}}function u(){function t(){Sd(),o.moved=!0,o.zoom("mouse",r(i(o.that.__zoom,o.mouse[0]=hs(o.that),o.mouse[1]),o.extent))}function n(){s.on("mousemove.zoom mouseup.zoom",null),_u(e.event.view,o.moved),Sd(),o.end()}if(!g&&y.apply(this,arguments)){var o=a(this,arguments),s=Da(e.event.view).on("mousemove.zoom",t,!0).on("mouseup.zoom",n,!0),c=hs(this);$u(e.event.view),wd(),o.mouse=[c,this.__zoom.invert(c)],Ya(this),o.start()}}function d(){if(y.apply(this,arguments)){var o=this.__zoom,a=hs(this),c=o.invert(a),l=o.k*(e.event.shiftKey?.5:2),u=r(i(n(o,l),a,c),v.apply(this,arguments));Sd(),k>0?Da(this).transition().duration(k).call(s,u,a):Da(this).call(t.transform,u)}}function p(){if(y.apply(this,arguments)){var t,n,i,r=a(this,arguments),o=e.event.changedTouches,s=o.length;for(wd(),t=0;s>t;++t)n=o[t],i=Ra(this,o,n.identifier),i=[i,this.__zoom.invert(i),n.identifier],r.touch0?r.touch1||(r.touch1=i):r.touch0=i;return m&&(m=clearTimeout(m),!r.touch1)?(r.end(),d.apply(this,arguments)):void(e.event.touches.length===s&&(m=setTimeout(function(){m=null},$),Ya(this),r.start()))}}function f(){var t,o,s,c,l=a(this,arguments),u=e.event.changedTouches,d=u.length;for(Sd(),m&&(m=clearTimeout(m)),t=0;d>t;++t)o=u[t],s=Ra(this,u,o.identifier),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=s:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=s);if(o=l.that.__zoom,l.touch1){var p=l.touch0[0],f=l.touch0[1],h=l.touch1[0],g=l.touch1[1],y=(y=h[0]-p[0])*y+(y=h[1]-p[1])*y,v=(v=g[0]-f[0])*v+(v=g[1]-f[1])*v;o=n(o,Math.sqrt(y/v)),s=[(p[0]+h[0])/2,(p[1]+h[1])/2],c=[(f[0]+g[0])/2,(f[1]+g[1])/2]}else{if(!l.touch0)return;s=l.touch0[0],c=l.touch0[1]}l.zoom("touch",r(i(o,s,c),l.extent))}function h(){var t,n,i=a(this,arguments),r=e.event.changedTouches,o=r.length;for(wd(),g&&clearTimeout(g),g=setTimeout(function(){g=null},$),t=0;o>t;++t)n=r[t],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0||i.end()}var m,g,y=xd,v=Cd,b=0,w=1/0,S=-w,x=w,C=S,T=x,k=250,M=[],O=Ci("start","zoom","end"),$=500,_=150;return t.transform=function(e,t){var n=e.selection?e.selection():e;n.property("__zoom",Td),e!==n?s(e,t):n.interrupt().each(function(){a(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},t.scaleBy=function(e,n){t.scaleTo(e,function(){var e=this.__zoom.k,t="function"==typeof n?n.apply(this,arguments):n;return e*t})},t.scaleTo=function(e,s){t.transform(e,function(){var e=v.apply(this,arguments),t=this.__zoom,a=o(e),c=t.invert(a),l="function"==typeof s?s.apply(this,arguments):s;return r(i(n(t,l),a,c),e)})},t.translateBy=function(e,n,i){t.transform(e,function(){return r(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof i?i.apply(this,arguments):i),v.apply(this,arguments))})},c.prototype={start:function(){return 1===++this.active&&(this.index=M.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(M.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){ds(new yd(t,e,this.that.__zoom),O.apply,O,[e,this.that,this.args])}},t.filter=function(e){return arguments.length?(y="function"==typeof e?e:gd(!!e),t):y},t.extent=function(e){return arguments.length?(v="function"==typeof e?e:gd([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):v},t.scaleExtent=function(e){return arguments.length?(b=+e[0],w=+e[1],t):[b,w]},t.translateExtent=function(e){return arguments.length?(S=+e[0][0],x=+e[1][0],C=+e[0][1],T=+e[1][1],t):[[S,C],[x,T]]},t.duration=function(e){return arguments.length?(k=+e,t):k},t.on=function(){var e=O.on.apply(O,arguments);return e===O?t:e},t}function Md(e){return function(){return e}}function Od(e,t,n){this.target=e,this.type=t,this.selection=n}function $d(){e.event.stopImmediatePropagation()}function _d(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function Ad(e){return{type:e}}function Ed(){return!e.event.button}function Id(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ld(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Nd(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Dd(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function jd(){return Ud(sw)}function Rd(){return Ud(aw)}function Pd(){return Ud(cw)}function Ud(t){function n(e){var n=e.property("__brush",a).selectAll(".overlay").data([Ad("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",lw.overlay).merge(n).each(function(){var e=Ld(this).extent;Da(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([Ad("selection")]).enter().append("rect").attr("class","selection").attr("cursor",lw.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(e){return e.type});r.exit().remove(),r.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return lw[e.type]}),e.each(i).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",s)}function i(){var e=Da(this),t=Ld(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-p/2:t[0][0]-p/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-p/2:t[0][1]-p/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+p:p}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+p:p})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function r(e,t){return e.__brush.emitter||new o(e,t)}function o(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function s(){function n(){var e=hs(T);!j||x||C||(Math.abs(e[0]-P[0])>Math.abs(e[1]-P[1])?C=!0:x=!0),P=e,S=!0,_d(),o()}function o(){var e;switch(b=P[0]-R[0],w=P[1]-R[1],M){case iw:case nw:O&&(b=Math.max(I-d,Math.min(N-m,b)),p=d+b,g=m+b),$&&(w=Math.max(L-f,Math.min(D-y,w)),h=f+w,v=y+w);break;case rw:0>O?(b=Math.max(I-d,Math.min(N-d,b)),p=d+b,g=m):O>0&&(b=Math.max(I-m,Math.min(N-m,b)),p=d,g=m+b),0>$?(w=Math.max(L-f,Math.min(D-f,w)),h=f+w,v=y):$>0&&(w=Math.max(L-y,Math.min(D-y,w)),h=f,v=y+w);break;case ow:O&&(p=Math.max(I,Math.min(N,d-b*O)),g=Math.max(I,Math.min(N,m+b*O))),$&&(h=Math.max(L,Math.min(D,f-w*$)),v=Math.max(L,Math.min(D,y+w*$)))}p>g&&(O*=-1,e=d,d=m,m=e,e=p,p=g,g=e,k in uw&&V.attr("cursor",lw[k=uw[k]])),h>v&&($*=-1,e=f,f=y,y=e,e=h,h=v,v=e,k in dw&&V.attr("cursor",lw[k=dw[k]])),E=_.selection,x&&(p=E[0][0],g=E[1][0]),C&&(h=E[0][1],v=E[1][1]),E[0][0]===p&&E[0][1]===h&&E[1][0]===g&&E[1][1]===v||(_.selection=[[p,h],[g,v]],i.call(T),U.brush())}function s(){if($d(),e.event.touches){if(e.event.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500),F.on("touchmove.brush touchend.brush touchcancel.brush",null)}else _u(e.event.view,S),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),V.attr("cursor",lw.overlay),Nd(E)&&(_.selection=null,i.call(T)),U.end()}function a(){switch(e.event.keyCode){case 16:j=O&&$;break;case 18:M===rw&&(O&&(m=g-b*O,d=p+b*O),$&&(y=v-w*$,f=h+w*$),M=ow,o());break;case 32:M!==rw&&M!==ow||(0>O?m=g-b:O>0&&(d=p-b),0>$?y=v-w:$>0&&(f=h-w),M=iw,V.attr("cursor",lw.selection),o());break;default:return}_d()}function l(){switch(e.event.keyCode){case 16:j&&(x=C=j=!1,o());break;case 18:M===ow&&(0>O?m=g:O>0&&(d=p),0>$?y=v:$>0&&(f=h),M=rw,o());break;case 32:M===iw&&(e.event.altKey?(O&&(m=g-b*O,d=p+b*O),$&&(y=v-w*$,f=h+w*$),M=ow):(0>O?m=g:O>0&&(d=p),0>$?y=v:$>0&&(f=h),M=rw),V.attr("cursor",lw[k]),o());break;default:return}_d()}if(e.event.touches){if(e.event.changedTouches.length<e.event.touches.length)return _d()}else if(c)return;if(u.apply(this,arguments)){var d,p,f,h,m,g,y,v,b,w,S,x,C,T=this,k=e.event.target.__data__.type,M="selection"===(e.event.metaKey?k="overlay":k)?nw:e.event.altKey?ow:rw,O=t===aw?null:pw[k],$=t===sw?null:fw[k],_=Ld(T),A=_.extent,E=_.selection,I=A[0][0],L=A[0][1],N=A[1][0],D=A[1][1],j=O&&$&&e.event.shiftKey,R=hs(T),P=R,U=r(T,arguments).beforestart();"overlay"===k?_.selection=E=[[d=t===aw?I:R[0],f=t===sw?L:R[1]],[m=t===aw?N:d,y=t===sw?D:f]]:(d=E[0][0],f=E[0][1],m=E[1][0],y=E[1][1]),p=d,h=f,g=m,v=y;var F=Da(T).attr("pointer-events","none"),V=F.selectAll(".overlay").attr("cursor",lw[k]);if(e.event.touches)F.on("touchmove.brush",n,!0).on("touchend.brush touchcancel.brush",s,!0);else{var B=Da(e.event.view).on("keydown.brush",a,!0).on("keyup.brush",l,!0).on("mousemove.brush",n,!0).on("mouseup.brush",s,!0);$u(e.event.view)}$d(),Ya(T),i.call(T),U.start()}}function a(){var e=this.__brush||{selection:null};return e.extent=l.apply(this,arguments),e.dim=t,e}var c,l=Id,u=Ed,d=Ci(n,"start","brush","end"),p=6;return n.move=function(e,n){e.selection?e.on("start.brush",function(){r(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){r(this,arguments).end()}).tween("brush",function(){function e(e){s.selection=1===e&&Nd(l)?null:u(e),i.call(o),a.brush()}var o=this,s=o.__brush,a=r(o,arguments),c=s.selection,l=t.input("function"==typeof n?n.apply(this,arguments):n,s.extent),u=ci(c,l);return c&&l?e:e(1)}):e.each(function(){var e=this,o=arguments,s=e.__brush,a=t.input("function"==typeof n?n.apply(e,o):n,s.extent),c=r(e,o).beforestart();Ya(e),s.selection=null==a||Nd(a)?null:a,i.call(e),c.start().brush().end()})},o.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){ds(new Od(n,e,t.output(this.state.selection)),d.apply,d,[e,this.that,this.args])}},n.extent=function(e){return arguments.length?(l="function"==typeof e?e:Md([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),n):l},n.filter=function(e){return arguments.length?(u="function"==typeof e?e:Md(!!e),n):u},n.handleSize=function(e){return arguments.length?(p=+e,n):p},n.on=function(){var e=d.on.apply(d,arguments);return e===d?n:e},n}function Fd(e){return function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)}}function Vd(){function e(e){var o,s,a,c,l,u,p=e.length,f=[],h=d(p),m=[],g=[],y=g.groups=new Array(p),v=new Array(p*p);for(o=0,l=-1;++l<p;){for(s=0,u=-1;++u<p;)s+=e[l][u];f.push(s),m.push(d(p)),o+=s}for(n&&h.sort(function(e,t){return n(f[e],f[t])}),i&&m.forEach(function(t,n){t.sort(function(t,r){return i(e[n][t],e[n][r])})}),o=bw(0,vw-t*p)/o,c=o?t:vw/p,s=0,l=-1;++l<p;){for(a=s,u=-1;++u<p;){var b=h[l],w=m[b][u],S=e[b][w],x=s,C=s+=S*o;v[w*p+b]={index:b,subindex:w,startAngle:x,endAngle:C,value:S}}y[b]={index:b,startAngle:a,endAngle:s,value:f[b]},s+=c}for(l=-1;++l<p;)for(u=l-1;++u<p;){var T=v[u*p+l],k=v[l*p+u];(T.value||k.value)&&g.push(T.value<k.value?{source:k,target:T}:{source:T,target:k})}return r?g.sort(r):g}var t=0,n=null,i=null,r=null;return e.padAngle=function(n){return arguments.length?(t=bw(0,n),e):t},e.sortGroups=function(t){return arguments.length?(n=t,e):n},e.sortSubgroups=function(t){return arguments.length?(i=t,e):i},e.sortChords=function(t){return arguments.length?(null==t?r=null:(r=Fd(t))._=t,e):r&&r._},e}function Bd(e){return function(){return e}}function qd(e){return e.source}function Yd(e){return e.target}function zd(e){return e.radius}function Hd(e){return e.startAngle}function Wd(e){return e.endAngle}function Gd(){function e(){var e,a=ww.call(arguments),c=t.apply(this,a),l=n.apply(this,a),u=+i.apply(this,(a[0]=c,a)),d=r.apply(this,a)-yw,p=o.apply(this,a)-yw,f=u*hw(d),h=u*mw(d),m=+i.apply(this,(a[0]=l,a)),g=r.apply(this,a)-yw,y=o.apply(this,a)-yw;return s||(s=e=Te()),s.moveTo(f,h),s.arc(0,0,u,d,p),d===g&&p===y||(s.quadraticCurveTo(0,0,m*hw(g),m*mw(g)),s.arc(0,0,m,g,y)),s.quadraticCurveTo(0,0,f,h),s.closePath(),e?(s=null,e+""||null):void 0}var t=qd,n=Yd,i=zd,r=Hd,o=Wd,s=null;return e.radius=function(t){return arguments.length?(i="function"==typeof t?t:Bd(+t),e):i},e.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Bd(+t),e):r},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Bd(+t),e):o},e.source=function(n){return arguments.length?(t=n,e):t},e.target=function(t){return arguments.length?(n=t,e):n},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}function Kd(){return new Zd}function Zd(){this.reset()}function Xd(e,t,n){var i=e.s=t+n,r=i-t,o=i-r;e.t=t-o+(n-r)}function Jd(e){return e>1?0:-1>e?rS:Math.acos(e)}function Qd(e){return e>1?oS:-1>e?-oS:Math.asin(e)}function ep(e){return(e=vS(e/2))*e}function tp(){}function np(e,t){e&&CS.hasOwnProperty(e.type)&&CS[e.type](e,t)}function ip(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function rp(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)ip(e[n],t,1);t.polygonEnd()}function op(e,t){e&&xS.hasOwnProperty(e.type)?xS[e.type](e,t):np(e,t)}function sp(){TS.point=cp}function ap(){lp(Cw,Tw)}function cp(e,t){TS.point=lp,Cw=e,Tw=t,e*=lS,t*=lS,kw=e,Mw=fS(t=t/2+sS),Ow=vS(t)}function lp(e,t){e*=lS,t*=lS,t=t/2+sS;var n=e-kw,i=n>=0?1:-1,r=i*n,o=fS(t),s=vS(t),a=Ow*s,c=Mw*o+a*fS(r),l=a*i*vS(r);Sw.add(pS(l,c)),kw=e,Mw=o,Ow=s}function up(e){return xw?xw.reset():(xw=Kd(),Sw=Kd()),op(e,TS),2*xw}function dp(e){return[pS(e[1],e[0]),Qd(e[2])]}function pp(e){var t=e[0],n=e[1],i=fS(n);return[i*fS(t),i*vS(t),vS(n)]}function fp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function mp(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function gp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function yp(e){var t=wS(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function vp(e,t){Rw.push(Pw=[$w=e,Aw=e]),_w>t&&(_w=t),t>Ew&&(Ew=t)}function bp(e,t){var n=pp([e*lS,t*lS]);if(Dw){var i=hp(Dw,n),r=[i[1],-i[0],0],o=hp(r,i);yp(o),o=dp(o);var s,a=e-Iw,c=a>0?1:-1,l=o[0]*cS*c,u=uS(a)>180;u^(l>c*Iw&&c*e>l)?(s=o[1]*cS,s>Ew&&(Ew=s)):(l=(l+360)%360-180,u^(l>c*Iw&&c*e>l)?(s=-o[1]*cS,_w>s&&(_w=s)):(_w>t&&(_w=t),t>Ew&&(Ew=t))),u?Iw>e?kp($w,e)>kp($w,Aw)&&(Aw=e):kp(e,Aw)>kp($w,Aw)&&($w=e):Aw>=$w?($w>e&&($w=e),e>Aw&&(Aw=e)):e>Iw?kp($w,e)>kp($w,Aw)&&(Aw=e):kp(e,Aw)>kp($w,Aw)&&($w=e)}else vp(e,t);Dw=n,Iw=e}function wp(){kS.point=bp}function Sp(){Pw[0]=$w,Pw[1]=Aw,kS.point=vp,Dw=null}function xp(e,t){if(Dw){var n=e-Iw;jw.add(uS(n)>180?n+(n>0?360:-360):n)}else Lw=e,Nw=t;TS.point(e,t),bp(e,t)}function Cp(){TS.lineStart()}function Tp(){xp(Lw,Nw),TS.lineEnd(),uS(jw)>nS&&($w=-(Aw=180)),Pw[0]=$w,Pw[1]=Aw,Dw=null}function kp(e,t){return(t-=e)<0?t+360:t}function Mp(e,t){return e[0]-t[0]}function Op(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function $p(e){var t,n,i,r,o,s,a;if(jw?jw.reset():jw=Kd(),Ew=Aw=-($w=_w=1/0),Rw=[],op(e,kS),n=Rw.length){for(Rw.sort(Mp),t=1,i=Rw[0],o=[i];n>t;++t)r=Rw[t],Op(i,r[0])||Op(i,r[1])?(kp(i[0],r[1])>kp(i[0],i[1])&&(i[1]=r[1]),kp(r[0],i[1])>kp(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-(1/0),n=o.length-1,t=0,i=o[n];n>=t;i=r,++t)r=o[t],(a=kp(i[1],r[0]))>s&&(s=a,$w=r[0],Aw=i[1])}return Rw=Pw=null,$w===1/0||_w===1/0?[[NaN,NaN],[NaN,NaN]]:[[$w,_w],[Aw,Ew]]}function _p(e,t){e*=lS,t*=lS;var n=fS(t);Ap(n*fS(e),n*vS(e),vS(t))}function Ap(e,t,n){++Uw,Vw+=(e-Vw)/Uw,Bw+=(t-Bw)/Uw,qw+=(n-qw)/Uw}function Ep(){MS.point=Ip}function Ip(e,t){e*=lS,t*=lS;var n=fS(t);Jw=n*fS(e),Qw=n*vS(e),eS=vS(t),MS.point=Lp,Ap(Jw,Qw,eS)}function Lp(e,t){e*=lS,t*=lS;var n=fS(t),i=n*fS(e),r=n*vS(e),o=vS(t),s=pS(wS((s=Qw*o-eS*r)*s+(s=eS*i-Jw*o)*s+(s=Jw*r-Qw*i)*s),Jw*i+Qw*r+eS*o);Fw+=s,Yw+=s*(Jw+(Jw=i)),zw+=s*(Qw+(Qw=r)),Hw+=s*(eS+(eS=o)),Ap(Jw,Qw,eS)}function Np(){MS.point=_p}function Dp(){MS.point=Rp}function jp(){Pp(Zw,Xw),MS.point=_p}function Rp(e,t){Zw=e,Xw=t,e*=lS,t*=lS,MS.point=Pp;var n=fS(t);Jw=n*fS(e),Qw=n*vS(e),eS=vS(t),Ap(Jw,Qw,eS)}function Pp(e,t){e*=lS,t*=lS;var n=fS(t),i=n*fS(e),r=n*vS(e),o=vS(t),s=Qw*o-eS*r,a=eS*i-Jw*o,c=Jw*r-Qw*i,l=wS(s*s+a*a+c*c),u=Jw*i+Qw*r+eS*o,d=l&&-Jd(u)/l,p=pS(l,u);Ww+=d*s,Gw+=d*a,Kw+=d*c,Fw+=p,Yw+=p*(Jw+(Jw=i)),zw+=p*(Qw+(Qw=r)),Hw+=p*(eS+(eS=o)),Ap(Jw,Qw,eS)}function Up(e){Uw=Fw=Vw=Bw=qw=Yw=zw=Hw=Ww=Gw=Kw=0,op(e,MS);var t=Ww,n=Gw,i=Kw,r=t*t+n*n+i*i;return iS>r&&(t=Yw,n=zw,i=Hw,nS>Fw&&(t=Vw,n=Bw,i=qw),r=t*t+n*n+i*i,iS>r)?[NaN,NaN]:[pS(n,t)*cS,Qd(i/wS(r))*cS]}function Fp(e){return function(){return e}}function Vp(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),n}function Bp(e,t){return[e>rS?e-aS:-rS>e?e+aS:e,t]}function qp(e,t,n){return(e%=aS)?t||n?Vp(zp(e),Hp(t,n)):zp(e):t||n?Hp(t,n):Bp}function Yp(e){return function(t,n){return t+=e,[t>rS?t-aS:-rS>t?t+aS:t,n]}}function zp(e){var t=Yp(e);return t.invert=Yp(-e),t}function Hp(e,t){function n(e,t){var n=fS(t),a=fS(e)*n,c=vS(e)*n,l=vS(t),u=l*i+a*r;return[pS(c*o-u*s,a*i-l*r),Qd(u*o+c*s)]}var i=fS(e),r=vS(e),o=fS(t),s=vS(t);return n.invert=function(e,t){var n=fS(t),a=fS(e)*n,c=vS(e)*n,l=vS(t),u=l*o-c*s;return[pS(c*o+l*s,a*i+u*r),Qd(u*i-a*r)]},n}function Wp(e){function t(t){return t=e(t[0]*lS,t[1]*lS),t[0]*=cS,t[1]*=cS,t}return e=qp(e[0]*lS,e[1]*lS,e.length>2?e[2]*lS:0),t.invert=function(t){return t=e.invert(t[0]*lS,t[1]*lS),t[0]*=cS,t[1]*=cS,t},t}function Gp(e,t,n,i,r,o){if(n){var s=fS(t),a=vS(t),c=i*n;null==r?(r=t+i*aS,o=t-c/2):(r=Kp(s,r),o=Kp(s,o),(i>0?o>r:r>o)&&(r+=i*aS));for(var l,u=r;i>0?u>o:o>u;u-=c)l=dp([s,-a*fS(u),-a*vS(u)]),e.point(l[0],l[1])}}function Kp(e,t){t=pp(t),t[0]-=e,yp(t);var n=Jd(-t[1]);return((-t[2]<0?-n:n)+aS-nS)%aS}function Zp(){function e(e,t){n.push(e=i(e,t)),e[0]*=cS,e[1]*=cS}function t(){var e=r.apply(this,arguments),t=o.apply(this,arguments)*lS,c=s.apply(this,arguments)*lS;return n=[],i=qp(-e[0]*lS,-e[1]*lS,0).invert,Gp(a,t,c,1),e={type:"Polygon",coordinates:[n]},n=i=null,e}var n,i,r=Fp([0,0]),o=Fp(90),s=Fp(6),a={point:e};return t.center=function(e){return arguments.length?(r="function"==typeof e?e:Fp([+e[0],+e[1]]),t):r},t.radius=function(e){return arguments.length?(o="function"==typeof e?e:Fp(+e),t):o},t.precision=function(e){return arguments.length?(s="function"==typeof e?e:Fp(+e),t):s},t}function Xp(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:tp,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Jp(e,t,n,i,r,o){var s,a=e[0],c=e[1],l=t[0],u=t[1],d=0,p=1,f=l-a,h=u-c;if(s=n-a,f||!(s>0)){if(s/=f,0>f){if(d>s)return;p>s&&(p=s)}else if(f>0){if(s>p)return;s>d&&(d=s)}if(s=r-a,f||!(0>s)){if(s/=f,0>f){if(s>p)return;s>d&&(d=s)}else if(f>0){if(d>s)return;p>s&&(p=s)}if(s=i-c,h||!(s>0)){if(s/=h,0>h){if(d>s)return;p>s&&(p=s)}else if(h>0){if(s>p)return;s>d&&(d=s)}if(s=o-c,h||!(0>s)){if(s/=h,0>h){if(s>p)return;s>d&&(d=s)}else if(h>0){if(d>s)return;p>s&&(p=s)}return d>0&&(e[0]=a+d*f,e[1]=c+d*h),1>p&&(t[0]=a+p*f,t[1]=c+p*h),!0}}}}}function Qp(e,t){return uS(e[0]-t[0])<nS&&uS(e[1]-t[1])<nS}function ef(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function tf(e,t,n,i,r){var o,s,a=[],c=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],s=e[t];if(Qp(i,s)){for(r.lineStart(),o=0;t>o;++o)r.point((i=e[o])[0],i[1]);return void r.lineEnd()}a.push(n=new ef(i,e,null,!0)),c.push(n.o=new ef(i,null,n,!1)),a.push(n=new ef(s,e,null,!1)),c.push(n.o=new ef(s,null,n,!0))}}),a.length){for(c.sort(t),nf(a),nf(c),o=0,s=c.length;s>o;++o)c[o].e=n=!n;for(var l,u,d=a[0];;){for(var p=d,f=!0;p.v;)if((p=p.n)===d)return;l=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=l.length;s>o;++o)r.point((u=l[o])[0],u[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(f)for(l=p.p.z,o=l.length-1;o>=0;--o)r.point((u=l[o])[0],u[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,l=p.z,f=!f}while(!p.v);r.lineEnd()}}}function nf(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function rf(e,t,n,i){function r(r,o){return r>=e&&n>=r&&o>=t&&i>=o}function o(r,o,a,l){var u=0,d=0;if(null==r||(u=s(r,a))!==(d=s(o,a))||c(r,o)<0^a>0){do l.point(0===u||3===u?e:n,u>1?i:t);while((u=(u+a+4)%4)!==d)}else l.point(o[0],o[1])}function s(i,r){return uS(i[0]-e)<nS?r>0?0:3:uS(i[0]-n)<nS?r>0?2:1:uS(i[1]-t)<nS?r>0?1:0:r>0?3:2}function a(e,t){return c(e.x,t.x)}function c(e,t){var n=s(e,1),i=s(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function c(e,t){r(e,t)&&O.point(e,t)}function l(){for(var t=0,n=0,r=g.length;r>n;++n)for(var o,s,a=g[n],c=1,l=a.length,u=a[0],d=u[0],p=u[1];l>c;++c)o=d,s=p,u=a[c],d=u[0],p=u[1],i>=s?p>i&&(d-o)*(i-s)>(p-s)*(e-o)&&++t:i>=p&&(p-s)*(e-o)>(d-o)*(i-s)&&--t;return t}function u(){O=$,m=[],g=[],M=!0}function d(){var e=l(),t=M&&e,n=(m=x(m)).length;(t||n)&&(s.polygonStart(),t&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),n&&tf(m,a,e,o,s),s.polygonEnd()),O=s,m=g=y=null}function p(){_.point=h,g&&g.push(y=[]),k=!0,T=!1,S=C=NaN}function f(){m&&(h(v,b),w&&T&&$.rejoin(),m.push($.result())),_.point=c,T&&O.lineEnd()}function h(o,s){var a=r(o,s);if(g&&y.push([o,s]),k)v=o,b=s,w=a,k=!1,a&&(O.lineStart(),O.point(o,s));else if(a&&T)O.point(o,s);else{var c=[S=Math.max(FS,Math.min(US,S)),C=Math.max(FS,Math.min(US,C))],l=[o=Math.max(FS,Math.min(US,o)),s=Math.max(FS,Math.min(US,s))];Jp(c,l,e,t,n,i)?(T||(O.lineStart(),O.point(c[0],c[1])),O.point(l[0],l[1]),a||O.lineEnd(),M=!1):a&&(O.lineStart(),O.point(o,s),M=!1)}S=o,C=s,T=a}var m,g,y,v,b,w,S,C,T,k,M,O=s,$=Xp(),_={point:c,lineStart:p,lineEnd:f,polygonStart:u,polygonEnd:d};return _}}function of(){var e,t,n,i=0,r=0,o=960,s=500;return n={stream:function(n){return e&&t===n?e:e=rf(i,r,o,s)(t=n)},extent:function(a){return arguments.length?(i=+a[0][0],r=+a[0][1],o=+a[1][0],s=+a[1][1],e=t=null,n):[[i,r],[o,s]]}}}function sf(){VS.point=cf,VS.lineEnd=af}function af(){VS.point=VS.lineEnd=tp}function cf(e,t){e*=lS,t*=lS,$S=e,_S=vS(t),AS=fS(t),VS.point=lf}function lf(e,t){e*=lS,t*=lS;var n=vS(t),i=fS(t),r=uS(e-$S),o=fS(r),s=vS(r),a=i*s,c=AS*n-_S*i*o,l=_S*n+AS*i*o;OS.add(pS(wS(a*a+c*c),l)),$S=e,_S=n,AS=i}function uf(e){return OS?OS.reset():OS=Kd(),op(e,VS),+OS}function df(e,t){return BS[0]=e,BS[1]=t,uf(qS)}function pf(e,t,n){var i=d(e,t-nS,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function ff(e,t,n){var i=d(e,t-nS,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function hf(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return d(hS(o/y)*y,r,y).map(f).concat(d(hS(l/v)*v,c,v).map(h)).concat(d(hS(i/m)*m,n,m).filter(function(e){return uS(e%y)>nS}).map(u)).concat(d(hS(a/g)*g,s,g).filter(function(e){return uS(e%v)>nS}).map(p))}var n,i,r,o,s,a,c,l,u,p,f,h,m=10,g=m,y=90,v=360,b=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(h(c).slice(1),f(r).reverse().slice(1),h(l).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(o=+t[0][0],r=+t[1][0],l=+t[0][1],c=+t[1][1],o>r&&(t=o,o=r,r=t),l>c&&(t=l,l=c,c=t),e.precision(b)):[[o,l],[r,c]]},e.extentMinor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],a=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),a>s&&(t=a,a=s,s=t),e.precision(b)):[[i,a],[n,s]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(y=+t[0],v=+t[1],e):[y,v]},e.stepMinor=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.precision=function(t){return arguments.length?(b=+t,u=pf(a,s,90),p=ff(i,n,b),f=pf(l,c,90),h=ff(o,r,b),e):b},e.extentMajor([[-180,-90+nS],[180,90-nS]]).extentMinor([[-180,-80-nS],[180,80+nS]])}function mf(e,t){var n=e[0]*lS,i=e[1]*lS,r=t[0]*lS,o=t[1]*lS,s=fS(i),a=vS(i),c=fS(o),l=vS(o),u=s*fS(n),d=s*vS(n),p=c*fS(r),f=c*vS(r),h=2*Qd(wS(ep(o-i)+s*c*ep(r-n))),m=vS(h),g=h?function(e){var t=vS(e*=h)/m,n=vS(h-e)/m,i=n*u+t*p,r=n*d+t*f,o=n*a+t*l;return[pS(r,i)*cS,pS(o,wS(i*i+r*r))*cS]}:function(){return[n*cS,i*cS]};return g.distance=h,g}function gf(e){return e}function yf(){HS.point=vf}function vf(e,t){HS.point=bf,ES=LS=e,IS=NS=t}function bf(e,t){zS.add(NS*e-LS*t),LS=e,NS=t}function wf(){bf(ES,IS)}function Sf(e,t){WS>e&&(WS=e),e>KS&&(KS=e),GS>t&&(GS=t),t>ZS&&(ZS=t)}function xf(e,t){JS+=e,QS+=t,++ex}function Cf(){ax.point=Tf}function Tf(e,t){ax.point=kf,xf(RS=e,PS=t)}function kf(e,t){var n=e-RS,i=t-PS,r=wS(n*n+i*i);tx+=r*(RS+e)/2,nx+=r*(PS+t)/2,ix+=r,xf(RS=e,PS=t)}function Mf(){ax.point=xf}function Of(){ax.point=_f}function $f(){Af(DS,jS)}function _f(e,t){ax.point=Af,xf(DS=RS=e,jS=PS=t)}function Af(e,t){var n=e-RS,i=t-PS,r=wS(n*n+i*i);tx+=r*(RS+e)/2,nx+=r*(PS+t)/2,ix+=r,r=PS*e-RS*t,rx+=r*(RS+e),ox+=r*(PS+t),sx+=3*r,xf(RS=e,PS=t)}function Ef(e){function t(t,n){e.moveTo(t+s,n),e.arc(t,n,s,0,aS)}function n(t,n){e.moveTo(t,n),a.point=i}function i(t,n){e.lineTo(t,n)}function r(){a.point=t}function o(){e.closePath()}var s=4.5,a={point:t,lineStart:function(){a.point=n},lineEnd:r,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=r,a.point=t},pointRadius:function(e){return s=e,a},result:tp};return a}function If(){function e(e,t){a.push("M",e,",",t,s)}function t(e,t){a.push("M",e,",",t),c.point=n}function n(e,t){a.push("L",e,",",t)}function i(){c.point=t}function r(){c.point=e}function o(){a.push("Z")}var s=Lf(4.5),a=[],c={point:e,lineStart:i,lineEnd:r,polygonStart:function(){c.lineEnd=o},polygonEnd:function(){c.lineEnd=r,c.point=e},pointRadius:function(e){return s=Lf(e),c},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return c}function Lf(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Nf(){function e(e){return e&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),op(e,n(r))),r.result()}var t,n,i,r,o=4.5;return e.area=function(e){return op(e,n(HS)),HS.result()},e.bounds=function(e){return op(e,n(XS)),XS.result()},e.centroid=function(e){return op(e,n(ax)),ax.result()},e.projection=function(i){return arguments.length?(n=null==(t=i)?gf:i.stream,e):t},e.context=function(t){return arguments.length?(r=null==(i=t)?new If:new Ef(t),"function"!=typeof o&&r.pointRadius(o),e):i},e.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),e):o},e.projection(null).context(null)}function Df(e,t){for(var n=t[0],i=t[1],r=[vS(n),-fS(n),0],o=0,s=0,a=0,c=e.length;c>a;++a)if(u=(l=e[a]).length)for(var l,u,d=l[u-1],p=d[0],f=d[1]/2+sS,h=vS(f),m=fS(f),g=0;u>g;++g,p=v,h=w,m=S,d=y){var y=l[g],v=y[0],b=y[1]/2+sS,w=vS(b),S=fS(b),x=v-p,C=x>=0?1:-1,T=C*x,k=T>rS,M=h*w;if(cx.add(pS(M*C*vS(T),m*S+M*fS(T))),o+=k?x+C*aS:x,k^p>=n^v>=n){var O=hp(pp(d),pp(y));yp(O);var $=hp(r,O);yp($);var _=(k^x>=0?-1:1)*Qd($[2]);(i>_||i===_&&(O[0]||O[1]))&&(s+=k^x>=0?1:-1)}}var A=(-nS>o||nS>o&&-nS>cx)^1&s;return cx.reset(),A}function jf(e,t,n,i){return function(r,o){function s(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&o.point(t,n)}function a(e,t){var n=r(e,t);g.point(n[0],n[1])}function c(){S.point=a,g.lineStart()}function l(){S.point=s,g.lineEnd()}function u(e,t){m.push([e,t]);var n=r(e,t);b.point(n[0],n[1])}function d(){b.lineStart(),m=[]}function p(){u(m[0][0],m[0][1]),b.lineEnd();var e,t,n,i,r=b.clean(),s=v.result(),a=s.length;if(m.pop(),f.push(m),m=null,a)if(1&r){if(n=s[0],(t=n.length-1)>0){for(w||(o.polygonStart(),w=!0),o.lineStart(),e=0;t>e;++e)o.point((i=n[e])[0],i[1]);o.lineEnd()}}else a>1&&2&r&&s.push(s.pop().concat(s.shift())),h.push(s.filter(Rf))}var f,h,m,g=t(o),y=r.invert(i[0],i[1]),v=Xp(),b=t(v),w=!1,S={point:s,lineStart:c,lineEnd:l,polygonStart:function(){S.point=u,S.lineStart=d,S.lineEnd=p,h=[],f=[]},polygonEnd:function(){S.point=s,S.lineStart=c,S.lineEnd=l,h=x(h);var e=Df(f,y);h.length?(w||(o.polygonStart(),w=!0),tf(h,Pf,e,n,o)):e&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),h=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return S}}function Rf(e){return e.length>1}function Pf(e,t){return((e=e.x)[0]<0?e[1]-oS-nS:oS-e[1])-((t=t.x)[0]<0?t[1]-oS-nS:oS-t[1])}function Uf(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,s){var a=o>0?rS:-rS,c=uS(o-n);uS(c-rS)<nS?(e.point(n,i=(i+s)/2>0?oS:-oS),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(a,i),e.point(o,i),t=0):r!==a&&c>=rS&&(uS(n-r)<nS&&(n-=r*nS),uS(o-a)<nS&&(o-=a*nS),i=Ff(n,i,o,s),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(a,i),t=0),e.point(n=o,i=s),r=a},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}}function Ff(e,t,n,i){var r,o,s=vS(e-n);return uS(s)>nS?dS((vS(t)*(o=fS(i))*vS(n)-vS(i)*(r=fS(t))*vS(e))/(r*o*s)):(t+i)/2}function Vf(e,t,n,i){var r;if(null==e)r=n*oS,i.point(-rS,r),i.point(0,r),i.point(rS,r),i.point(rS,0),i.point(rS,-r),i.point(0,-r),i.point(-rS,-r),i.point(-rS,0),i.point(-rS,r);else if(uS(e[0]-t[0])>nS){var o=e[0]<t[0]?rS:-rS;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])}function Bf(e,t){function n(n,i,r,o){Gp(o,e,t,r,n,i)}function i(e,t){return fS(e)*fS(t)>a}function r(e){var t,n,r,a,u;return{lineStart:function(){a=r=!1,u=1},point:function(d,p){var f,h=[d,p],m=i(d,p),g=c?m?0:s(d,p):m?s(d+(0>d?rS:-rS),p):0;if(!t&&(a=r=m)&&e.lineStart(),m!==r&&(f=o(t,h),(Qp(t,f)||Qp(h,f))&&(h[0]+=nS,h[1]+=nS,m=i(h[0],h[1]))),m!==r)u=0,m?(e.lineStart(),f=o(h,t),e.point(f[0],f[1])):(f=o(t,h),e.point(f[0],f[1]),e.lineEnd()),t=f;else if(l&&t&&c^m){var y;g&n||!(y=o(h,t,!0))||(u=0,c?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1])))}!m||t&&Qp(t,h)||e.point(h[0],h[1]),
t=h,r=m,n=g},lineEnd:function(){r&&e.lineEnd(),t=null},clean:function(){return u|(a&&r)<<1}}}function o(e,t,n){var i=pp(e),r=pp(t),o=[1,0,0],s=hp(i,r),c=fp(s,s),l=s[0],u=c-l*l;if(!u)return!n&&e;var d=a*c/u,p=-a*l/u,f=hp(o,s),h=gp(o,d),m=gp(s,p);mp(h,m);var g=f,y=fp(h,g),v=fp(g,g),b=y*y-v*(fp(h,h)-1);if(!(0>b)){var w=wS(b),S=gp(g,(-y-w)/v);if(mp(S,h),S=dp(S),!n)return S;var x,C=e[0],T=t[0],k=e[1],M=t[1];C>T&&(x=C,C=T,T=x);var O=T-C,$=uS(O-rS)<nS,_=$||nS>O;if(!$&&k>M&&(x=k,k=M,M=x),_?$?k+M>0^S[1]<(uS(S[0]-C)<nS?k:M):k<=S[1]&&S[1]<=M:O>rS^(C<=S[0]&&S[0]<=T)){var A=gp(g,(-y+w)/v);return mp(A,h),[S,dp(A)]}}}function s(t,n){var i=c?e:rS-e,r=0;return-i>t?r|=1:t>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=fS(e),c=a>0,l=uS(a)>nS;return jf(i,r,n,c?[0,-e]:[-rS,e-rS])}function qf(e){return{stream:Yf(e)}}function Yf(e){function t(){}var n=t.prototype=Object.create(zf.prototype);for(var i in e)n[i]=e[i];return function(e){var n=new t;return n.stream=e,n}}function zf(){}function Hf(e,t){return+t?Gf(e,t):Wf(e)}function Wf(e){return Yf({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Gf(e,t){function n(i,r,o,s,a,c,l,u,d,p,f,h,m,g){var y=l-i,v=u-r,b=y*y+v*v;if(b>4*t&&m--){var w=s+p,S=a+f,x=c+h,C=wS(w*w+S*S+x*x),T=Qd(x/=C),k=uS(uS(x)-1)<nS||uS(o-d)<nS?(o+d)/2:pS(S,w),M=e(k,T),O=M[0],$=M[1],_=O-i,A=$-r,E=v*_-y*A;(E*E/b>t||uS((y*_+v*A)/b-.5)>.3||dx>s*p+a*f+c*h)&&(n(i,r,o,s,a,c,O,$,k,w/=C,S/=C,x,m,g),g.point(O,$),n(O,$,k,w,S,x,l,u,d,p,f,h,m,g))}}return function(t){function i(n,i){n=e(n,i),t.point(n[0],n[1])}function r(){y=NaN,x.point=o,t.lineStart()}function o(i,r){var o=pp([i,r]),s=e(i,r);n(y,v,g,b,w,S,y=s[0],v=s[1],g=i,b=o[0],w=o[1],S=o[2],ux,t),t.point(y,v)}function s(){x.point=i,t.lineEnd()}function a(){r(),x.point=c,x.lineEnd=l}function c(e,t){o(u=e,t),d=y,p=v,f=b,h=w,m=S,x.point=o}function l(){n(y,v,g,b,w,S,d,p,u,f,h,m,ux,t),x.lineEnd=s,s()}var u,d,p,f,h,m,g,y,v,b,w,S,x={point:i,lineStart:r,lineEnd:s,polygonStart:function(){t.polygonStart(),x.lineStart=a},polygonEnd:function(){t.polygonEnd(),x.lineStart=r}};return x}}function Kf(e){return Zf(function(){return e})()}function Zf(e){function t(e){return e=u(e[0]*lS,e[1]*lS),[e[0]*g+a,c-e[1]*g]}function n(e){return e=u.invert((e[0]-a)/g,(c-e[1])/g),e&&[e[0]*cS,e[1]*cS]}function i(e,t){return e=s(e,t),[e[0]*g+a,c-e[1]*g]}function r(){u=Vp(l=qp(S,x,C),s);var e=s(b,w);return a=y-e[0]*g,c=v+e[1]*g,o()}function o(){return h=m=null,t}var s,a,c,l,u,d,p,f,h,m,g=150,y=480,v=250,b=0,w=0,S=0,x=0,C=0,T=null,k=lx,M=null,O=gf,$=.5,_=Hf(i,$);return t.stream=function(e){return h&&m===e?h:h=px(k(l,_(O(m=e))))},t.clipAngle=function(e){return arguments.length?(k=+e?Bf(T=e*lS,6*lS):(T=null,lx),o()):T*cS},t.clipExtent=function(e){return arguments.length?(O=null==e?(M=d=p=f=null,gf):rf(M=+e[0][0],d=+e[0][1],p=+e[1][0],f=+e[1][1]),o()):null==M?null:[[M,d],[p,f]]},t.scale=function(e){return arguments.length?(g=+e,r()):g},t.translate=function(e){return arguments.length?(y=+e[0],v=+e[1],r()):[y,v]},t.center=function(e){return arguments.length?(b=e[0]%360*lS,w=e[1]%360*lS,r()):[b*cS,w*cS]},t.rotate=function(e){return arguments.length?(S=e[0]%360*lS,x=e[1]%360*lS,C=e.length>2?e[2]%360*lS:0,r()):[S*cS,x*cS,C*cS]},t.precision=function(e){return arguments.length?(_=Hf(i,$=e*e),o()):wS($)},function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function Xf(e){var t=0,n=rS/3,i=Zf(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*lS,n=e[1]*lS):[t*cS,n*cS]},r}function Jf(e,t){function n(e,t){var n=wS(o-2*r*vS(t))/r;return[n*vS(e*=r),s-n*fS(e)]}var i=vS(e),r=(i+vS(t))/2,o=1+i*(2*r-i),s=wS(o)/r;return n.invert=function(e,t){var n=s-t;return[pS(e,n)/r,Qd((o-(e*e+n*n)*r*r)/(2*r))]},n}function Qf(){return Xf(Jf).scale(155.424).center([0,33.6442])}function eh(){return Qf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function th(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function nh(){function e(e){var t=e[0],n=e[1];return s=null,i.point(t,n),s||(r.point(t,n),s)||(o.point(t,n),s)}var t,n,i,r,o,s,a=eh(),c=Qf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Qf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){s=[e,t]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?c:r>=.166&&.234>r&&i>=-.214&&-.115>i?l:a).invert(e)},e.stream=function(e){return t&&n===e?t:t=th([a.stream(n=e),c.stream(e),l.stream(e)])},e.precision=function(t){return arguments.length?(a.precision(t),c.precision(t),l.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),c.scale(.35*t),l.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),s=+t[0],d=+t[1];return i=a.translate(t).clipExtent([[s-.455*n,d-.238*n],[s+.455*n,d+.238*n]]).stream(u),r=c.translate([s-.307*n,d+.201*n]).clipExtent([[s-.425*n+nS,d+.12*n+nS],[s-.214*n-nS,d+.234*n-nS]]).stream(u),o=l.translate([s-.205*n,d+.212*n]).clipExtent([[s-.214*n+nS,d+.166*n+nS],[s-.115*n-nS,d+.234*n-nS]]).stream(u),e},e.scale(1070)}function ih(e){return function(t,n){var i=fS(t),r=fS(n),o=e(i*r);return[o*r*vS(t),o*vS(n)]}}function rh(e){return function(t,n){var i=wS(t*t+n*n),r=e(i),o=vS(r),s=fS(r);return[pS(t*o,i*s),Qd(i&&n*o/i)]}}function oh(){return Kf(fx).scale(124.75).clipAngle(179.999)}function sh(){return Kf(hx).scale(79.4188).clipAngle(179.999)}function ah(e,t){return[e,gS(SS((oS+t)/2))]}function ch(){return lh(ah).scale(961/aS)}function lh(e){var t,n=Kf(e),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(e){return arguments.length?(i(e),t&&n.clipExtent(null),n):i()},n.translate=function(e){return arguments.length?(r(e),t&&n.clipExtent(null),n):r()},n.clipExtent=function(e){if(!arguments.length)return t?null:o();if(t=null==e){var s=rS*i(),a=r();e=[[a[0]-s,a[1]-s],[a[0]+s,a[1]+s]]}return o(e),n},n.clipExtent(null)}function uh(e){return SS((oS+e)/2)}function dh(e,t){function n(e,t){o>0?-oS+nS>t&&(t=-oS+nS):t>oS-nS&&(t=oS-nS);var n=o/yS(uh(t),r);return[n*vS(r*e),o-n*fS(r*e)]}var i=fS(e),r=e===t?vS(e):gS(i/fS(t))/gS(uh(t)/uh(e)),o=i*yS(uh(e),r)/r;return r?(n.invert=function(e,t){var n=o-t,i=bS(r)*wS(e*e+n*n);return[pS(e,n)/r,2*dS(yS(o/i,1/r))-oS]},n):ah}function ph(){return Xf(dh).scale(109.5).parallels([30,30])}function fh(e,t){return[e,t]}function hh(){return Kf(fh).scale(152.63)}function mh(e,t){function n(e,t){var n=o-t,i=r*e;return[n*vS(i),o-n*fS(i)]}var i=fS(e),r=e===t?vS(e):(i-fS(t))/(t-e),o=i/r+e;return uS(r)<nS?fh:(n.invert=function(e,t){var n=o-t;return[pS(e,n)/r,o-bS(r)*wS(e*e+n*n)]},n)}function gh(){return Xf(mh).scale(131.154).center([0,13.9389])}function yh(e,t){var n=fS(t),i=fS(e)*n;return[n*vS(e)/i,vS(t)/i]}function vh(){return Kf(yh).scale(144.049).clipAngle(60)}function bh(e,t){return[fS(t)*vS(e),vS(t)]}function wh(){return Kf(bh).scale(249.5).clipAngle(90+nS)}function Sh(e,t){var n=fS(t),i=1+fS(e)*n;return[n*vS(e)/i,vS(t)/i]}function xh(){return Kf(Sh).scale(250).clipAngle(142)}function Ch(e,t){return[gS(SS((oS+t)/2)),-e]}function Th(){var e=lh(Ch),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}var kh="4.1.1",Mh=n(t),Oh=Mh.right,$h=Mh.left,_h=Array.prototype,Ah=_h.slice,Eh=_h.map,Ih=Math.sqrt(50),Lh=Math.sqrt(10),Nh=Math.sqrt(2),Dh="$";I.prototype=L.prototype={constructor:I,has:function(e){return Dh+e in this},get:function(e){return this[Dh+e]},set:function(e,t){return this[Dh+e]=t,this},remove:function(e){var t=Dh+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Dh&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Dh&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Dh&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Dh&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Dh&&++e;return e},empty:function(){for(var e in this)if(e[0]===Dh)return!1;return!0},each:function(e){for(var t in this)t[0]===Dh&&e(this[t],t.slice(1),this)}};var jh=L.prototype;U.prototype=F.prototype={constructor:U,has:jh.has,add:function(e){return e+="",this[Dh+e]=e,this},remove:jh.remove,clear:jh.clear,values:jh.keys,size:jh.size,empty:jh.empty,each:jh.each};var Rh=3,Ph=function mx(e){function t(t){return Math.pow(t,e)}return e=+e,t.exponent=mx,t}(Rh),Uh=function gx(e){function t(t){return 1-Math.pow(1-t,e)}return e=+e,t.exponent=gx,t}(Rh),Fh=function yx(e){function t(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,t.exponent=yx,t}(Rh),Vh=Math.PI,Bh=Vh/2,qh=4/11,Yh=6/11,zh=8/11,Hh=.75,Wh=9/11,Gh=10/11,Kh=.9375,Zh=21/22,Xh=63/64,Jh=1/qh/qh,Qh=1.70158,em=function vx(e){function t(t){return t*t*((e+1)*t-e)}return e=+e,t.overshoot=vx,t}(Qh),tm=function bx(e){function t(t){return--t*t*((e+1)*t+e)+1}return e=+e,t.overshoot=bx,t}(Qh),nm=function wx(e){function t(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,t.overshoot=wx,t}(Qh),im=2*Math.PI,rm=1,om=.3,sm=function Sx(e,t){function n(n){return e*Math.pow(2,10*--n)*Math.sin((i-n)/t)}var i=Math.asin(1/(e=Math.max(1,e)))*(t/=im);return n.amplitude=function(e){return Sx(e,t*im)},n.period=function(t){return Sx(e,t)},n}(rm,om),am=function xx(e,t){function n(n){return 1-e*Math.pow(2,-10*(n=+n))*Math.sin((n+i)/t)}var i=Math.asin(1/(e=Math.max(1,e)))*(t/=im);return n.amplitude=function(e){return xx(e,t*im)},n.period=function(t){return xx(e,t)},n}(rm,om),cm=function Cx(e,t){function n(n){return((n=2*n-1)<0?e*Math.pow(2,10*n)*Math.sin((i-n)/t):2-e*Math.pow(2,-10*n)*Math.sin((i+n)/t))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(t/=im);return n.amplitude=function(e){return Cx(e,t*im)},n.period=function(t){return Cx(e,t)},n}(rm,om),lm=Math.PI,um=2*lm,dm=1e-6,pm=um-dm;Ce.prototype=Te.prototype={constructor:Ce,moveTo:function(e,t){this._.push("M",this._x0=this._x1=+e,",",this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(e,t){this._.push("L",this._x1=+e,",",this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._.push("Q",+e,",",+t,",",this._x1=+n,",",this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,o){this._.push("C",+e,",",+t,",",+n,",",+i,",",this._x1=+r,",",this._y1=+o)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var o=this._x1,s=this._y1,a=n-e,c=i-t,l=o-e,u=s-t,d=l*l+u*u;if(0>r)throw new Error("negative radius: "+r);if(null===this._x1)this._.push("M",this._x1=e,",",this._y1=t);else if(d>dm)if(Math.abs(u*a-c*l)>dm&&r){var p=n-o,f=i-s,h=a*a+c*c,m=p*p+f*f,g=Math.sqrt(h),y=Math.sqrt(d),v=r*Math.tan((lm-Math.acos((h+d-m)/(2*g*y)))/2),b=v/y,w=v/g;Math.abs(b-1)>dm&&this._.push("L",e+b*l,",",t+b*u),this._.push("A",r,",",r,",0,0,",+(u*p>l*f),",",this._x1=e+w*a,",",this._y1=t+w*c)}else this._.push("L",this._x1=e,",",this._y1=t)},arc:function(e,t,n,i,r,o){e=+e,t=+t,n=+n;var s=n*Math.cos(i),a=n*Math.sin(i),c=e+s,l=t+a,u=1^o,d=o?i-r:r-i;if(0>n)throw new Error("negative radius: "+n);null===this._x1?this._.push("M",c,",",l):(Math.abs(this._x1-c)>dm||Math.abs(this._y1-l)>dm)&&this._.push("L",c,",",l),n&&(d>pm?this._.push("A",n,",",n,",0,1,",u,",",e-s,",",t-a,"A",n,",",n,",0,1,",u,",",this._x1=c,",",this._y1=l):(0>d&&(d=d%um+um),this._.push("A",n,",",n,",0,",+(d>=lm),",",u,",",this._x1=e+n*Math.cos(r),",",this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._.push("M",this._x0=this._x1=+e,",",this._y0=this._y1=+t,"h",+n,"v",+i,"h",-n,"Z")},toString:function(){return this._.join("")}};var fm=qe.prototype=Ye.prototype;fm.copy=function(){var e,t,n=new Ye(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=ze(i),n;for(e=[{source:i,target:n._root=new Array(4)}];i=e.pop();)for(var r=0;4>r;++r)(t=i.source[r])&&(t.length?e.push({source:t,target:i.target[r]=new Array(4)}):i.target[r]=ze(t));return n},fm.add=ke,fm.addAll=Oe,fm.cover=$e,fm.data=_e,fm.extent=Ae,fm.find=Ie,fm.remove=Le,fm.removeAll=Ne,fm.root=De,fm.size=je,fm.visit=Re,fm.visitAfter=Pe,fm.x=Fe,fm.y=Be;var hm=[].slice,mm={};He.prototype=Je.prototype={constructor:He,defer:function(e){if("function"!=typeof e||this._call)throw new Error;if(null!=this._error)return this;var t=hm.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),We(this),this},abort:function(){return null==this._error&&Ze(this,new Error("abort")),this},await:function(e){if("function"!=typeof e||this._call)throw new Error;return this._call=function(t,n){e.apply(null,[t].concat(n))},Xe(this),this},awaitAll:function(e){if("function"!=typeof e||this._call)throw new Error;return this._call=e,Xe(this),this}};var gm=1e-12,ym=Math.PI,vm=ym/2,bm=2*ym;lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var wm=bt(ut);vt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var Sm={draw:function(e,t){var n=Math.sqrt(t/ym);e.moveTo(n,0),e.arc(0,0,n,0,bm)}},xm={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Cm=Math.sqrt(1/3),Tm=2*Cm,km={draw:function(e,t){var n=Math.sqrt(t/Tm),i=n*Cm;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},Mm=.8908130915292852,Om=Math.sin(ym/10)/Math.sin(7*ym/10),$m=Math.sin(bm/10)*Om,_m=-Math.cos(bm/10)*Om,Am={draw:function(e,t){var n=Math.sqrt(t*Mm),i=$m*n,r=_m*n;e.moveTo(0,-n),e.lineTo(i,r);for(var o=1;5>o;++o){var s=bm*o/5,a=Math.cos(s),c=Math.sin(s);e.lineTo(c*n,-a*n),e.lineTo(a*i-c*r,c*i+a*r)}e.closePath()}},Em={draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},Im=Math.sqrt(3),Lm={draw:function(e,t){var n=-Math.sqrt(t/(3*Im));e.moveTo(0,2*n),e.lineTo(-Im*n,-n),e.lineTo(Im*n,-n),e.closePath()}},Nm=-.5,Dm=Math.sqrt(3)/2,jm=1/Math.sqrt(12),Rm=3*(jm/2+1),Pm={draw:function(e,t){var n=Math.sqrt(t/Rm),i=n/2,r=n*jm,o=i,s=n*jm+n,a=-o,c=s;e.moveTo(i,r),e.lineTo(o,s),e.lineTo(a,c),e.lineTo(Nm*i-Dm*r,Dm*i+Nm*r),e.lineTo(Nm*o-Dm*s,Dm*o+Nm*s),e.lineTo(Nm*a-Dm*c,Dm*a+Nm*c),e.lineTo(Nm*i+Dm*r,Nm*r-Dm*i),e.lineTo(Nm*o+Dm*s,Nm*s-Dm*o),e.lineTo(Nm*a+Dm*c,Nm*c-Dm*a),e.closePath()}},Um=[Sm,xm,km,Em,Am,Lm,Pm];Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kt(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},$t.prototype={areaStart:Tt,areaEnd:Tt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:kt(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:kt(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},It.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i,r=e[0],o=t[0],s=e[n]-r,a=t[n]-o,c=-1;++c<=n;)i=c/n,this._basis.point(this._beta*e[c]+(1-this._beta)*(r+i*s),this._beta*t[c]+(1-this._beta)*(o+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Fm=function Tx(e){function t(t){return 1===e?new Mt(t):new It(t,e)}return t.beta=function(e){return Tx(+e)},t}(.85);Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Lt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Lt(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Vm=function kx(e){function t(t){return new Nt(t,e)}return t.tension=function(e){return kx(+e)},t}(0);Dt.prototype={areaStart:Tt,areaEnd:Tt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Lt(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Bm=function Mx(e){function t(t){return new Dt(t,e)}return t.tension=function(e){return Mx(+e)},t}(0);jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Lt(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var qm=function Ox(e){function t(t){return new jt(t,e)}return t.tension=function(e){return Ox(+e)},t}(0);Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this,this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Rt(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ym=function $x(e){function t(t){return e?new Pt(t,e):new Nt(t,0)}return t.alpha=function(e){return $x(+e)},t}(.5);Ut.prototype={areaStart:Tt,areaEnd:Tt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Rt(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var zm=function _x(e){function t(t){return e?new Ut(t,e):new Dt(t,0)}return t.alpha=function(e){return _x(+e)},t}(.5);Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Rt(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Hm=function Ax(e){function t(t){return e?new Ft(t,e):new jt(t,0)}return t.alpha=function(e){return Ax(+e)},t}(.5);Vt.prototype={areaStart:Tt,areaEnd:Tt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ht(this,this._t0,zt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ht(this,zt(this,n=Yt(this,e,t)),n);break;default:Ht(this,this._t0,n=Yt(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Gt.prototype=Object.create(Wt.prototype)).point=function(e,t){Wt.prototype.point.call(this,t,e)},Kt.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}},Jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=Qt(e),r=Qt(t),o=0,s=1;n>s;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},tn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Wm=Array.prototype.slice,Gm=.7,Km=1/Gm,Zm=/^#([0-9a-f]{3})$/,Xm=/^#([0-9a-f]{6})$/,Jm=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,Qm=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,eg=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,tg=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,ng=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,ig=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,rg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vn(wn,Sn,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),vn(Mn,kn,bn(wn,{brighter:function(e){return e=null==e?Km:Math.pow(Km,e),new Mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Gm:Math.pow(Gm,e),new Mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),vn(An,_n,bn(wn,{brighter:function(e){return e=null==e?Km:Math.pow(Km,e),new An(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Gm:Math.pow(Gm,e),new An(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(.5>n?n:1-n)*t,r=2*n-i;return new Mn(En(e>=240?e-240:e+120,r,i),En(e,r,i),En(120>e?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var og=Math.PI/180,sg=180/Math.PI,ag=18,cg=.95047,lg=1,ug=1.08883,dg=4/29,pg=6/29,fg=3*pg*pg,hg=pg*pg*pg;vn(Nn,Ln,bn(wn,{brighter:function(e){return new Nn(this.l+ag*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Nn(this.l-ag*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=lg*jn(e),t=cg*jn(t),n=ug*jn(n),new Mn(Rn(3.2404542*t-1.5371385*e-.4985314*n),Rn(-.969266*t+1.8760108*e+.041556*n),Rn(.0556434*t-.2040259*e+1.0572252*n),this.opacity);
}})),vn(Vn,Fn,bn(wn,{brighter:function(e){return new Vn(this.h,this.c,this.l+ag*(null==e?1:e),this.opacity)},darker:function(e){return new Vn(this.h,this.c,this.l-ag*(null==e?1:e),this.opacity)},rgb:function(){return In(this).rgb()}}));var mg=-.14861,gg=1.78277,yg=-.29227,vg=-.90649,bg=1.97294,wg=bg*vg,Sg=bg*gg,xg=gg*yg-vg*mg;vn(Yn,qn,bn(wn,{brighter:function(e){return e=null==e?Km:Math.pow(Km,e),new Yn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Gm:Math.pow(Gm,e),new Yn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*og,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Mn(255*(t+n*(mg*i+gg*r)),255*(t+n*(yg*i+vg*r)),255*(t+n*(bg*i)),this.opacity)}}));var Cg,Tg,kg,Mg,Og=function Ex(e){function t(e,t){var i=n((e=kn(e)).r,(t=kn(t)).r),r=n(e.g,t.g),o=n(e.b,t.b),s=n(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=o(t),e.opacity=s(t),e+""}}var n=Jn(e);return t.gamma=Ex,t}(1),$g=ei(Hn),_g=ei(Wn),Ag=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Eg=new RegExp(Ag.source,"g"),Ig=180/Math.PI,Lg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ng=fi(di,"px, ","px)","deg)"),Dg=fi(pi,", ",")",")"),jg=Math.SQRT2,Rg=2,Pg=4,Ug=1e-12,Fg=vi(Xn),Vg=vi(Qn),Bg=wi(Xn),qg=wi(Qn),Yg=Si(Xn),zg=Si(Qn),Hg={value:function(){}};Ti.prototype=Ci.prototype={constructor:Ti,on:function(e,t){var n,i=this._,r=ki(e+"",i),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=r[o]).type)i[n]=Oi(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Oi(i[n],e.name,null);return this}for(;++o<s;)if((n=(e=r[o]).type)&&(n=Mi(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ti(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;n>o;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,n=i.length;n>o;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;o>r;++r)i[r].value.apply(t,n)}};var Wg,Gg,Kg=Ei(","),Zg=Kg.parse,Xg=Kg.parseRows,Jg=Kg.format,Qg=Kg.formatRows,ey=Ei("	"),ty=ey.parse,ny=ey.parseRows,iy=ey.format,ry=ey.formatRows,oy=Di("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),sy=Di("application/json",function(e){return JSON.parse(e.responseText)}),ay=Di("text/plain",function(e){return e.responseText}),cy=Di("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}),ly=ji("text/csv",Zg),uy=ji("text/tab-separated-values",ty),dy=0,py=0,fy=0,hy=1e3,my=0,gy=0,yy=0,vy="object"==typeof performance&&performance.now?performance:Date,by="function"==typeof requestAnimationFrame?vy===Date?function(e){requestAnimationFrame(function(){e(vy.now())})}:requestAnimationFrame:function(e){setTimeout(e,17)};Fi.prototype=Vi.prototype={constructor:Fi,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Pi():+n)+(null==t?0:+t),this._next||Gg===this||(Gg?Gg._next=this:Wg=this,Gg=this),this._call=e,this._time=n,Hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hi())}};var wy=new Date,Sy=new Date,xy=Ki(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});xy.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Ki(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):xy:null};var Cy=xy.range,Ty=1e3,ky=6e4,My=36e5,Oy=864e5,$y=6048e5,_y=Ki(function(e){e.setTime(Math.floor(e/Ty)*Ty)},function(e,t){e.setTime(+e+t*Ty)},function(e,t){return(t-e)/Ty},function(e){return e.getUTCSeconds()}),Ay=_y.range,Ey=Ki(function(e){e.setTime(Math.floor(e/ky)*ky)},function(e,t){e.setTime(+e+t*ky)},function(e,t){return(t-e)/ky},function(e){return e.getMinutes()}),Iy=Ey.range,Ly=Ki(function(e){var t=e.getTimezoneOffset()*ky%My;0>t&&(t+=My),e.setTime(Math.floor((+e-t)/My)*My+t)},function(e,t){e.setTime(+e+t*My)},function(e,t){return(t-e)/My},function(e){return e.getHours()}),Ny=Ly.range,Dy=Ki(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ky)/Oy},function(e){return e.getDate()-1}),jy=Dy.range,Ry=Zi(0),Py=Zi(1),Uy=Zi(2),Fy=Zi(3),Vy=Zi(4),By=Zi(5),qy=Zi(6),Yy=Ry.range,zy=Py.range,Hy=Uy.range,Wy=Fy.range,Gy=Vy.range,Ky=By.range,Zy=qy.range,Xy=Ki(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),Jy=Xy.range,Qy=Ki(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Qy.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ki(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var ev=Qy.range,tv=Ki(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*ky)},function(e,t){return(t-e)/ky},function(e){return e.getUTCMinutes()}),nv=tv.range,iv=Ki(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*My)},function(e,t){return(t-e)/My},function(e){return e.getUTCHours()}),rv=iv.range,ov=Ki(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Oy},function(e){return e.getUTCDate()-1}),sv=ov.range,av=Xi(0),cv=Xi(1),lv=Xi(2),uv=Xi(3),dv=Xi(4),pv=Xi(5),fv=Xi(6),hv=av.range,mv=cv.range,gv=lv.range,yv=uv.range,vv=dv.range,bv=pv.range,wv=fv.range,Sv=Ki(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),xv=Sv.range,Cv=Ki(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Cv.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Ki(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var Tv,kv=Cv.range,Mv={"":tr,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return ir(100*e,t)},r:ir,s:nr,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Ov=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;or.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var $v,_v=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];e.format,e.formatPrefix,cr({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Av,Ev={"-":"",_:" ",0:"0"},Iv=/^\s*\d+/,Lv=/^%/,Nv=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;e.timeFormat,e.timeParse,e.utcFormat,e.utcParse,lo({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Dv="%Y-%m-%dT%H:%M:%S.%LZ",jv=Date.prototype.toISOString?uo:e.utcFormat(Dv),Rv=+new Date("2000-01-01T00:00:00.000Z")?po:e.utcParse(Dv),Pv=Array.prototype,Uv=Pv.map,Fv=Pv.slice,Vv={name:"implicit"},Bv=[0,1],qv=1e3,Yv=60*qv,zv=60*Yv,Hv=24*zv,Wv=7*Hv,Gv=30*Hv,Kv=365*Hv,Zv=Ko("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Xv=Ko("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Jv=Ko("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Qv=Ko("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),eb=zg(qn(300,.5,0),qn(-240,.5,1)),tb=zg(qn(-100,.75,.35),qn(80,1.5,.8)),nb=zg(qn(260,.75,.35),qn(80,1.5,.8)),ib=qn(),rb=Xo(Ko("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ob=Xo(Ko("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),sb=Xo(Ko("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ab=Xo(Ko("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),cb="http://www.w3.org/1999/xhtml",lb={svg:"http://www.w3.org/2000/svg",xhtml:cb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ub=0;rs.prototype=is.prototype={constructor:rs,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var db=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var pb=document.documentElement;if(!pb.matches){var fb=pb.webkitMatchesSelector||pb.msMatchesSelector||pb.mozMatchesSelector||pb.oMatchesSelector;db=function(e){return function(){return fb.call(this,e)}}}}var hb=db,mb={};if(e.event=null,"undefined"!=typeof document){var gb=document.documentElement;"onmouseenter"in gb||(mb={mouseenter:"mouseover",mouseleave:"mouseout"})}Ts.prototype={constructor:Ts,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var yb="$";ra.prototype={add:function(e){var t=this._names.indexOf(e);0>t&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var vb=[null];La.prototype=Na.prototype={constructor:La,select:ys,selectAll:ws,filter:Ss,data:$s,enter:Cs,exit:_s,merge:As,order:Es,sort:Is,call:Ns,nodes:Ds,node:js,size:Rs,empty:Ps,each:Us,attr:Hs,style:Xs,property:ta,classed:ua,text:ha,html:va,raise:wa,lower:xa,append:Ca,insert:ka,remove:Oa,datum:$a,on:us,dispatch:Ia};var bb=Ci("start","end","interrupt"),wb=[],Sb=0,xb=1,Cb=2,Tb=3,kb=4,Mb=5,Ob=Na.prototype.constructor,$b=0,_b=Na.prototype;jc.prototype=Rc.prototype={constructor:jc,select:xc,selectAll:Cc,filter:mc,merge:gc,selection:Tc,transition:Dc,call:_b.call,nodes:_b.nodes,node:_b.node,size:_b.size,empty:_b.empty,each:_b.each,on:bc,attr:ic,attrTween:sc,style:_c,styleTween:Ec,text:Nc,remove:Sc,tween:Ga,delay:lc,duration:pc,ease:hc};var Ab={time:null,delay:0,duration:250,ease:ne};Na.prototype.interrupt=za,Na.prototype.transition=Fc;var Eb=[null],Ib=Array.prototype.slice,Lb=1,Nb=2,Db=3,jb=4,Rb=1e-6;xl.prototype=yl.prototype={constructor:xl,each:sl,eachAfter:cl,eachBefore:al,sum:ll,sort:ul,path:dl,ancestors:fl,descendants:hl,leaves:ml,links:gl,copy:vl};var Pb="$",Ub={depth:-1},Fb={};ru.prototype=Object.create(xl.prototype);var Vb=(1+Math.sqrt(5))/2,Bb=function Ix(e){function t(t,n,i,r,o){cu(e,t,n,i,r,o)}return t.ratio=function(e){return Ix((e=+e)>1?e:1)},t}(Vb),qb=function Lx(e){function t(t,n,i,r,o){if((s=t._squarify)&&s.ratio===e)for(var s,a,c,l,u,d=-1,p=s.length,f=t.value;++d<p;){for(a=s[d],c=a.children,l=a.value=0,u=c.length;u>l;++l)a.value+=c[l].value;a.dice?Wl(a,n,i,r,i+=(o-i)*a.value/f):au(a,n,i,n+=(r-n)*a.value/f,o),f-=a.value}else t._squarify=s=cu(e,t,n,i,r,o),s.ratio=e}return t.ratio=function(e){return Lx((e=+e)>1?e:1)},t}(Vb),Yb=10,zb=Math.PI*(3-Math.sqrt(5));Eu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},Uu.prototype={constructor:Uu,insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=qu(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(Vu(this,n),e=n,n=e.U),n.C=!1,i.C=!0,Bu(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(Bu(this,n),e=n,n=e.U),n.C=!1,i.C=!0,Vu(this,i))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,o=e.L,s=e.R;if(n=o?s?qu(s):o:s,r?r.L===e?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=e.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=s,s.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===r.L){if(t=r.R,t.C&&(t.C=!1,r.C=!0,Vu(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Bu(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,Vu(this,r),e=this._;break}}else if(t=r.L,t.C&&(t.C=!1,r.C=!0,Bu(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Vu(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Bu(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}};var Hb,Wb,Gb,Kb,Zb,Xb=[],Jb=[],Qb=1e-6,ew=1e-12;hd.prototype={constructor:hd,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return Ju(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,i){for(var r,o=n.site,s=n.halfedges,a=-1,c=s.length,l=t[s[c-1]],u=l.left===o?l.right:l.left;++a<c;)r=u,l=t[s[a]],u=l.left===o?l.right:l.left,i<r.index&&i<u.index&&pd(o,r,u)<0&&e.push([o.data,r.data,u.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})}},vd.prototype={constructor:vd,scale:function(e){return 1===e?this:new vd(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new vd(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tw=new vd(1,0,0);bd.prototype=vd.prototype;var nw={name:"drag"},iw={name:"space"},rw={name:"handle"},ow={name:"center"},sw={name:"x",handles:["e","w"].map(Ad),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},aw={name:"y",handles:["n","s"].map(Ad),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},cw={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Ad),input:function(e){return e},output:function(e){return e}},lw={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},uw={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},dw={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},pw={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},fw={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},hw=Math.cos,mw=Math.sin,gw=Math.PI,yw=gw/2,vw=2*gw,bw=Math.max,ww=Array.prototype.slice;Zd.prototype={constructor:Zd,reset:function(){this.s=this.t=0},add:function(e){Xd(tS,e,this.t),Xd(this,tS.s,this.s),this.s?this.t+=tS.t:this.s=tS.t},valueOf:function(){return this.s}};var Sw,xw,Cw,Tw,kw,Mw,Ow,$w,_w,Aw,Ew,Iw,Lw,Nw,Dw,jw,Rw,Pw,Uw,Fw,Vw,Bw,qw,Yw,zw,Hw,Ww,Gw,Kw,Zw,Xw,Jw,Qw,eS,tS=new Zd,nS=1e-6,iS=1e-12,rS=Math.PI,oS=rS/2,sS=rS/4,aS=2*rS,cS=180/rS,lS=rS/180,uS=Math.abs,dS=Math.atan,pS=Math.atan2,fS=Math.cos,hS=Math.ceil,mS=Math.exp,gS=Math.log,yS=Math.pow,vS=Math.sin,bS=Math.sign||function(e){return e>0?1:0>e?-1:0},wS=Math.sqrt,SS=Math.tan,xS={Feature:function(e,t){np(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)np(n[i].geometry,t)}},CS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){ip(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)ip(n[i],t,0)},Polygon:function(e,t){rp(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)rp(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)np(n[i],t)}},TS={point:tp,lineStart:tp,lineEnd:tp,polygonStart:function(){Sw.reset(),TS.lineStart=sp,TS.lineEnd=ap},polygonEnd:function(){var e=+Sw;xw.add(0>e?aS+e:e),this.lineStart=this.lineEnd=this.point=tp},sphere:function(){xw.add(aS)}},kS={point:vp,lineStart:wp,lineEnd:Sp,polygonStart:function(){kS.point=xp,kS.lineStart=Cp,kS.lineEnd=Tp,jw.reset(),TS.polygonStart()},polygonEnd:function(){TS.polygonEnd(),kS.point=vp,kS.lineStart=wp,kS.lineEnd=Sp,0>Sw?($w=-(Aw=180),_w=-(Ew=90)):jw>nS?Ew=90:-nS>jw&&(_w=-90),Pw[0]=$w,Pw[1]=Aw}},MS={sphere:tp,point:_p,lineStart:Ep,lineEnd:Np,polygonStart:function(){MS.lineStart=Dp,MS.lineEnd=jp},polygonEnd:function(){MS.lineStart=Ep,MS.lineEnd=Np}};Bp.invert=Bp;var OS,$S,_S,AS,ES,IS,LS,NS,DS,jS,RS,PS,US=1e9,FS=-US,VS={sphere:tp,point:tp,lineStart:sf,lineEnd:tp,polygonStart:tp,polygonEnd:tp},BS=[null,null],qS={type:"LineString",coordinates:BS},YS=Kd(),zS=Kd(),HS={point:tp,lineStart:tp,lineEnd:tp,polygonStart:function(){HS.lineStart=yf,HS.lineEnd=wf},polygonEnd:function(){HS.lineStart=HS.lineEnd=HS.point=tp,YS.add(uS(zS)),zS.reset()},result:function(){var e=YS/2;return YS.reset(),e}},WS=1/0,GS=WS,KS=-WS,ZS=KS,XS={point:Sf,lineStart:tp,lineEnd:tp,polygonStart:tp,polygonEnd:tp,result:function(){var e=[[WS,GS],[KS,ZS]];return KS=ZS=-(GS=WS=1/0),e}},JS=0,QS=0,ex=0,tx=0,nx=0,ix=0,rx=0,ox=0,sx=0,ax={point:xf,lineStart:Cf,lineEnd:Mf,polygonStart:function(){ax.lineStart=Of,ax.lineEnd=$f},polygonEnd:function(){ax.point=xf,ax.lineStart=Cf,ax.lineEnd=Mf},result:function(){var e=sx?[rx/sx,ox/sx]:ix?[tx/ix,nx/ix]:ex?[JS/ex,QS/ex]:[NaN,NaN];return JS=QS=ex=tx=nx=ix=rx=ox=sx=0,e}},cx=Kd(),lx=jf(function(){return!0},Uf,Vf,[-rS,-oS]);zf.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ux=16,dx=fS(30*lS),px=Yf({point:function(e,t){this.stream.point(e*lS,t*lS)}}),fx=ih(function(e){return wS(2/(1+e))});fx.invert=rh(function(e){return 2*Qd(e/2)});var hx=ih(function(e){return(e=Jd(e))&&e/vS(e)});hx.invert=rh(function(e){return e}),ah.invert=function(e,t){return[e,2*dS(mS(t))-oS]},fh.invert=fh,yh.invert=rh(dS),bh.invert=rh(Qd),Sh.invert=rh(function(e){return 2+dS(e)}),Ch.invert=function(e,t){return[-t,2*dS(mS(e))-oS]},e.version=kh,e.bisect=Oh,e.bisectRight=Oh,e.bisectLeft=$h,e.ascending=t,e.bisector=n,e.descending=r,e.deviation=a,e.extent=c,e.histogram=m,e.thresholdFreedmanDiaconis=y,e.thresholdScott=v,e.thresholdSturges=h,e.max=b,e.mean=w,e.median=S,e.merge=x,e.min=C,e.pairs=T,e.permute=k,e.quantile=g,e.range=d,e.scan=M,e.shuffle=O,e.sum=$,e.ticks=p,e.tickStep=f,e.transpose=_,e.variance=s,e.zip=E,e.entries=q,e.keys=V,e.values=B,e.map=L,e.set=F,e.nest=N,e.randomUniform=Y,e.randomNormal=z,e.randomLogNormal=H,e.randomBates=G,e.randomIrwinHall=W,e.randomExponential=K,e.easeLinear=Z,e.easeQuad=Q,e.easeQuadIn=X,e.easeQuadOut=J,e.easeQuadInOut=Q,e.easeCubic=ne,e.easeCubicIn=ee,e.easeCubicOut=te,e.easeCubicInOut=ne,e.easePoly=Fh,e.easePolyIn=Ph,e.easePolyOut=Uh,e.easePolyInOut=Fh,e.easeSin=oe,e.easeSinIn=ie,e.easeSinOut=re,e.easeSinInOut=oe,e.easeExp=ce,e.easeExpIn=se,e.easeExpOut=ae,e.easeExpInOut=ce,e.easeCircle=de,e.easeCircleIn=le,e.easeCircleOut=ue,e.easeCircleInOut=de,e.easeBounce=fe,e.easeBounceIn=pe,e.easeBounceOut=fe,e.easeBounceInOut=he,e.easeBack=nm,e.easeBackIn=em,e.easeBackOut=tm,e.easeBackInOut=nm,e.easeElastic=am,e.easeElasticIn=sm,e.easeElasticOut=am,e.easeElasticInOut=cm,e.polygonArea=me,e.polygonCentroid=ge,e.polygonHull=we,e.polygonContains=Se,e.polygonLength=xe,e.path=Te,e.quadtree=qe,e.queue=Je,e.arc=ct,e.area=ht,e.line=ft,e.pie=yt,e.radialArea=xt,e.radialLine=St,e.symbol=Ct,e.symbols=Um,e.symbolCircle=Sm,e.symbolCross=xm,e.symbolDiamond=km,e.symbolSquare=Em,e.symbolStar=Am,e.symbolTriangle=Lm,e.symbolWye=Pm,e.curveBasisClosed=_t,e.curveBasisOpen=Et,e.curveBasis=Ot,e.curveBundle=Fm,e.curveCardinalClosed=Bm,e.curveCardinalOpen=qm,e.curveCardinal=Vm,e.curveCatmullRomClosed=zm,e.curveCatmullRomOpen=Hm,e.curveCatmullRom=Ym,e.curveLinearClosed=Bt,e.curveLinear=ut,e.curveMonotoneX=Zt,e.curveMonotoneY=Xt,e.curveNatural=en,e.curveStep=nn,e.curveStepAfter=on,e.curveStepBefore=rn,e.stack=ln,e.stackOffsetExpand=un,e.stackOffsetNone=sn,e.stackOffsetSilhouette=dn,e.stackOffsetWiggle=pn,e.stackOrderAscending=fn,e.stackOrderDescending=mn,e.stackOrderInsideOut=gn,e.stackOrderNone=an,e.stackOrderReverse=yn,e.color=Sn,e.rgb=kn,e.hsl=_n,e.lab=Ln,e.hcl=Fn,e.cubehelix=qn,e.interpolate=ci,e.interpolateArray=ti,e.interpolateDate=ni,e.interpolateNumber=ii,e.interpolateObject=ri,e.interpolateRound=li,e.interpolateString=ai,e.interpolateTransformCss=Ng,e.interpolateTransformSvg=Dg,e.interpolateZoom=yi,e.interpolateRgb=Og,e.interpolateRgbBasis=$g,e.interpolateRgbBasisClosed=_g,e.interpolateHsl=Fg,e.interpolateHslLong=Vg,e.interpolateLab=bi,e.interpolateHcl=Bg,e.interpolateHclLong=qg,e.interpolateCubehelix=Yg,e.interpolateCubehelixLong=zg,e.interpolateBasis=Hn,e.interpolateBasisClosed=Wn,e.quantize=xi,e.dispatch=Ci,e.dsvFormat=Ei,e.csvParse=Zg,e.csvParseRows=Xg,e.csvFormat=Jg,e.csvFormatRows=Qg,e.tsvParse=ty,e.tsvParseRows=ny,e.tsvFormat=iy,e.tsvFormatRows=ry,e.request=Ii,e.html=oy,e.json=sy,e.text=ay,e.xml=cy,e.csv=ly,e.tsv=uy,e.now=Pi,e.timer=Vi,e.timerFlush=Bi,e.timeout=Wi,e.interval=Gi,e.timeInterval=Ki,e.timeMillisecond=xy,e.timeMilliseconds=Cy,e.timeSecond=_y,e.timeSeconds=Ay,e.timeMinute=Ey,e.timeMinutes=Iy,e.timeHour=Ly,e.timeHours=Ny,e.timeDay=Dy,e.timeDays=jy,e.timeWeek=Ry,e.timeWeeks=Yy,e.timeSunday=Ry,e.timeSundays=Yy,e.timeMonday=Py,e.timeMondays=zy,e.timeTuesday=Uy,e.timeTuesdays=Hy,e.timeWednesday=Fy,e.timeWednesdays=Wy,e.timeThursday=Vy,e.timeThursdays=Gy,e.timeFriday=By,e.timeFridays=Ky,e.timeSaturday=qy,e.timeSaturdays=Zy,e.timeMonth=Xy,e.timeMonths=Jy,e.timeYear=Qy,e.timeYears=ev,e.utcMillisecond=xy,e.utcMilliseconds=Cy,e.utcSecond=_y,e.utcSeconds=Ay,e.utcMinute=tv,e.utcMinutes=nv,e.utcHour=iv,e.utcHours=rv,e.utcDay=ov,e.utcDays=sv,e.utcWeek=av,e.utcWeeks=hv,e.utcSunday=av,e.utcSundays=hv,e.utcMonday=cv,e.utcMondays=mv,e.utcTuesday=lv,e.utcTuesdays=gv,e.utcWednesday=uv,e.utcWednesdays=yv,e.utcThursday=dv,e.utcThursdays=vv,e.utcFriday=pv,e.utcFridays=bv,e.utcSaturday=fv,e.utcSaturdays=wv,e.utcMonth=Sv,e.utcMonths=xv,e.utcYear=Cv,e.utcYears=kv,e.formatLocale=ar,e.formatDefaultLocale=cr,e.formatSpecifier=rr,e.precisionFixed=lr,e.precisionPrefix=ur,e.precisionRound=dr,e.isoFormat=jv,e.isoParse=Rv,e.timeFormatLocale=mr,e.timeFormatDefaultLocale=lo,e.scaleBand=ho,e.scalePoint=go,e.scaleIdentity=_o,e.scaleLinear=$o,e.scaleLog=Ro,e.scaleOrdinal=fo,e.scaleImplicit=Vv,e.scalePow=Uo,e.scaleSqrt=Fo,e.scaleQuantile=Vo,e.scaleQuantize=Bo,e.scaleThreshold=qo,e.scaleTime=Wo,e.scaleUtc=Go,e.schemeCategory10=Zv,e.schemeCategory20b=Xv,e.schemeCategory20c=Jv,e.schemeCategory20=Qv,e.scaleSequential=Jo,e.interpolateCubehelixDefault=eb,e.interpolateRainbow=Zo,e.interpolateWarm=tb,e.interpolateCool=nb,e.interpolateViridis=rb,e.interpolateMagma=ob,e.interpolateInferno=sb,e.interpolatePlasma=ab,e.creator=ns,e.customEvent=ds,e.local=is,e.matcher=hb,e.mouse=hs,e.namespace=Qo,e.namespaces=lb,e.select=Da,e.selectAll=ja,e.selection=Na,e.selector=gs,e.selectorAll=bs,e.touch=Ra,e.touches=Pa,e.window=Ws,e.active=Vc,e.interrupt=Ya,e.transition=Rc,e.axisTop=Gc,e.axisRight=Kc,e.axisBottom=Zc,e.axisLeft=Xc,e.cluster=ol,e.hierarchy=yl,e.pack=Bl,e.packSiblings=jl,e.packEnclose=kl,e.partition=Gl,e.stratify=Xl,e.tree=su,e.treemap=lu,e.treemapBinary=uu,e.treemapDice=Wl,e.treemapSlice=au,e.treemapSliceDice=du,e.treemapSquarify=Bb,e.treemapResquarify=qb,e.forceCenter=pu,e.forceCollide=yu,e.forceLink=bu,e.forceManyBody=Cu,e.forceSimulation=xu,e.forceX=Tu,e.forceY=ku,e.drag=Du,e.dragDisable=$u,e.dragEnable=_u,e.voronoi=md,e.zoom=kd,e.zoomIdentity=tw,e.zoomTransform=bd,e.brush=Pd,e.brushX=jd,e.brushY=Rd,e.brushSelection=Dd,e.chord=Vd,e.ribbon=Gd,e.geoAlbers=eh,e.geoAlbersUsa=nh,e.geoArea=up,e.geoAzimuthalEqualArea=oh,e.geoAzimuthalEqualAreaRaw=fx,e.geoAzimuthalEquidistant=sh,e.geoAzimuthalEquidistantRaw=hx,e.geoBounds=$p,e.geoCentroid=Up,e.geoCircle=Zp,e.geoClipExtent=of,e.geoConicConformal=ph,e.geoConicConformalRaw=dh,e.geoConicEqualArea=Qf,e.geoConicEqualAreaRaw=Jf,e.geoConicEquidistant=gh,e.geoConicEquidistantRaw=mh,e.geoDistance=df,e.geoEquirectangular=hh,e.geoEquirectangularRaw=fh,e.geoGnomonic=vh,e.geoGnomonicRaw=yh,e.geoGraticule=hf,
e.geoInterpolate=mf,e.geoLength=uf,e.geoMercator=ch,e.geoMercatorRaw=ah,e.geoOrthographic=wh,e.geoOrthographicRaw=bh,e.geoPath=Nf,e.geoProjection=Kf,e.geoProjectionMutator=Zf,e.geoRotation=Wp,e.geoStereographic=xh,e.geoStereographicRaw=Sh,e.geoStream=op,e.geoTransform=qf,e.geoTransverseMercator=Th,e.geoTransverseMercatorRaw=Ch,Object.defineProperty(e,"__esModule",{value:!0})}),n("platform/features/conductor/core/src/ui/ConductorAxisController",["d3"],function(e){function t(e,n,i,r,o){this.formatService=n,this.conductor=e.conductor,this.conductorViewService=i,this.scope=r,this.initialized=!1,this.bounds=this.conductor.bounds(),this.timeSystem=this.conductor.timeSystem(),Object.keys(t.prototype).filter(function(e){return"function"==typeof t.prototype[e]}).forEach(function(e){this[e]=t.prototype[e].bind(this)}.bind(this)),this.initialize(o)}var n=1;return t.prototype.destroy=function(){this.conductor.off("timeSystem",this.changeTimeSystem),this.conductor.off("bounds",this.changeBounds),this.conductorViewService.off("zoom",this.onZoom),this.conductorViewService.off("zoom-stop",this.onZoomStop)},t.prototype.initialize=function(t){this.target=t[0].firstChild;var i=this.target.offsetHeight,r=e.select(this.target).append("svg:svg").attr("width","100%").attr("height",i);this.xAxis=e.axisTop(),this.axisElement=r.append("g").attr("transform","translate(0,"+(i-n)+")"),void 0!==this.timeSystem&&(this.changeTimeSystem(this.timeSystem),this.setScale()),this.conductor.on("timeSystem",this.changeTimeSystem),this.conductor.on("bounds",this.changeBounds),this.scope.$on("$destroy",this.destroy),this.conductorViewService.on("zoom",this.onZoom),this.conductorViewService.on("zoom-stop",this.onZoomStop)},t.prototype.changeBounds=function(e){this.bounds=e,this.zooming||this.setScale()},t.prototype.setScale=function(){var t=this.target.offsetWidth,i=this.conductor.timeSystem(),r=this.bounds;i.isUTCBased()?(this.xScale=this.xScale||e.scaleUtc(),this.xScale.domain([new Date(r.start),new Date(r.end)])):(this.xScale=this.xScale||e.scaleLinear(),this.xScale.domain([r.start,r.end])),this.xAxis.scale(this.xScale),this.xScale.range([n,t-2*n]),this.axisElement.call(this.xAxis),this.msPerPixel=(r.end-r.start)/t},t.prototype.changeTimeSystem=function(t){this.timeSystem=t;var n=t.formats()[0];if(void 0!==n){var i=this.formatService.getFormat(n),r=this.conductor.bounds();t.isUTCBased()?this.xScale=e.scaleUtc():this.xScale=e.scaleLinear(),this.xAxis.scale(this.xScale),this.xAxis.tickFormat(function(e){return e instanceof Date&&(e=e.getTime()),i.format(e,{min:r.start,max:r.end})}),this.axisElement.call(this.xAxis)}},t.prototype.panStop=function(){this.conductorViewService.emit("pan-stop"),this.conductor.bounds(this.bounds)},t.prototype.onZoom=function(e){this.zooming=!0,this.bounds=e.bounds,this.setScale()},t.prototype.onZoomStop=function(e){this.zooming=!1},t.prototype.pan=function(e){if(!this.conductor.follow()){var t=e[0]*this.msPerPixel,n=this.conductor.bounds(),i=1e3*Math.floor((n.start-t)/1e3),r=1e3*Math.floor((n.end-t)/1e3);this.bounds={start:i,end:r},this.setScale(),this.conductorViewService.emit("pan",this.bounds)}},t.prototype.resize=function(){this.setScale()},t}),n("platform/features/conductor/core/src/ui/ConductorTOIController",["zepto"],function(e){function t(e,n,i){this.conductor=n.conductor,this.conductorViewService=i,Object.keys(t.prototype).filter(function(e){return"function"==typeof t.prototype[e]}).forEach(function(e){this[e]=t.prototype[e].bind(this)}.bind(this)),this.conductor.on("timeOfInterest",this.changeTimeOfInterest),this.conductorViewService.on("zoom",this.setOffsetFromZoom),this.conductorViewService.on("pan",this.setOffsetFromBounds);var r=this.conductor.timeOfInterest();r&&this.changeTimeOfInterest(r),e.$on("$destroy",this.destroy)}return t.prototype.destroy=function(){this.conductor.off("timeOfInterest",this.changeTimeOfInterest),this.conductorViewService.off("zoom",this.setOffsetFromZoom),this.conductorViewService.off("pan",this.setOffsetFromBounds)},t.prototype.setOffsetFromBounds=function(e){var t=this.conductor.timeOfInterest();if(void 0!==t){var n=t-e.start,i=e.end-e.start;this.left=n/i*100,this.pinned=!0}else this.left=0,this.pinned=!1},t.prototype.setOffsetFromZoom=function(e){return this.setOffsetFromBounds(e.bounds)},t.prototype.changeTimeOfInterest=function(){var e=this.conductor.bounds();e&&this.setOffsetFromBounds(e)},t.prototype.setTOIFromPosition=function(t){if(t.altKey){var n=e(t.currentTarget),i=n.width(),r=t.pageX-n.offset().left,o=r/i,s=this.conductor.bounds(),a=s.end-s.start;this.conductor.timeOfInterest(a*o+s.start)}},t}),n("platform/features/conductor/core/src/ui/TimeOfInterestController",[],function(){function e(t,n,i){if(this.conductor=n.conductor,this.formatService=i,this.format=void 0,this.toiText=void 0,this.$scope=t,Object.keys(e.prototype).filter(function(t){return"function"==typeof e.prototype[t]}).forEach(function(t){this[t]=e.prototype[t].bind(this)}.bind(this)),this.conductor.on("timeOfInterest",this.changeTimeOfInterest),this.conductor.on("timeSystem",this.changeTimeSystem),this.conductor.timeSystem()){this.changeTimeSystem(this.conductor.timeSystem());var r=this.conductor.timeOfInterest();r&&this.changeTimeOfInterest(r)}t.$on("$destroy",this.destroy)}return e.prototype.changeTimeOfInterest=function(e){void 0!==e?(this.$scope.pinned=!0,this.toiText=this.format.format(e)):this.$scope.pinned=!1},e.prototype.changeTimeSystem=function(e){this.format=this.formatService.getFormat(e.formats()[0])},e.prototype.destroy=function(){this.conductor.off("timeOfInterest",this.changeTimeOfInterest),this.conductor.off("timeSystem",this.changeTimeSystem)},e.prototype.dismiss=function(){this.conductor.timeOfInterest(void 0)},e.prototype.resync=function(){this.conductor.timeOfInterest(this.conductor.timeOfInterest())},e}),n("platform/features/conductor/core/src/ui/MctConductorAxis",["./ConductorAxisController"],function(e){function t(){return{controller:["openmct","formatService","timeConductorViewService","$scope","$element",e],controllerAs:"axis",restrict:"E",priority:1e3,template:'<div class="l-axis-holder"     mct-drag-down="axis.panStart()"    mct-drag-up="axis.panStop(delta)"    mct-drag="axis.pan(delta)"    mct-resize="axis.resize()"></div>'}}return t}),n("platform/features/conductor/core/src/ui/NumberFormat",[],function(){function e(){}return e.prototype.format=function(e){return isNaN(e)?"":""+e},e.prototype.parse=function(e){return parseFloat(e)},e.prototype.validate=function(e){return!isNaN(e)},e}),n("text!platform/features/conductor/core/res/templates/time-conductor.html",[],function(){return'<!-- Parent holder for time conductor. follow-mode | fixed-mode -->\n<div ng-controller="TimeConductorController as tcController"\n    class="holder grows flex-elem l-flex-row l-time-conductor {{modeModel.selectedKey}}-mode {{timeSystemModel.selected.metadata.key}}-time-system"\n        ng-class="{\'status-panning\': tcController.panning}" ng-show="showTimeConductor">\n    <div class="flex-elem holder time-conductor-icon">\n        <div class="hand-little"></div>\n        <div class="hand-big"></div>\n    </div>\n\n    <div class="flex-elem holder grows l-flex-col l-time-conductor-inner">\n        <!-- Holds inputs and ticks -->\n        <div class="l-time-conductor-inputs-and-ticks l-row-elem flex-elem no-margin">\n            <form class="l-time-conductor-inputs-holder"\n                  ng-submit="tcController.setBounds(boundsModel)">\n                <span class="l-time-range-w start-w">\n                    <span class="l-time-conductor-inputs">\n                        <span class="l-time-range-input-w start-date">\n                            <span class="title"></span>\n                            <mct-control key="\'datetime-field\'"\n                                         structure="{\n                                             format: timeSystemModel.format,\n                                             validate: tcController.validation.validateStart\n                                         }"\n                                         ng-model="boundsModel"\n                                         ng-blur="tcController.setBounds(boundsModel)"\n                                         field="\'start\'"\n                                         class="time-range-input">\n                            </mct-control>\n                        </span>\n                            <span class="l-time-range-input-w time-delta start-delta"\n                              ng-class="{\'hide\':(modeModel.selectedKey === \'fixed\')}">\n                                -\n                            <mct-control key="\'datetime-field\'"\n                                         structure="{\n                                            format: timeSystemModel.deltaFormat,\n                                            validate: tcController.validation.validateStartDelta\n                                         }"\n                                         ng-model="boundsModel"\n                                         ng-blur="tcController.setDeltas(boundsModel)"\n                                         field="\'startDelta\'"\n                                         class="hrs-min-input">\n                            </mct-control>\n                        </span>\n                    </span>\n                </span>\n                <span class="l-time-range-w end-w">\n                    <span class="l-time-conductor-inputs">\n                        <span class="l-time-range-input-w end-date"\n                              ng-controller="ToggleController as t2">\n                            <span class="title"></span>\n                            <mct-control key="\'datetime-field\'"\n                                         structure="{\n                                             format: timeSystemModel.format,\n                                             validate: tcController.validation.validateEnd\n                                         }"\n                                         ng-model="boundsModel"\n                                         ng-blur="tcController.setBounds(boundsModel)"\n                                         ng-disabled="modeModel.selectedKey !== \'fixed\'"\n                                         field="\'end\'"\n                                         class="time-range-input">\n                            </mct-control>\n                        </span>\n                        <span class="l-time-range-input-w time-delta end-delta"\n                              ng-class="{\'hide\':(modeModel.selectedKey === \'fixed\')}">\n                                +\n                            <mct-control key="\'datetime-field\'"\n                                         structure="{\n                                            format: timeSystemModel.deltaFormat,\n                                            validate: tcController.validation.validateEndDelta\n                                         }"\n                                         ng-model="boundsModel"\n                                         ng-blur="tcController.setDeltas(boundsModel)"\n                                         field="\'endDelta\'"\n                                         class="hrs-min-input">\n                            </mct-control>\n                        </span>\n                    </span>\n                </span>\n\n                <input type="submit" class="hidden">\n            </form>\n            <mct-conductor-axis></mct-conductor-axis>\n        </div>\n\n        <!-- Holds data visualization, time of interest -->\n        <div class="l-data-visualization-holder l-row-elem flex-elem"\n             ng-controller="ConductorTOIController as toi">\n            <a class="l-page-button s-icon-button icon-pointer-left"></a>\n            <div class="l-data-visualization" ng-click="toi.setTOIFromPosition($event)">\n                <mct-include key="\'time-of-interest\'"\n                             class="l-toi-holder show-val"\n                             ng-class="{ pinned: toi.pinned, \'val-to-left\': toi.left > 80 }"\n                             ng-style="{\'left\': toi.left + \'%\'}"></mct-include>\n            </div>\n            <a class="l-page-button align-right s-icon-button icon-pointer-right"></a>\n        </div>\n\n        <!-- Holds time system and session selectors, and zoom control -->\n        <div class="l-time-conductor-controls l-row-elem l-flex-row flex-elem">\n            <mct-include\n                key="\'mode-selector\'"\n                ng-model="modeModel"\n                class="holder flex-elem menus-up mode-selector">\n            </mct-include>\n            <mct-control\n                    key="\'menu-button\'"\n                    class="holder flex-elem menus-up time-system"\n                    structure="{\n                        text: timeSystemModel.selected.metadata.name,\n                        click: tcController.selectTimeSystemByKey,\n                        options: timeSystemModel.options\n                    }">\n            </mct-control>\n            <!-- Zoom control -->\n            <div ng-if="tcController.supportsZoom"\n                 class="l-time-conductor-zoom-w grows flex-elem l-flex-row">\n                {{currentZoom}}\n                <span\n                        class="time-conductor-zoom-current-range flex-elem flex-fixed holder">{{timeUnits}}</span>\n                <input class="time-conductor-zoom flex-elem" type="range"\n                       ng-model="tcController.currentZoom"\n                       ng-mouseUp="tcController.onZoomStop(tcController.currentZoom)"\n                       ng-change="tcController.onZoom(tcController.currentZoom)"\n                       min="0.01"\n                       step="0.01"\n                       max="0.99" />\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),n("text!platform/features/conductor/core/res/templates/mode-selector/mode-selector.html",[],function(){return'<!--\n Open MCT Web, Copyright (c) 2014-2015, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT Web is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT Web includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="ClickAwayController as modeController">\n    <div class="s-menu-button"\n         ng-click="modeController.toggle()">\n		<span class="title-label">{{ngModel.options[ngModel.selectedKey]\n            .label}}</span>\n    </div>\n    <div class="menu super-menu mini mode-selector-menu"\n         ng-show="modeController.isActive()">\n        <mct-include key="\'mode-menu\'"\n                     ng-model="ngModel">\n        </mct-include>\n    </div>\n</span>'}),n("text!platform/features/conductor/core/res/templates/mode-selector/mode-menu.html",[],function(){return'<!--\n Open MCT Web, Copyright (c) 2014-2015, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT Web is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT Web includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="contents">\n    <div class="pane left menu-items">\n        <ul>\n            <li ng-repeat="(key, metadata) in ngModel.options"\n                ng-click="ngModel.selectedKey=key">\n                <a ng-mouseover="ngModel.activeMetadata = metadata"\n                   ng-mouseleave="ngModel.activeMetadata = undefined"\n                   class="menu-item-a {{metadata.cssClass}}">\n                    {{metadata.name}}\n                </a>\n            </li>\n        </ul>\n    </div>\n    <div class="pane right menu-item-description">\n        <div\n                class="desc-area ui-symbol icon type-icon {{ngModel.activeMetadata.cssClass}}"></div>\n        <div class="desc-area title">\n            {{ngModel.activeMetadata.name}}\n        </div>\n        <div class="desc-area description">\n            {{ngModel.activeMetadata.description}}\n        </div>\n    </div>\n</div>\n'}),n("text!platform/features/conductor/core/res/templates/time-of-interest.html",[],function(){return'<div class="abs angular-controller"\n     ng-controller="TimeOfInterestController as toi">\n    <div class="l-flex-row l-toi">\n        <span class="flex-elem l-flex-row l-toi-buttons">\n            <a class="flex-elem t-button-resync icon-button" title="Re-sync Time of Interest"\n               ng-click="toi.resync()"></a>\n            <a class="flex-elem t-button-unpin icon-button" title="Unset Time of Interest"\n               ng-click="toi.dismiss()"></a>\n        </span>\n        <span class="flex-elem l-toi-val">{{toi.toiText}}</span>\n    </div>\n</div>'}),n("platform/features/conductor/core/bundle",["./src/ui/TimeConductorViewService","./src/ui/TimeConductorController","./src/ui/ConductorAxisController","./src/ui/ConductorTOIController","./src/ui/TimeOfInterestController","./src/ui/MctConductorAxis","./src/ui/NumberFormat","text!./res/templates/time-conductor.html","text!./res/templates/mode-selector/mode-selector.html","text!./res/templates/mode-selector/mode-menu.html","text!./res/templates/time-of-interest.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d){d.register("platform/features/conductor/core",{extensions:{services:[{key:"timeConductorViewService",implementation:e,depends:["openmct","timeSystems[]"]}],controllers:[{key:"TimeConductorController",implementation:t,depends:["$scope","$window","$location","openmct","timeConductorViewService","formatService","DEFAULT_TIMECONDUCTOR_MODE","SHOW_TIMECONDUCTOR"]},{key:"ConductorTOIController",implementation:i,depends:["$scope","openmct","timeConductorViewService","formatService"]},{key:"TimeOfInterestController",implementation:r,depends:["$scope","openmct","formatService"]}],directives:[{key:"mctConductorAxis",implementation:o,depends:["openmct","formatService"]}],stylesheets:[{stylesheetUrl:"css/time-conductor-espresso.css",theme:"espresso"},{stylesheetUrl:"css/time-conductor-snow.css",theme:"snow"}],templates:[{key:"conductor",template:a},{key:"mode-menu",template:l},{key:"mode-selector",template:c},{key:"time-of-interest",template:u}],representations:[{key:"time-conductor",template:a}],licenses:[{name:"D3: Data-Driven Documents",version:"4.1.0",author:"Mike Bostock",description:"D3 (or D3.js) is a JavaScript library for visualizing data using web standards. D3 helps you bring data to life using SVG, Canvas and HTML. D3 combines powerful visualization and interaction techniques with a data-driven approach to DOM manipulation, giving you the full capabilities of modern browsers and the freedom to design the right visual interface for your data.",website:"https://d3js.org/",copyright:"Copyright 2010-2016 Mike Bostock",license:"BSD-3-Clause",link:"https://github.com/d3/d3/blob/master/LICENSE"}],constants:[{key:"DEFAULT_TIMECONDUCTOR_MODE",value:"realtime",priority:"fallback"}],formats:[{key:"number",implementation:s}]}})}),n("platform/features/conductor/compatibility/src/ConductorTelemetryDecorator",[],function(){function e(t,n){this.conductor=t.conductor,this.telemetryService=n,this.amendRequests=e.prototype.amendRequests.bind(this)}function t(e,t,n){return e=e||{},e.start=t.start,e.end=t.end,e.domain=n.metadata.key,e}return e.prototype.amendRequests=function(e){var n=this.conductor.bounds(),i=this.conductor.timeSystem();return(e||[]).map(function(e){return t(e,n,i)})},e.prototype.requestTelemetry=function(e){return this.telemetryService.requestTelemetry(this.amendRequests(e))},e.prototype.subscribe=function(e,t){function n(){return o.amendRequests(t)}var i=this.telemetryService.subscribe(e,this.amendRequests(t)),r=this.conductor,o=this;return r.on("bounds",n),function(){i(),r.off("bounds",n)}},e}),n("platform/features/conductor/compatibility/src/ConductorRepresenter",[],function(){function e(e,t,n){this.conductor=e.conductor,this.scope=t,this.element=n,this.boundsListener=this.boundsListener.bind(this),this.timeSystemListener=this.timeSystemListener.bind(this),this.followListener=this.followListener.bind(this)}return e.prototype.boundsListener=function(e){this.scope.$broadcast("telemetry:display:bounds",{start:e.start,end:e.end,domain:this.conductor.timeSystem().metadata.key},this.conductor.follow())},e.prototype.timeSystemListener=function(e){var t=this.conductor.bounds();this.scope.$broadcast("telemetry:display:bounds",{start:t.start,end:t.end,domain:e.metadata.key},this.conductor.follow())},e.prototype.followListener=function(){this.boundsListener(this.conductor.bounds())},e.prototype.represent=function(e){"browse-object"===e.key&&(this.destroy(),this.conductor.on("bounds",this.boundsListener),this.conductor.on("timeSystem",this.timeSystemListener),this.conductor.on("follow",this.followListener))},e.prototype.destroy=function(){this.conductor.off("bounds",this.boundsListener),this.conductor.off("timeSystem",this.timeSystemListener),this.conductor.off("follow",this.followListener)},e}),n("platform/features/conductor/compatibility/bundle",["./src/ConductorTelemetryDecorator","./src/ConductorRepresenter","legacyRegistry"],function(e,t,n){n.register("platform/features/conductor/compatibility",{extensions:{representers:[{implementation:t,depends:["openmct"]}],components:[{type:"decorator",provides:"telemetryService",implementation:e,depends:["openmct"]}]}})}),n("platform/features/conductor/utcTimeSystem/src/UTCTimeSystem",["../../core/src/timeSystems/TimeSystem","../../core/src/timeSystems/LocalClock"],function(e,t){function n(n){e.call(this),this.metadata={key:"utc",name:"UTC",cssClass:"icon-clock"},this.fmts=["utc"],this.sources=[new t(n,r)],this.defaultValues=void 0}var i=9e5,r=100;return n.prototype=Object.create(e.prototype),n.prototype.formats=function(){return this.fmts},n.prototype.deltaFormat=function(){return"duration"},n.prototype.tickSources=function(){return this.sources},n.prototype.defaults=function(e){if(arguments.length>0&&(this.defaultValues=e),void 0===this.defaultValues){var t=1e3*Math.ceil(Date.now()/1e3),n=6e4,r=15768e8;this.defaultValues={key:"utc-default",name:"UTC time system defaults",deltas:{start:i,end:0},bounds:{start:t-i,end:t},zoom:{min:r,max:n}}}return this.defaultValues},n}),n("platform/features/conductor/utcTimeSystem/bundle",["./src/UTCTimeSystem","legacyRegistry"],function(e,t){t.register("platform/features/conductor/utcTimeSystem",{extensions:{timeSystems:[{implementation:e,depends:["$timeout"]}]}})}),n("platform/features/imagery/src/policies/ImageryViewPolicy",[],function(){function e(){}function t(e){var t=e&&e.getCapability("telemetry"),n=t?t.getMetadata():{},i=n.ranges||[];return i.some(function(e){return"imageUrl"===e.format||"image"===e.format})}return e.prototype.allow=function(e,n){return"imagery"===e.key?t(n):!0},e}),n("platform/features/imagery/src/controllers/ImageryController",["moment"],function(e){function t(e,t){function n(){o.handle&&(o.handle.unsubscribe(),o.handle=void 0)}function i(){return o.updateValues()}function r(e){n(),o.date="",o.time="",o.zone="",o.imageUrl="",o.handle=e&&t.handle(e,i,!0)}var o=this;e.filters={brightness:100,contrast:100},e.$watch("domainObject",r),e.$on("$destroy",n)}var n="YYYY-MM-DD",i="HH:mm:ss.SSS";return t.prototype.updateValues=function(){var t,r,o=this.handle&&this.handle.getTelemetryObjects()[0];o&&!this.isPaused&&(t=this.handle.getDomainValue(o),r=void 0!==t?e.utc(t):void 0,this.date=r?r.format(n):"",this.time=r?r.format(i):"",this.zone=r?"UTC":"",this.imageUrl=this.handle.getRangeValue(o))},t.prototype.getTime=function(){return this.time},t.prototype.getDate=function(){return this.date},t.prototype.getZone=function(){return this.zone},t.prototype.getImageUrl=function(){return this.imageUrl},t.prototype.paused=function(e){return arguments.length>0&&e!==this.isPaused&&(this.isPaused=e,this.updateValues()),this.isPaused},t}),n("platform/features/imagery/src/directives/MCTBackgroundImage",[],function(){function e(e){function t(t,n){function i(e){var t=e?Object.keys(e).map(function(t){return t+"("+e[t]+"%)"}).join(" "):"";n.css("filter",t),n.css("webkitFilter",t)}function r(t){function i(){a>=s&&(s=a,n.css("background-image","url('"+t+"')"))}var r,a=o;t?(r=e[0].createElement("img"),r.src=t,r.onload=i):(s=a,n.css("background-image","none")),o+=1}var o=0,s=0;t.$watch("mctBackgroundImage",r),t.$watchCollection("filters",i)}return{restrict:"A",scope:{mctBackgroundImage:"=",filters:"="},link:t}}return e}),n("text!platform/features/imagery/res/templates/imagery.html",[],function(){return'<div class="t-imagery" ng-controller="ImageryController as imagery">\n    <div class="l-image-main-wrapper l-flex-col"\n        ng-mouseenter="showLocalControls = true;"\n        ng-mouseleave="showLocalControls = false;">\n        <div class="l-local-controls s-local-controls s-wrapper-transluc l-flex-row"\n            ng-class="{ \'hide-nice\': !showLocalControls }">\n            <span class="holder flex-elem grows">\n                <input class="icon-brightness" type="range"\n                       min="0"\n                       max="500"\n                       ng-model="filters.brightness">\n                </input>\n                <input class="icon-contrast" type="range"\n                       min="0"\n                       max="500"\n                       ng-model="filters.contrast">\n                </input>\n            </span>\n            <span class="holder flex-elem t-reset-btn-holder">\n                <a class="s-icon-button icon-reset t-btn-reset"\n                   ng-click="filters = { brightness: 100, contrast: 100 }"></a>\n            </span>\n        </div>\n\n        <div class="l-image-main s-image-main flex-elem grows"\n             ng-class="{ paused: imagery.paused(), stale:false }">\n            <div class="image-main"\n\n            mct-background-image="imagery.getImageUrl()"\n            filters="filters">\n            </div>\n        </div>\n\n        <div class="l-image-main-controlbar flex-elem l-flex-row">\n            <div class="left flex-elem grows">\n                <a class="s-button show-thumbs sm hidden icon-thumbs-strip"\n                    ng-click="showThumbsBubble = (showThumbsBubble)? false:true"></a>\n                <span class="l-timezone">{{imagery.getZone()}}</span>\n                <span class="l-time">{{imagery.getTime()}}</span>\n                <span class="l-date">{{imagery.getDate()}}</span>\n            </div>\n            <div class="right flex-elem">\n                <a class="s-button pause-play"\n                    ng-click="imagery.paused(!imagery.paused())"\n                    ng-class="{ paused: imagery.paused() }"></a>\n                <a href="{{imagery.getImageUrl()}}"\n                   ng-if="imagery.getImageUrl()"\n                   target="_blank"\n                   title="Open image in new tab."\n                   class="s-button icon-new-window">\n                   </a>\n                <a href=""\n                    class="s-button l-mag s-mag ui-symbol vsm icon-arrows-out"\n                    ng-click="clipped = false"\n                    ng-show="clipped === true"\n                    title="Not all of image is visible; click to reset."></a>\n            </div>\n        </div>\n    </div>\n</div>\n'}),n("platform/features/imagery/bundle",["./src/policies/ImageryViewPolicy","./src/controllers/ImageryController","./src/directives/MCTBackgroundImage","text!./res/templates/imagery.html","legacyRegistry"],function(e,t,n,i,r){r.register("platform/features/imagery",{name:"Plot view for telemetry",extensions:{views:[{name:"Imagery",key:"imagery",cssClass:"icon-image",template:i,priority:"preferred",needs:["telemetry"],editable:!1}],policies:[{category:"view",implementation:e}],controllers:[{key:"ImageryController",implementation:t,depends:["$scope","telemetryHandler"]}],directives:[{key:"mctBackgroundImage",implementation:n,depends:["$document"]}]}})}),n("platform/features/layout/src/LayoutDrag",[],function(){function e(e,t,n,i){this.rawPosition=e,this.posFactor=t,this.dimFactor=n,this.gridSize=i}function t(e,t){return t.map(function(t,n){return Math.round(t/e[n])})}function n(e,t){return e.map(function(e,n){return e*t[n]})}function i(e,t){return e.map(function(e,n){return e+t[n]})}function r(e,t){return e.map(function(e,n){return Math.max(e,t[n])})}return e.prototype.getAdjustedPosition=function(e){var o=t(this.gridSize,e);return{position:r(i(this.rawPosition.position,n(o,this.posFactor)),[0,0]),dimensions:r(i(this.rawPosition.dimensions,n(o,this.dimFactor)),[1,1])}},e}),n("platform/features/layout/src/LayoutController",["./LayoutDrag"],function(e){function t(e){function t(e){var t=o.gridSize;o.gridSize=e||r,(o.gridSize[0]!==t[0]||o.gridSize[1]!==t[1])&&o.layoutPanels(Object.keys(o.positions))}function n(t,n,i){t.defaultPrevented||(e.configuration=e.configuration||{},e.configuration.panels=e.configuration.panels||{},e.configuration.panels[n]={position:[Math.floor(i.x/o.gridSize[0]),Math.floor(i.y/o.gridSize[1])],dimensions:o.defaultDimensions()},e.commit&&e.commit("Dropped a frame."),o.rawPositions[n]=e.configuration.panels[n],o.populatePosition(n),t.preventDefault())}function i(){var t=++s;e.domainObject.useCapability("composition").then(function(n){var i;t===s&&(i=n.map(function(e){return e.getId()})||[],e.composition=n,o.layoutPanels(i))})}var o=this,s=0;this.endDragInScope=function(){e.configuration=e.configuration||{},e.configuration.panels=e.configuration.panels||{},e.configuration.panels[o.activeDragId]=o.rawPositions[o.activeDragId],e.commit&&e.commit("Moved frame.")},this.positions={},this.rawPositions={},this.gridSize=r,this.$scope=e,e.$watch("model.layoutGrid",t),e.$watchCollection("model.composition",i),e.$on("mctDrop",n)}function n(e,t){var n={};return t.forEach(function(t){n[t]=e[t]}),n}var i=[12,8],r=[32,32],o=[320,180];return t.prototype.convertPosition=function(e){var t=this.gridSize;return{left:t[0]*e.position[0]+"px",top:t[1]*e.position[1]+"px",width:t[0]*e.dimensions[0]+"px",height:t[1]*e.dimensions[1]+"px"}},t.prototype.defaultDimensions=function(){var e=this.gridSize;return o.map(function(t,n){return Math.max(Math.ceil(t/e[n]),i[n])})},t.prototype.defaultPosition=function(e){return{position:[e,e],dimensions:this.defaultDimensions()}},t.prototype.populatePosition=function(e,t){this.rawPositions[e]=this.rawPositions[e]||this.defaultPosition(t||0),
this.positions[e]=this.convertPosition(this.rawPositions[e])},t.prototype.getFrameStyle=function(e){return this.positions[e]},t.prototype.startDrag=function(t,n,i){this.activeDragId=t,this.activeDrag=new e(this.rawPositions[t],n,i,this.gridSize)},t.prototype.continueDrag=function(e){this.activeDrag&&(this.rawPositions[this.activeDragId]=this.activeDrag.getAdjustedPosition(e),this.populatePosition(this.activeDragId))},t.prototype.layoutPanels=function(e){var t=this.$scope.configuration||{},i=this;this.rawPositions=n(t.panels||{},e),this.positions={},this.gridSize=(this.$scope.model||{}).layoutGrid||r,e.forEach(function(e,t){i.populatePosition(e,t)})},t.prototype.endDrag=function(){this.endDragInScope()},t}),n("platform/features/layout/src/elements/ElementFactory",[],function(){function e(e){this.dialogService=e}var t={"fixed.image":{stroke:"transparent"},"fixed.box":{fill:"#717171",border:"transparent",stroke:"transparent"},"fixed.line":{x:5,y:9,x2:6,y2:6,stroke:"#717171"},"fixed.text":{fill:"transparent",stroke:"transparent"}},n={"fixed.image":{name:"Image Properties",sections:[{rows:[{key:"url",control:"textfield",name:"Image URL",cssClass:"l-input-lg",required:!0}]}]},"fixed.text":{name:"Text Element Properties",sections:[{rows:[{key:"text",control:"textfield",name:"Text",required:!0}]}]}};return e.prototype.createElement=function(e){var i=t[e]||{};return i=JSON.parse(JSON.stringify(i)),n[e]?this.dialogService.getUserInput(n[e],i):i},e}),n("platform/features/layout/src/FixedProxy",["./elements/ElementFactory"],function(e){function t(t,n,i){this.factory=new e(i),this.$q=n,this.addElementCallback=t}return t.prototype.add=function(e){function t(t){t.x=t.x||0,t.y=t.y||0,t.width=t.width||1,t.height=t.height||1,t.type=e,n(t)}var n=this.addElementCallback;this.$q.when(this.factory.createElement(e)).then(t)},t}),n("platform/features/layout/src/elements/AccessorMutator",[],function(){function e(e,t,n){return function(i){return arguments.length>0&&(e[t]=n?n(i,e[t]):i),e[t]}}return e}),n("platform/features/layout/src/elements/ResizeHandle",[],function(){function e(e,t,n){this.element=e,this.minWidth=t||0,this.minHeight=n||0}return e.prototype.x=function(e){var t=this.element;return arguments.length>0&&(t.width=Math.max(this.minWidth,e-t.x)),t.x+t.width},e.prototype.y=function(e){var t=this.element;return arguments.length>0&&(t.height=Math.max(this.minHeight,e-t.y)),t.y+t.height},e}),n("platform/features/layout/src/elements/ElementProxy",["./AccessorMutator","./ResizeHandle"],function(e,t){function n(e){return Math.max(e,0)}function i(i,r,o){this.resizeHandles=[new t(i,1,1)],this.element=i,this.x=new e(i,"x",n),this.y=new e(i,"y",n),this.stroke=new e(i,"stroke"),this.width=new e(i,"width"),this.height=new e(i,"height"),this.index=r,this.elements=o}var r={top:Number.POSITIVE_INFINITY,up:1,down:-1,bottom:Number.NEGATIVE_INFINITY};return i.prototype.order=function(e){var t=this.index,n=this.elements,i=this.element,o=r[e]||0,s=Math.max(Math.min(t+o,n.length-1),0);s!==t&&n[t]===i&&(n.splice(t,1),n.splice(s,0,i),this.index=s)},i.prototype.remove=function(){var e=this.index;this.elements[e]===this.element&&this.elements.splice(e,1)},i.prototype.handles=function(){return this.resizeHandles},i}),n("platform/features/layout/src/elements/BoxProxy",["./ElementProxy","./AccessorMutator"],function(e,t){function n(n,i,r){var o=new e(n,i,r);return o.fill=new t(n,"fill"),o}return n}),n("platform/features/layout/src/elements/TextProxy",["./BoxProxy","./AccessorMutator"],function(e,t){function n(n,i,r){var o=new e(n,i,r);return o.color=new t(n,"color"),o.text=new t(n,"text"),o}return n}),n("platform/features/layout/src/elements/TelemetryProxy",["./TextProxy"],function(e){function t(t,r,o){function s(){t.titled=!t.titled,delete a[i],delete a[n],a[t.titled?n:i]=s}var a=new e(t,r,o);return a.id=t.id,a[t.titled?n:i]=s,delete a.text,a}var n="hideTitle",i="showTitle";return t}),n("platform/features/layout/src/elements/ImageProxy",["./ElementProxy","./AccessorMutator"],function(e,t){function n(n,i,r){var o=new e(n,i,r);return o.url=new t(n,"url"),o}return n}),n("platform/features/layout/src/elements/LineHandle",[],function(){function e(e,t,n,i,r){this.element=e,this.xProperty=t,this.yProperty=n,this.xOther=i,this.yOther=r}return e.prototype.x=function(e){var t=this.element,n=this.xProperty,i=this.yProperty,r=this.xOther,o=this.yOther;return arguments.length>0&&(e=Math.max(e,0),(t[o]!==t[i]||t[r]!==e)&&(t[n]=e)),t[n]},e.prototype.y=function(e){var t=this.element,n=this.xProperty,i=this.yProperty,r=this.xOther,o=this.yOther;return arguments.length>0&&(e=Math.max(e,0),(t[r]!==t[n]||t[o]!==e)&&(t[i]=e)),t[i]},e}),n("platform/features/layout/src/elements/LineProxy",["./ElementProxy","./LineHandle"],function(e,t){function n(n,i,r){var o=new e(n,i,r),s=[new t(n,"x","y","x2","y2"),new t(n,"x2","y2","x","y")];return o.x=function(e){var t=Math.min(n.x,n.x2),i=Math.max(e,0)-t;return arguments.length>0&&i&&(n.x+=i,n.x2+=i),t},o.y=function(e){var t=Math.min(n.y,n.y2),i=Math.max(e,0)-t;return arguments.length>0&&i&&(n.y+=i,n.y2+=i),t},o.width=function(){return Math.max(Math.abs(n.x-n.x2),1)},o.height=function(){return Math.max(Math.abs(n.y-n.y2),1)},o.x1=function(){return n.x-o.x()},o.y1=function(){return n.y-o.y()},o.x2=function(){return n.x2-o.x()},o.y2=function(){return n.y2-o.y()},o.handles=function(){return s},o}return n}),n("platform/features/layout/src/elements/ElementProxies",["./TelemetryProxy","./ImageProxy","./LineProxy","./BoxProxy","./TextProxy"],function(e,t,n,i,r){return{"fixed.telemetry":e,"fixed.line":n,"fixed.box":i,"fixed.image":t,"fixed.text":r}}),n("platform/features/layout/src/FixedDragHandle",[],function(){function e(e,t,n,i){this.elementHandle=e,this.gridSize=t,this.update=n,this.commit=i}var t=[6,6];return e.prototype.style=function(){var e=this.elementHandle.x()*this.gridSize[0],n=this.elementHandle.y()*this.gridSize[1];return{left:e-t[0]/2+"px",top:n-t[1]/2+"px",width:t[0]+"px",height:t[1]+"px"}},e.prototype.startDrag=function(){this.dragging={x:this.elementHandle.x(),y:this.elementHandle.y()}},e.prototype.continueDrag=function(e){this.dragging&&(this.elementHandle.x(this.dragging.x+Math.round(e[0]/this.gridSize[0])),this.elementHandle.y(this.dragging.y+Math.round(e[1]/this.gridSize[1])),this.update&&this.update())},e.prototype.endDrag=function(){this.dragging=void 0,this.commit&&this.commit("Dragged handle.")},e}),n("platform/features/layout/src/FixedController",["./FixedProxy","./elements/ElementProxies","./FixedDragHandle"],function(e,t,n){function i(i,o,s,a,c){function l(e){var t=O.gridSize;return{left:t[0]*e.x()+"px",top:t[1]*e.y()+"px",width:t[0]*e.width()+"px",height:t[1]*e.height()+"px"}}function u(){var e=O.selection&&O.selection.get();e&&(e.style=l(e))}function d(e){return new n(e,O.gridSize,u,i.commit)}function p(e){return e.handles().map(d)}function f(e,t,n){var i=e.getId();(A[i]||[]).forEach(function(r){$[i]=e.getModel().name,_[i]=c.formatRangeValue(t),r.name=$[i],r.value=_[i],r.cssClass=n&&n.cssClass})}function h(e,t){var n=t.getPointCount()-1,i=e&&e.getCapability("limit"),r=e&&M.getDatum(e,n);n>=0&&f(e,t.getRangeValue(n),i&&r&&i.evaluate(r))}function m(e){var t=e&&e.getCapability("limit"),n=e&&M.getDatum(e);e&&M.getDomainValue(e)<E&&f(e,M.getRangeValue(e),t&&n&&t.evaluate(n))}function g(e){O.gridSize=e,O.elementProxies.forEach(function(e){e.style=l(e)})}function y(){M&&M.getTelemetryObjects().forEach(m)}function v(e,n,i){var r=t[e.type],o=r&&new r(e,n,i);return o&&(o.style=l(o),o.template=e.type),o}function b(){var e=O.selection&&O.selection.get(),t=(i.configuration||{}).elements||[],n=-1;void 0!==e&&(n=t.indexOf(e.element)),O.elementProxies=t.map(v),O.selection&&(O.selection.deselect(),n>-1&&O.select(O.elementProxies[n])),A={},O.elementProxies.forEach(function(e){var t=e.id;"fixed.telemetry"===e.element.type&&(e.name=$[t],e.value=_[t],A[t]=A[t]||[],A[t].push(e))})}function w(){M&&(M.unsubscribe(),M=void 0)}function S(e){M&&M.unsubscribe(),M=e&&a.handle(e,y),M.request({size:1},h)}function x(){S(i.domainObject)}function C(e,t){E=t.end,M&&M.request({size:1},h)}function T(e){i.configuration=i.configuration||{},i.configuration.elements=i.configuration.elements||[],i.configuration.elements.push(e),b(),O.select(O.elementProxies[O.elementProxies.length-1]),i.commit&&i.commit("Dropped an element.")}function k(e,t,n){e.defaultPrevented||(e.preventDefault(),T({type:"fixed.telemetry",x:Math.floor(n.x/O.gridSize[0]),y:Math.floor(n.y/O.gridSize[1]),id:t,stroke:"transparent",color:"",titled:!0,width:r[0],height:r[1]}))}var M,O=this,$={},_={},A={},E=Number.POSITIVE_INFINITY;this.elementProxies=[],this.generateDragHandle=d,this.generateDragHandles=p,i.$watch("selection",function(t){this.selection=t,this.selection&&this.selection.proxy(new e(T,o,s))}.bind(this)),i.$watch("model.layoutGrid",g),i.$watch("model.modified",b),i.$watch("model.composition",x),i.$watch("domainObject",S),i.$on("$destroy",w),i.$on("mctDrop",k),i.$on("telemetry:display:bounds",C)}var r=[2,1];return i.prototype.getGridSize=function(){return this.gridSize},i.prototype.getElements=function(){return this.elementProxies},i.prototype.selected=function(e){var t=this.selection;return t&&(arguments.length>0?t.selected(e):t.get())},i.prototype.select=function(e){this.selection&&(this.selection.select(e),this.mvHandle=this.generateDragHandle(e),this.resizeHandles=this.generateDragHandles(e))},i.prototype.clearSelection=function(){this.selection&&(this.selection.deselect(),this.resizeHandles=[],this.mvHandle=void 0)},i.prototype.handles=function(){return this.resizeHandles},i.prototype.moveHandle=function(){return this.mvHandle},i}),n("platform/features/layout/src/LayoutCompositionPolicy",[],function(){function e(){}return e.prototype.allow=function(e,t){return e.instanceOf("layout")&&t.getCapability("type").instanceOf("folder")?!1:!0},e}),n("text!platform/features/layout/res/templates/layout.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="l-layout"\n     ng-controller="LayoutController as controller">\n\n    <div class=\'frame child-frame panel abs\'\n         ng-repeat="childObject in composition"\n         ng-style="controller.getFrameStyle(childObject.getId())">\n\n        <mct-representation key="\'frame\'"\n                            class="frame child-frame holder contents abs"\n                            mct-object="childObject">\n        </mct-representation>\n        <!-- Drag handles -->\n        <span ng-show="domainObject.hasCapability(\'editor\')">\n            <span class="edit-handle edit-move"\n                  mct-drag-down="controller.startDrag(childObject.getId(), [1,1], [0,0])"\n                  mct-drag="controller.continueDrag(delta)"\n                  mct-drag-up="controller.endDrag()">\n            </span>\n\n            <span class="edit-corner edit-resize-nw"\n                  mct-drag-down="controller.startDrag(childObject.getId(), [1,1], [-1,-1])"\n                  mct-drag="controller.continueDrag(delta)"\n                  mct-drag-up="controller.endDrag()">\n            </span>\n            <span class="edit-corner edit-resize-ne"\n                  mct-drag-down="controller.startDrag(childObject.getId(), [0,1], [1,-1])"\n                  mct-drag="controller.continueDrag(delta)"\n                  mct-drag-up="controller.endDrag()">\n            </span>\n            <span class="edit-corner edit-resize-sw"\n                  mct-drag-down="controller.startDrag(childObject.getId(), [1,0], [-1,1])"\n                  mct-drag="controller.continueDrag(delta)"\n                  mct-drag-up="controller.endDrag()">\n            </span>\n            <span class="edit-corner edit-resize-se"\n                  mct-drag-down="controller.startDrag(childObject.getId(), [0,0], [1,1])"\n                  mct-drag="controller.continueDrag(delta)"\n                  mct-drag-up="controller.endDrag()">\n            </span>\n        </span>\n\n    </div>\n\n</div>'}),n("text!platform/features/layout/res/templates/frame.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="frame frame-template abs">\n    <div class="abs object-top-bar l-flex-row">\n        <div class="left flex-elem l-flex-row grows">\n            <mct-representation\n                key="\'object-header\'"\n                mct-object="domainObject"\n                class="l-flex-row flex-elem object-header grows">\n            </mct-representation>\n        </div>\n        <div class="btn-bar right l-flex-row flex-elem flex-justify-end flex-fixed">\n            <mct-representation key="\'switcher\'"\n                                ng-model="representation"\n                                mct-object="domainObject">\n            </mct-representation>\n        </div>\n    </div>\n    <div class="abs object-holder">\n        <mct-representation key="representation.selected.key"\n                            mct-object="representation.selected.key && domainObject">\n        </mct-representation>\n    </div>\n</div>'}),n("text!platform/features/layout/res/templates/elements/telemetry.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div\n    class="l-fixed-position-text l-telemetry"\n    ng-style="{ background: ngModel.fill(), \'border-color\': ngModel.stroke(), color: ngModel.color() }"\n    >\n    <span\n        class="l-elem l-value l-obj-val-format"\n        data-value="{{ngModel.value}}"\n        ng-class="ngModel.cssClass"\n        >\n        {{ngModel.value}}\n    </span>\n    <span\n        class="l-elem l-title"\n        ng-show="ngModel.element.titled"\n        >\n        {{ngModel.name}}\n    </span>\n</div>\n'}),n("text!platform/features/layout/res/templates/elements/box.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div\n	class="l-fixed-position-box"\n	ng-style="{ background: ngModel.fill(), border: \'1px \' + ngModel.stroke() + \' solid\' }"\n	>\n</div>'}),n("text!platform/features/layout/res/templates/elements/line.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<svg ng-attr-width="{{parameters.gridSize[0] * ngModel.width()}}"\n     ng-attr-height="{{parameters.gridSize[1] * ngModel.height()}}">\n    <line ng-attr-x1="{{parameters.gridSize[0] * ngModel.x1() + 1}}"\n          ng-attr-y1="{{parameters.gridSize[1] * ngModel.y1() + 1}}"\n          ng-attr-x2="{{parameters.gridSize[0] * ngModel.x2() + 1}}"\n          ng-attr-y2="{{parameters.gridSize[1] * ngModel.y2() + 1}}"\n          ng-attr-stroke="{{ngModel.stroke()}}"\n          stroke-width="2">\n    </line>\n</svg>'}),n("text!platform/features/layout/res/templates/elements/text.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div\n	class="l-fixed-position-text l-static-text"\n	ng-style="{ background: ngModel.fill(), \'border-color\': ngModel.stroke(), color: ngModel.color() }"\n	>\n    {{ngModel.element.text}}\n</div>'}),n("text!platform/features/layout/res/templates/elements/image.html",[],function(){return"<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n \"License\"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div\n	ng-style=\"{ 'background-image': 'url(' + ngModel.element.url + ')', border: '1px solid ' + ngModel.stroke() }\"\n    class=\"l-fixed-position-image\"\n	>\n</div>\n"}),n("platform/features/layout/bundle",["./src/LayoutController","./src/FixedController","./src/LayoutCompositionPolicy","text!./res/templates/layout.html","text!./res/templates/fixed.html","text!./res/templates/frame.html","text!./res/templates/elements/telemetry.html","text!./res/templates/elements/box.html","text!./res/templates/elements/line.html","text!./res/templates/elements/text.html","text!./res/templates/elements/image.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d){d.register("platform/features/layout",{name:"Layout components.",description:"Plug in adding Layout capabilities.",extensions:{views:[{key:"layout",name:"Display Layout",cssClass:"icon-layout",type:"layout",template:i,editable:!0,uses:[]},{key:"fixed",name:"Fixed Position",cssClass:"icon-box-with-dashed-lines",type:"telemetry.panel",template:r,uses:["composition"],toolbar:{sections:[{items:[{method:"add",cssClass:"icon-plus",control:"menu-button",text:"Add",title:"Add",description:"Add new items",options:[{name:"Box",cssClass:"icon-box",key:"fixed.box"},{name:"Line",cssClass:"icon-line-horz",key:"fixed.line"},{name:"Text",cssClass:"icon-T",key:"fixed.text"},{name:"Image",cssClass:"icon-image",key:"fixed.image"}]}]},{items:[{method:"order",cssClass:"icon-layers",control:"menu-button",title:"Layering",description:"Move the selected object above or below other objects",options:[{name:"Move to Top",cssClass:"icon-arrow-double-up",key:"top"},{name:"Move Up",cssClass:"icon-arrow-up",key:"up"},{name:"Move Down",cssClass:"icon-arrow-down",key:"down"},{name:"Move to Bottom",cssClass:"icon-arrow-double-down",key:"bottom"}]},{property:"fill",cssClass:"icon-paint-bucket",title:"Fill color",description:"Set fill color",control:"color"},{property:"stroke",cssClass:"icon-line-horz",title:"Border color",description:"Set border color",control:"color"},{property:"color",cssClass:"icon-T",title:"Text color",description:"Set text color",mandatory:!0,control:"color"},{property:"url",cssClass:"icon-image",control:"dialog-button",title:"Image Properties",description:"Edit image properties",dialog:{control:"textfield",name:"Image URL",cssClass:"l-input-lg",required:!0}},{property:"text",cssClass:"icon-gear",control:"dialog-button",title:"Text Properties",description:"Edit text properties",dialog:{control:"textfield",name:"Text",required:!0}},{method:"showTitle",cssClass:"icon-two-parts-both",control:"button",title:"Show title",description:"Show telemetry element title"},{method:"hideTitle",cssClass:"icon-two-parts-one-only",control:"button",title:"Hide title",description:"Hide telemetry element title"}]},{items:[{method:"remove",control:"button",cssClass:"icon-trash",title:"Delete",description:"Delete the selected item"}]}]}}],representations:[{key:"frame",template:o}],controllers:[{key:"LayoutController",implementation:e,depends:["$scope"]},{key:"FixedController",implementation:t,depends:["$scope","$q","dialogService","telemetryHandler","telemetryFormatter","throttle"]}],templates:[{key:"fixed.telemetry",template:s},{key:"fixed.box",template:a},{key:"fixed.line",template:c},{key:"fixed.text",template:l},{key:"fixed.image",template:u}],policies:[{category:"composition",implementation:n}],types:[{key:"layout",name:"Display Layout",cssClass:"icon-layout",description:"Assemble other objects and components together into a reusable screen layout. Working in a simple canvas workspace, simply drag in the objects you want, position and size them. Save your design and view or edit it at any time.",priority:900,features:"creation",model:{composition:[]},properties:[{name:"Layout Grid",control:"composite",pattern:"^(\\d*[1-9]\\d*)?$",items:[{name:"Horizontal grid (px)",control:"textfield",cssClass:"l-input-sm l-numeric"},{name:"Vertical grid (px)",control:"textfield",cssClass:"l-input-sm l-numeric"}],key:"layoutGrid",conversion:"number[]"}]},{key:"telemetry.panel",name:"Telemetry Panel",cssClass:"icon-telemetry-panel",description:"A panel for collecting telemetry elements.",priority:899,delegates:["telemetry"],features:"creation",contains:[{has:"telemetry"}],model:{composition:[]},properties:[{name:"Layout Grid",control:"composite",items:[{name:"Horizontal grid (px)",control:"textfield",cssClass:"l-input-sm l-numeric"},{name:"Vertical grid (px)",control:"textfield",cssClass:"l-input-sm l-numeric"}],pattern:"^(\\d*[1-9]\\d*)?$",property:"layoutGrid",conversion:"number[]"}]}]}})}),n("platform/features/my-items/bundle",["legacyRegistry"],function(e){e.register("platform/features/my-items",{name:"My Items",description:"Defines a root named My Items",extensions:{roots:[{id:"mine"}],models:[{id:"mine",model:{name:"My Items",type:"folder",composition:[],location:"ROOT"}}]}})}),n("platform/features/pages/src/EmbeddedPageController",[],function(){function e(e){this.$sce=e}return e.prototype.trust=function(e){return this.$sce.trustAsResourceUrl(e)},e}),n("text!platform/features/pages/res/iframe.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="l-iframe abs">\n<iframe ng-controller="EmbeddedPageController as ctl"\n        ng-src="{{ctl.trust(model.url)}}">\n</iframe>\n</div>'}),n("platform/features/pages/bundle",["./src/EmbeddedPageController","text!./res/iframe.html","legacyRegistry"],function(e,t,n){n.register("platform/features/pages",{extensions:{types:[{key:"example.page",name:"Web Page",cssClass:"icon-page",description:"Embed a web page or web-based image in a resizeable window component. Can be added to Display Layouts. Note that the URL being embedded must allow iframing.",priority:50,features:["creation"],properties:[{key:"url",name:"URL",control:"textfield",pattern:"^(ftp|https?)\\:\\/\\/\\w+(\\.\\w+)*(\\:\\d+)?(\\/\\S*)*$",required:!0,cssClass:"l-input-lg"}]}],views:[{template:t,name:"Page",type:"example.page",key:"example.page",editable:!1}],controllers:[{key:"EmbeddedPageController",implementation:e,depends:["$sce"]}]}})}),n("platform/features/plot/src/GLChart",[],function(){function e(e){var i,r,o,s,a,c,l,u=e.getContext("webgl",{preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{preserveDrawingBuffer:!0});if(!u)throw new Error("WebGL unavailable.");i=u.createShader(u.VERTEX_SHADER),u.shaderSource(i,n),u.compileShader(i),r=u.createShader(u.FRAGMENT_SHADER),u.shaderSource(r,t),u.compileShader(r),o=u.createProgram(),u.attachShader(o,i),u.attachShader(o,r),u.linkProgram(o),u.useProgram(o),s=u.getAttribLocation(o,"aVertexPosition"),a=u.getUniformLocation(o,"uColor"),c=u.getUniformLocation(o,"uDimensions"),l=u.getUniformLocation(o,"uOrigin"),u.enableVertexAttribArray(s),this.buffer=u.createBuffer(),u.lineWidth(2),u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),this.gl=u,this.aVertexPosition=s,this.uColor=a,this.uDimensions=c,this.uOrigin=l}var t=["precision mediump float;","uniform vec4 uColor;","void main(void) {","gl_FragColor = uColor;","}"].join("\n"),n=["attribute vec2 aVertexPosition;","uniform vec2 uDimensions;","uniform vec2 uOrigin;","void main(void) {","gl_Position = vec4(2.0 * ((aVertexPosition - uOrigin) / uDimensions) - vec2(1,1), 0, 1);","}"].join("\n");return e.prototype.doDraw=function(e,t,n,i){var r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,this.buffer),r.bufferData(r.ARRAY_BUFFER,t,r.DYNAMIC_DRAW),r.vertexAttribPointer(this.aVertexPosition,2,r.FLOAT,!1,0,0),r.uniform4fv(this.uColor,n),r.drawArrays(e,0,i)},e.prototype.clear=function(){var e=this.gl;e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.clear(e.COLOR_BUFFER_BIT+e.DEPTH_BUFFER_BIT)},e.prototype.setDimensions=function(e,t){var n=this.gl;e&&e.length>0&&t&&t.length>0&&(n.uniform2fv(this.uDimensions,e),n.uniform2fv(this.uOrigin,t))},e.prototype.drawLine=function(e,t,n){this.doDraw(this.gl.LINE_STRIP,e,t,n)},e.prototype.drawSquare=function(e,t,n){this.doDraw(this.gl.TRIANGLE_FAN,new Float32Array(e.concat([e[0],t[1]]).concat(t).concat([t[0],e[1]])),n,4)},e}),n("platform/features/plot/src/Canvas2DChart",[],function(){function e(e){if(this.canvas=e,this.c2d=e.getContext("2d"),this.width=e.width,this.height=e.height,this.dimensions=[this.width,this.height],this.origin=[0,0],!this.c2d)throw new Error("Canvas 2d API unavailable.")}return e.prototype.x=function(e){return(e-this.origin[0])/this.dimensions[0]*this.width},e.prototype.y=function(e){return this.height-(e-this.origin[1])/this.dimensions[1]*this.height},e.prototype.setColor=function(e){var t=e.map(function(e,t){return 3>t?Math.floor(255*e):e}).join(",");this.c2d.strokeStyle="rgba("+t+")",this.c2d.fillStyle="rgba("+t+")"},e.prototype.clear=function(){var e=this.canvas;this.width=e.width,this.height=e.height,this.c2d.clearRect(0,0,this.width,this.height)},e.prototype.setDimensions=function(e,t){this.dimensions=e,this.origin=t},e.prototype.drawLine=function(e,t,n){var i;for(this.setColor(t),this.c2d.lineWidth=2,e.length>1&&(this.c2d.beginPath(),this.c2d.moveTo(this.x(e[0]),this.y(e[1]))),
i=2;2*n>i;i+=2)this.c2d.lineTo(this.x(e[i]),this.y(e[i+1]));this.c2d.stroke()},e.prototype.drawSquare=function(e,t,n){var i=this.x(e[0]),r=this.y(e[1]),o=this.x(t[0])-i,s=this.y(t[1])-r;this.setColor(n),this.c2d.fillRect(i,r,o,s)},e}),n("platform/features/plot/src/MCTChart",["./GLChart","./Canvas2DChart"],function(e,t){function n(n,r){function o(e,t){var n=e[0];if(!n)return void r.warn("Cannot initialize mct-chart.");try{return new n(t)}catch(i){return r.warn(["Could not instantiate chart",n.name,";",i.message].join(" ")),o(e.slice(1),t)}}function s(r,s){function a(e){f.width=f.offsetWidth,f.height=f.offsetHeight,p.clear(),e&&(p.setDimensions(e.dimensions||[1,1],e.origin||[0,0]),(e.lines||[]).forEach(function(e){p.drawLine(e.buffer,e.color,e.points)}),(e.boxes||[]).forEach(function(e){p.drawSquare(e.start,e.end,e.color)}))}function c(){(f.width!==f.offsetWidth||f.height!==f.offsetHeight)&&(a(r.draw),r.$apply())}function l(){d&&n.cancel(d)}function u(){s.html(i),f=s.find("canvas")[0],p=o([t],f),p&&a(r.draw)}var d,p,f=s.find("canvas")[0];p=o([e,t],f),p&&(f.addEventListener("webglcontextlost",u),d=n(c,1e3,0,!1),r.$watchCollection("draw",a),r.$on("$destroy",l))}return{restrict:"E",template:i,link:s,scope:{draw:"="}}}var i="<canvas style='position: absolute; background: none; width: 100%; height: 100%;'></canvas>";return n}),n("platform/features/plot/src/elements/PlotSeriesWindow",[],function(){function e(e,t,n,i,r){this.series=e,this.domain=t,this.range=n,this.start=i,this.end=r}return e.prototype.getPointCount=function(){return this.end-this.start},e.prototype.getDomainValue=function(e){return this.series.getDomainValue(e+this.start,this.domain)},e.prototype.getRangeValue=function(e){return this.series.getRangeValue(e+this.start,this.range)},e.prototype.split=function(){var t=Math.floor((this.end+this.start)/2);return this.end-this.start>1?[new e(this.series,this.domain,this.range,this.start,t),new e(this.series,this.domain,this.range,t,this.end)]:[]},e}),n("platform/features/plot/src/elements/PlotLine",["./PlotSeriesWindow"],function(e){function t(e){this.buffer=e}return t.prototype.addPoint=function(e,t){var n,i=this.buffer;if(void 0!==e&&void 0!==t){if(n=i.findInsertionIndex(e),0>n)return;i.insertPoint(e,t,n)||(i.trim(1),i.insertPoint(e,t,n))}},t.prototype.addSeries=function(t,n,i){function r(e){function t(){var t=e.getDomainValue(0),i=e.getDomainValue(n-1),s=o.findInsertionIndex(t),a=o.findInsertionIndex(i);s===a&&s>-1?o.insert(e,s):e.split().forEach(r)}var n=e.getPointCount();n>0&&t()}var o=this.buffer;r(new e(t,n,i,0,t.getPointCount()))},t}),n("platform/features/plot/src/elements/PlotLineBuffer",[],function(){function e(e,t,n){this.buffer=new Float32Array(2*t),this.rangeExtrema=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],this.length=0,this.domainOffset=e,this.initialSize=t,this.maxSize=n}return e.prototype.binSearch=function(e,t,n){var i=Math.floor((t+n)/2),r=this.buffer[2*i];return r===e?i:t>=n?t+(e>r?1:0):e>r?this.binSearch(e,i+1,n):this.binSearch(e,t,i-1)},e.prototype.doubleBufferSize=function(){var e=Math.min(2*this.maxSize,2*this.buffer.length),t=e>this.buffer.length,n=t&&new Float32Array(e);return t&&(n.set(this.buffer),this.buffer=n),t},e.prototype.halveBufferSize=function(){var e=Math.max(2*this.initialSize,this.buffer.length/2),t=e<this.buffer.length;return t&&(this.buffer=new Float32Array(this.buffer.subarray(0,e))),t},e.prototype.setValue=function(e,t,n){this.buffer[2*e]=t-this.domainOffset,this.buffer[2*e+1]=n,this.rangeExtrema[0]=Math.min(this.rangeExtrema[0],n),this.rangeExtrema[1]=Math.max(this.rangeExtrema[1],n)},e.prototype.getBuffer=function(){return this.buffer},e.prototype.getLength=function(){return this.length},e.prototype.getDomainExtrema=function(){return[this.buffer[0]+this.domainOffset,this.buffer[2*this.length-2]+this.domainOffset]},e.prototype.getRangeExtrema=function(){return this.rangeExtrema},e.prototype.trim=function(e,t){t||this.buffer.set(this.buffer.subarray(2*e)),this.length-=e,this.length<this.buffer.length/4&&this.halveBufferSize()},e.prototype.insert=function(e,t){var n,i=e.getPointCount();for(t=Math.min(t,this.length);i>this.buffer.length/2-this.length;)if(!this.doubleBufferSize())return!1;for(t<this.length&&this.buffer.set(this.buffer.subarray(2*t,2*this.length),2*(t+i)),n=0;i>n;n+=1)this.setValue(n+t,e.getDomainValue(n),e.getRangeValue(n));return this.length+=i,!0},e.prototype.insertPoint=function(e,t){return this.length>=this.buffer.length/2&&!this.doubleBufferSize()?!1:(this.setValue(this.length,e,t),this.length+=1,!0)},e.prototype.findInsertionIndex=function(e){var t=e-this.domainOffset;return this.length<1?0:t>this.buffer[2*this.length-2]?this.length:this.binSearch(t,0,this.length-1)},e}),n("platform/features/plot/src/elements/PlotUpdater",["./PlotLine","./PlotLineBuffer"],function(e,t){function n(e,t,n,i,r){this.handle=e,this.domain=t,this.range=n,this.fixedDuration=i,this.maxPoints=r,this.ids=[],this.lines={},this.buffers={},this.bufferArray=[],this.maxPoints=void 0!==r?r:a,this.dimensions=[0,0],this.origin=[0,0],this.update()}function i(e){return e.getId()}function r(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function o(e){return e[1]-e[0]}function s(e){return e[0]}var a=86400,c=.1,l=675;return n.prototype.idsMatch=function(e){var t=this.ids;return t.length===e.length&&e.every(function(e,n){return t[n]===e})},n.prototype.prepareLines=function(n){var r=n.map(i),o={},s=this;this.idsMatch(r)||(void 0!==this.domainOffset&&(this.ids=r,this.bufferArray=this.ids.map(function(n){return s.buffers[n]=s.buffers[n]||new t(s.domainOffset,l,s.maxPoints),o[n]=s.lines[n]||new e(s.buffers[n]),s.buffers[n]})),Object.keys(o).length<1&&(this.domainOffset=void 0),this.lines=o)},n.prototype.initializeDomainOffset=function(e){this.domainOffset=void 0===this.domainOffset&&e.length>0?e.reduce(function(e,t){return(e||0)+(t||0)},0)/e.length:this.domainOffset},n.prototype.expandRange=function(){var e,t=c*this.dimensions[1];t=Math.max(t,1),e=Math.ceil(this.origin[1]+this.dimensions[1]+t/2),this.origin[1]=Math.floor(this.origin[1]-t/2),this.dimensions[1]=e-this.origin[1]},n.prototype.updateBounds=function(){var e=this.bufferArray.filter(function(e){return e.getLength()>0}),t=this.origin[0],n=this.dimensions[0];e.length>0&&(this.domainExtrema=e.map(function(e){return e.getDomainExtrema()}).reduce(r),this.rangeExtrema=e.map(function(e){return e.getRangeExtrema()}).reduce(r),this.dimensions=[this.domainExtrema,this.rangeExtrema].map(o),this.origin=[this.domainExtrema,this.rangeExtrema].map(s),this.expandRange(),this.hasSpecificDomainBounds&&(this.origin[0]=t,this.dimensions[0]=n,this.following&&(this.origin[0]=Math.max(this.domainExtrema[1]-this.dimensions[0],this.origin[0]))),void 0!==this.fixedDuration&&(this.origin[0]=this.origin[0]+this.dimensions[0]-this.fixedDuration,this.dimensions[0]=this.fixedDuration))},n.prototype.addPointFor=function(e){var t=this.lines[e.getId()];t&&t.addPoint(this.handle.getDomainValue(e,this.domain),this.handle.getRangeValue(e,this.range))},n.prototype.update=function(){var e=this.handle.getTelemetryObjects(),t=this;void 0===this.domainOffset&&this.initializeDomainOffset(e.map(function(e){return t.handle.getDomainValue(e,t.domain)}).filter(function(e){return"number"==typeof e})),this.prepareLines(e),e.forEach(function(e,n){t.addPointFor(e,n)}),this.updateBounds()},n.prototype.getDimensions=function(){return this.dimensions},n.prototype.getOrigin=function(){return this.origin},n.prototype.getDomainOffset=function(){return this.domainOffset},n.prototype.getLineBuffers=function(){return this.bufferArray},n.prototype.setDomainBounds=function(e,t){this.fixedDuration=t-e,this.origin[0]=e,this.dimensions[0]=this.fixedDuration,this.hasSpecificDomainBounds=!0,this.following=!this.domainExtrema||t>=this.domainExtrema[1]},n.prototype.addHistorical=function(e,t){var n,i=t?t.getPointCount():0;1>i||(void 0===this.domainOffset&&this.initializeDomainOffset([t.getDomainValue(0,this.domain),t.getDomainValue(i-1,this.domain)]),this.prepareLines(this.handle.getTelemetryObjects()),n=this.lines[e.getId()],n&&n.addSeries(t,this.domain,this.range),this.updateBounds())},n}),n("platform/features/plot/src/elements/PlotPalette",[],function(){function e(){return e}var t=[[32,178,170],[154,205,50],[255,140,0],[210,180,140],[64,224,208],[65,105,255],[255,215,0],[106,90,205],[238,130,238],[204,153,102],[153,204,204],[102,204,51],[255,204,0],[255,102,51],[204,102,255],[255,0,102],[255,255,0],[128,0,128],[0,134,139],[0,138,0],[255,0,0],[0,0,255],[245,222,179],[188,143,143],[70,130,180],[255,175,175],[67,205,128],[205,193,197],[160,82,45],[100,149,237]],n=t.map(function(e){return"#"+e.map(function(e){return(16>e?"0":"")+e.toString(16)}).join("")}),i=t.map(function(e){return e.map(function(e){return e/255}).concat([1])});return e.getIntegerColor=function(e){return t[Math.floor(e)%t.length]},e.getFloatColor=function(e){return i[Math.floor(e)%i.length]},e.getStringColor=function(e){return n[Math.floor(e)%n.length]},e}),n("platform/features/plot/src/elements/PlotAxis",[],function(){function e(e,t,n){this.axisType=e,this.defaultValue=n,this.optionKeys={},this.active=n,this.options=[],this.updateMetadata(t)}return e.prototype.updateMetadata=function(e){function t(e){return e&&i[e.key]}var n=this.axisType,i=this.optionKeys,r={},o=[];e.forEach(function(e){(e[n]||[]).forEach(function(e){var t=e.key;i[t]||r[t]||o.push(e),r[t]=!0})}),i=this.optionKeys=r,this.options.every(t)||(this.options=this.options.filter(t)),o.length>0&&(this.options=this.options.concat(o)),t(this.active)||(this.active=this.options[0]||this.defaultValue)},e.prototype.chooseOption=function(e){var t=this;this.options.forEach(function(n){n.key===e&&(t.active=n)})},e}),n("platform/features/plot/src/elements/PlotLimitTracker",[],function(){function e(e,t){this.handle=e,this.range=t,this.legendClasses={}}return e.prototype.update=function(){function e(e){var r=e.getCapability("limit"),o=i.getDatum(e);r&&o&&(t[e.getId()]=(r.evaluate(o,n)||{}).cssClass)}var t={},n=this.range,i=this.handle;i.getTelemetryObjects().forEach(e),this.legendClasses=t},e.prototype.getLegendClass=function(e){var t=e&&e.getId();return t&&this.legendClasses[t]},e}),n("platform/features/plot/src/elements/PlotTelemetryFormatter",[],function(){function e(e){this.telemetryFormatter=e}var t=3;return e.prototype.setDomainFormat=function(e){this.domainFormat=e},e.prototype.setRangeFormat=function(e){this.rangeFormat=e},e.prototype.formatDomainValue=function(e){return this.telemetryFormatter.formatDomainValue(e,this.domainFormat)},e.prototype.formatRangeValue=function(e){return"number"==typeof e?e.toFixed(t):this.telemetryFormatter.formatRangeValue(e,this.rangeFormat)},e}),n("platform/features/plot/src/elements/PlotPosition",[],function(){function e(e,t,n,i,r){function o(e,t){return e*c[t]+a[t]}var s=r.getPanZoom(),a=s.origin,c=s.dimensions;c&&a?this.position=[e/n,(i-t)/i].map(o):this.position=[]}return e.prototype.getDomain=function(){return this.position[0]},e.prototype.getRange=function(){return this.position[1]},e.prototype.getPosition=function(){return this.position},e}),n("platform/features/plot/src/elements/PlotTickGenerator",[],function(){function e(e,t){this.panZoomStack=e,this.formatter=t}function t(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}}return e.prototype.generateTicks=function(e,t,n,i){var r,o=t/(n-1),s=[];for(r=0;n>r;r+=1)s.push({label:t>0?i(r*o+e):""});return s},e.prototype.generateDomainTicks=function(e){var n=this.panZoomStack.getPanZoom();return this.generateTicks(n.origin[0],n.dimensions[0],e,t(this.formatter.formatDomainValue,this.formatter))},e.prototype.generateRangeTicks=function(e){var n=this.panZoomStack.getPanZoom();return this.generateTicks(n.origin[1],n.dimensions[1],e,t(this.formatter.formatRangeValue,this.formatter))},e}),n("platform/features/plot/src/SubPlot",["./elements/PlotPosition","./elements/PlotTickGenerator"],function(e,t){function n(e,t,n){this.telemetryObjects=e,this.domainTicks=[],this.rangeTicks=[],this.formatter=n,this.draw={},this.hovering=!1,this.panZoomStack=t,this.updateDrawingBounds(),this.updateTicks()}function i(e){return"string"==typeof e&&""!==e}var r=5,o=7;return n.prototype.hasDomainData=function(){return this.panZoomStack&&this.panZoomStack.getDimensions()[0]>0},n.prototype.mousePositionToDomainRange=function(t){return new e(t.x,t.y,t.width,t.height,this.panZoomStack).getPosition()},n.prototype.toMousePosition=function(e){var t=this.subPlotBounds;return{x:e.clientX-t.left,y:e.clientY-t.top,width:t.width,height:t.height}},n.prototype.toDisplayable=function(e){return[e[0]-this.domainOffset,e[1]]},n.prototype.updateHoverCoordinates=function(){function e(e,n){return n?t.formatRangeValue(e):t.formatDomainValue(e)}var t=this.formatter;this.hoverCoordinates=this.mousePosition&&this.mousePositionToDomainRange(this.mousePosition).map(e).filter(i).join(", ")},n.prototype.updateMarqueeBox=function(){this.draw.boxes=this.marqueeStart?[{start:this.toDisplayable(this.mousePositionToDomainRange(this.marqueeStart)),end:this.toDisplayable(this.mousePositionToDomainRange(this.mousePosition)),color:[1,1,1,.5]}]:void 0},n.prototype.updateDrawingBounds=function(){var e=this.panZoomStack.getPanZoom();this.draw.dimensions=e.dimensions,this.draw.origin=[e.origin[0]-this.domainOffset,e.origin[1]]},n.prototype.updateTicks=function(){var e=new t(this.panZoomStack,this.formatter);this.domainTicks=e.generateDomainTicks(r),this.rangeTicks=e.generateRangeTicks(o)},n.prototype.updatePan=function(){var e,t,n,i;this.panZoomStack.popPanZoom(),e=this.mousePositionToDomainRange(this.panStart,this.panZoomStack),t=this.mousePositionToDomainRange(this.mousePosition,this.panZoomStack),n=[t[0]-e[0],t[1]-e[1]],i=[this.panStartBounds.origin[0]-n[0],this.panStartBounds.origin[1]-n[1]],this.panZoomStack.pushPanZoom(i,this.panStartBounds.dimensions)},n.prototype.getTelemetryObjects=function(){return this.telemetryObjects},n.prototype.getDomainTicks=function(){return this.domainTicks},n.prototype.getRangeTicks=function(){return this.rangeTicks},n.prototype.getDrawingObject=function(){return this.draw},n.prototype.getHoverCoordinates=function(){return this.hoverCoordinates},n.prototype.hover=function(e){this.hovering=!0,this.subPlotBounds=e.target.getBoundingClientRect(),this.mousePosition=this.toMousePosition(e),this.hasDomainData()&&this.updateHoverCoordinates(),this.marqueeStart&&this.updateMarqueeBox(),this.panStart&&(this.updatePan(),this.updateDrawingBounds(),this.updateTicks())},n.prototype.continueDrag=function(e){this.mousePosition=this.toMousePosition(e),this.marqueeStart&&this.updateMarqueeBox(),this.panStart&&(this.updatePan(),this.updateDrawingBounds(),this.updateTicks())},n.prototype.startDrag=function(e){this.subPlotBounds=e.target.getBoundingClientRect(),this.mousePosition=this.toMousePosition(e),e.altKey||e.shiftKey||e.ctrlKey?(this.panStart=this.mousePosition,this.panStartBounds=this.panZoomStack.getPanZoom(),this.panZoomStack.pushPanZoom(this.panStartBounds.origin,this.panStartBounds.dimensions),e.preventDefault()):(this.marqueeStart=this.mousePosition,this.updateMarqueeBox())},n.prototype.endDrag=function(e){function t(e,t){var i=n.mousePositionToDomainRange(e),r=n.mousePositionToDomainRange(t),o=[Math.min(i[0],r[0]),Math.min(i[1],r[1])],s=[Math.max(i[0],r[0])-o[0],Math.max(i[1],r[1])-o[1]];(0!==s[0]||0!==s[1])&&(n.panZoomStack.pushPanZoom(o,s),n.updateTicks())}var n=this;this.mousePosition=this.toMousePosition(e),this.subPlotBounds=void 0,this.marqueeStart&&(t(this.marqueeStart,this.mousePosition),this.marqueeStart=void 0,this.updateMarqueeBox(),this.updateDrawingBounds(),this.updateTicks()),this.panStart&&(this.panStart=void 0,this.panStartBounds=void 0)},n.prototype.update=function(){this.updateDrawingBounds(),this.updateMarqueeBox(),this.updateTicks()},n.prototype.setDomainOffset=function(e){this.domainOffset=e},n.prototype.isHovering=function(e){return void 0!==e&&(this.hovering=e),this.hovering},n}),n("platform/features/plot/src/elements/PlotPanZoomStack",[],function(){function e(e,t){this.stack=[{origin:e,dimensions:t}]}return e.prototype.getDepth=function(){return this.stack.length},e.prototype.pushPanZoom=function(e,t){this.stack.push({origin:e,dimensions:t})},e.prototype.popPanZoom=function(){this.stack.length>1&&this.stack.pop()},e.prototype.setBasePanZoom=function(e,t){this.stack[0]={origin:e,dimensions:t}},e.prototype.clearPanZoom=function(){this.stack=[this.stack[0]]},e.prototype.getPanZoom=function(){return this.stack[this.stack.length-1]},e.prototype.getOrigin=function(){return this.getPanZoom().origin},e.prototype.getDimensions=function(){return this.getPanZoom().dimensions},e}),n("platform/features/plot/src/modes/PlotOverlayMode",["../SubPlot","../elements/PlotPalette","../elements/PlotPanZoomStack"],function(e,t,n){function i(e,t){this.panZoomStack=new n([],[]),this.subplot=t.createSubPlot(e,this.panZoomStack),this.subplots=[this.subplot]}return i.prototype.plotTelemetry=function(e){this.panZoomStack.setBasePanZoom(e.getOrigin(),e.getDimensions()),this.subplot.setDomainOffset(e.getDomainOffset()),this.subplot.getDrawingObject().lines=e.getLineBuffers().map(function(e,n){return{buffer:e.getBuffer(),color:t.getFloatColor(n),points:e.getLength()}})},i.prototype.getSubPlots=function(){return this.subplots},i.prototype.isZoomed=function(){return this.panZoomStack.getDepth()>1},i.prototype.stepBackPanZoom=function(){this.panZoomStack.popPanZoom(),this.subplot.update()},i.prototype.unzoom=function(){this.panZoomStack.clearPanZoom(),this.subplot.update()},i}),n("platform/features/plot/src/elements/PlotPanZoomStackGroup",["./PlotPanZoomStack"],function(e){function t(t){function n(e,t,n){r.stacks.forEach(function(i,r){r===n?i.pushPanZoom(e,t):i.pushPanZoom([e[0],i.getOrigin()[1]],[t[0],i.getDimensions()[1]])})}function i(e,t){var i=Object.create(e);return i.pushPanZoom=function(e,i){n(e,i,t)},i.setBasePanZoom=function(){r.setBasePanZoom.apply(r,arguments)},i.popPanZoom=function(){r.popPanZoom.apply(r,arguments)},i.clearPanZoom=function(){r.clearPanZoom.apply(r,arguments)},i}var r=this;for(this.stacks=[];this.stacks.length<t;)this.stacks.push(new e([],[]));this.decoratedStacks=this.stacks.map(i)}return t.prototype.popPanZoom=function(){this.stacks.forEach(function(e){e.popPanZoom()})},t.prototype.setBasePanZoom=function(e,t){this.stacks.forEach(function(n){n.setBasePanZoom(e,t)})},t.prototype.clearPanZoom=function(){this.stacks.forEach(function(e){e.clearPanZoom()})},t.prototype.getDepth=function(){return this.stacks.length>0?this.stacks[0].getDepth():0},t.prototype.getPanZoomStack=function(e){return this.decoratedStacks[e]},t}),n("platform/features/plot/src/modes/PlotStackMode",["../SubPlot","../elements/PlotPalette","../elements/PlotPanZoomStackGroup"],function(e,t,n){function i(e,t){var i=this;this.panZoomStackGroup=new n(e.length),this.subplots=e.map(function(e,n){return t.createSubPlot([e],i.panZoomStackGroup.getPanZoomStack(n))})}return i.prototype.plotTelemetryTo=function(e,n,i){var r=n.getLineBuffers()[i];e.setDomainOffset(n.getDomainOffset()),e.getDrawingObject().lines=[{buffer:r.getBuffer(),color:t.getFloatColor(0),points:r.getLength()}]},i.prototype.plotTelemetry=function(e){var t=this;this.panZoomStackGroup.setBasePanZoom(e.getOrigin(),e.getDimensions()),this.subplots.forEach(function(n,i){t.plotTelemetryTo(n,e,i)})},i.prototype.getSubPlots=function(){return this.subplots},i.prototype.isZoomed=function(){return this.panZoomStackGroup.getDepth()>1},i.prototype.stepBackPanZoom=function(){this.panZoomStackGroup.popPanZoom(),this.subplots.forEach(function(e){e.update()})},i.prototype.unzoom=function(){this.panZoomStackGroup.clearPanZoom(),this.subplots.forEach(function(e){e.update()})},i}),n("platform/features/plot/src/modes/PlotModeOptions",["./PlotOverlayMode","./PlotStackMode"],function(e,t){function n(e,t){this.options=e.length>1?[r,i]:[r],this.mode=this.options[0],this.telemetryObjects=e,this.subPlotFactory=t}var i={key:"stacked",name:"Stacked",cssClass:"icon-plot-stacked",Constructor:t},r={key:"overlaid",name:"Overlaid",cssClass:"icon-plot-overlay",Constructor:e};return n.prototype.getModeHandler=function(){return this.modeHandler||(this.modeHandler=new this.mode.Constructor(this.telemetryObjects,this.subPlotFactory)),this.modeHandler},n.prototype.getModeOptions=function(){return this.options},n.prototype.getMode=function(){return this.mode},n.prototype.setMode=function(e){this.mode!==e&&(this.mode=e,this.modeHandler=void 0)},n}),n("platform/features/plot/src/SubPlotFactory",["./SubPlot"],function(e){function t(e){this.telemetryFormatter=e}return t.prototype.createSubPlot=function(t,n){return new e(t,n,this.telemetryFormatter)},t}),n("platform/features/plot/src/PlotController",["./elements/PlotUpdater","./elements/PlotPalette","./elements/PlotAxis","./elements/PlotLimitTracker","./elements/PlotTelemetryFormatter","./modes/PlotModeOptions","./SubPlotFactory"],function(e,t,n,i,r,o,s){function a(t,a,l,u,d,p,f,h){function m(e){t.axes.forEach(function(t){t.updateMetadata(e)})}function g(e){e.update()}function y(e){V!==e&&(V=e,P.modeOptions=new o(e||[],F))}function v(e){var t=e.start,n=e.end;L&&(L.setDomainBounds(t,n),P.update()),N=e}function b(){var n=t.axes[0].active.key,r=t.axes[1].active.key,o=f;L=new e(R,n,r,o),j=n,D=r,P.limitTracker=new i(R,r),N&&v(N)}function w(){return L||b(),L}function S(){P.pending=!1,R&&(y(R.getTelemetryObjects()),m(R.getMetadata()),w().update(),P.modeOptions.getModeHandler().plotTelemetry(L),P.limitTracker.update(),P.update())}function x(e,t){P.pending=!1,w().addHistorical(e,t),P.modeOptions.getModeHandler().plotTelemetry(L),P.update()}function C(){R&&R.request({},x)}function T(){R&&(L=void 0,C())}function k(e){if(void 0!==e){var n=B.bounds(),i=n.end-n.start;t.toiPerc=(e-n.start)/i*100,t.toiPinned=!0}else t.toiPerc=void 0,t.toiPinned=!1}function M(e){R&&R.unsubscribe(),R=e&&d.handle(e,S,!0),T(),k(B.timeOfInterest()),B.on("timeOfInterest",k)}function O(){R&&(R.unsubscribe(),R=void 0),B.off("timeOfInterest",k)}function $(){P.pending=!0,O(),M(t.domainObject)}function _(){var e=t.axes[0];U.setDomainFormat(e.active.format)}function A(e){e!==j&&(_(),$())}function E(e){e!==D&&$()}function I(e,n,i){if(i===!0)v(n);else{var r=t.axes[0];n.domain&&r.chooseOption(n.domain),_(),v(n),$()}P.setUnsynchedStatus(t.domainObject,i&&P.isZoomed()),k(B.timeOfInterest())}var L,N,D,j,R,P=this,U=new r(u),F=new s(U),V=[],B=h.conductor;this.modeOptions=new o([],F),this.updateValues=S,this.scheduleUpdate=p(function(){P.modeOptions.getModeHandler().getSubPlots().forEach(g)}),P.pending=!0,P.$element=a,P.exportImageService=l,t.axes=[new n("domains",[],c[0]),new n("ranges",[],c[1])];var q=B.bounds();q&&void 0!==q.start&&void 0!==q.end&&I(void 0,B.bounds(),B.follow()),t.$watch("axes[0].active.key",A),t.$watch("axes[1].active.key",E),t.$watch("domainObject",M),t.$on("telemetry:display:bounds",I),t.$on("$destroy",O)}var c=[{name:"Time"},{name:"Value"}];return a.prototype.getColor=function(e){return t.getStringColor(e)},a.prototype.isZoomed=function(){return this.modeOptions.getModeHandler().isZoomed()},a.prototype.stepBackPanZoom=function(){return this.modeOptions.getModeHandler().stepBackPanZoom()},a.prototype.unzoom=function(){return this.modeOptions.getModeHandler().unzoom()},a.prototype.getModeOptions=function(){return this.modeOptions.getModeOptions()},a.prototype.getMode=function(){return this.modeOptions.getMode()},a.prototype.setMode=function(e){this.modeOptions.setMode(e),this.updateValues()},a.prototype.getSubPlots=function(){return this.modeOptions.getModeHandler().getSubPlots()},a.prototype.getLegendClass=function(e){return this.limitTracker&&this.limitTracker.getLegendClass(e)},a.prototype.update=function(){this.scheduleUpdate()},a.prototype.isRequestPending=function(){return this.pending},a.prototype.setUnsynchedStatus=function(e,t){e.hasCapability("status")&&e.getCapability("status").set("timeconductor-unsynced",t)},a.prototype.exportPNG=function(){var e=this;e.hideExportButtons=!0,e.exportImageService.exportPNG(e.$element[0],"plot.png")["finally"](function(){e.hideExportButtons=!1})},a.prototype.exportJPG=function(){var e=this;e.hideExportButtons=!0,e.exportImageService.exportJPG(e.$element[0],"plot.jpg")["finally"](function(){e.hideExportButtons=!1})},a}),n("platform/features/plot/src/policies/PlotViewPolicy",[],function(){function e(){}function t(e){var t=e&&e.getCapability("telemetry"),n=t?t.getMetadata():{},i=n.ranges||[];return 0===i.length||i.some(function(e){return void 0===e.format||"number"===e.format})}return e.prototype.allow=function(e,n){return"plot"===e.key?t(n):!0},e}),n("platform/features/plot/src/PlotOptionsForm",[],function(){function e(){this.xAxisForm={name:"x-axis",sections:[{name:"x-axis",rows:[{name:"Domain",control:"select",key:"key",options:[{name:"SCET",value:"scet"},{name:"SCLK",value:"sclk"},{name:"LST",value:"lst"}]}]}]},this.yAxisForm={name:"y-axis",sections:[{name:"y-axis",rows:[{name:"Range",control:"select",key:"key",options:[{name:"EU",value:"eu"},{name:"DN",value:"dn"},{name:"Status",value:"status"}]},{name:"Autoscale",control:"checkbox",key:"autoscale"},{name:"Min",control:"textfield",key:"min",pattern:"[0-9]",inputsize:"sm"},{name:"Max",control:"textfield",key:"max",pattern:"[0-9]",inputsize:"sm"}]}]},this.plotSeriesForm={name:"Series Options",sections:[{rows:[{name:"Color",control:"color",key:"color"}]},{rows:[{name:"Markers",control:"checkbox",key:"markers",layout:"control-first"}]},{rows:[{name:"No Line",control:"radio",key:"lineType",value:"noLine",layout:"control-first"},{name:"Step Line",control:"radio",key:"lineType",value:"stepLine",layout:"control-first"},{name:"Linear Line",control:"radio",key:"lineType",value:"linearLine",layout:"control-first"}]}]}}return e}),n("platform/features/plot/src/PlotOptionsController",["./PlotOptionsForm"],function(e){function t(t){var n=this;this.$scope=t,this.domainObject=t.domainObject,this.configuration=this.domainObject.getModel().configuration||{},this.plotOptionsForm=new e,this.composition=[],this.watches=[],this.mutationListener=this.domainObject.getCapability("mutation").listen(function(e){n.hasCompositionChanged(n.composition,e.composition)&&n.updateChildren()}),t.plotSeriesForm=this.plotOptionsForm.plotSeriesForm,t.xAxisForm=this.plotOptionsForm.xAxisForm,t.yAxisForm=this.plotOptionsForm.yAxisForm,t.$on("$destroy",function(){n.mutationListener()}),this.defaultConfiguration(),this.updateChildren(),t.$watchCollection("configuration.plot.yAxis",function(e,t){n.updateConfiguration(e,t)}),t.$watchCollection("configuration.plot.xAxis",function(e,t){n.updateConfiguration(e,t)}),this.watchSeries()}return t.prototype.clearSeriesWatches=function(){this.watches.forEach(function(e){e()}),this.watches=[]},t.prototype.watchSeries=function(){var e=this;this.clearSeriesWatches(),(e.$scope.children||[]).forEach(function(t,n){e.watches.push(e.$scope.$watchCollection("configuration.plot.series["+n+"]",function(t,n){e.updateConfiguration(t,n)}))})},t.prototype.hasCompositionChanged=function(e,t){var n=e===t||e.length===t.length&&e.every(function(e,n){return t[n]&&e===t[n]});return!n},t.prototype.defaultConfiguration=function(){this.configuration.plot=this.configuration.plot||{},this.configuration.plot.xAxis=this.configuration.plot.xAxis||{},this.configuration.plot.yAxis=this.configuration.plot.yAxis||{},this.configuration.plot.series=this.configuration.plot.series||[],this.$scope.configuration=this.configuration},t.prototype.updateChildren=function(){var e=this;this.domainObject.useCapability("composition").then(function(t){e.$scope.children=t,e.composition=e.domainObject.getModel().composition,t.forEach(function(t,n){e.configuration.plot.series[n]=e.configuration.plot.series[n]||{id:t.getId()}}),e.watchSeries()})},t.prototype.updateConfiguration=function(){var e=this;this.domainObject.useCapability("mutation",function(t){t.configuration=t.configuration||{},t.configuration.plot=e.configuration.plot})},t}),function(e){n("html2canvas",[],function(){return function(){return function(e,t,n){"use strict";function i(e,t,n){var i,r=e.runtimeStyle&&e.runtimeStyle[t],o=e.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(i=o.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":n||0,n=o.pixelLeft+"px",o.left=i,r&&(e.runtimeStyle.left=r)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function r(e){return parseInt(e,10)}function o(e,t,r,o){if(e=(e||"").split(","),e=e[o||0]||e[0]||"auto",e=d.Util.trimText(e).split(" "),"backgroundSize"!==r||e[0]&&!e[0].match(/cover|contain|auto/)){if(e[0]=-1===e[0].indexOf("%")?i(t,r+"X",e[0]):e[0],e[1]===n){if("backgroundSize"===r)return e[1]="auto",e;e[1]=e[0]}e[1]=-1===e[1].indexOf("%")?i(t,r+"Y",e[1]):e[1]}return e}function s(e,t,n,i,r,o){var s,a,c,l,u=d.Util.getCSS(t,e,r);if(1===u.length&&(l=u[0],u=[],u[0]=l,u[1]=l),-1!==(""+u[0]).indexOf("%"))c=parseFloat(u[0])/100,a=n.width*c,"backgroundSize"!==e&&(a-=(o||i).width*c);else if("backgroundSize"===e)if("auto"===u[0])a=i.width;else if(/contain|cover/.test(u[0])){var p=d.Util.resizeBounds(i.width,i.height,n.width,n.height,u[0]);a=p.width,s=p.height}else a=parseInt(u[0],10);else a=parseInt(u[0],10);return"auto"===u[1]?s=a/i.width*i.height:-1!==(""+u[1]).indexOf("%")?(c=parseFloat(u[1])/100,s=n.height*c,"backgroundSize"!==e&&(s-=(o||i).height*c)):s=parseInt(u[1],10),[a,s]}function a(e,t){var n=[];return{storage:n,width:e,height:t,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];return n.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){return n.push({type:"variable",name:e,arguments:t}),t}}}function c(e){return{zindex:e,children:[]}}var l,u,d={};d.Util={},d.Util.log=function(t){d.logging&&e.console&&e.console.log&&e.console.log(t)},d.Util.trimText=function(e){return function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),d.Util.asFloat=function(e){return parseFloat(e)},function(){var e=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,t=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;d.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var i=n.match(e),r=[],o=0;i&&i.length>o;o++){var s=i[o].match(t);r.push({color:s[0],offsetX:s[1]?s[1].replace("px",""):0,offsetY:s[2]?s[2].replace("px",""):0,blur:s[3]?s[3].replace("px",""):0})}return r}}(),d.Util.parseBackgroundImage=function(e){var t,n,i,r,o,s,a,c,l=" \r\n	",u=[],d=0,p=0,f=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&c.push(n),"-"===t.substr(0,1)&&(r=t.indexOf("-",1)+1)>0&&(i=t.substr(0,r),t=t.substr(r)),u.push({prefix:i,method:t.toLowerCase(),value:o,args:c})),c=[],t=i=n=o=""};f();for(var h=0,m=e.length;m>h;h++)if(s=e[h],!(0===d&&l.indexOf(s)>-1)){switch(s){case'"':a?a===s&&(a=null):a=s;break;case"(":if(a)break;if(0===d){d=1,o+=s;continue}p++;break;case")":if(a)break;
if(1===d){if(0===p){d=0,o+=s,f();continue}p--}break;case",":if(a)break;if(0===d){f();continue}if(1===d&&0===p&&!t.match(/^url$/i)){c.push(n),n="",o+=s;continue}}o+=s,0===d?t+=s:n+=s}return f(),u},d.Util.Bounds=function(e){var t,n={};return e.getBoundingClientRect&&(t=e.getBoundingClientRect(),n.top=t.top,n.bottom=t.bottom||t.top+t.height,n.left=t.left,n.width=e.offsetWidth,n.height=e.offsetHeight),n},d.Util.OffsetBounds=function(e){var t=e.offsetParent?d.Util.OffsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},d.Util.getCSS=function(e,n,i){l!==e&&(u=t.defaultView.getComputedStyle(e,null));var s=u[n];if(/^background(Size|Position)$/.test(n))return o(s,e,n,i);if(/border(Top|Bottom)(Left|Right)Radius/.test(n)){var a=s.split(" ");return 1>=a.length&&(a[1]=a[0]),a.map(r)}return s},d.Util.resizeBounds=function(e,t,n,i,r){var o,s,a=n/i,c=e/t;return r&&"auto"!==r?c>a^"contain"===r?(s=i,o=i*c):(o=n,s=n/c):(o=n,s=i),{width:o,height:s}},d.Util.BackgroundPosition=function(e,t,n,i,r){var o=s("backgroundPosition",e,t,n,i,r);return{left:o[0],top:o[1]}},d.Util.BackgroundSize=function(e,t,n,i){var r=s("backgroundSize",e,t,n,i);return{width:r[0],height:r[1]}},d.Util.Extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},d.Util.Children=function(e){var t;try{t=e.nodeName&&"IFRAME"===e.nodeName.toUpperCase()?e.contentDocument||e.contentWindow.document:function(e){var t=[];return null!==e&&function(e,t){var i=e.length,r=0;if("number"==typeof t.length)for(var o=t.length;o>r;r++)e[i++]=t[r];else for(;t[r]!==n;)e[i++]=t[r++];return e.length=i,e}(t,e),t}(e.childNodes)}catch(i){d.Util.log("html2canvas.Util.Children failed with exception: "+i.message),t=[]}return t},d.Util.isTransparent=function(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e},d.Util.Font=function(){var e={};return function(t,i,r){if(e[t+"-"+i]!==n)return e[t+"-"+i];var o,s,a,c=r.createElement("div"),l=r.createElement("img"),u=r.createElement("span"),d="Hidden Text";return c.style.visibility="hidden",c.style.fontFamily=t,c.style.fontSize=i,c.style.margin=0,c.style.padding=0,r.body.appendChild(c),l.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",l.width=1,l.height=1,l.style.margin=0,l.style.padding=0,l.style.verticalAlign="baseline",u.style.fontFamily=t,u.style.fontSize=i,u.style.margin=0,u.style.padding=0,u.appendChild(r.createTextNode(d)),c.appendChild(u),c.appendChild(l),o=l.offsetTop-u.offsetTop+1,c.removeChild(u),c.appendChild(r.createTextNode(d)),c.style.lineHeight="normal",l.style.verticalAlign="super",s=l.offsetTop-c.offsetTop+1,a={baseline:o,lineWidth:1,middle:s},e[t+"-"+i]=a,r.body.removeChild(c),a}}(),function(){function e(e){return function(t){try{e.addColorStop(t.stop,t.color)}catch(i){n.log(["failed to add color stop: ",i,"; tried to add: ",t])}}}var n=d.Util,i={};d.Generate=i;var r=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];i.parseGradient=function(e,t){var n,i,o,s,a,c,l,u,d,p,f,h,m=r.length;for(i=0;m>i&&!(o=e.match(r[i]));i+=1);if(o)switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},a=o[2].match(/\w+/g))for(c=a.length,i=0;c>i;i+=1)switch(a[i]){case"top":n.y0=0,n.y1=t.height;break;case"right":n.x0=t.width,n.x1=0;break;case"bottom":n.y0=t.height,n.y1=0;break;case"left":n.x0=0,n.x1=t.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=t.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=t.height/2),a=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(c=a.length,l=1/Math.max(c-1,1),i=0;c>i;i+=1)u=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(s=parseFloat(u[2]),s/="%"===u[3]?100:t.width):s=i*l,n.colorStops.push({color:u[1],stop:s});break;case"-webkit-gradient":if(n={type:"radial"===o[2]?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},a=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),a&&(n.x0=a[1]*t.width/100,n.y0=a[2]*t.height/100,n.x1=a[3]*t.width/100,n.y1=a[4]*t.height/100),a=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(c=a.length,i=0;c>i;i+=1)u=a[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),s=parseFloat(u[2]),"from"===u[1]&&(s=0),"to"===u[1]&&(s=1),n.colorStops.push({color:u[3],stop:s});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},a=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),a&&(n.x0=a[1]*t.width/100,n.y0=a[2]*t.height/100,n.x1=t.width-n.x0,n.y1=t.height-n.y0),a=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(c=a.length,l=1/Math.max(c-1,1),i=0;c>i;i+=1)u=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),u[2]?(s=parseFloat(u[2]),u[3]&&(s/=100)):s=i*l,n.colorStops.push({color:u[1],stop:s});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:t.width,y1:t.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},a=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),a&&(n.cx=a[1]*t.width/100,n.cy=a[2]*t.height/100),a=o[3].match(/\w+/),u=o[4].match(/[a-z\-]*/),a&&u)switch(u[0]){case"farthest-corner":case"cover":case"":d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),p=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),h=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(d,p,f,h);break;case"closest-corner":d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),p=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),h=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(d,p,f,h);break;case"farthest-side":"circle"===a[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=a[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===a[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=a[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(a=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(c=a.length,l=1/Math.max(c-1,1),i=0;c>i;i+=1)u=a[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(s=parseFloat(u[2]),s/="%"===u[3]?100:t.width):s=i*l,n.colorStops.push({color:u[1],stop:s})}return n},i.Gradient=function(n,i){if(0!==i.width&&0!==i.height){var r,o,s=t.createElement("canvas"),a=s.getContext("2d");if(s.width=i.width,s.height=i.height,r=d.Generate.parseGradient(n,i))switch(r.type){case"linear":o=a.createLinearGradient(r.x0,r.y0,r.x1,r.y1),r.colorStops.forEach(e(o)),a.fillStyle=o,a.fillRect(0,0,i.width,i.height);break;case"circle":o=a.createRadialGradient(r.cx,r.cy,0,r.cx,r.cy,r.rx),r.colorStops.forEach(e(o)),a.fillStyle=o,a.fillRect(0,0,i.width,i.height);break;case"ellipse":var c=t.createElement("canvas"),l=c.getContext("2d"),u=Math.max(r.rx,r.ry),p=2*u;c.width=c.height=p,o=l.createRadialGradient(r.rx,r.ry,0,r.rx,r.ry,u),r.colorStops.forEach(e(o)),l.fillStyle=o,l.fillRect(0,0,p,p),a.fillStyle=r.colorStops[r.colorStops.length-1].color,a.fillRect(0,0,s.width,s.height),a.drawImage(c,r.cx-r.rx,r.cy-r.ry,2*r.rx,2*r.ry)}return s}},i.ListAlpha=function(e){var t,n="";do t=e%26,n=String.fromCharCode(t+64)+n,e/=26;while(26*e>26);return n},i.ListRoman=function(e){var t,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],r="",o=n.length;if(0>=e||e>=4e3)return e;for(t=0;o>t;t+=1)for(;e>=i[t];)e-=i[t],r+=n[t];return r}}(),d.Parse=function(i,r){function o(){return Math.max(Math.max(ue.body.scrollWidth,ue.documentElement.scrollWidth),Math.max(ue.body.offsetWidth,ue.documentElement.offsetWidth),Math.max(ue.body.clientWidth,ue.documentElement.clientWidth))}function s(){return Math.max(Math.max(ue.body.scrollHeight,ue.documentElement.scrollHeight),Math.max(ue.body.offsetHeight,ue.documentElement.offsetHeight),Math.max(ue.body.clientHeight,ue.documentElement.clientHeight))}function l(e,t){var n=parseInt(me(e,t),10);return isNaN(n)?0:n}function u(e,t,n,i,r,o){"transparent"!==o&&(e.setVariable("fillStyle",o),e.fillRect(t,n,i,r),le+=1)}function p(e,t,i){return e.length>0?t+i.toUpperCase():n}function f(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,p);case"uppercase":return e.toUpperCase();default:return e}}function h(e){return/^(normal|none|0px)$/.test(e)}function m(e,t,n,i){null!==e&&de.trimText(e).length>0&&(i.fillText(e,t,n),le+=1)}function g(e,t,i,r){var o=!1,s=me(t,"fontWeight"),a=me(t,"fontFamily"),c=me(t,"fontSize"),l=de.parseTextShadows(me(t,"textShadow"));switch(parseInt(s,10)){case 401:s="bold";break;case 400:s="normal"}return e.setVariable("fillStyle",r),e.setVariable("font",[me(t,"fontStyle"),me(t,"fontVariant"),s,c,a].join(" ")),e.setVariable("textAlign",o?"right":"left"),l.length&&(e.setVariable("shadowColor",l[0].color),e.setVariable("shadowOffsetX",l[0].offsetX),e.setVariable("shadowOffsetY",l[0].offsetY),e.setVariable("shadowBlur",l[0].blur)),"none"!==i?de.Font(a,c,ue):n}function y(e,t,n,i,r){switch(t){case"underline":u(e,n.left,Math.round(n.top+i.baseline+i.lineWidth),n.width,1,r);break;case"overline":u(e,n.left,Math.round(n.top),n.width,1,r);break;case"line-through":u(e,n.left,Math.ceil(n.top+i.middle+i.lineWidth),n.width,1,r)}}function v(e,t,n,i,r){var o;if(pe.rangeBounds&&!r)("none"!==n||0!==de.trimText(t).length)&&(o=b(t,e.node,e.textOffset)),e.textOffset+=t.length;else if(e.node&&"string"==typeof e.node.nodeValue){var s=i?e.node.splitText(t.length):null;o=w(e.node,r),e.node=s}return o}function b(e,t,n){var i=ue.createRange();return i.setStart(t,n),i.setEnd(t,n+e.length),i.getBoundingClientRect()}function w(e,t){var n=e.parentNode,i=ue.createElement("wrapper"),r=e.cloneNode(!0);i.appendChild(e.cloneNode(!0)),n.replaceChild(i,e);var o=t?de.OffsetBounds(i):de.Bounds(i);return n.replaceChild(r,i),o}function S(e,t,n){var i,o,s=n.ctx,a=me(e,"color"),c=me(e,"textDecoration"),l=me(e,"textAlign"),u={node:t,textOffset:0};de.trimText(t.nodeValue).length>0&&(t.nodeValue=f(t.nodeValue,me(e,"textTransform")),l=l.replace(["-webkit-auto"],["auto"]),o=!r.letterRendering&&/^(left|right|justify|auto)$/.test(l)&&h(me(e,"letterSpacing"))?t.nodeValue.split(/(\b| )/):t.nodeValue.split(""),i=g(s,e,c,a),r.chinese&&o.forEach(function(e,t){/.*[\u4E00-\u9FA5].*$/.test(e)&&(e=e.split(""),e.unshift(t,1),o.splice.apply(o,e))}),o.forEach(function(e,t){var r=v(u,e,c,o.length-1>t,n.transform.matrix);r&&(m(e,r.left,r.bottom,s),y(s,c,r,i,a))}))}function x(e,t){var n,i,r=ue.createElement("boundelement");return r.style.display="inline",n=e.style.listStyleType,e.style.listStyleType="none",r.appendChild(ue.createTextNode(t)),e.insertBefore(r,e.firstChild),i=de.Bounds(r),e.removeChild(r),e.style.listStyleType=n,i}function C(e){var t=-1,n=1,i=e.parentNode.childNodes;if(e.parentNode){for(;i[++t]!==e;)1===i[t].nodeType&&n++;return n}return-1}function T(e,t){var n,i=C(e);switch(t){case"decimal":n=i;break;case"decimal-leading-zero":n=1===(""+i).length?i="0"+i:""+i;break;case"upper-roman":n=d.Generate.ListRoman(i);break;case"lower-roman":n=d.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":n=d.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":n=d.Generate.ListAlpha(i)}return n+". "}function k(e,t,n){var i,r,o,s=t.ctx,a=me(e,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(a)){if(r=T(e,a),o=x(e,r),g(s,e,"none",me(e,"color")),"inside"!==me(e,"listStylePosition"))return;s.setVariable("textAlign","left"),i=n.left,m(r,i,o.bottom,s)}}function M(e){var t=i[e];return t&&t.succeeded===!0?t.img:!1}function O(e,t){var n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),r=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:i,width:r-n,height:o-i}}function $(e,t,n){var i,r="static"!==t.cssPosition,o=r?me(e,"zIndex"):"auto",s=me(e,"opacity"),a="none"!==me(e,"cssFloat");t.zIndex=i=c(o),i.isPositioned=r,i.isFloated=a,i.opacity=s,i.ownStacking="auto"!==o||1>s,n&&n.zIndex.children.push(t)}function _(e,t,n,i,r){var o=l(t,"paddingLeft"),s=l(t,"paddingTop"),a=l(t,"paddingRight"),c=l(t,"paddingBottom");V(e,n,0,0,n.width,n.height,i.left+o+r[3].width,i.top+s+r[0].width,i.width-(r[1].width+r[3].width+o+a),i.height-(r[0].width+r[2].width+s+c))}function A(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:l(e,"border"+t+"Width"),color:me(e,"border"+t+"Color")}})}function E(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return me(e,"border"+t+"Radius")})}function I(e,t,n,i){var r=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:i,subdivide:function(o){var s=r(e,t,o),a=r(t,n,o),c=r(n,i,o),l=r(s,a,o),u=r(a,c,o),d=r(l,u,o);return[I(e,s,l,d),I(d,u,c,i)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function L(e,t,n,i,r,o,s){t[0]>0||t[1]>0?(e.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(e),i[1].curveTo(e)):e.push(["line",o,s]),(n[0]>0||n[1]>0)&&e.push(["line",r[0].start.x,r[0].start.y])}function N(e,t,n,i,r,o,s){var a=[];return t[0]>0||t[1]>0?(a.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(a)):a.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(a.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",e.c2[0],e.c2[1]]),a.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(a.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(a)):a.push(["line",e.c4[0],e.c4[1]]),a}function D(e,t,n){var i=e.left,r=e.top,o=e.width,s=e.height,a=t[0][0],c=t[0][1],l=t[1][0],u=t[1][1],d=t[2][0],p=t[2][1],f=t[3][0],h=t[3][1],m=o-l,g=s-p,y=o-d,v=s-h;return{topLeftOuter:ve(i,r,a,c).topLeft.subdivide(.5),topLeftInner:ve(i+n[3].width,r+n[0].width,Math.max(0,a-n[3].width),Math.max(0,c-n[0].width)).topLeft.subdivide(.5),topRightOuter:ve(i+m,r,l,u).topRight.subdivide(.5),topRightInner:ve(i+Math.min(m,o+n[3].width),r+n[0].width,m>o+n[3].width?0:l-n[3].width,u-n[0].width).topRight.subdivide(.5),bottomRightOuter:ve(i+y,r+g,d,p).bottomRight.subdivide(.5),bottomRightInner:ve(i+Math.min(y,o+n[3].width),r+Math.min(g,s+n[0].width),Math.max(0,d-n[1].width),Math.max(0,p-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:ve(i,r+v,f,h).bottomLeft.subdivide(.5),bottomLeftInner:ve(i+n[3].width,r+v,Math.max(0,f-n[3].width),Math.max(0,h-n[2].width)).bottomLeft.subdivide(.5)}}function j(e,t,n,i,r){var o=me(e,"backgroundClip"),s=[];switch(o){case"content-box":case"padding-box":L(s,i[0],i[1],t.topLeftInner,t.topRightInner,r.left+n[3].width,r.top+n[0].width),L(s,i[1],i[2],t.topRightInner,t.bottomRightInner,r.left+r.width-n[1].width,r.top+n[0].width),L(s,i[2],i[3],t.bottomRightInner,t.bottomLeftInner,r.left+r.width-n[1].width,r.top+r.height-n[2].width),L(s,i[3],i[0],t.bottomLeftInner,t.topLeftInner,r.left+n[3].width,r.top+r.height-n[2].width);break;default:L(s,i[0],i[1],t.topLeftOuter,t.topRightOuter,r.left,r.top),L(s,i[1],i[2],t.topRightOuter,t.bottomRightOuter,r.left+r.width,r.top),L(s,i[2],i[3],t.bottomRightOuter,t.bottomLeftOuter,r.left+r.width,r.top+r.height),L(s,i[3],i[0],t.bottomLeftOuter,t.topLeftOuter,r.left,r.top+r.height)}return s}function R(e,t,n){var i,r,o,s,a,c,l=t.left,u=t.top,d=t.width,p=t.height,f=E(e),h=D(t,f,n),m={clip:j(e,h,n,f,t),borders:[]};for(i=0;4>i;i++)if(n[i].width>0){switch(r=l,o=u,s=d,a=p-n[2].width,i){case 0:a=n[0].width,c=N({c1:[r,o],c2:[r+s,o],c3:[r+s-n[1].width,o+a],c4:[r+n[3].width,o+a]},f[0],f[1],h.topLeftOuter,h.topLeftInner,h.topRightOuter,h.topRightInner);break;case 1:r=l+d-n[1].width,s=n[1].width,c=N({c1:[r+s,o],c2:[r+s,o+a+n[2].width],c3:[r,o+a],c4:[r,o+n[0].width]},f[1],f[2],h.topRightOuter,h.topRightInner,h.bottomRightOuter,h.bottomRightInner);break;case 2:o=o+p-n[2].width,a=n[2].width,c=N({c1:[r+s,o+a],c2:[r,o+a],c3:[r+n[3].width,o],c4:[r+s-n[3].width,o]},f[2],f[3],h.bottomRightOuter,h.bottomRightInner,h.bottomLeftOuter,h.bottomLeftInner);break;case 3:s=n[3].width,c=N({c1:[r,o+a+n[2].width],c2:[r,o],c3:[r+s,o+n[0].width],c4:[r+s,o+a]},f[3],f[0],h.bottomLeftOuter,h.bottomLeftInner,h.topLeftOuter,h.topLeftInner)}m.borders.push({args:c,color:n[i].color})}return m}function P(e,t){var n=e.drawShape();return t.forEach(function(e,t){n[0===t?"moveTo":e[0]+"To"].apply(null,e.slice(1))}),n}function U(e,t,n){"transparent"!==n&&(e.setVariable("fillStyle",n),P(e,t),e.fill(),le+=1)}function F(e,t,n){var i,r,o=ue.createElement("valuewrap"),s=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];s.forEach(function(t){try{o.style[t]=me(e,t)}catch(n){de.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),o.style.borderColor="black",o.style.borderStyle="solid",o.style.display="block",o.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(o.style.lineHeight=me(e,"height")),o.style.top=t.top+"px",o.style.left=t.left+"px",i="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value,i||(i=e.placeholder),r=ue.createTextNode(i),o.appendChild(r),he.appendChild(o),S(e,r,n),he.removeChild(o)}function V(e){e.drawImage.apply(e,Array.prototype.slice.call(arguments,1)),le+=1}function B(n,i){var r=e.getComputedStyle(n,i);if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content&&"none"!==r.display){var o=r.content+"",s=o.substr(0,1);s===o.substr(o.length-1)&&s.match(/'|"/)&&(o=o.substr(1,o.length-2));var a="url"===o.substr(0,3),c=t.createElement(a?"img":"span");return c.className=ge+"-before "+ge+"-after",Object.keys(r).filter(q).forEach(function(e){try{c.style[e]=r[e]}catch(t){de.log(["Tried to assign readonly property ",e,"Error:",t])}}),a?c.src=de.parseBackgroundImage(o)[0].args[0]:c.innerHTML=o,c}}function q(t){return isNaN(e.parseInt(t,10))}function Y(e,t){var n=B(e,":before"),i=B(e,":after");(n||i)&&(n&&(e.className+=" "+ge+"-before",e.parentNode.insertBefore(n,e),oe(n,t,!0),e.parentNode.removeChild(n),e.className=e.className.replace(ge+"-before","").trim()),i&&(e.className+=" "+ge+"-after",e.appendChild(i),oe(i,t,!0),e.removeChild(i),e.className=e.className.replace(ge+"-after","").trim()))}function z(e,t,n,i){var r=Math.round(i.left+n.left),o=Math.round(i.top+n.top);e.createPattern(t),e.translate(r,o),e.fill(),e.translate(-r,-o)}function H(e,t,n,i,r,o,s,a){var c=[];c.push(["line",Math.round(r),Math.round(o)]),c.push(["line",Math.round(r+s),Math.round(o)]),c.push(["line",Math.round(r+s),Math.round(a+o)]),c.push(["line",Math.round(r),Math.round(a+o)]),P(e,c),e.save(),e.clip(),z(e,t,n,i),e.restore()}function W(e,t,n){u(e,t.left,t.top,t.width,t.height,n)}function G(e,t,n,i,r){var o=de.BackgroundSize(e,t,i,r),s=de.BackgroundPosition(e,t,i,r,o),a=me(e,"backgroundRepeat").split(",").map(de.trimText);switch(i=Z(i,o),a=a[r]||a[0]){case"repeat-x":H(n,i,s,t,t.left,t.top+s.top,99999,i.height);break;case"repeat-y":H(n,i,s,t,t.left+s.left,t.top,i.width,99999);break;case"no-repeat":H(n,i,s,t,t.left+s.left,t.top+s.top,i.width,i.height);break;default:z(n,i,s,{top:t.top,left:t.left,width:i.width,height:i.height})}}function K(e,t,n){for(var i,r=me(e,"backgroundImage"),o=de.parseBackgroundImage(r),s=o.length;s--;)if(r=o[s],r.args&&0!==r.args.length){var a="url"===r.method?r.args[0]:r.value;i=M(a),i?G(e,t,n,i,s):de.log("html2canvas: Error loading background:",r)}}function Z(e,t){if(e.width===t.width&&e.height===t.height)return e;var n,i=ue.createElement("canvas");return i.width=t.width,i.height=t.height,n=i.getContext("2d"),V(n,e,0,0,e.width,e.height,0,0,t.width,t.height),i}function X(e,t,n){return e.setVariable("globalAlpha",me(t,"opacity")*(n?n.opacity:1))}function J(e){return e.replace("px","")}function Q(e){var t=me(e,"transform")||me(e,"-webkit-transform")||me(e,"-moz-transform")||me(e,"-ms-transform")||me(e,"-o-transform"),n=me(e,"transform-origin")||me(e,"-webkit-transform-origin")||me(e,"-moz-transform-origin")||me(e,"-ms-transform-origin")||me(e,"-o-transform-origin")||"0px 0px";n=n.split(" ").map(J).map(de.asFloat);var i;if(t&&"none"!==t){var r=t.match(be);if(r)switch(r[1]){case"matrix":i=r[2].split(",").map(de.trimText).map(de.asFloat)}}return{origin:n,matrix:i}}function ee(e,t,n,i){var c=a(t?n.width:o(),t?n.height:s()),l={ctx:c,opacity:X(c,e,t),cssPosition:me(e,"position"),borders:A(e),transform:i,clip:t&&t.clip?de.Extend({},t.clip):null};return $(e,l,t),r.useOverflow===!0&&/(hidden|scroll|auto)/.test(me(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(l.clip=l.clip?O(l.clip,n):n),l}function te(e,t,n){var i={left:t.left+e[3].width,top:t.top+e[0].width,width:t.width-(e[1].width+e[3].width),height:t.height-(e[0].width+e[2].width)};return n&&(i=O(i,n)),i}function ne(e,t){var n=t.matrix?de.OffsetBounds(e):de.Bounds(e);return t.origin[0]+=n.left,t.origin[1]+=n.top,n}function ie(e,t,n,i){var r,o=Q(e,t),s=ne(e,o),a=ee(e,t,s,o),c=a.borders,l=a.ctx,u=te(c,s,a.clip),d=R(e,s,c),p=fe.test(e.nodeName)?"#efefef":me(e,"backgroundColor");switch(P(l,d.clip),l.save(),l.clip(),u.height>0&&u.width>0&&!i?(W(l,s,p),K(e,u,l)):i&&(a.backgroundColor=p),l.restore(),d.borders.forEach(function(e){U(l,e.args,e.color)}),n||Y(e,a),e.nodeName){case"IMG":(r=M(e.getAttribute("src")))?_(l,e,r,s,c):de.log("html2canvas: Error loading <img>:"+e.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&(e.value||e.placeholder||"").length>0&&F(e,s,a);break;case"TEXTAREA":(e.value||e.placeholder||"").length>0&&F(e,s,a);break;case"SELECT":(e.options||e.placeholder||"").length>0&&F(e,s,a);break;case"LI":k(e,a,u);break;case"CANVAS":_(l,e,e,s,c)}return a}function re(e){return"none"!==me(e,"display")&&"hidden"!==me(e,"visibility")&&!e.hasAttribute("data-html2canvas-ignore")}function oe(e,t,n){re(e)&&(t=ie(e,t,n,!1)||t,fe.test(e.nodeName)||se(e,t,n))}function se(e,t,n){de.Children(e).forEach(function(i){i.nodeType===i.ELEMENT_NODE?oe(i,t,n):i.nodeType===i.TEXT_NODE&&S(e,i,t)})}function ae(){var e=me(t.documentElement,"backgroundColor"),n=de.isTransparent(e)&&ce===t.body,i=ie(ce,null,!1,n);return se(ce,i),n&&(e=i.backgroundColor),he.removeChild(ye),{backgroundColor:e,stack:i}}e.scroll(0,0);var ce=r.elements===n?t.body:r.elements[0],le=0,ue=ce.ownerDocument,de=d.Util,pe=de.Support(r,ue),fe=RegExp("("+r.ignoreElements+")"),he=ue.body,me=de.getCSS,ge="___html2canvas___pseudoelement",ye=ue.createElement("style");ye.innerHTML="."+ge+'-before:before { content: "" !important; display: none !important; }.'+ge+'-after:after { content: "" !important; display: none !important; }',he.appendChild(ye),i=i||{};var ve=function(e){return function(t,n,i,r){var o=i*e,s=r*e,a=t+i,c=n+r;return{topLeft:I({x:t,y:c},{x:t,y:c-s},{x:a-o,y:n},{x:a,y:n}),topRight:I({x:t,y:n},{x:t+o,y:n},{x:a,y:c-s},{x:a,y:c}),bottomRight:I({x:a,y:n},{x:a,y:n+s},{x:t+o,y:c},{x:t,y:c}),bottomLeft:I({x:a,y:c},{x:a-o,y:c},{x:t,y:n+s},{x:t,y:n})}}}(4*((Math.sqrt(2)-1)/3)),be=/(matrix)\((.+)\)/;return ae()},d.Preload=function(i){function r(e){M.href=e,M.href=M.href;var t=M.protocol+M.host;return t===m}function o(){w.log("html2canvas: start: images: "+b.numLoaded+" / "+b.numTotal+" (failed: "+b.numFailed+")"),!b.firstRun&&b.numLoaded>=b.numTotal&&(w.log("Finished loading images: # "+b.numTotal+" (failed: "+b.numFailed+")"),"function"==typeof i.complete&&i.complete(b))}function s(t,r,s){var a,c,l=i.proxy;M.href=t,t=M.href,a="html2canvas_"+S++,s.callbackname=a,l+=l.indexOf("?")>-1?"&":"?",l+="url="+encodeURIComponent(t)+"&callback="+a,c=C.createElement("script"),e[a]=function(t){"error:"===t.substring(0,6)?(s.succeeded=!1,b.numLoaded++,b.numFailed++,o()):(h(r,s),r.src=t),e[a]=n;try{delete e[a]}catch(i){}c.parentNode.removeChild(c),c=null,delete s.script,delete s.callbackname},c.setAttribute("type","text/javascript"),c.setAttribute("src",l),s.script=c,e.document.body.appendChild(c)}function a(t,n){var i=e.getComputedStyle(t,n),r=i.content;"url"===r.substr(0,3)&&g.loadImage(d.Util.parseBackgroundImage(r)[0].args[0]),p(i.backgroundImage,t)}function c(e){a(e,":before"),a(e,":after")}function l(e,t){var i=d.Generate.Gradient(e,t);i!==n&&(b[e]={img:i,succeeded:!0},b.numTotal++,b.numLoaded++,o())}function u(e){return e&&e.method&&e.args&&e.args.length>0}function p(e,t){var i;d.Util.parseBackgroundImage(e).filter(u).forEach(function(e){"url"===e.method?g.loadImage(e.args[0]):e.method.match(/\-?gradient$/)&&(i===n&&(i=d.Util.Bounds(t)),l(e.value,i))})}function f(e){var t=!1;try{w.Children(e).forEach(f)}catch(i){}try{t=e.nodeType}catch(r){t=!1,w.log("html2canvas: failed to access some element's nodeType - Exception: "+r.message)}if(1===t||t===n){c(e);try{p(w.getCSS(e,"backgroundImage"),e)}catch(i){w.log("html2canvas: failed to get background-image - Exception: "+i.message)}p(e)}}function h(t,r){t.onload=function(){r.timer!==n&&e.clearTimeout(r.timer),b.numLoaded++,r.succeeded=!0,t.onerror=t.onload=null,o()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(r.timer),i.proxy)){var a=t.src;return t=new Image,r.img=t,t.src=a,s(t.src,t,r),n}b.numLoaded++,b.numFailed++,r.succeeded=!1,t.onerror=t.onload=null,o()}}var m,g,y,v,b={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},w=d.Util,S=0,x=i.elements[0]||t.body,C=x.ownerDocument,T=x.getElementsByTagName("img"),k=T.length,M=C.createElement("a"),O=function(e){return e.crossOrigin!==n}(new Image);for(M.href=e.location.href,m=M.protocol+M.host,g={loadImage:function(e){var t,o;e&&b[e]===n&&(t=new Image,e.match(/data:image\/.*;base64,/i)?(t.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),o=b[e]={img:t},b.numTotal++,h(t,o)):r(e)||i.allowTaint===!0?(o=b[e]={img:t},b.numTotal++,h(t,o),t.src=e):O&&!i.allowTaint&&i.useCORS?(t.crossOrigin="anonymous",o=b[e]={img:t},b.numTotal++,h(t,o),t.src=e):i.proxy&&(o=b[e]={img:t},b.numTotal++,s(e,t,o)))},cleanupDOM:function(r){var s,a;if(!b.cleanupDone){r&&"string"==typeof r?w.log("html2canvas: Cleanup because: "+r):w.log("html2canvas: Cleanup after timeout: "+i.timeout+" ms.");for(a in b)if(b.hasOwnProperty(a)&&(s=b[a],"object"==typeof s&&s.callbackname&&s.succeeded===n)){e[s.callbackname]=n;try{delete e[s.callbackname]}catch(c){}s.script&&s.script.parentNode&&(s.script.setAttribute("src","about:blank"),s.script.parentNode.removeChild(s.script)),b.numLoaded++,b.numFailed++,w.log("html2canvas: Cleaned up failed img: '"+a+"' Steps: "+b.numLoaded+" / "+b.numTotal)}e.stop!==n?e.stop():t.execCommand!==n&&t.execCommand("Stop",!1),t.close!==n&&t.close(),b.cleanupDone=!0,r&&"string"==typeof r||o()}},renderingDone:function(){v&&e.clearTimeout(v)}},i.timeout>0&&(v=e.setTimeout(g.cleanupDOM,i.timeout)),w.log("html2canvas: Preload starts: finding background-images"),b.firstRun=!0,f(x),w.log("html2canvas: Preload: Finding images"),y=0;k>y;y+=1)g.loadImage(T[y].getAttribute("src"));return b.firstRun=!1,w.log("html2canvas: Preload: Done."),b.numTotal===b.numLoaded&&o(),g},d.Renderer=function(e,i){function r(e){function t(e){Object.keys(e).sort().forEach(function(n){var i=[],o=[],s=[],a=[];e[n].forEach(function(e){e.node.zIndex.isPositioned||1>e.node.zIndex.opacity?s.push(e):e.node.zIndex.isFloated?o.push(e):i.push(e)}),function c(e){e.forEach(function(e){a.push(e),e.children&&c(e.children)})}(i.concat(o,s)),a.forEach(function(e){e.context?t(e.context):r.push(e.node)})})}var i,r=[];return i=function(e){function t(e,i,r){var o="auto"===i.zIndex.zindex?0:Number(i.zIndex.zindex),s=e,a=i.zIndex.isPositioned,c=i.zIndex.isFloated,l={node:i},u=r;i.zIndex.ownStacking?(s=l.context={"!":[{node:i,children:[]}]},u=n):(a||c)&&(u=l.children=[]),0===o&&r?r.push(l):(e[o]||(e[o]=[]),e[o].push(l)),i.zIndex.children.forEach(function(e){t(s,e,u)})}var i={};return t(i,e),i}(e),t(i),r}function o(e){var t;if("string"==typeof i.renderer&&d.Renderer[e]!==n)t=d.Renderer[e](i);else{if("function"!=typeof e)throw Error("Unknown renderer");t=e(i)}if("function"!=typeof t)throw Error("Invalid renderer defined");return t}return o(i.renderer)(e,i,t,r(e.stack),d)},d.Util.Support=function(e,t){function i(){var e=new Image,i=t.createElement("canvas"),r=i.getContext===n?!1:i.getContext("2d");if(r===!1)return!1;i.width=i.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{r.drawImage(e,0,0),i.toDataURL()}catch(o){return!1}return d.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function r(){var e,n,i,r,o=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),i=e.getBoundingClientRect(),r=i.height,123===r&&(o=!0),t.body.removeChild(n))),o}return{rangeBounds:r(),svgRendering:e.svgRendering&&i()}},e.html2canvas=function(t,n){t=t.length?t:[t];var i,r,o={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return o=d.Util.Extend(n,o),d.logging=o.logging,o.complete=function(e){("function"!=typeof o.onpreloaded||o.onpreloaded(e)!==!1)&&(i=d.Parse(e,o),("function"!=typeof o.onparsed||o.onparsed(i)!==!1)&&(r=d.Renderer(i,o),"function"==typeof o.onrendered&&o.onrendered(r)))},e.setTimeout(function(){d.Preload(o)},0),{render:function(e,t){return d.Renderer(e,d.Util.Extend(t,o))},parse:function(e,t){return d.Parse(e,d.Util.Extend(t,o))},preload:function(e){return d.Preload(d.Util.Extend(e,o))},log:d.Util.log}},e.html2canvas.log=d.Util.log,e.html2canvas.Renderer={Canvas:n},d.Renderer.Canvas=function(e){function i(e,t){e.beginPath(),t.forEach(function(t){e[t.name].apply(e,t.arguments)}),e.closePath()}function r(e){if(-1===a.indexOf(e.arguments[0].src)){l.drawImage(e.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(t){return c=s.createElement("canvas"),l=c.getContext("2d"),!1}a.push(e.arguments[0].src)}return!0}function o(t,n){switch(n.type){case"variable":t[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(n.arguments[0].width>0&&n.arguments[0].height>0)try{t.fillStyle=t.createPattern(n.arguments[0],"repeat")}catch(o){u.log("html2canvas: Renderer: Error creating pattern",o.message)}break;case"drawShape":i(t,n.arguments);break;case"drawImage":n.arguments[8]>0&&n.arguments[7]>0&&(!e.taintTest||e.taintTest&&r(n))&&t.drawImage.apply(t,n.arguments);break;default:t[n.name].apply(t,n.arguments)}}}e=e||{};var s=t,a=[],c=t.createElement("canvas"),l=c.getContext("2d"),u=d.Util,p=e.canvas||s.createElement("canvas");return function(e,t,i,r,s){var a,c,l,d=p.getContext("2d"),f=e.stack;return p.width=p.style.width=t.width||f.ctx.width,p.height=p.style.height=t.height||f.ctx.height,l=d.fillStyle,
d.fillStyle=u.isTransparent(f.backgroundColor)&&t.background!==n?t.background:e.backgroundColor,d.fillRect(0,0,p.width,p.height),d.fillStyle=l,r.forEach(function(e){d.textBaseline="bottom",d.save(),e.transform.matrix&&(d.translate(e.transform.origin[0],e.transform.origin[1]),d.transform.apply(d,e.transform.matrix),d.translate(-e.transform.origin[0],-e.transform.origin[1])),e.clip&&(d.beginPath(),d.rect(e.clip.left,e.clip.top,e.clip.width,e.clip.height),d.clip()),e.ctx.storage&&e.ctx.storage.forEach(function(e){o(d,e)}),d.restore()}),u.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===t.elements.length&&"object"==typeof t.elements[0]&&"BODY"!==t.elements[0].nodeName?(c=s.Util.Bounds(t.elements[0]),a=i.createElement("canvas"),a.width=Math.ceil(c.width),a.height=Math.ceil(c.height),d=a.getContext("2d"),d.drawImage(p,c.left,c.top,c.width,c.height,0,0,c.width,c.height),p=null,a):p}}}(window,document),e.html2canvas=html2canvas}.apply(e,arguments)})}(this),n("platform/features/plot/src/services/ExportImageService",["html2canvas","saveAs"],function(e,t){function n(n,i,r,s,a,c,l){o.$q=n,o.$timeout=i,o.$log=r,o.EXPORT_IMAGE_TIMEOUT=s,o.html2canvas=a||e,o.saveAs=c||t,o.reader=l||new FileReader}function i(e,t){var n,i=o.$q.defer(),r=["png","jpg","jpeg"];if(-1===r.indexOf(t))return void o.$log.error("Invalid type requested. Try: ("+r.join(",")+")");n=o.$timeout(function(){i.reject("html2canvas timed out"),o.$log.warn("html2canvas timed out")},o.EXPORT_IMAGE_TIMEOUT);try{o.html2canvas(e,{onrendered:function(e){switch(t.toLowerCase()){case"png":e.toBlob(i.resolve,"image/png");break;default:case"jpg":case"jpeg":e.toBlob(i.resolve,"image/jpeg")}}})}catch(s){i.reject(s),o.$log.warn("html2canvas failed with error: "+s)}return i.promise["finally"](n.cancel),i.promise}function r(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),r=i.length,o=new Uint8Array(r),s=0;r>s;s++)o[s]=i.charCodeAt(s);e(new Blob([o],{type:t||"image/png"}))}})}var o=this;return n.prototype.exportJPG=function(e,t){return i(e,"jpeg").then(function(e){o.saveAs(e,t)})},n.prototype.exportPNG=function(e,t){return i(e,"png").then(function(e){o.saveAs(e,t)})},r(),n}),n("text!platform/features/plot/res/templates/plot.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="PlotController as plot"\n      class="abs holder holder-plot has-control-bar">\n    <div class="l-control-bar" ng-show="!plot.hideExportButtons">\n         <span class="l-btn-set">\n            <a class="s-button t-export labeled icon-download"\n               ng-click="plot.exportPNG()"\n               title="Export This View\'s Data as PNG">\n                PNG\n            </a>\n            <a class="s-button t-export labeled"\n               ng-click="plot.exportJPG()"\n               title="Export This View\'s Data as JPG">\n                JPG\n            </a>\n        </span>\n    </div>\n    <div class="l-view-section">\n        <div class="gl-plot"\n             ng-style="{ height: 100 / plot.getSubPlots().length + \'%\'}"\n             ng-repeat="subplot in plot.getSubPlots()">\n            <div class="gl-plot-legend">\n                <span class=\'plot-legend-item\'\n                        ng-repeat="telemetryObject in subplot.getTelemetryObjects()"\n                        ng-class="plot.getLegendClass(telemetryObject)">\n                    <span class=\'plot-color-swatch\'\n                          ng-style="{ \'background-color\': plot.getColor($index) }">\n                    </span>\n                    <span class=\'title-label\'>{{telemetryObject.getModel().name}}</span>\n                </span>\n            </div>\n\n            <div class="gl-plot-axis-area gl-plot-y">\n                <div class="gl-plot-label gl-plot-y-label">\n                    {{axes[1].active.name}}\n                </div>\n                <div ng-repeat="tick in subplot.getRangeTicks()"\n                     class="gl-plot-tick gl-plot-y-tick-label"\n                     ng-style="{ bottom: (100 * $index / (subplot.getRangeTicks().length - 1)) + \'%\' }">\n                    {{tick.label | reverse}}\n                </div>\n                <div class="gl-plot-y-options gl-plot-local-controls"\n                     ng-if="axes[1].options.length > 1">\n                    <div class=\'form-control shell select\'>\n                        <select class="form-control input shell"\n                                ng-model="axes[1].active"\n                                ng-options="option.name for option in axes[1].options">\n                        </select>\n                    </div>\n                </div>\n            </div>\n\n            <div class="gl-plot-wrapper-display-area-and-x-axis">\n                <mct-include key="\'time-of-interest\'"\n                             class="l-toi-holder show-val"\n                             ng-if="toiPerc"\n                             ng-class="{ \'pinned\': toiPinned, \'val-to-left\': toiPerc > 80 }"\n                             ng-style="{\'left\': toiPerc + \'%\'}"></mct-include>\n\n                <div class="gl-plot-coords"\n                     ng-if="subplot.isHovering() && subplot.getHoverCoordinates()">\n                    {{subplot.getHoverCoordinates()}}\n                </div>\n\n                <div class="gl-plot-display-area"\n                     ng-mouseenter="subplot.isHovering(true);"\n                     ng-mouseleave="subplot.isHovering(false)"\n                     ng-class="{ loading: plot.isRequestPending() }">\n\n                    <!-- Out-of-bounds data indicators -->\n                    <!-- ng-show is temporarily hard-coded in next element -->\n                    <div ng-show="false" class="l-oob-data l-oob-data-up"></div>\n                    <div ng-show="false" class="l-oob-data l-oob-data-dwn"></div>\n                    <div class="gl-plot-hash hash-v"\n                         ng-repeat="tick in subplot.getDomainTicks()"\n                         ng-style="{ left: (100 * $index / (subplot.getDomainTicks().length - 1)) + \'%\', height: \'100%\' }"\n                         ng-show="$index > 0 && $index < (subplot.getDomainTicks().length - 1)">\n                    </div>\n                    <div class="gl-plot-hash hash-h"\n                         ng-repeat="tick in subplot.getRangeTicks()"\n                         ng-style="{ bottom: (100 * $index / (subplot.getRangeTicks().length - 1)) + \'%\', width: \'100%\' }"\n                         ng-show="$index > 0 && $index < (subplot.getRangeTicks().length - 1)">\n                    </div>\n                    <mct-chart draw="subplot.getDrawingObject()"\n                               ng-if="subplot.getTelemetryObjects().length > 0"\n                               ng-mousemove="subplot.hover($event)"\n                               mct-drag="subplot.continueDrag($event)"\n                               mct-drag-down="subplot.startDrag($event)"\n                               mct-drag-up="subplot.endDrag($event); plot.update()">\n                    </mct-chart>\n                    <!-- TODO: Move into correct position; make part of group; infer from set of actions -->\n                    <div class="l-local-controls gl-plot-local-controls t-plot-display-controls"\n                         ng-if="$first">\n                        <a class="s-button icon-arrow-left"\n                           ng-click="plot.stepBackPanZoom()"\n                           ng-show="plot.isZoomed()"\n                           title="Restore previous pan/zoom">\n                        </a>\n                        <a class="s-button icon-arrows-out"\n                           ng-click="plot.unzoom()"\n                           ng-show="plot.isZoomed()"\n                           title="Reset pan/zoom">\n                        </a>\n                        <div class="menu-element s-menu-button menus-to-left {{plot.getMode().cssClass}}"\n                             ng-if="plot.getModeOptions().length > 1"\n                             ng-controller="ClickAwayController as toggle">\n                            <span class="l-click-area" ng-click="toggle.toggle()"></span>\n                            <span>{{plot.getMode().name}}</span>\n                            <div class="menu" ng-show="toggle.isActive()">\n                                <ul>\n                                    <li ng-repeat="option in plot.getModeOptions()"\n                                        ng-click="plot.setMode(option); toggle.setState(false)"\n                                        class="{{option.cssClass}}">\n                                        {{option.name}}\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div ng-if="$last" class="gl-plot-axis-area gl-plot-x">\n                    <div ng-repeat="tick in subplot.getDomainTicks()"\n                         class="gl-plot-tick gl-plot-x-tick-label"\n                         ng-show="$index > 0 && $index < (subplot.getDomainTicks().length - 1)"\n                         ng-style="{ left: (100 * $index / (subplot.getDomainTicks().length - 1)) + \'%\' }">\n                        {{tick.label | reverse}}\n                    </div>\n                    <div class="gl-plot-label gl-plot-x-label">\n                        {{axes[0].active.name}}\n                    </div>\n                    <div class="gl-plot-x-options gl-plot-local-controls"\n                         ng-if="axes[0].options.length > 1">\n                        <div class=\'form-control shell select\'>\n                            <select class="form-control input shell"\n                                    ng-model="axes[0].active"\n                                    ng-options="option.name for option in axes[0].options">\n                            </select>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</span>\n'}),n("text!platform/features/plot/res/templates/plot-options-browse.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="PlotOptionsController" class="flex-elem grows l-inspector-part">\n    <em class="t-inspector-part-header" title="Display properties for this object">Plot Options</em>\n    <mct-form\n            ng-model="configuration.plot.xAxis"\n            structure="xAxisForm"\n            name="xAxisFormState"\n            class="flex-elem l-flex-row no-margin">\n    </mct-form>\n    <mct-form\n            ng-model="configuration.plot.yAxis"\n            structure="yAxisForm"\n            name="yAxisFormState"\n            class="flex-elem l-flex-row no-margin">\n    </mct-form>\n    <div class="form">\n        <div class="section-header ng-binding ng-scope">\n            Plot Series\n        </div>\n        <ul class="first flex-elem grows vscroll">\n            <ul class="tree">\n                <li ng-repeat="child in children">\n                    <span ng-controller="ToggleController as toggle">\n                        <span ng-controller="TreeNodeController as treeNode">\n                            <span class="tree-item menus-to-left">\n                                <span\n                                    class=\'ui-symbol view-control flex-elem has-children\'\n                                    ng-class="{ expanded: toggle.isActive() }"\n                                    ng-click="toggle.toggle(); treeNode.trackExpansion()">\n                                </span>\n                                <mct-representation\n                                    class="rep-object-label"\n                                    key="\'label\'"\n                                    mct-object="child">\n                                </mct-representation>\n                            </span>\n                        </span>\n                        <mct-form\n                            ng-class="{hidden: !toggle.isActive()}"\n                            ng-model="configuration.plot.series[$index]"\n                            structure="plotSeriesForm"\n                            name="plotOptionsState"\n                            class="flex-elem l-flex-row">\n                        </mct-form>\n                    </span>\n                </li>\n            </ul>\n        </ul>\n    </div>\n</div>'}),n("platform/features/plot/bundle",["./src/MCTChart","./src/PlotController","./src/policies/PlotViewPolicy","./src/PlotOptionsController","./src/services/ExportImageService","text!./res/templates/plot.html","text!./res/templates/plot-options-browse.html","legacyRegistry"],function(e,t,n,i,r,o,s,a){a.register("platform/features/plot",{name:"Plot view for telemetry",extensions:{views:[{name:"Plot",key:"plot",cssClass:"icon-sine",template:o,needs:["telemetry"],priority:"preferred",delegation:!0}],directives:[{key:"mctChart",implementation:e,depends:["$interval","$log"]}],controllers:[{key:"PlotController",implementation:t,depends:["$scope","$element","exportImageService","telemetryFormatter","telemetryHandler","throttle","PLOT_FIXED_DURATION","openmct"]},{key:"PlotOptionsController",implementation:i,depends:["$scope"]}],services:[{key:"exportImageService",implementation:r,depends:["$q","$timeout","$log","EXPORT_IMAGE_TIMEOUT"]}],constants:[{key:"PLOT_FIXED_DURATION",value:9e5,priority:"fallback",comment:"Fifteen minutes."},{key:"EXPORT_IMAGE_TIMEOUT",value:500,priority:"fallback"}],policies:[{category:"view",implementation:n}],representations:[{key:"plot-options-browse",template:s}],licenses:[{name:"FileSaver.js",version:"0.0.2",author:"Eli Grey",description:"File download initiator (for file exports)",website:"https://github.com/eligrey/FileSaver.js/",copyright:"Copyright  2015 Eli Grey.",license:"license-mit",link:"https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md"},{name:"html2canvas",version:"0.4.1",author:"Niklas von Hertzen",description:"JavaScript HTML renderer",website:"https://github.com/niklasvh/html2canvas",copyright:"Copyright  2012 Niklas von Hertzen.",license:"license-mit",link:"https://github.com/niklasvh/html2canvas/blob/master/LICENSE"}]}})}),n("text!platform/features/static-markup/res/markup.html",[],function(){return'<h1>Static Markup Sandbox</h1>\n\n<h2>Plot limits</h2>\n<div ng-init="limits=[\n				{type: \'upr\', severity: \'red\', top: 0, bottom: 90},\n				{type: \'upr\', severity: \'yellow\', top: 10, bottom: 80},\n				{type: \'lwr\', severity: \'yellow\', top: 70, bottom: 20},\n				{type: \'lwr\', severity: \'red\', top: 80, bottom: 0}\n	        ]"></div>\n<div style="width: 1000px; height: 500px">\n    <div class="gl-plot" style="height: 100%;">\n        <div class="gl-plot-display-area">\n	        <div\n		        ng-repeat="limit in limits"\n		        ng-show="1"\n		        class="t-limit l-limit s-limit-{{limit.type}}-{{limit.severity}}"\n		        style="top: {{limit.top}}%; bottom: {{limit.bottom}}%"\n		        ></div>\n        </div>\n    </div>\n</div>\n\n<h2>Animation</h2>\n<div class="pulse" style="background: #cc0000; color: #fff; padding: 10px;">This should pulse</div>'}),n("platform/features/static-markup/bundle",["text!./res/markup.html","legacyRegistry"],function(e,t){t.register("platform/features/static-markup",{extensions:{types:[{key:"static.markup",name:"Static Markup",cssClass:"icon-pencil",description:"Static markup sandbox",features:["creation"]}],views:[{template:e,name:"Static Markup",type:"static.markup",key:"static.markup"}]}})}),n("platform/features/table/src/controllers/MCTTableController",["zepto","lodash"],function(e,t){function n(n,i,r,o,s,a){function c(e){"undefined"==typeof e.enableFilter&&(e.enableFilter=!0,e.filters={}),"undefined"==typeof e.enableSort&&(e.enableSort=!0,e.sortColumn=void 0,e.sortDirection=void 0),void 0!==e.sortColumn&&(e.sortDirection="asc")}var l=this;this.$scope=n,this.element=e(r[0]),this.$window=i,this.maxDisplayRows=100,this.scrollable=this.element.find(".l-view-section.scrolling").first(),this.resultsHeader=this.element.find(".mct-table>thead").first(),this.sizingTableBody=this.element.find(".sizing-table>tbody").first(),this.$scope.sizingRow={},this.conductor=a.conductor,this.toiFormatter=void 0,this.formatService=s,this.callbacks={},t.bindAll(this,["addRows","binarySearch","buildLargestRow","changeBounds","changeTimeOfInterest","changeTimeSystem","destroyConductorListeners","digest","filterAndSort","filterRows","firstVisible","insertSorted","lastVisible","onRowClick","onScroll","removeRows","resize","scrollToBottom","scrollToRow","setElementSizes","setHeaders","setRows","setTimeOfInterestRow","setVisibleRows","sortComparator","sortRows"]),this.scrollable.on("scroll",this.onScroll),n.visibleRows=[],c(n),n.exportAsCSV=function(){var e=n.displayHeaders;o.exportCSV(n.displayRows.map(function(t){return e.reduce(function(e,n){return e[n]=t[n].text,e},{})}),{headers:e})},n.toggleSort=function(e){n.enableSort&&(n.sortColumn!==e?(n.sortColumn=e,n.sortDirection="asc"):"asc"===n.sortDirection?n.sortDirection="desc":"desc"===n.sortDirection?(n.sortColumn=void 0,n.sortDirection=void 0):void 0!==n.sortColumn&&void 0===n.sortDirection&&(n.sortDirection="asc"),l.setRows(n.rows),l.setTimeOfInterestRow(l.conductor.timeOfInterest()))},n.$watchCollection("filters",function(){l.setRows(n.rows)}),n.$watch("headers",function(e,t){e!==t&&this.setHeaders(e)}.bind(this)),n.$watch("rows",this.setRows),n.$on("add:rows",this.addRows),n.$on("remove:rows",this.removeRows),n.$watch("defaultSort",function(e,t){e!==t&&n.toggleSort(e)}),n.resize=this.setElementSizes,n.$watch("timeColumns",function(e){e&&(this.destroyConductorListeners(),this.conductor.on("timeSystem",this.changeTimeSystem),this.conductor.on("timeOfInterest",this.changeTimeOfInterest),this.conductor.on("bounds",this.changeBounds),this.conductor.timeSystem()&&this.changeTimeSystem(this.conductor.timeSystem()))}.bind(this)),n.$on("$destroy",function(){this.scrollable.off("scroll",this.onScroll),this.destroyConductorListeners(),delete this.$scope}.bind(this))}return n.prototype.destroyConductorListeners=function(){this.conductor.off("timeSystem",this.changeTimeSystem),this.conductor.off("timeOfInterest",this.changeTimeOfInterest),this.conductor.off("bounds",this.changeBounds)},n.prototype.changeTimeSystem=function(){var e=this.conductor.timeSystem().formats()[0];this.toiFormatter=this.formatService.getFormat(e)},n.prototype.scrollToBottom=function(){this.scrollable[0].scrollTop=this.scrollable[0].scrollHeight},n.prototype.addRows=function(e,t){if(this.filterRows(t).length>0){t.forEach(this.insertSorted.bind(this,this.$scope.displayRows)),this.resize([this.$scope.sizingRow].concat(t)).then(this.setVisibleRows).then(function(){this.$scope.autoScroll&&this.scrollToBottom()}.bind(this));var n=this.conductor.timeOfInterest();-1!==n&&this.setTimeOfInterestRow(n)}},n.prototype.removeRows=function(e,t){var n;t.forEach(function(e){n=this.$scope.displayRows.indexOf(e),-1!==n&&this.$scope.displayRows.splice(n,1)},this),this.$scope.sizingRow=this.buildLargestRow([this.$scope.sizingRow].concat(t)),this.setElementSizes(),this.setVisibleRows().then(function(){this.$scope.autoScroll&&this.scrollToBottom()}.bind(this))},n.prototype.onScroll=function(e){this.$window.requestAnimationFrame(function(){this.setVisibleRows(),this.digest(),this.scrollable[0].scrollTop<this.scrollable[0].scrollHeight-this.scrollable[0].offsetHeight-20?this.$scope.autoScroll=!1:this.$scope.autoScroll=!0,this.scrolling=!1}.bind(this))},n.prototype.firstVisible=function(){var e,t=this.scrollable[0],n=t.scrollTop;return e=n<this.$scope.headerHeight?0:Math.floor((n-this.$scope.headerHeight)/this.$scope.rowHeight)},n.prototype.lastVisible=function(){var e,t=this.scrollable[0],n=t.scrollTop,i=n+t.offsetHeight;return e=Math.ceil((i-this.$scope.headerHeight)/this.$scope.rowHeight)},n.prototype.setVisibleRows=function(){var e,t,n,i,r,o,s=this;if(this.$scope.displayRows.length<this.maxDisplayRows)r=0,o=this.$scope.displayRows.length;else if(n=this.firstVisible(),i=this.lastVisible(),e=i-n,t=this.maxDisplayRows-e,r=n-Math.floor(t/2),o=i+Math.ceil(t/2),0>r?(r=0,o=Math.min(this.maxDisplayRows,this.$scope.displayRows.length)):o>=this.$scope.displayRows.length&&(o=this.$scope.displayRows.length,r=o-this.maxDisplayRows+1),this.$scope.visibleRows[0]&&this.$scope.visibleRows[0].rowIndex===r&&this.$scope.visibleRows[this.$scope.visibleRows.length-1].rowIndex===o)return this.digest();return this.$scope.visibleRows=this.$scope.displayRows.slice(r,o).map(function(e,t){return{rowIndex:r+t,offsetY:(r+t)*s.$scope.rowHeight+s.$scope.headerHeight,contents:e}}),this.digest()},n.prototype.setHeaders=function(e){e&&(this.$scope.displayHeaders=e,this.$scope.enableFilter&&(this.$scope.filters={}),this.$scope.enableSort&&-1===e.indexOf(this.$scope.sortColumn)&&(this.$scope.sortColumn=void 0,this.$scope.sortDirection=void 0),this.setRows(this.$scope.rows))},n.prototype.setElementSizes=function(){var e,t=this.resultsHeader,n=this.sizingTableBody,i=n.find("tr"),r=i.find("td"),o=t.prop("offsetHeight"),s=i.prop("offsetHeight"),a=0,c=o+s*(this.$scope.displayRows?this.$scope.displayRows.length-1:0);for(this.$scope.columnWidths=[];r.length;)e=r.prop("offsetWidth"),this.$scope.columnWidths.push(r.prop("offsetWidth")),a+=e,r=r.next();this.$scope.headerHeight=o,this.$scope.rowHeight=s,this.$scope.totalHeight=c,a>0?this.$scope.totalWidth=a+"px":this.$scope.totalWidth="none"},n.prototype.binarySearch=function(e,t,n,i){var r=Math.floor((i-n)/2)+n;if(n>i)return n;switch(this.sortComparator(t,e[r][this.$scope.sortColumn].text)){case-1:return this.binarySearch(e,t,n,r-1);case 0:return r;case 1:return this.binarySearch(e,t,r+1,i)}},n.prototype.insertSorted=function(e,t){var n=-1;n=this.$scope.sortColumn&&this.$scope.sortDirection?this.binarySearch(e,t[this.$scope.sortColumn].text,0,e.length-1):e.length,-1===n?e.unshift(t):n===e.length?e.push(t):e.splice(n,0,t)},n.prototype.sortComparator=function(e,t){function n(e){var t=isNaN(Number(e))||isNaN(parseFloat(e))?e:Number(e);return t}var i,r,o,s=0;return r=n(e),o=n(t),"number"==typeof r&&"number"==typeof o&&(e=r,t=o),"string"==typeof e&&"string"==typeof t&&(e=e.toLowerCase(),t=t.toLowerCase()),t>e&&(s=-1),e>t&&(s=1),"asc"===this.$scope.sortDirection?i=1:"desc"===this.$scope.sortDirection&&(i=-1),s*i},n.prototype.sortRows=function(e){var t=this,n=this.$scope.sortColumn;return this.$scope.sortColumn&&this.$scope.sortDirection?e.sort(function(e,i){return t.sortComparator(e[n].text,i[n].text)}):e},n.prototype.buildLargestRow=function(e){var t=e.reduce(function(e,t){return Object.keys(t).forEach(function(n){var i,r,o,s;t[n]&&(i=t[n].text,r=i&&i.length?i.length:i,o=e[n]?e[n].text:"",s=o.length,r>s&&(e[n]=JSON.parse(JSON.stringify(t[n]))))}),e},JSON.parse(JSON.stringify(e[0]||{})));return t},n.prototype.digest=function(){var e=this.$scope,t=this,n=this.$window.requestAnimationFrame,i=this.digestPromise;return i||(t.digestPromise=i=new Promise(function(i){n(function(){e.$digest(),t.digestPromise=void 0,i()})})),i},n.prototype.resize=function(e){return this.$scope.sizingRow=this.buildLargestRow(e),this.digest().then(this.setElementSizes)},n.prototype.filterAndSort=function(e){var t=e;return this.$scope.enableFilter&&(t=this.filterRows(t)),this.$scope.enableSort&&(t=this.sortRows(t.slice(0))),t},n.prototype.setRows=function(e){return this.$scope.displayHeaders&&e?(this.$scope.displayRows=this.filterAndSort(e||[]),this.resize(e).then(function(e){return this.setVisibleRows(e)}.bind(this)).then(function(){var e=this.conductor.timeOfInterest();e&&(this.setTimeOfInterestRow(e),this.scrollToRow(this.$scope.toiRowIndex))}.bind(this))):void 0},n.prototype.filterRows=function(e){function t(e,t){return Object.keys(e).every(function(n){if(!t[n])return!1;var i=String(t[n].text).toLowerCase();return-1!==i.indexOf(e[n])})}var n={},i=this;return Object.keys(this.$scope.filters).length?(Object.keys(this.$scope.filters).forEach(function(e){i.$scope.filters[e]&&(n[e]=i.$scope.filters[e].toLowerCase())}),e.filter(t.bind(null,n))):e},n.prototype.scrollToRow=function(e){var t=e>this.firstVisible()&&e<this.lastVisible();if(!t){var n=e*this.$scope.rowHeight+this.$scope.headerHeight-this.scrollable[0].offsetHeight/2;this.scrollable[0].scrollTop=n,this.setVisibleRows()}},n.prototype.setTimeOfInterestRow=function(e){var t=this.$scope.timeColumns&&-1!==this.$scope.timeColumns.indexOf(this.$scope.sortColumn);if(this.$scope.toiRowIndex=-1,e&&t){var n=this.toiFormatter.format(e),i=this.binarySearch(this.$scope.displayRows,n,0,this.$scope.displayRows.length-1);i>0&&i<this.$scope.displayRows.length&&(this.$scope.toiRowIndex=i)}},n.prototype.changeTimeOfInterest=function(e){this.setTimeOfInterestRow(e),this.scrollToRow(this.$scope.toiRowIndex)},n.prototype.changeBounds=function(e){this.setTimeOfInterestRow(this.conductor.timeOfInterest()),-1!==this.$scope.toiRowIndex&&this.scrollToRow(this.$scope.toiRowIndex)},n.prototype.onRowClick=function(e,t){if(-1!==this.$scope.timeColumns.indexOf(this.$scope.sortColumn)){var n=this.$scope.displayRows[t][this.$scope.sortColumn].text;n&&this.toiFormatter.validate(n)&&e.altKey&&this.conductor.timeOfInterest(this.toiFormatter.parse(n))}},n}),n("text!platform/features/table/res/templates/mct-table.html",[],function(){return'<div class="l-control-bar">\n    <a class="s-button t-export icon-download labeled"\n       ng-click="exportAsCSV()"\n       title="Export This View\'s Data">\n        Export\n    </a>\n</div>\n<div class="l-view-section scrolling" style="overflow: auto;" mct-resize="resize()">\n    <table class="sizing-table">\n        <tbody>\n            <tr>\n                <td ng-repeat="header in displayHeaders">{{header}}</td>\n            </tr>\n            <tr><td ng-repeat="header in displayHeaders" >\n                {{sizingRow[header].text}}\n            </td></tr>\n        </tbody>\n    </table>\n    <table class="filterable mct-table"\n           ng-style="{\n            height: totalHeight + \'px\',\n            \'max-width\': totalWidth\n            }">\n        <thead>\n            <tr>\n                <th ng-repeat="header in displayHeaders"\n                    ng-style="{\n                        width: columnWidths[$index] + \'px\',\n                        \'max-width\': columnWidths[$index] + \'px\',\n                    }"\n                    ng-class="[\n                        enableSort ? \'sortable\' : \'\',\n                        sortColumn === header ? \'sort\' : \'\',\n                        sortDirection || \'\'\n                    ].join(\' \')"\n                    ng-click="toggleSort(header)">\n                    {{ header }}\n                </th>\n            </tr>\n            <tr ng-if="enableFilter" class="s-filters">\n                <th ng-repeat="header in displayHeaders"\n                    ng-style="{\n                        width: columnWidths[$index] + \'px\',\n                        \'max-width\': columnWidths[$index] + \'px\',\n                    }">\n                    <input type="text"\n                           ng-model="filters[header]"/>\n                </th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-repeat-start="visibleRow in visibleRows track by $index"\n                ng-if="visibleRow.rowIndex === toiRowIndex"\n                ng-style="{ top: visibleRow.offsetY + \'px\' }"\n                class="l-toi-tablerow">\n                <td colspan="999">\n                    <mct-include key="\'time-of-interest\'"\n                                 class="l-toi-holder pinned"></mct-include>\n                </td>\n            </tr>\n            <tr ng-repeat-end\n                ng-style="{ top: visibleRow.offsetY + \'px\' }"\n                ng-click="table.onRowClick($event, visibleRow.rowIndex)">\n                <td ng-repeat="header in displayHeaders"\n                    ng-style="{\n                        width: columnWidths[$index] + \'px\',\n                        \'max-width\': columnWidths[$index] + \'px\',\n                    }"\n                    class="{{visibleRow.contents[header].cssClass}}">\n                    {{ visibleRow.contents[header].text }}\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n'}),n("platform/features/table/src/directives/MCTTable",["../controllers/MCTTableController","text!../../res/templates/mct-table.html"],function(e,t){function n(){return{restrict:"E",template:t,controller:["$scope","$window","$element","exportService","formatService","openmct",e],controllerAs:"table",scope:{headers:"=",rows:"=",formatCell:"=?",enableFilter:"=?",enableSort:"=?",autoScroll:"=?",timeColumns:"=?",defaultSort:"=?"}}}return n}),n("platform/features/table/src/TableConfiguration",[],function(){function e(e,t){this.domainObject=e,this.columns=[],this.openmct=t}function t(e,t){var n=Object.keys(e),i=Object.keys(t);return n.length!==i.length||n.some(function(n){return e[n]!==t[n]})}return e.prototype.populateColumns=function(e){var t=this,n=this.openmct.telemetry;return this.columns=[],e&&e.forEach(function(e){var i=n.getValueFormatter(e);t.columns.push({getKey:function(){return e.key},getTitle:function(){return e.name},getValue:function(t,n){var r=!(!e.hints.y&&!e.hints.range),o=r&&n&&n.evaluate(t,e),s={text:i?i.format(t[e.key]):t[e.key],value:t[e.key]};return o&&(s.cssClass=o.cssClass),s}})}),this},e.prototype.getHeaders=function(){return this.columns.map(function(e,t){return e.getTitle()||"Column "+(t+1)})},e.prototype.getRowValues=function(e,t){return this.columns.reduce(function(n,i,r){var o=i.getTitle()||"Column "+(r+1),s=i.getValue(t,e);return void 0!==s&&void 0===s.text&&(s.text=""),
(void 0===n[o]||void 0===n[o].text||0===n[o].text.length)&&(n[o]=s),n},{})},e.prototype.defaultColumnConfiguration=function(){return((this.domainObject.getModel().configuration||{}).table||{}).columns||{}},e.prototype.saveColumnConfiguration=function(e){this.domainObject.useCapability("mutation",function(t){t.configuration=t.configuration||{},t.configuration.table=t.configuration.table||{},t.configuration.table.columns=e})},e.prototype.buildColumnConfiguration=function(){var e={},n=this.defaultColumnConfiguration();return this.getHeaders().forEach(function(t){e[t]="undefined"==typeof n[t]?!0:n[t]}),this.domainObject.hasCapability("editor")&&this.domainObject.getCapability("editor").isEditContextRoot()&&t(e,n)&&this.saveColumnConfiguration(e),e},e}),n("platform/features/table/src/TelemetryCollection",["lodash","EventEmitter"],function(e,t){function n(){t.call(this,arguments),this.telemetry=[],this.highBuffer=[],this.sortField=void 0,this.lastBounds={},e.bindAll(this,["addOne","iteratee"])}return n.prototype=Object.create(t.prototype),n.prototype.iteratee=function(t){return e.get(t,this.sortField)},n.prototype.bounds=function(t){var n,i,r,o=this.lastBounds.start!==t.start,s=this.lastBounds.end!==t.end,a=0,c=0;void 0!==this.sortField&&(o&&(r=e.set({},this.sortField,t.start),a=e.sortedIndex(this.telemetry,r,this.sortField),n=this.telemetry.splice(0,a)),s&&(r=e.set({},this.sortField,t.end),c=e.sortedLastIndex(this.highBuffer,r,this.sortField),i=this.highBuffer.splice(0,c),this.telemetry=this.telemetry.concat(i)),n&&n.length>0&&this.emit("discarded",n),i&&i.length>0&&this.emit("added",i),this.lastBounds=t)},n.prototype.inBounds=function(t){var n=!this.lastBounds||void 0===this.lastBounds.start&&void 0===this.lastBounds.end,i=e.get(t,this.sortField)>=this.lastBounds.start&&e.get(t,this.sortField)<=this.lastBounds.end;return n||i},n.prototype.addOne=function(t){var n,i,r,o=!1,s=this.lastBounds&&void 0!==this.lastBounds.start&&void 0!==this.lastBounds.end;if(void 0===this.sortField)return this.telemetry.push(t),!0;if(s?(r=e.get(t,this.sortField)>this.lastBounds.end,i=e.get(t,this.sortField)<this.lastBounds.start,r||i?r&&(n=this.highBuffer):n=this.telemetry):n=this.telemetry,!i){var a=e.sortedIndex(n,t,this.sortField);if(a!==n.length){var c=e.sortedLastIndex(n,t,this.sortField),l=n.slice(a,c+1);o=e.findIndex(l,e.isEqual.bind(void 0,t))>-1}if(!o)return n.splice(a,0,t),n===this.telemetry}return!1},n.prototype.add=function(e){var t=e.filter(this.addOne);this.emit("added",t)},n.prototype.clear=function(){this.telemetry=[]},n.prototype.sort=function(t){this.sortField=t,void 0!==t&&(this.telemetry=e.sortBy(this.telemetry,this.iteratee))},n}),n("platform/features/table/src/controllers/TelemetryTableController",["../TableConfiguration","../../../../../src/api/objects/object-utils","../TelemetryCollection","lodash"],function(e,t,n,i){function r(r,o,s){this.$scope=r,this.$timeout=o,this.openmct=s,this.batchSize=1e3,this.columns={},this.unobserveObject=void 0,this.subscriptions=[],this.timeColumns=[],r.rows=[],this.table=new e(r.domainObject,s),this.lastBounds=this.openmct.conductor.bounds(),this.lastRequestTime=0,this.telemetry=new n,this.newObject=t.toNewFormat(r.domainObject.getModel(),r.domainObject.getId()),i.bindAll(this,["destroy","sortByTimeSystem","loadColumns","getHistoricalData","subscribeToNewData","changeBounds","setScroll","addRowsToTable","removeRowsFromTable"]),r.$watch("domainObject",function(){this.getData(),this.registerChangeListeners()}.bind(this)),this.setScroll(this.openmct.conductor.follow()),this.$scope.$on("$destroy",this.destroy)}return r.prototype.setScroll=function(e){this.$scope.autoScroll=e},r.prototype.sortByTimeSystem=function(e){var t,n=this.$scope;n.defaultSort=void 0,e&&(this.table.columns.forEach(function(n){n.getKey()===e.metadata.key&&(t=n)}),t&&(n.defaultSort=t.getTitle(),this.telemetry.sort(t.getTitle()+".value")))},r.prototype.registerChangeListeners=function(){this.unobserveObject&&this.unobserveObject(),this.unobserveObject=this.openmct.objects.observe(this.newObject,"*",function(e){this.newObject=e,this.getData()}.bind(this)),this.openmct.conductor.on("timeSystem",this.sortByTimeSystem),this.openmct.conductor.on("bounds",this.changeBounds),this.openmct.conductor.on("follow",this.setScroll),this.telemetry.on("added",this.addRowsToTable),this.telemetry.on("discarded",this.removeRowsFromTable)},r.prototype.addRowsToTable=function(e){this.$scope.$broadcast("add:rows",e)},r.prototype.removeRowsFromTable=function(e){this.$scope.$broadcast("remove:rows",e)},r.prototype.changeBounds=function(e){var t=this.openmct.conductor.follow(),n=t&&e.start!==this.lastBounds.start&&e.end!==this.lastBounds.end;n?this.telemetry.bounds(e):this.getData(),this.lastBounds=e},r.prototype.destroy=function(){this.openmct.conductor.off("timeSystem",this.sortByTimeSystem),this.openmct.conductor.off("bounds",this.changeBounds),this.openmct.conductor.off("follow",this.setScroll),this.subscriptions.forEach(function(e){e()}),this.unobserveObject&&this.unobserveObject(),this.subscriptions=[],this.timeoutHandle&&this.$timeout.cancel(this.timeoutHandle),this.$scope=null,this.table=null},r.prototype.loadColumns=function(e){var t=this.openmct.telemetry;if(this.$scope.headers=[],e.length>0){var n=e.map(t.getMetadata.bind(t)),i=t.commonValuesForHints(n,[]);this.table.populateColumns(i);var r=t.commonValuesForHints(n,["x"]);this.timeColumns=r.map(function(e){return e.name}),this.filterColumns(),this.telemetry.sort(void 0);var o=this.openmct.conductor.timeSystem();o&&this.sortByTimeSystem(o)}return e},r.prototype.getHistoricalData=function(e){var t=this,n=this.openmct,i=n.conductor.bounds(),r=this.$scope,o=[],s=0,a=this.lastRequestTime=Date.now(),c=this.telemetry,l=new Promise(function(l,u){function d(){c.add(o),r.rows=c.telemetry,r.loading=!1,l(r.rows)}function p(n,i,r){i>=n.length?(s++,s===e.length&&d()):(o=o.concat(n.slice(i,i+t.batchSize).map(t.table.getRowValues.bind(t.table,r))),t.timeoutHandle=t.$timeout(function(){p(n,i+t.batchSize,r)}))}function f(e,i){if(a===t.lastRequestTime){var r=n.telemetry.limitEvaluator(e);p(i,0,r)}else l(o)}function h(e){return n.telemetry.request(e,{start:i.start,end:i.end}).then(f.bind(void 0,e))["catch"](u)}this.$timeout.cancel(this.timeoutHandle),e.length>0?e.forEach(h):(r.loading=!1,l([]))}.bind(this));return l},r.prototype.subscribeToNewData=function(e){function t(e,t){n=i.limitEvaluator(e),s=r.add([c.getRowValues(n,t)]),a.rows.length>o&&(a.$broadcast("remove:rows",a.rows[0]),a.rows.shift()),!a.loading&&s&&a.$broadcast("add:row",a.rows.length-1)}var n,i=this.openmct.telemetry,r=this.telemetry,o=Number.MAX_VALUE,s=!1,a=this.$scope,c=this.table;return this.subscriptions.forEach(function(e){e()}),this.subscriptions=[],e.forEach(function(e){this.subscriptions.push(i.subscribe(e,t.bind(this,e),{}))}.bind(this)),e},r.prototype.getData=function(){function e(e){o.loading=!1,console.error(e.stack)}function t(e){return e.filter(i.canProvideTelemetry.bind(i))}function n(){var e=[s],t=r.get(s);return t?t.load().then(function(t){return e.concat(t)}):Promise.resolve(e)}var i=this.openmct.telemetry,r=this.openmct.composition,o=this.$scope,s=this.newObject;return this.telemetry.clear(),this.telemetry.bounds(this.openmct.conductor.bounds()),this.$scope.loading=!0,o.rows=[],n().then(t).then(this.loadColumns).then(this.subscribeToNewData).then(this.getHistoricalData)["catch"](e)},r.prototype.filterColumns=function(){var e=this.table.buildColumnConfiguration();this.$scope.headers=Object.keys(e).filter(function(t){return e[t]})},r}),n("platform/features/table/src/controllers/TableOptionsController",[],function(){function e(e){function t(){n.listeners.forEach(function(e){e()})}var n=this;this.$scope=e,this.domainObject=e.domainObject,this.listeners=[],e.columnsForm={},e.$watch("domainObject",function(e){t(),n.populateForm(e.getModel()),n.listeners.push(n.domainObject.getCapability("mutation").listen(function(e){n.populateForm(e)}))}),e.$watchCollection("configuration.table.columns",function(e,t){e!==t&&(n.domainObject.useCapability("mutation",function(t){t.configuration.table.columns=e}),n.domainObject.getCapability("persistence").persist())}),e.$on("$destroy",t)}return e.prototype.populateForm=function(e){var t=((e.configuration||{}).table||{}).columns||{},n=[];this.$scope.columnsForm={name:"Columns",sections:[{name:"Columns",rows:n}]},Object.keys(t).forEach(function(e){n.push({name:e,control:"checkbox",key:e})}),this.$scope.configuration=JSON.parse(JSON.stringify(e.configuration||{}))},e}),n("text!platform/features/table/res/templates/table-options-edit.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div ng-controller="TableOptionsController" class="l-controls-first flex-elem grows l-inspector-part">\n    <em class="t-inspector-part-header" title="Display properties for this object">Table Options</em>\n    <mct-form\n            ng-model="configuration.table.columns"\n            structure="columnsForm"\n            name="columnsFormState"\n            class="flex-elem l-flex-row no-margin">\n    </mct-form>\n</div>'}),n("text!platform/features/table/res/templates/telemetry-table.html",[],function(){return'<div ng-controller="TelemetryTableController as tableController"\n     ng-class="{\'loading\': loading}">\n    <mct-table\n        headers="headers"\n        rows="rows"\n        time-columns="tableController.timeColumns"\n        format-cell="formatCell"\n        enableFilter="true"\n        enableSort="true"\n        auto-scroll="autoScroll"\n        default-sort="defaultSort"\n        class="tabular-holder has-control-bar">\n    </mct-table>\n</div>'}),n("platform/features/table/bundle",["./src/directives/MCTTable","./src/controllers/TelemetryTableController","./src/controllers/TableOptionsController","../../commonUI/regions/src/Region","../../commonUI/browse/src/InspectorRegion","text!./res/templates/table-options-edit.html","text!./res/templates/telemetry-table.html","legacyRegistry"],function(e,t,n,i,r,o,s,a){var c=new r,l=new i({name:"table-options",title:"Table Options",modes:["edit"],content:{key:"table-options-edit"}});c.addRegion(l),a.register("platform/features/table",{extensions:{types:[{key:"table",name:"Telemetry Table",cssClass:"icon-tabular-realtime",description:"A table of values over a given time period. The table will be automatically updated with new values as they become available",priority:861,features:"creation",delegates:["telemetry"],inspector:c,contains:[{has:"telemetry"}],model:{composition:[]},views:["table"]}],controllers:[{key:"TelemetryTableController",implementation:t,depends:["$scope","$timeout","openmct"]},{key:"TableOptionsController",implementation:n,depends:["$scope"]}],views:[{name:"Telemetry Table",key:"table",cssClass:"icon-tabular-realtime",template:s,needs:["telemetry"],delegation:!0,editable:!1}],directives:[{key:"mctTable",implementation:e,depends:["$timeout"]}],representations:[{key:"table-options-edit",template:o}],stylesheets:[{stylesheetUrl:"css/table.css",priority:"mandatory"}]}})}),n("platform/features/timeline/src/actions/TimelineTraverser",[],function(){function e(e){this.domainObject=e}return e.prototype.buildObjectList=function(){function e(i){function r(){return i.useCapability("composition").then(function(t){return Promise.all(t.map(e))})}function o(){var t=i.getCapability("relationship");t.getRelatedObjects("modes").then(function(t){return Promise.all(t.map(e))})}var s=i.getId(),a=[];return t[s]||(t[s]=!0,n.push(i),i.hasCapability("composition")&&a.push(r()),i.hasCapability("relationship")&&a.push(o())),Promise.all(a)}var t={},n=[];return e(this.domainObject).then(function(){return n})},e}),n("platform/features/timeline/src/actions/IdColumn",[],function(){function e(e){this.idMap=e}return e.prototype.name=function(){return"Index"},e.prototype.value=function(e){return this.idMap[e.getId()]},e}),n("platform/features/timeline/src/actions/ModeColumn",[],function(){function e(e,t){this.index=e,this.idMap=t}return e.prototype.name=function(){return"Activity Mode "+(this.index+1)},e.prototype.value=function(e){var t=e.getModel(),n=(t.relationships||{}).modes||[];return n.length>this.index?this.idMap[n[this.index]]:""},e}),n("platform/features/timeline/src/actions/CompositionColumn",[],function(){function e(e,t){this.index=e,this.idMap=t}return e.prototype.name=function(){return"Child "+(this.index+1)},e.prototype.value=function(e){var t=e.getModel(),n=t.composition||[];return n.length>this.index?this.idMap[n[this.index]]:""},e}),n("platform/features/timeline/src/actions/MetadataColumn",[],function(){function e(e){this.propertyName=e}return e.prototype.name=function(){return this.propertyName},e.prototype.value=function(e){var t=e.useCapability("metadata"),n=this.propertyName;return t.reduce(function(e,t){return t.name===n?t.value:e},"")},e}),n("platform/features/timeline/src/TimelineFormatter",[],function(){function e(){function e(e,t){for(var n=e.toString(10);n.length<t;)n="0"+n;return n}function o(o){var s=Math.floor(o/r),a=Math.floor(o/i)%24,c=Math.floor(o/n)%60,l=Math.floor(o/t)%60,u=Math.floor(o)%1e3;return e(s,3)+" "+e(a,2)+":"+e(c,2)+":"+e(l,2)+"."+e(u,3)}return{format:o}}var t=1e3,n=60*t,i=60*n,r=24*i;return e}),n("platform/features/timeline/src/actions/TimespanColumn",["../TimelineFormatter"],function(e){function t(e){this.isStart=e}var n=new e;return t.prototype.name=function(){return this.isStart?"Start":"End"},t.prototype.value=function(e){var t=this.isStart;return e.hasCapability("timespan")?e.useCapability("timespan").then(function(e){return n.format(t?e.getStart():e.getEnd())}):""},t}),n("platform/features/timeline/src/actions/UtilizationColumn",[],function(){function e(e){this.resource=e}return e.prototype.name=function(){var e={Kbps:"Kb",watts:"watt-seconds"}[this.resource.units]||"unknown units";return this.resource.name+" ("+e+")"},e.prototype.value=function(e){function t(e){var t=(e.end-e.start)/1e3;return t*e.value}function n(e){return e=e.filter(function(e){return e.key===i.key}),0===e.length?"":e.map(t).reduce(function(e,t){return e+t},0)}var i=this.resource;return e.hasCapability("utilization")?e.getCapability("utilization").internal().then(n):""},e}),n("platform/features/timeline/src/actions/TimelineColumnizer",["./IdColumn","./ModeColumn","./CompositionColumn","./MetadataColumn","./TimespanColumn","./UtilizationColumn"],function(e,t,n,i,r,o){function s(s,a){function c(e){var t=e.name;f[t]||(f[t]=!0,h.push(new i(t)))}var l,u,d=0,p=0,f={},h=[],m=!1;for(l=s.reduce(function(e,t,n){return e[t.getId()]=n+1,e},{}),h.push(new e(l)),s.forEach(function(e){var t=e.getModel(),n=t.composition,i=t.relationships,r=i&&i.modes,o=e.useCapability("metadata");n&&(d=Math.max(d,n.length)),r&&(p=Math.max(p,r.length)),e.hasCapability("timespan")&&(m=!0),o&&o.forEach(c)}),m&&(h.push(new r(!0)),h.push(new r(!1))),a.forEach(function(e){h.push(new o(e))}),u=0;d>u;u+=1)h.push(new n(u,l));for(u=0;p>u;u+=1)h.push(new t(u,l));this.domainObjects=s,this.columns=h}return s.prototype.rows=function(){function e(e){return Promise.all(t.map(function(t){return t.value(e)}))}var t=this.columns;return Promise.all(this.domainObjects.map(e))},s.prototype.headers=function(){return this.columns.map(function(e){return e.name()})},s}),n("platform/features/timeline/src/actions/ExportTimelineAsCSVTask",["./TimelineTraverser","./TimelineColumnizer"],function(e,t){function n(e,t,n){this.domainObject=n,this.exportService=e,this.resources=t}return n.prototype.run=function(){function n(e){var n=new t(e,r),o={headers:n.headers()};return n.rows().then(function(e){return i.exportCSV(e,o)})}var i=this.exportService,r=this.resources;return new e(this.domainObject).buildObjectList().then(n)},n}),n("platform/features/timeline/src/actions/ExportTimelineAsCSVAction",["./ExportTimelineAsCSVTask"],function(e){function t(t,n,i,r,o){this.$log=t,this.task=new e(n,r,o.domainObject),this.notificationService=i}return t.prototype.perform=function(){var e=this.notificationService,t=e.notify({title:"Exporting CSV",unknownProgress:!0}),n=this.$log;return this.task.run().then(function(){t.dismiss()})["catch"](function(i){n.warn(i),t.dismiss(),e.error("Error exporting CSV")})},t.appliesTo=function(e){return e.domainObject&&e.domainObject.hasCapability("type")&&e.domainObject.getCapability("type").instanceOf("timeline")},t}),n("platform/features/timeline/src/controllers/swimlane/TimelineSwimlane",[],function(){function e(e,t,n,i,r){var o,s=e.getId(),a=!1,c=!1,l=(i?i.idPath:[]).concat([e.getId()]),u=i?i.depth+1:0,d=i&&i.parent?i.path+i.domainObject.getModel().name+" > ":"";return e.useCapability("timespan").then(function(e){o=e}),{visible:function(){return!i||i.expanded&&i.visible()},properties:function(){return e.getCapability("action").perform("properties")},toggleGraph:function(){n.graph=n.graph||{},n.graph[s]=!n.graph[s],t[n.graph[s]?"assign":"release"](s)},graph:function(e){return arguments.length>0&&(n.graph=n.graph||{},n.graph[s]=!!e,t[e?"assign":"release"](s)),(n.graph||{})[s]},color:function(e){return arguments.length>0&&t.assign(s,e),t.get(s)},highlight:function(e){return arguments.length>0&&(a=e),a},highlightBottom:function(e){return arguments.length>0&&(c=e),c},exceeded:function(){var e=i&&i.timespan();return o&&e&&(o.getStart()<e.getStart()||o.getEnd()>e.getEnd())},timespan:function(){return o},domainObject:e,expanded:!0,depth:u,path:d,id:s,idPath:l,parent:i,index:r,children:[]}}return e}),n("platform/features/timeline/src/controllers/swimlane/TimelineSwimlaneDropHandler",[],function(){function e(e){function t(){return e.domainObject.hasCapability("editor")&&e.domainObject.getCapability("editor").inEditContext()}function n(e,t){return e||t}function i(e,t){function i(e){return e===t}return e.idPath.map(i).reduce(n,!1)}function r(e,t){function i(e){return e.domainObject.getId()===t}return e.children.map(i).reduce(n,!1)}function o(e,t){return e.useCapability("mutation",t)}function s(){return e.expanded&&e.children.length>0}function a(){return e.highlight()||s()}function c(e,t){var n=t.getCapability("context"),i=n&&n.getParent(),r=i&&i.getId();return e.getId()===r}function l(e,t){var n=e.getCapability("action"),i=t.hasCapability("editor")?"move":"link";return n&&n.getActions({key:i,selectedObject:t})[0]}function u(e,t,n){return Math.max(Math.min((n||[]).indexOf(e)+t,(n||[]).length),0)}function d(t,n,i){var r=e.domainObject.getId();return o(n,function(e){e.composition=e.composition.filter(function(e){return e!==t}),e.composition.splice(u(r,i,e.composition),0,t)})}function p(e,t){return c(e,t)||!!l(e,t)}function f(e,t,n){function i(){var i=e.getId();return d(i,t,n)}return c(t,e)?i():l(t,e).perform().then(i)}return{allowDropIn:function(n,o){return t()&&!i(e,n)&&!r(e,n)&&p(e.domainObject,o)},allowDropAfter:function(n,r){var o=s()?e:e.parent;return t()&&o&&!i(o,n)&&p(o.domainObject,r)},drop:function(t,n){var i=a(),r=i?e.domainObject:e.parent.domainObject,o=i?e.expanded&&e.highlightBottom()?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:1;return e.highlight()||e.highlightBottom()?f(n,r,o):void 0}}}return e}),n("platform/features/timeline/src/controllers/swimlane/TimelineSwimlaneDecorator",["./TimelineSwimlaneDropHandler"],function(e){function t(t,i){function r(e){return arguments.length>0&&Array.isArray(e)&&(u.relationships||{})[n]!==e&&d.mutate(function(t){t.relationships=t.relationships||{},t.relationships[n]=e}),(u.relationships||{})[n]||[]}function o(e){return arguments.length>0&&"string"==typeof e&&e!==u.link&&d.mutate(function(t){t.link=e}),u.link}function s(){return l.getCapability("action").perform("remove")}function a(){i.select(t)}function c(){return i.get()===t}var l=t&&t.domainObject,u=l&&l.getModel()||{},d=l&&l.getCapability("mutation"),p=l&&l.getCapability("type"),f=new e(t);return p&&p.instanceOf("activity")&&d&&(t.modes=r,t.link=o),t.parent&&(t.remove=s),i&&(t.select=a,t.selected=c),t.allowDropIn=f.allowDropIn,t.allowDropAfter=f.allowDropAfter,t.drop=f.drop,t}var n="modes";return t}),n("platform/features/timeline/src/controllers/swimlane/TimelineColorAssigner",[],function(){function e(e){function i(){var i,r={};return Object.keys(e).forEach(function(t){r[e[t]]=!0}),t.forEach(function(e){i=r[e]||i?i:e}),i||n}return{get:function(t){return e[t]},assign:function(t,n){e[t]="string"==typeof n?n:i()},release:function(t){delete e[t]}}}var t=["#20b2aa","#9acd32","#ff8c00","#d2b48c","#40e0d0","#4169ff","#ffd700","#6a5acd","#ee82ee","#cc9966","#99cccc","#66cc33","#ffcc00","#ff6633","#cc66ff","#ff0066","#ffff00","#800080","#00868b","#008a00","#ff0000","#0000ff","#f5deb3","#bc8f8f","#4682b4","#ffafaf","#43cd80","#cdc1c5","#a0522d","#6495ed"],n="#000000";return e}),n("platform/features/timeline/src/controllers/swimlane/TimelineProxy",[],function(){function e(e,t){function n(e){var t=e.getCapability("action"),n=t?t.getActions("add"):[];n.forEach(function(e){r[e.getMetadata().type]=e})}function i(){var i=t&&t.get(),r=i&&i.domainObject;n(r||e)}var r={};return n(e),{add:function(e){return i(),r[e]?r[e].perform():void 0}}}return e}),n("platform/features/timeline/src/controllers/swimlane/TimelineSwimlanePopulator",["./TimelineSwimlane","./TimelineSwimlaneDecorator","./TimelineColorAssigner","./TimelineProxy"],function(e,t,n,i){function r(r,o,s){function a(e){e&&(g=Math.min(g,e.getStart()),y=Math.max(y,e.getEnd()))}function c(n,i,r){function l(e,t){c(e,u,t)}var u,d=n.domainObject;d&&(u=new t(new e(d,f,o,i,r||0),s),d.useCapability("timespan").then(a),m.push(u),((i||{}).children||[]).push(u),n.composition.forEach(l))}function l(e,t,n){var i=e[n||0];n=n||0,t.forEach(function(t){t.id===i&&(n<e.length-1?l(e,t.children,n+1):s.select(t))})}function u(e){function t(e){var t=s&&s.get(),n=t&&t.idPath;m=[],c(e),n&&m.length>0&&l(n,[m[0]])}e?r.load(e,"timespan").then(t):t({}),s&&s.proxy(e&&new i(e,s)),h=e}function d(e){s=e,u(h)}function p(){var e=o.colors||{};f=new n(e),o.colors=e,u(h)}var f,h,m=[],g=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;return p(),{selection:d,populate:u,get:function(){return m},start:function(){return g},end:function(){return y},configure:function(e){o=e,p()}}}return r}),n("platform/features/timeline/src/controllers/graph/TimelineGraph",[],function(){function e(e,t,n){function i(){return p>=f?f-1:p}function r(){return p>=f?p+1:f}function o(){p=d.map(function(e){return e.min}).reduce(function(e,t){return Math.min(e,t)},Number.POSITIVE_INFINITY),f=d.map(function(e){return e.max}).reduce(function(e,t){return Math.max(e,t)},Number.NEGATIVE_INFINITY),p=p===Number.POSITIVE_INFINITY?f:p,p=p===Number.NEGATIVE_INFINITY?0:p,f=f===Number.NEGATIVE_INFINITY?p:f}function s(){l.lines=u.filter(function(e){return e.points>1}),l.origin[1]=i(),l.dimensions[1]=r()-i()}function a(e,t){var i,r=n.render(e),a=u[t],c=d[t];for(i=1;i<r.length;i+=2)c.min=Math.min(r[i],c.min),c.max=Math.max(r[i],c.max);a.buffer=r,a.points=e.getPointCount(),a.color=n.decode(h[t]),a.points>0&&o(),s()}function c(n,i){var r=t[n],o=r.useCapability("graph");o&&o.then(function(t){t[e]&&a(t[e],i)})}var l={origin:[0,0],dimensions:[0,0],modified:0},u=[],d=[],p=0,f=0,h=Object.keys(t);return u=h.map(function(){return{points:0}}),d=h.map(function(){return{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}}),h.forEach(c),{minimum:i,maximum:r,setBounds:function(e,t){l.origin=[e,l.origin[1]],l.dimensions=[t,l.dimensions[1]]},refresh:function(){h.forEach(c)},key:e,drawingObject:l}}return e}),n("platform/features/timeline/src/controllers/graph/TimelineGraphRenderer",[],function(){function e(){return{render:function(e){var t,n=e.getPointCount(),i=new Float32Array(2*n);for(t=0;n>t;t+=1)i[2*t]=e.getDomainValue(t),i[2*t+1]=e.getRangeValue(t);return i},decode:function(e){return e=/^#[A-Fa-f0-9]{6}$/.test(e)?e:"#000000",[e.substring(1,3),e.substring(3,5),e.substring(5,7)].map(function(e){return parseInt(e,16)/255}).concat([1])}}}return e}),n("platform/features/timeline/src/controllers/graph/TimelineGraphPopulator",["./TimelineGraph","./TimelineGraphRenderer"],function(e,t){function n(n){function i(e,t){return(e&&e.getId&&e.getId())===(t&&t.getId&&t.getId())}function r(e,t){function n(n){return n.map(function(n){return r(e[n],t[n])}).reduce(function(e,t){return e&&t},!0)}var o,s;return"function"==typeof(e&&e.getId)?i(e,t):(o=Object.keys(e||{}).sort(),s=Object.keys(t||{}).sort(),o.length===s.length&&n(o))}function o(t){function i(e){function t(e){return Object.keys(e)}var i=e.domainObject.useCapability("graph");return n.when(i?i.then(t):[])}function o(e){return i(e).then(function(t){t.forEach(function(t){p[t]=p[t]||{},p[t][e.color()]=e.domainObject})})}function l(t){return new e(t,p[t],c)}function u(e){return e.graph()&&e.domainObject.hasCapability("graph")}function d(){r(a,p)?s.forEach(function(e){e.refresh()}):(s=Object.keys(p).sort().map(l),a=p)}var p={};n.all(t.filter(u).map(o)).then(d)}var s=[],a={},c=new t;return{populate:o,get:function(){return s}}}return n}),n("platform/features/timeline/src/controllers/drag/TimelineDragHandler",[],function(){function e(e,t){function n(e){return"string"!=typeof e&&e.getId?e.getId():e}function i(e){var t=e.getId(),n=e.useCapability("timespan");n&&n.then(function(n){s[t]=n,a[t]=e.getCapability("mutation"),c[t]=e.getModel().composition||[]})}function r(e){i(e.domainObject),e.composition.forEach(r)}function o(e){var t=a[e];t&&t.mutate(function(){})}var s={},a={},c={},l={};return t.load(e,"timespan").then(r),{ids:function(){return Object.keys(s).sort()},persist:function(){Object.keys(l).forEach(o),l={}},start:function(e,t){var i=s[n(e)];return"number"==typeof t&&i&&(i.setStart(Math.min(Math.max(t,0),i.getEnd())),l[n(e)]=!0),i&&i.getStart()},end:function(e,t){var i=s[n(e)];return"number"==typeof t&&i&&(i.setEnd(Math.max(t,i.getStart())),l[n(e)]=!0),i&&i.getEnd()},duration:function(e,t){var i=s[n(e)];return"number"==typeof t&&i&&(i.setDuration(Math.max(t,0)),l[n(e)]=!0),i&&i.getDuration()},move:function(e,t){function i(e){var i,r,o=s[e];o&&(i=o.getStart(),r=o.getEnd(),o.setStart(i+t),o.setEnd(r+t),l[n(e)]=!0)}for(var r,o={},a=[n(e)];a.length>0;)e=a.shift(),o[e]||(o[e]=!0,a=a.concat(c[e]||[]));r=Object.keys(o).map(function(e){return s[e]?s[e].getStart():Number.POSITIVE_INFINITY}).reduce(function(e,t){return Math.min(e,t)},Number.POSITIVE_INFINITY),t=Math.max(t,-r),0!==t&&Object.keys(o).forEach(i)}}}return e}),n("platform/features/timeline/src/controllers/drag/TimelineSnapHandler",[],function(){function e(e){function t(t,n,i){function r(e){return e!==i}function o(e){var n=Math.abs(e-t);d>n&&(u=e,d=n)}function s(t){return e.start(t)}function a(t){return e.end(t)}var c,l,u=t,d=n;return c=e.ids().filter(r),l=c.map(s).concat(c.map(a)),l.forEach(o),u}return{snap:t}}return e}),n("platform/features/timeline/src/TimelineConstants",{HANDLE_WIDTH:32,SNAP_WIDTH:16}),n("platform/features/timeline/src/controllers/drag/TimelineStartHandle",["../../TimelineConstants"],function(e){function t(t,n,i){function r(n,r){return i.snap(n,r.toMillis(e.SNAP_WIDTH),t)}var o;return{begin:function(){o=n.start(t)},drag:function(e,i){void 0!==o&&n.start(t,r(o+i.toMillis(e),i))},finish:function(){o=void 0,n.persist()},style:function(i){return{left:i.toPixels(n.start(t))+"px",width:e.HANDLE_WIDTH+"px"}}}}return t}),n("platform/features/timeline/src/controllers/drag/TimelineEndHandle",["../../TimelineConstants"],function(e){function t(t,n,i){function r(n,r){return i.snap(n,r.toMillis(e.SNAP_WIDTH),t)}var o;return{begin:function(){o=n.end(t)},drag:function(e,i){void 0!==o&&n.end(t,r(o+i.toMillis(e),i))},finish:function(){o=void 0,n.persist()},style:function(i){return{left:i.toPixels(n.end(t))-e.HANDLE_WIDTH+"px",width:e.HANDLE_WIDTH+"px"}}}}return t}),n("platform/features/timeline/src/controllers/drag/TimelineMoveHandle",["../../TimelineConstants"],function(e){function t(t,n,i){function r(n,r){return i.snap(n,r.toMillis(e.SNAP_WIDTH),t)}function o(e,i){var o=i.toMillis(e),c=s+o,l=a+o,u=r(c,i),d=r(l,i),p=Math.abs(u-c),f=Math.abs(d-l),h=!1;return h=p>0&&f>0?p>f:f>0,h?d-n.end(t):u-n.start(t)}var s,a;return{begin:function(){s=n.start(t),a=n.end(t)},drag:function(e,i){void 0!==s&&void 0!==a&&0!==e&&n.move(t,o(e,i))},finish:function(){s=void 0,a=void 0,n.persist()},style:function(i){return{left:i.toPixels(n.start(t))+e.HANDLE_WIDTH+"px",width:i.toPixels(n.duration(t))-2*e.HANDLE_WIDTH+"px"}}}}return t}),n("platform/features/timeline/src/controllers/drag/TimelineDragHandleFactory",["./TimelineStartHandle","./TimelineEndHandle","./TimelineMoveHandle"],function(e,t,n){function i(e,t){return{handles:function(n){function i(n){return new n(a,e,t)}var s=n.getCapability("type"),a=n.getId();return(s&&s.instanceOf("timeline")?o:r).map(i)}}}var r=[e,n,t],o=[e,n];return i}),n("platform/features/timeline/src/controllers/drag/TimelineDragPopulator",["./TimelineDragHandler","./TimelineSnapHandler","./TimelineDragHandleFactory"],function(e,t,n){function i(i){function r(){l=a&&c?a.handles(c):[]}function o(o){var s=o&&new e(o,i);a=s&&new n(s,new t(s)),r()}function s(e){c=e&&e.domainObject,r()}var a,c,l=[];return{get:function(){return l},populate:o,select:s}}return i}),n("platform/features/timeline/src/controllers/TimelineController",["./swimlane/TimelineSwimlanePopulator","./graph/TimelineGraphPopulator","./drag/TimelineDragPopulator"],function(e,t,n){function i(i,r,o,s){function a(){var e=0;return p.get().forEach(function(t){e+=t.domainObject.getModel().modified||0}),e}function c(){var e=0,t=1;return p.get().forEach(function(n){e+=n.graph()?0:t,t*=2}),e}function l(){p.populate(i.domainObject),h.populate(i.domainObject),f.populate(p.get())}function u(){f.populate(p.get())}function d(){f&&f.get().forEach(function(e){e.refresh()})}var p=new e(o,i.configuration||{},i.selection),f=new t(r),h=new n(o);return i.$watch("configuration",p.configure),i.$watch("domainObject",p.populate),i.$watch(a,l),i.$watch(c,u),i.$watch("selection",p.selection),i.$watch("selection.get()",h.select),i.scroll={x:0,y:0},i.panes={},{end:p.end.bind(p),swimlanes:p.get,graphs:f.get,handles:h.get,refresh:d}}return i}),n("platform/features/timeline/src/controllers/TimelineGraphController",[],function(){function e(e,t){function n(e){var t=e.key;t&&!r[t]&&(r[t]=e)}function i(e){(e.graphs||[]).forEach(function(t){t.setBounds(e.origin,e.duration)})}var r={},o={};return t.forEach(n),e.$watchCollection("parameters",i),{label:function(e){var t=e.key,n=r[t]||{},i=n.name||"",s=n.units,a=e.minimum()||0,c=e.maximum()||0,l=o[t]||{};return o[t]=l,l.title=i+(s?" ("+s+")":""),l.low=a.toFixed(3),l.middle=((a+c)/2).toFixed(3),l.high=c.toFixed(3),l}}}return e}),n("platform/features/timeline/src/controllers/TimelineDateTimeController",[],function(){function e(e){function t(t){var n,i=parseInt(t.days,10)||0,r=parseInt(t.hours,10)||0,o=parseInt(t.minutes,10)||0,s=parseInt(t.seconds,10)||0,a="SET";n=24*i,n=60*(r+n),n=60*(o+n),n=1e3*(s+n),e.ngModel[e.field]={timestamp:n,epoch:a}}function n(t){var n=(t||{}).timestamp||0,i=e.datetime;n=Math.floor(n/1e3),i.seconds=n%60,n=Math.floor(n/60),i.minutes=n%60,n=Math.floor(n/60),
i.hours=n%24,n=Math.floor(n/24),i.days=n}function i(){return e.ngModel[e.field]}e.$watchCollection("datetime",t),e.$watchCollection(i,n),e.datetime={},n(i())}return e}),n("platform/features/timeline/src/controllers/TimelineZoomController",[],function(){function e(e,n,i){function r(e){return e/p*u[d]}function o(e){return p*e/u[d]}function s(e){isNaN(e)||(d=Math.min(Math.max(e,0),u.length-1))}function a(t){n.requestAnimationFrame(function(){e.scroll.x=t,e.$apply()})}function c(t){var n=t.getDuration();for(d=0;r(e.scroll.width)<n&&d<u.length-1;)d+=1;a(o(t.getStart()))}function l(){e.domainObject&&e.domainObject.useCapability("timespan").then(c)}var u=i.levels||[1e3],d=Math.floor(u.length/2),p=i.width||200;return e.$watch("domainObject",l),{zoom:function(t){if(arguments.length>0&&!isNaN(t)){var n=e.scroll,i=this.toMillis(n.x+n.width/2);s(d+t),a(this.toPixels(i)-n.width/2)}return u[d]},fit:l,toPixels:o,toMillis:r,width:function(n){var i=Math.ceil(o(n*(1+t)));return Math.max(e.scroll.width,i)}}}var t=.25;return e}),n("platform/features/timeline/src/controllers/TimelineTickController",["../TimelineFormatter"],function(e){function t(){function e(e,t,i,r){for(var o,s=[];s.length<t;)o=e+i*s.length,s.push({left:o,text:n.format(r(o))});return s}function t(t,n,l,u){var d=Math.floor(t/l)*l,p=Math.ceil((t+n)/l)*l,f=(p-d)/l+1,h=u(d),m=u(p),g=i!==d||o!==f||r!==l||s!==h||a!==m;return g&&(c=e(d,f,l,u),i=d,o=f,r=l,s=h,a=m),c}var i,r,o,s,a,c=[];return{labels:t}}var n=new e;return t}),n("platform/features/timeline/src/controllers/TimelineTableController",["../TimelineFormatter"],function(e){function t(){function e(e){return n.format(e)}return{niceTime:e}}var n=new e;return t}),n("platform/features/timeline/src/controllers/TimelineGanttController",[],function(){function e(e){function t(t,n,i){return Math.max(i(t.getStart()),n.x-e)}function n(n,i,r){var o=t(n,i,r),s=Math.min(r(n.getEnd()),i.x+i.width+e);return s-o}return{left:t,width:n}}return e}),n("platform/features/timeline/src/controllers/ActivityModeValuesController",[],function(){function e(e){function t(e){var t=(e||{}).key;t&&(n[t]=e)}var n={};return e.forEach(t),{metadata:function(e){return n[e]}}}return e}),n("platform/features/timeline/src/capabilities/ActivityTimespan",[],function(){function e(e,t){function n(){return e.start.timestamp}function i(){return e.start.timestamp+e.duration.timestamp}function r(){return e.duration.timestamp}function o(){return e.start.epoch}function s(n){var r=i();t.mutate(function(e){e.start.timestamp=Math.max(n,0),e.duration.timestamp=Math.max(r-n,0)},e.modified)}function a(n){t.mutate(function(e){e.duration.timestamp=Math.max(n,0)},e.modified)}function c(i){var r=n();t.mutate(function(e){e.duration.timestamp=Math.max(i-r,0)},e.modified)}return{getStart:n,getDuration:r,getEnd:i,setStart:s,setDuration:a,setEnd:c,getEpoch:o}}return e}),n("platform/features/timeline/src/capabilities/ActivityTimespanCapability",["./ActivityTimespan"],function(e){function t(t,n){function i(){return t.when(new e(n.getModel(),n.getCapability("mutation")))}return{invoke:i}}return t.appliesTo=function(e){return e&&"activity"===e.type},t}),n("platform/features/timeline/src/capabilities/TimelineTimespan",[],function(){function e(e,t,n){function i(){return e.start.timestamp}function r(e){return e.getEnd()}function o(e,t){return Math.max(e,t)}function s(){return n.map(r).reduce(o,i())}function a(){return s()-i()}function c(n){t.mutate(function(e){e.start.timestamp=Math.max(n,0)},e.modified)}function l(){}function u(){}function d(){return e.start.epoch}return{getStart:i,getDuration:a,getEnd:s,setStart:c,setDuration:l,setEnd:u,getEpoch:d}}return e}),n("platform/features/timeline/src/capabilities/TimelineTimespanCapability",["./TimelineTimespan"],function(e){function t(t,n){function i(e){return e.useCapability("timespan")}function r(e){return e.hasCapability("timespan")}function o(t){return new e(n.getModel(),n.getCapability("mutation"),t)}function s(e){return t.all(e.filter(r).map(i)).then(o)}function a(){return n.useCapability("composition").then(s)}return{invoke:a}}return t.appliesTo=function(e){return e&&"timeline"===e.type},t}),n("platform/features/timeline/src/capabilities/UtilizationCapability",[],function(){function e(e,t){function n(e,t){return(e||[]).concat(t||[])}function i(e,t,n){return 0===t||n[t-1]!==e}function r(e){return e.filter(i)}function o(e){return e.sort()}function s(e){return e.reduce(n,[])}function a(){return e.when(t.useCapability("composition")||[])}function c(){var n=t.getCapability("relationship"),i=n&&n.getRelatedObjects("modes");return e.when(i||[])}function l(){function e(e){var t=e.getCapability("cost");t&&t.resources().forEach(function(e){o[e]=o[e]||0,o[e]+=t.cost(e)})}function n(t){t.forEach(e)}function i(){return t.useCapability("timespan")}function r(e){return Object.keys(o).sort().map(function(t){return{key:t,value:o[t],start:e.getStart(),end:e.getEnd(),epoch:e.getEpoch()}})}var o={};return c().then(n).then(i).then(r)}function u(e){return e.useCapability("utilization")}function d(e){var t=e.getCapability("utilization");return t&&t.resources()}function p(t){return e.all(t.map(u)).then(s)}function f(t){return e.all(t.map(d)).then(s)}function h(){return a().then(p)}function m(e){var t=e.getCapability("cost");return t?t.resources():[]}function g(e){return e.map(m)}function y(){return c().then(g).then(s)}function v(){return a().then(f)}function b(){return e.all([y(),v()]).then(s).then(o).then(r)}function w(){return e.all([l(),h()]).then(s)}return{resources:b,internal:l,invoke:w}}return e.appliesTo=function(e){return e&&("timeline"===e.type||"activity"===e.type)},e}),n("platform/features/timeline/src/capabilities/ResourceGraph",[],function(){function e(e,t){return e.slice().sort(function(e,n){return e[t]-n[t]})}function t(t){function n(e,t,n){return 0===t||t===n.length-1||e.domain!==n[t-1].domain||e.domain!==n[t+1].domain}function i(e,t){l.push({domain:e,range:u}),u+=t,l.push({domain:e,range:u})}function r(){var e=a.shift();i(e.start,e.value)}function o(){var e=c.shift();i(e.end,-e.value)}function s(){return c.length<1||a.length>0&&a[0].start<=c[0].end}for(var a=e(t,"start"),c=e(t,"end"),l=[],u=0;a.length>0||c.length>0;)(s()?r:o)();return l=l.filter(n),{getPointCount:function(){return l.length},getDomainValue:function(e){return l[e].domain},getRangeValue:function(e){return l[e].range}}}return t}),n("platform/features/timeline/src/capabilities/CumulativeGraph",[],function(){function e(e,t,n,i,r){function o(e,t,n,i){return e+(i-t)/n}function s(){function s(e,i){var s=c[c.length-1],a=e-s.domain,u=a*l*r,d=s.range+u;t>d&&(c.push({domain:o(s.domain,s.range,l*r,t),range:t}),d=t),d>n&&(c.push({domain:o(s.domain,s.range,l*r,n),range:n}),d=n),a>0&&c.push({domain:e,range:d}),l=i}var a,c=[],l=0;for(c.push({domain:0,range:i}),a=0;a<e.getPointCount();a+=1)s(e.getDomainValue(a),e.getRangeValue(a));return c}function a(e){e.range=100*(e.range-t)/(n-t)}var c;return c=s(),c.forEach(a),{getPointCount:function(){return c.length},getDomainValue:function(e){return c[e].domain},getRangeValue:function(e){return c[e].range}}}return e}),n("platform/features/timeline/src/capabilities/GraphCapability",["./ResourceGraph","./CumulativeGraph"],function(e,t){function n(n,i){function r(n){var r,o={},s={};return n.forEach(function(e){var t=e.key;o[t]=o[t]||[],o[t].push(e)}),Object.keys(o).forEach(function(t){s[t]=new e(o[t])}),"timeline"===i.getModel().type&&s.power&&i.getModel().capacity>0&&(r=isNaN(parseFloat(i.getModel().startingSOC))?100:parseFloat(i.getModel().startingSOC),s.battery=new t(s.power,0,i.getModel().capacity,r/100*i.getModel().capacity,1/36e5)),s}return{invoke:function(){return n.when(i.useCapability("utilization")||[]).then(r)}}}return n.appliesTo=function(e){return e&&("timeline"===e.type||"activity"===e.type)},n}),n("platform/features/timeline/src/capabilities/CostCapability",[],function(){function e(e){var t=e.getModel();return{resources:function(){return Object.keys(t.resources||{}).sort()},cost:function(e){return(t.resources||{})[e]||0},invoke:function(){return t.resources||{}}}}return e.appliesTo=function(e){return"mode"===(e||{}).type},e}),n("platform/features/timeline/src/directives/SwimlaneDragConstants",{MCT_DRAG_TYPE:"mct-domain-object-id",MCT_EXTENDED_DRAG_TYPE:"mct-domain-object",TIMELINE_SWIMLANE_DRAG_TYPE:"timeline-swimlane"}),n("platform/features/timeline/src/directives/MCTSwimlaneDrop",["./SwimlaneDragConstants"],function(e){function t(t){function n(n,i,r){var o=(n||{}).originalEvent||n,s=i[0].offsetHeight,a=i[0].getBoundingClientRect(),c=o.pageY-a.top,l=t.getData(e.MCT_DRAG_TYPE),u=t.getData(e.MCT_EXTENDED_DRAG_TYPE);return l&&(o.dataTransfer.dropEffect="move",r.highlight(.75*s>c&&r.allowDropIn(l,u)),r.highlightBottom(c>=.75*s&&r.allowDropAfter(l,u)),r.highlight()||r.highlightBottom())?(o.preventDefault(),!1):void 0}function i(n,i,r){var o=(n||{}).originalEvent||n,s=o.dataTransfer,a=s.getData(e.MCT_DRAG_TYPE),c=t.getData(e.TIMELINE_SWIMLANE_DRAG_TYPE),l=c?c.domainObject:t.getData(e.MCT_EXTENDED_DRAG_TYPE);a&&(o.stopPropagation(),n.preventDefault(),r.drop(a,l)),r.highlight(!1),r.highlightBottom(!1)}function r(e,t,r){function o(){return e.$eval(r.mctSwimlaneDrop)}t.on("dragover",function(i){var r=o(),s=r.highlight(),a=r.highlightBottom();n(i,t,r),(a!==r.highlightBottom()||s!==r.highlight())&&e.$apply()}),t.on("drop",function(n){i(n,t,o()),e.$apply()}),t.on("dragleave",function(){var t=o(),n=t.highlight()||t.highlightBottom();t.highlight(!1),t.highlightBottom(!1),n&&e.$apply()})}return{restrict:"A",link:r}}return t}),n("platform/features/timeline/src/directives/MCTSwimlaneDrag",["./SwimlaneDragConstants"],function(e){function t(t){function n(n,i,r){function o(){return n.$eval(r.mctSwimlaneDrag)}i.on("dragstart",function(){t.setData(e.TIMELINE_SWIMLANE_DRAG_TYPE,o())}),i.on("dragend",function(){t.removeData(e.TIMELINE_SWIMLANE_DRAG_TYPE)})}return{restrict:"A",link:n}}return t}),n("platform/features/timeline/src/services/ObjectLoader",[],function(){function e(e){function t(n,i){function r(e){return!!e}function o(e){return e&&e.hasCapability(i)}function s(e){return t(e,p)}function a(e){f.composition=e}function c(e){return!h[e.getId()]}function l(t){return e.all(t.filter(p).filter(c).map(s)).then(a)}function u(){return h[n.getId()]=!0,f}function d(){return h[n.getId()]=!0,n.useCapability("composition").then(l).then(u)}var p,f={domainObject:n,composition:[]},h={};return p="function"==typeof i?i:"string"==typeof i?o:r,n.hasCapability("composition")?d():e.when(f)}return{load:t}}return e}),n("platform/features/timeline/src/chart/GLChart",[],function(){function e(e){var i,r,o,s,a,c,l,u=e.getContext("webgl",{preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{preserveDrawingBuffer:!0});if(!u)throw new Error("WebGL unavailable.");i=u.createShader(u.VERTEX_SHADER),u.shaderSource(i,n),u.compileShader(i),r=u.createShader(u.FRAGMENT_SHADER),u.shaderSource(r,t),u.compileShader(r),o=u.createProgram(),u.attachShader(o,i),u.attachShader(o,r),u.linkProgram(o),u.useProgram(o),s=u.getAttribLocation(o,"aVertexPosition"),a=u.getUniformLocation(o,"uColor"),c=u.getUniformLocation(o,"uDimensions"),l=u.getUniformLocation(o,"uOrigin"),u.enableVertexAttribArray(s),this.buffer=u.createBuffer(),u.lineWidth(2),u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),this.gl=u,this.aVertexPosition=s,this.uColor=a,this.uDimensions=c,this.uOrigin=l}var t=["precision mediump float;","uniform vec4 uColor;","void main(void) {","gl_FragColor = uColor;","}"].join("\n"),n=["attribute vec2 aVertexPosition;","uniform vec2 uDimensions;","uniform vec2 uOrigin;","void main(void) {","gl_Position = vec4(2.0 * ((aVertexPosition - uOrigin) / uDimensions) - vec2(1,1), 0, 1);","}"].join("\n");return e.prototype.doDraw=function(e,t,n,i){var r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,this.buffer),r.bufferData(r.ARRAY_BUFFER,t,r.DYNAMIC_DRAW),r.vertexAttribPointer(this.aVertexPosition,2,r.FLOAT,!1,0,0),r.uniform4fv(this.uColor,n),r.drawArrays(e,0,i)},e.prototype.clear=function(){var e=this.gl;e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.clear(e.COLOR_BUFFER_BIT+e.DEPTH_BUFFER_BIT)},e.prototype.setDimensions=function(e,t){var n=this.gl;e&&e.length>0&&t&&t.length>0&&(n.uniform2fv(this.uDimensions,e),n.uniform2fv(this.uOrigin,t))},e.prototype.drawLine=function(e,t,n){this.doDraw(this.gl.LINE_STRIP,e,t,n)},e.prototype.drawSquare=function(e,t,n){this.doDraw(this.gl.TRIANGLE_FAN,new Float32Array(e.concat([e[0],t[1]]).concat(t).concat([t[0],e[1]])),n,4)},e}),n("platform/features/timeline/src/chart/Canvas2DChart",[],function(){function e(e){if(this.canvas=e,this.c2d=e.getContext("2d"),this.width=e.width,this.height=e.height,this.dimensions=[this.width,this.height],this.origin=[0,0],!this.c2d)throw new Error("Canvas 2d API unavailable.")}return e.prototype.x=function(e){return(e-this.origin[0])/this.dimensions[0]*this.width},e.prototype.y=function(e){return this.height-(e-this.origin[1])/this.dimensions[1]*this.height},e.prototype.setColor=function(e){var t=e.map(function(e,t){return 3>t?Math.floor(255*e):e}).join(",");this.c2d.strokeStyle="rgba("+t+")",this.c2d.fillStyle="rgba("+t+")"},e.prototype.clear=function(){var e=this.canvas;this.width=e.width,this.height=e.height,this.c2d.clearRect(0,0,this.width,this.height)},e.prototype.setDimensions=function(e,t){this.dimensions=e,this.origin=t},e.prototype.drawLine=function(e,t,n){var i;for(this.setColor(t),this.c2d.lineWidth=2,e.length>1&&(this.c2d.beginPath(),this.c2d.moveTo(this.x(e[0]),this.y(e[1]))),i=2;2*n>i;i+=2)this.c2d.lineTo(this.x(e[i]),this.y(e[i+1]));this.c2d.stroke()},e.prototype.drawSquare=function(e,t,n){var i=this.x(e[0]),r=this.y(e[1]),o=this.x(t[0])-i,s=this.y(t[1])-r;this.setColor(n),this.c2d.fillRect(i,r,o,s)},e}),n("platform/features/timeline/src/chart/MCTTimelineChart",["./GLChart","./Canvas2DChart"],function(e,t){function n(n,r){function o(e,t){var n=e[0];if(!n)return void r.warn("Cannot initialize mct-timeline-chart.");try{return new n(t)}catch(i){return r.warn(["Could not instantiate chart",n.name,";",i.message].join(" ")),o(e.slice(1),t)}}function s(r,s){function a(e){f.width=f.offsetWidth,f.height=f.offsetHeight,p.clear(),e&&(p.setDimensions(e.dimensions||[1,1],e.origin||[0,0]),(e.lines||[]).forEach(function(e){p.drawLine(e.buffer,e.color,e.points)}),(e.boxes||[]).forEach(function(e){p.drawSquare(e.start,e.end,e.color)}))}function c(){(f.width!==f.offsetWidth||f.height!==f.offsetHeight)&&(a(r.draw),r.$apply())}function l(){d&&n.cancel(d)}function u(){s.html(i),f=s.find("canvas")[0],p=o([t],f),p&&a(r.draw)}var d,p,f=s.find("canvas")[0];p=o([e,t],f),p&&(f.addEventListener("webglcontextlost",u),d=n(c,1e3,0,!1),r.$watchCollection("draw",a),r.$on("$destroy",l))}return{restrict:"E",template:i,link:s,scope:{draw:"="}}}var i="<canvas style='position: absolute; background: none; width: 100%; height: 100%;'></canvas>";return n}),n("text!platform/features/timeline/res/templates/values.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<ul ng-controller="ActivityModeValuesController as controller" class="cols cols-2-ff properties">\n    <li ng-repeat="(key, value) in cost" class="l-row s-row">\n        <span class="col col-100px s-title">{{controller.metadata(key).name}}</span>\n        <span class="col s-value">{{value}} {{controller.metadata(key).units}}</span>\n    </li>\n</ul>'}),n("text!platform/features/timeline/res/templates/timeline.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="s-timeline l-timeline-holder split-layout vertical splitter-sm"\n     ng-controller="TimelineController as timelineController">\n\n<mct-split-pane anchor="left" class="abs" position="pane.x">\n    <!-- LEFT PANE: TABULAR AND RESOURCE LEGEND AREAS -->\n    <mct-split-pane anchor="bottom"\n                    position="pane.y"\n                    class="abs horizontal split-pane-component l-timeline-pane l-pane-l t-pane-v">\n        <!-- TOP PANE TABULAR AREA -->\n        <div class="split-pane-component s-timeline-tabular l-timeline-pane t-pane-h l-pane-top">\n            <!-- TABULAR LEFT FIXED AREA -->\n            <div class="t-pane-v l-pane-l l-tabular-l"\n                ng-if="true">\n\n                    <div class="t-header l-header s-header">\n                        <div class="l-cols">\n                            <span title="Resource Graphing: click a row to toggle" class="l-col l-col-icon l-plot-resource icon-plot-resource"></span>\n                            <span title="Activity Links" class="l-col  l-col-icon l-col-link icon-chain-links"></span>\n                            <span class="l-col l-title">Title</span>\n                        </div>\n                    </div>\n                    <div class="t-swimlanes-holder l-swimlanes-holder"\n                         mct-scroll-y="scroll.y">\n                        <mct-include key="\'timeline-tabular-swimlane-cols-tree\'"\n                                     parameters="{ commit: commit }"\n                                     ng-repeat="swimlane in timelineController.swimlanes()"\n                                     ng-model="swimlane">\n                        </mct-include>\n                    </div>\n\n            </div>\n\n            <!-- TABULAR RIGHT HORZ SCROLLING AREA -->\n            <div class="t-pane-v l-pane-r l-tabular-r">\n                <div class="l-width">\n                    <div class="t-header l-header s-header">\n                        <div class="l-cols">\n                            <span class="l-col l-start">Start</span>\n                            <span class="l-col l-end">End</span>\n                            <span class="l-col l-duration">Duration</span>\n                            <span class="l-col l-activity-modes">Activity Modes</span>\n                        </div>\n                    </div>\n                    <div class="t-swimlanes-holder l-swimlanes-holder"\n                         mct-scroll-y="scroll.y">\n                        <mct-include key="\'timeline-tabular-swimlane-cols-data\'"\n                                     ng-repeat="swimlane in timelineController.swimlanes()"\n                                     ng-model="swimlane">\n                        </mct-include>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- HORZ SPLITTER -->\n        <mct-splitter></mct-splitter>\n\n        <!-- BOTTOM PANE RESOURCE LEGEND -->\n        <div class="split-pane-component abs l-timeline-pane t-pane-h l-pane-btm s-timeline-resource-legend l-timeline-resource-legend">\n            <div class="l-title s-title">{{ngModel.title}}Resource Graph Legend</div>\n            <div class="l-legend-items legend">\n                <mct-include key="\'timeline-legend-item\'"\n                             ng-repeat="swimlane in timelineController.swimlanes()"\n                             ng-model="swimlane"\n                             ng-show="swimlane.graph()">\n                </mct-include>\n            </div>\n        </div>\n    </mct-split-pane>\n\n\n    <!-- MAIN VERTICAL SPLITTER -->\n    <mct-splitter></mct-splitter>\n\n\n    <!-- RIGHT PANE: GANTT AND RESOURCE PLOTS -->\n    <span ng-controller="TimelineZoomController as zoomController" class="abs">\n    <mct-split-pane anchor="bottom"\n                    position="pane.y"\n                    class="abs split-pane-component l-timeline-pane l-pane-r t-pane-v">\n\n        <!-- TOP PANE GANTT BARS -->\n        <div class="split-pane-component l-timeline-pane t-pane-h l-pane-top t-timeline-gantt l-timeline-gantt s-timeline-gantt">\n            <div class="l-hover-btns-holder s-hover-btns-holder">\n                <a class="s-button icon-arrows-out"\n                   ng-click="zoomController.fit()"\n                   ng-show="true"\n                   title="Zoom to fit">\n                </a>\n\n                <a class="s-button icon-magnify-in"\n                   ng-click="zoomController.zoom(-1)"\n                   ng-show="true"\n                   title="Zoom in">\n                </a>\n\n                <a class="s-button icon-magnify-out"\n                   ng-click="zoomController.zoom(1)"\n                   ng-show="true"\n                   title="Zoom out">\n                </a>\n            </div>\n\n            <div style="overflow: hidden; position: absolute; left: 0; top: 0; right: 0; height: 30px;" mct-scroll-x="scroll.x">\n                <mct-include key="\'timeline-ticks\'"\n                             parameters="{\n                                         fullWidth: zoomController.width(timelineController.end()),\n                                         start: scroll.x,\n                                         width: scroll.width,\n                                         step: zoomController.toPixels(zoomController.zoom()),\n                                         toMillis: zoomController.toMillis\n                                         }">\n                </mct-include>\n            </div>\n\n            <div class="t-swimlanes-holder l-swimlanes-holder"\n                 mct-scroll-x="scroll.x"\n                 mct-scroll-y="scroll.y">\n                <div class="l-width-control"\n                     ng-style="{ width: zoomController.width(timelineController.end()) + \'px\' }">\n                    <div class="t-swimlane s-swimlane l-swimlane"\n                         ng-repeat="swimlane in timelineController.swimlanes()"\n                         ng-class="{\n                                   exceeded: swimlane.exceeded(),\n                                   selected: selection.selected(swimlane),\n                                   \'drop-into\': swimlane.highlight(),\n                                   \'drop-after\': swimlane.highlightBottom()\n                                   }"\n                         ng-click="selection.select(swimlane)"\n                         mct-swimlane-drop="swimlane">\n\n                        <mct-representation key="\'gantt\'"\n                                            mct-object="swimlane.domainObject"\n                                            parameters="{\n                                                        scroll: scroll,\n                                                        toPixels: zoomController.toPixels\n                                                        }">\n                        </mct-representation>\n\n                        <span ng-if="selection.selected(swimlane)">\n                            <span ng-repeat="handle in timelineController.handles()"\n                                  ng-style="handle.style(zoomController)"\n                                  style="position: absolute; top: 0px; bottom: 0px;"\n                                  class="handle"\n                                  ng-class="{ start: $index === 0, mid: $index === 1, end: $index > 1 }"\n                                  mct-drag-down="handle.begin()"\n                                  mct-drag="handle.drag(delta[0], zoomController); timelineController.refresh()"\n                                  mct-drag-up="handle.finish()">\n                            </span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- HORZ SPLITTER -->\n        <mct-splitter></mct-splitter>\n\n        <!-- BOTTOM PANE RESOURCE GRAPHS AND RIGHT PANE HORIZONTAL SCROLL CONTROL -->\n        <div class="split-pane-component l-timeline-resource-graph l-timeline-pane t-pane-h l-pane-btm">\n            <div class="l-graphs-holder"\n                 mct-resize="scroll.width = bounds.width">\n                <div class="t-graphs l-graphs">\n                    <mct-include key="\'timeline-resource-graphs\'"\n                                 parameters="{\n                                             origin: zoomController.toMillis(scroll.x),\n                                             duration: zoomController.toMillis(scroll.width),\n                                             graphs: timelineController.graphs()\n                                             }">\n                    </mct-include>\n                </div>\n            </div>\n            <div mct-scroll-x="scroll.x"\n                 class="t-pane-r-scroll-h-control l-scroll-control s-scroll-control">\n                <div class="l-width-control"\n                     ng-style="{ width: zoomController.width(timelineController.end()) + \'px\' }">\n                </div>\n            </div>\n        </div>\n    </mct-split-pane>\n    </span>\n</mct-split-pane>\n</div>\n'}),n("text!platform/features/timeline/res/templates/activity-gantt.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="t-timeline-gantt l-timeline-gantt s-timeline-gantt"\n     ng-class="timespan ? { sm: gantt.width(timespan, parameters.scroll, parameters.toPixels) < 25 } : {}"\n     title="{{model.name}}"\n     ng-controller="TimelineGanttController as gantt"\n     ng-style="timespan ? {\n               left: gantt.left(timespan, parameters.scroll, parameters.toPixels) + \'px\',\n               width: gantt.width(timespan, parameters.scroll, parameters.toPixels) + \'px\'\n               } : {}">\n\n    <div class="bar">\n		<span class="s-activity-type {{type.getCssClass()}}"></span>\n		<span class="s-title">\n            {{model.name}}\n        </span>\n	</div>\n\n</div>\n'}),n("text!platform/features/timeline/res/templates/tabular-swimlane-cols-tree.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="t-swimlane s-swimlane l-swimlane {{ngModel.activitystate}} {{ngModel.swimlanestate}}"\n     mct-swimlane-drop="ngModel"\n     ng-class="{\n               exceeded: ngModel.exceeded(),\n               selected: ngModel.selected(swimlane),\n               \'drop-into\': ngModel.highlight(),\n               \'drop-after\': ngModel.highlightBottom()\n               }">\n    <div class="l-cols">\n        <span class="l-col l-col-icon l-plot-resource"\n              ng-click="ngModel.toggleGraph(); parameters.commit()"\n              title="Click to enable or disable inclusion in Resource Graphing">\n            <span class="icon-plot-resource s-toggle-icon"\n                  ng-class="{ active: ngModel.graph() }">\n            </span>\n        </span>\n        <span class="l-col l-col-icon l-link">\n            <a class="icon-chain-links"\n               target="_blank"\n               ng-href="{{ngModel.link()}}"\n               ng-if="ngModel.link().length > 0"\n               title="{{ngModel.link()}}"\n               >\n            </a>\n        </span>\n        <span class="l-col l-title"\n              ng-click="ngModel.select()"\n              ng-style="{ \'margin-left\': 15 * ngModel.depth + \'px\' }">\n            <mct-representation key="\'label\'"\n                                mct-object="ngModel.domainObject"\n                                class="rep-object-label"\n                                mct-swimlane-drag="ngModel">\n            </mct-representation>\n        </span>\n    </div>\n</div>\n'}),n("text!platform/features/timeline/res/templates/tabular-swimlane-cols-data.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="t-swimlane s-swimlane l-swimlane {{ngModel.activitystate}} {{ngModel.swimlanestate}}"\n     ng-class="{\n               exceeded: ngModel.exceeded(),\n               selected: ngModel.selected(swimlane),\n               \'drop-into\': ngModel.highlight(),\n               \'drop-after\': ngModel.highlightBottom()\n               }">\n	<div\n		class="l-cols"\n		ng-controller="TimelineTableController as tabularVal">\n		<span class="align-right l-col l-start">{{tabularVal.niceTime(ngModel.timespan().getStart())}}</span>\n		<span class="align-right l-col l-end">{{tabularVal.niceTime(ngModel.timespan().getEnd())}}</span>\n		<span class="align-right l-col l-duration">{{tabularVal.niceTime(ngModel.timespan().getDuration())}}</span>\n		<span class="l-col l-activity-modes"></span>\n	</div>\n</div>';
}),n("text!platform/features/timeline/res/templates/resource-graphs.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="TimelineGraphController as graphController">\n    <div class="t-graph l-graph" ng-repeat="graph in parameters.graphs">\n        <div class="l-graph-area l-canvas-holder">\n            <mct-timeline-chart draw="graph.drawingObject"></mct-timeline-chart>\n        </div>\n        <div class="t-graph-labels l-graph-labels">\n            <mct-include key="\'timeline-resource-graph-labels\'"\n                         parameters="graphController.label(graph)"\n                         ng-model="graph">\n            </mct-include>\n        </div>\n    </div>\n</span>\n'}),n("text!platform/features/timeline/res/templates/resource-graph-labels.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="l-title s-title">\n    {{parameters.title}}\n</div>\n<div class="l-graph-area">\n	<div class="l-labels-holder l-flex-col">\n		<div class="t-resource-graph-tick-label tick-label-y flex-elem">\n            {{parameters.high}}\n        </div>\n		<div class="t-resource-graph-tick-label tick-label-y flex-elem">\n            {{parameters.middle}}\n        </div>\n		<div class="t-resource-graph-tick-label tick-label-y flex-elem">\n            {{parameters.low}}\n        </div>\n	</div>\n</div>'}),n("text!platform/features/timeline/res/templates/legend-item.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<!-- TO-DO: make legend item color-swatch dynamic -->\n<span\n	class="legend-item s-legend-item"\n	title="{{ngModel.path}}{{ngModel.domainObject.getModel().name}}"\n	>\n	<span class="color-swatch"\n          ng-style="{ \'background-color\': ngModel.color() }">\n    </span>\n	<span class="title-label">\n        <span class="l-parent-path">{{ngModel.path}}</span>\n        <span class="l-leaf-title">{{ngModel.domainObject.getModel().name}}</span>\n    </span>\n</span>'}),n("text!platform/features/timeline/res/templates/ticks.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="t-header l-header s-header"\n     ng-controller="TimelineTickController as tick"\n     ng-style="{ width: parameters.fullWidth + \'px\' }">\n\n    <div class="l-header-elem t-labels l-labels">\n        <div class="t-label l-label s-label"\n             ng-repeat="label in tick.labels(parameters.start, parameters.width, parameters.step, parameters.toMillis)"\n             ng-style="{ left: label.left + \'px\' }">\n            {{label.text}}\n        </div>\n    </div>\n    <div class="t-ticks l-ticks s-ticks"\n         ng-style="{ \'background-size\': parameters.step + \'px 100%\' }">\n    </div>\n    <div class="t-ticks s-ticks l-subticks"\n         ng-style="{ \'background-size\': (parameters.step / 40) + \'px 100%\' }">\n    </div>\n</div>\n'}),n("text!platform/features/timeline/res/templates/controls/datetime.html",[],function(){return"<!--\n Open MCT, Copyright (c) 2009-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n \"License\"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class='form-control complex datetime'>\n\n    <div class='field-hints'>\n        <span class='hint time sm'>Days</span>\n        <span class='hint time sm'>Hours</span>\n        <span class='hint time sm'>Minutes</span>\n        <span class='hint time sm'>Seconds</span>\n        <span class='hint' ng-if=\"structure.options.length > 0\">Time System</span>\n    </div>\n\n    <ng-form name=\"mctControl\">\n        <div class='fields' ng-controller=\"TimelineDateTimeController\">\n            <span class='field control time sm'>\n                <input type='text'\n                       name='days'\n                       min='0'\n                       max='9999'\n                       integer\n                       ng-pattern=\"/\\d+/\"\n                       ng-model='datetime.days'/>\n            </span>\n            <span class='field control time sm'>\n                <input type='text'\n                       name='hour'\n                       maxlength='2'\n                       min='0'\n                       max='23'\n                       integer\n                       ng-pattern='/\\d+/'\n                       ng-model=\"datetime.hours\"/>\n            </span>\n            <span class='field control time sm'>\n                <input type='text'\n                       name='min'\n                       maxlength='2'\n                       min='0'\n                       max='59'\n                       integer\n                       ng-pattern='/\\d+/'\n                       ng-model=\"datetime.minutes\"\n                       ng-required='true'/>\n            </span>\n            <span class='field control time sm'>\n                <input type='text'\n                       name='sec'\n                       maxlength='2'\n                       min='0'\n                       max='59'\n                       integer\n                       ng-pattern='/\\d+/'\n                       ng-model=\"datetime.seconds\"\n                       ng-required='true'/>\n            </span>\n            <span ng-if=\"structure.options.length > 0\"\n                  class='field control'>\n                SET\n            </span>\n        </div>\n    </ng-form>\n\n\n</div>\n"}),n("platform/features/timeline/bundle",["./src/actions/ExportTimelineAsCSVAction","./src/controllers/TimelineController","./src/controllers/TimelineGraphController","./src/controllers/TimelineDateTimeController","./src/controllers/TimelineZoomController","./src/controllers/TimelineTickController","./src/controllers/TimelineTableController","./src/controllers/TimelineGanttController","./src/controllers/ActivityModeValuesController","./src/capabilities/ActivityTimespanCapability","./src/capabilities/TimelineTimespanCapability","./src/capabilities/UtilizationCapability","./src/capabilities/GraphCapability","./src/capabilities/CostCapability","./src/directives/MCTSwimlaneDrop","./src/directives/MCTSwimlaneDrag","./src/services/ObjectLoader","./src/chart/MCTTimelineChart","text!./res/templates/values.html","text!./res/templates/timeline.html","text!./res/templates/activity-gantt.html","text!./res/templates/tabular-swimlane-cols-tree.html","text!./res/templates/tabular-swimlane-cols-data.html","text!./res/templates/resource-graphs.html","text!./res/templates/resource-graph-labels.html","text!./res/templates/legend-item.html","text!./res/templates/ticks.html","text!./res/templates/controls/datetime.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d,p,f,h,m,g,y,v,b,w,S,x,C,T,k,M,O,$){$.register("platform/features/timeline",{name:"Timelines",description:"Resources, templates, CSS, and code for Timelines.",resources:"res",extensions:{actions:[{key:"timeline.export",name:"Export Timeline as CSV",category:"contextual",implementation:e,depends:["$log","exportService","notificationService","resources[]"]}],constants:[{key:"TIMELINE_MINIMUM_DURATION",description:"The minimum duration to display in a timeline view (one hour.)",value:36e5},{key:"TIMELINE_MAXIMUM_OFFSCREEN",description:"Maximum amount, in pixels, of a Gantt bar which may go off screen.",value:1e3},{key:"TIMELINE_ZOOM_CONFIGURATION",description:"Describes major tick sizes in milliseconds, and width in pixels.",value:{levels:[1e3,2e3,5e3,1e4,2e4,3e4,6e4,12e4,3e5,6e5,12e5,18e5,36e5,72e5,144e5,288e5,432e5,864e5,1728e5,432e6,864e6,1728e6,2592e6,5184e6,10368e6,20736e6,31536e6],width:200}}],types:[{key:"timeline",name:"Timeline",cssClass:"icon-timeline",description:"A time-oriented container that lets you enclose and organize other Timelines and Activities. The Timeline view provides both tabular and Gantt views as well as resource utilization graphing of Activities.",priority:502,features:["creation"],contains:["timeline","activity"],properties:[{name:"Start date/time",control:"timeline-datetime",required:!0,property:["start"],options:["SET"]},{name:"Battery capacity (Watt-hours)",control:"textfield",required:!1,conversion:"number",property:["capacity"],pattern:"^-?\\d+(\\.\\d*)?$"},{name:"Battery starting SOC (%)",control:"textfield",required:!1,conversion:"number",property:["startingSOC"],pattern:"^([0-9](\\.\\d*)?|[1-9][0-9](\\.\\d*)?|100)%?$"}],model:{composition:[],start:{timestamp:0}}},{key:"activity",name:"Activity",cssClass:"icon-activity",features:["creation"],contains:["activity"],description:"An event or process that starts and ends at a discrete datetime. Activities can be nested in other Activities, and can be added to Timelines. Activity Modes can be added to an Activity to define its resource utilization over time.",priority:501,properties:[{name:"Start date/time",control:"timeline-datetime",required:!0,property:["start"],options:["SET"]},{name:"Duration",control:"duration",required:!0,property:["duration"]}],model:{composition:[],relationships:{modes:[]},start:{timestamp:0},duration:{timestamp:0}}},{key:"mode",name:"Activity Mode",cssClass:"icon-activity-mode",features:["creation"],description:"When a sub-system utilizes Power or Communications resources over time, you can define those values in an Activity Mode. Activity Modes can then be linked to Activities to allow resource utilization graphing and estimating in a Timeline.",priority:500,model:{resources:{comms:0,power:0}},properties:[{name:"Comms (Kbps)",control:"textfield",conversion:"number",pattern:"^-?\\d+(\\.\\d*)?$",property:["resources","comms"]},{name:"Power (watts)",control:"textfield",conversion:"number",pattern:"^-?\\d+(\\.\\d*)?$",property:["resources","power"]}]}],views:[{key:"values",name:"Values",cssClass:"icon-activity-mode",template:v,type:"mode",uses:["cost"],editable:!1},{key:"timeline",name:"Timeline",cssClass:"icon-timeline",type:"timeline",description:"A time-oriented container that lets you enclose and organize other Timelines and Activities. The Timeline view provides both tabular and Gantt views as well as resource utilization graphing of Activities.",template:b,editable:!0,toolbar:{sections:[{items:[{method:"add",control:"menu-button",text:"Add",options:[{name:"Timeline",cssClass:"icon-timeline",key:"timeline"},{name:"Activity",cssClass:"icon-activity",key:"activity"}]}]},{items:[{cssClass:"icon-plot-resource",description:"Graph Resource Utilization",control:"button",method:"toggleGraph"},{cssClass:"icon-activity-mode",control:"dialog-button",description:"Apply Activity Modes...",title:"Apply Activity Modes",dialog:{control:"selector",name:"Modes",type:"mode",layout:"controls-under"},property:"modes"},{cssClass:"icon-chain-links",description:"Edit Activity Link",title:"Activity Link",control:"dialog-button",dialog:{control:"textfield",name:"Link",pattern:"^(ftp|https?)\\:\\/\\/\\w+(\\.\\w+)*(\\:\\d+)?(\\/\\S*)*$",cssClass:"l-input-lg"},property:"link"},{cssClass:"icon-gear",description:"Edit Properties...",control:"button",method:"properties"}]},{items:[{method:"remove",description:"Remove Item",control:"button",cssClass:"icon-trash"}]}]}}],stylesheets:[{stylesheetUrl:"css/timeline.css"},{stylesheetUrl:"css/timeline-espresso.css",theme:"espresso"},{stylesheetUrl:"css/timeline-snow.css",theme:"snow"}],representations:[{key:"gantt",template:w,uses:["timespan","type"]}],templates:[{key:"timeline-tabular-swimlane-cols-tree",priority:"mandatory",template:S},{key:"timeline-tabular-swimlane-cols-data",priority:"mandatory",template:x},{key:"timeline-resource-graphs",priority:"mandatory",template:C},{key:"timeline-resource-graph-labels",priority:"mandatory",template:T},{key:"timeline-legend-item",priority:"mandatory",template:k},{key:"timeline-ticks",priority:"mandatory",template:M}],controls:[{key:"timeline-datetime",template:O},{key:"duration",template:O}],controllers:[{key:"TimelineController",implementation:t,depends:["$scope","$q","objectLoader","TIMELINE_MINIMUM_DURATION"]},{key:"TimelineGraphController",implementation:n,depends:["$scope","resources[]"]},{key:"TimelineDateTimeController",implementation:i,depends:["$scope"]},{key:"TimelineZoomController",implementation:r,depends:["$scope","$window","TIMELINE_ZOOM_CONFIGURATION"]},{key:"TimelineTickController",implementation:o},{key:"TimelineTableController",implementation:s},{key:"TimelineGanttController",implementation:a,depends:["TIMELINE_MAXIMUM_OFFSCREEN"]},{key:"ActivityModeValuesController",implementation:c,depends:["resources[]"]}],capabilities:[{key:"timespan",implementation:l,depends:["$q"]},{key:"timespan",implementation:u,depends:["$q"]},{key:"utilization",implementation:d,depends:["$q"]},{key:"graph",implementation:p,depends:["$q"]},{key:"cost",implementation:f}],directives:[{key:"mctSwimlaneDrop",implementation:h,depends:["dndService"]},{key:"mctSwimlaneDrag",implementation:m,depends:["dndService"]},{key:"mctTimelineChart",implementation:y,depends:["$interval","$log"]}],services:[{key:"objectLoader",implementation:g,depends:["$q"]}],resources:[{key:"power",name:"Power",units:"watts"},{key:"comms",name:"Comms",units:"Kbps"},{key:"battery",name:"Battery State-of-Charge",units:"%"}]}})}),n("platform/forms/src/controllers/FormController",[],function(){function e(e){function n(e){return e?e instanceof RegExp?e:(i[e]||(i[e]=new RegExp(e)),i[e]):t}var i=[];e.$watch("mctForm",function(t){e.name&&(e.$parent[e.name]=t)}),e.getRegExp=n}var t=/\S/;return e}),n("text!platform/forms/res/templates/form.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<form name="mctForm" novalidate class="form l-flex-col">\n    <span ng-repeat="section in structure.sections"\n          class="l-form-section l-flex-col flex-elem {{ section.cssClass }}">\n        <div class="section-header flex-elem" ng-if="section.name">\n            {{section.name}}\n        </div>\n        <ng-form class="form-row validates l-flex-row flex-elem {{ section.cssClass }}"\n                 ng-class="{\n                 first:$index < 1,\n                 req: row.required,\n                 valid: mctFormInner.$dirty && mctFormInner.$valid,\n                 invalid: mctFormInner.$dirty && !mctFormInner.$valid,\n                 first: $index < 1,\n                \'l-controls-first\': row.layout === \'control-first\',\n                \'l-controls-under\': row.layout === \'controls-under\'\n                 }"\n                 name="mctFormInner"\n                 ng-repeat="row in section.rows">\n            <div class=\'label flex-elem\' title="{{row.description}}">\n                {{row.name}}\n            </div>\n            <div class=\'controls flex-elem\'>\n                <div class="wrapper" ng-if="row.control">\n                    <mct-control key="row.control"\n                                 ng-model="ngModel"\n                                 ng-required="row.required"\n                                 ng-pattern="getRegExp(row.pattern)"\n                                 options="row.options"\n                                 structure="row"\n                                 field="row.key">\n                    </mct-control>\n                </div>\n            </div>\n        </ng-form>\n    </span>\n</form>'}),n("platform/forms/src/MCTForm",["./controllers/FormController","text!../res/templates/form.html"],function(e,t){function n(){return{restrict:"E",template:t,controller:["$scope",e],scope:{ngModel:"=",structure:"=",name:"@"}}}return n}),n("text!platform/forms/res/templates/toolbar.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<form novalidate>\n    <div class="tool-bar btn-bar contents abs">\n        <span ng-repeat="section in structure.sections"\n              class="l-control-group"\n              ng-if="!section.hidden"\n              title="{{section.description}}">\n            <ng-form ng-repeat="item in section.items"\n                     ng-class="{ \'input-labeled\': item.name }"\n                     ng-hide="item.hidden"\n                     class="inline"\n                     title="{{item.description}}"\n                     name="mctFormInner">\n\n                <label ng-if="item.name">\n                    {{item.name}}:\n                </label>\n                <mct-control key="item.control"\n                             ng-class="{ disabled: item.disabled }"\n                             ng-model="ngModel"\n                             ng-required="item.required"\n                             ng-pattern="getRegExp(item.pattern)"\n                             options="item.options"\n                             structure="item"\n                             field="item.key">\n                </mct-control>\n            </ng-form>\n        </span>\n    </div>\n</form>'}),n("platform/forms/src/MCTToolbar",["./MCTForm","text!../res/templates/toolbar.html"],function(e,t){function n(){var n=new e;return n.template=t,n}return n}),n("platform/forms/src/MCTControl",[],function(){function e(e,t){function n(t,n,r,o){var s=e.link(t,n);t.$watch("key",function(e){s(i[e])}),t.ngModelController=o}var i={};return t.forEach(function(e){i[e.key]=e}),{restrict:"E",priority:1e3,require:"?ngModel",link:n,scope:{key:"=",ngBlur:"&",ngMouseup:"&",ngModel:"=",ngDisabled:"=",ngRequired:"=",ngPattern:"=",options:"=",structure:"=",field:"="}}}return e}),n("platform/forms/src/controllers/DateTimeController",["moment"],function(e){function t(t){function i(){var i=t.datetime.date,r=t.datetime.hour,o=t.datetime.min,s=t.datetime.sec,a=e.utc(i,n).hour(r||0).minute(o||0).second(s||0);a.isValid()&&(t.ngModel[t.field]=a.valueOf()),t.partiallyComplete=Object.keys(t.datetime).some(function(e){return t.datetime[e]}),t.partiallyComplete||(t.ngModel[t.field]=void 0)}function r(i){var r;void 0!==i?(r=e.utc(i),t.datetime={date:r.format(n),hour:r.format("H"),min:r.format("m"),sec:r.format("s")}):t.datetime={}}t.$watch("ngModel[field]",r),t.$watch("datetime.date",i),t.$watch("datetime.hour",i),t.$watch("datetime.min",i),t.$watch("datetime.sec",i),t.format=n,r(t.ngModel&&t.field?t.ngModel[t.field]:void 0)}var n="YYYY-MM-DD";return t}),n("platform/forms/src/controllers/CompositeController",[],function(){function e(){}function t(e){return"undefined"!=typeof e}return e.prototype.isNonEmpty=function(e){return Array.isArray(e)&&e.some(t)},e}),n("platform/forms/src/controllers/ColorController",[],function(){function e(e){return"#"+e.map(function(e){return(16>e?"0":"")+e.toString(16)}).join("")}function t(e,t){return e.map(function(e){return Math.round(t>0?e+(255-e)*t:e*(1+t))})}function n(){var n;for(n=[];n.length<10;)n.push(e([Math.round(28.3333*n.length),Math.round(28.3333*n.length),Math.round(28.3333*n.length)]));s.push(n),s.push(r.map(e)),n=[],o.forEach(function(i){n=n.concat(r.map(function(n){return e(t(n,i))}))}),s.push(n)}function i(){0===s.length&&n()}var r=[[136,32,32],[224,64,64],[240,160,72],[255,248,96],[128,240,72],[128,248,248],[88,144,224],[0,72,240],[136,80,240],[224,96,248]],o=[.75,.5,.25,-.25,-.5,-.75],s=[];return i.prototype.groups=function(){return s},i}),n("platform/forms/src/controllers/DialogButtonController",[],function(){function e(e,t){function n(t){e.ngModel[e.field]=t[e.field]}function i(){var i={};i[e.field]=e.ngModel[e.field],t.getUserInput(o,i).then(n)}function r(t){var n=Object.create(t.dialog||{});t=t||{},n.key=e.field,s.buttonStructure={},s.buttonStructure.cssClass=t.cssClass,s.buttonStructure.name=t.name,s.buttonStructure.description=t.description,s.buttonStructure.click=i,o={name:t.title,sections:[{rows:[n]}]}}var o,s=this;e.$watch("structure",r)}return e.prototype.getButtonStructure=function(){return this.buttonStructure},e}),n("text!platform/forms/res/templates/controls/checkbox.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<label class="checkbox custom no-text">\n    <input type="checkbox"\n           name="mctControl"\n           ng-model="ngModel[field]"\n           ng-disabled="ngDisabled">\n    <em></em>\n</label>\n'}),n("text!platform/forms/res/templates/controls/datetime.html",[],function(){return"<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n \"License\"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class='form-control complex datetime'>\n\n    <div class='field-hints'>\n        <span class='hint date'>Date</span>\n        <span class='hint time sm'>Hour</span>\n        <span class='hint time sm'>Min</span>\n        <span class='hint time sm'>Sec</span>\n        <span class='hint timezone'>Timezone</span>\n    </div>\n\n\n    <ng-form name=\"mctControl\">\n        <div class='fields' ng-controller=\"DateTimeController\">\n            <span class='field control date'>\n                <input type='text'\n                       name='date'\n                       placeholder=\"{{format}}\"\n                       ng-pattern=\"/\\d\\d\\d\\d-\\d\\d-\\d\\d/\"\n                       ng-model='datetime.date'\n                       ng-required='ngRequired || partiallyComplete'/>\n            </span>\n            <span class='field control time sm'>\n                <input type='text'\n                       name='hour'\n                       maxlength='2'\n                       min='0'\n                       max='23'\n                       integer\n                       ng-pattern='/\\d+/'\n                       ng-model=\"datetime.hour\"\n                       ng-required='ngRequired || partiallyComplete'/>\n            </span>\n            <span class='field control time sm'>\n                <input type='text'\n                       name='min'\n                       maxlength='2'\n                       min='0'\n                       max='59'\n                       integer\n                       ng-pattern='/\\d+/'\n                       ng-model=\"datetime.min\"\n                       ng-required='ngRequired || partiallyComplete'/>\n            </span>\n            <span class='field control time sm'>\n                <input type='text'\n                       name='sec'\n                       maxlength='2'\n                       min='0'\n                       max='59'\n                       integer\n                       ng-pattern='/\\d+/'\n                       ng-model=\"datetime.sec\"\n                       ng-required='ngRequired || partiallyComplete'/>\n            </span>\n            <span class='field control timezone'>\n                UTC\n            </span>\n        </div>\n    </ng-form>\n\n\n</div>\n"}),n("text!platform/forms/res/templates/controls/select.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class=\'form-control select\'>\n    <select\n            ng-model="ngModel[field]"\n            ng-options="opt.value as opt.name for opt in options"\n            ng-required="ngRequired"\n            name="mctControl">\n        <option value="" ng-show="!ngModel[field]">- Select One -</option>\n    </select>\n</div>\n';
}),n("text!platform/forms/res/templates/controls/textfield.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span class=\'form-control shell\'>\n    <span class=\'field control {{structure.cssClass}}\'>\n        <input type="text"\n               ng-required="ngRequired"\n               ng-model="ngModel[field]"\n               ng-blur="ngBlur()"\n               ng-pattern="ngPattern"\n               size="{{structure.size}}"\n               name="mctControl">\n    </span>\n</span>\n'}),n("text!platform/forms/res/templates/controls/textarea.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span class=\'form-control shell\'>\n    <span class=\'field control {{structure.cssClass}}\'>\n        <textarea ng-required="ngRequired"\n               ng-model="ngModel[field]"\n               ng-pattern="ngPattern"\n               size="{{structure.size}}"\n               name="mctControl">\n        </textarea>\n    </span>\n</span>\n'}),n("text!platform/forms/res/templates/controls/button.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<a class="s-button {{structure.cssClass}}"\n   ng-class="{ labeled: structure.text }"\n   ng-click="structure.click()">\n    <span class="title-label" ng-if="structure.text">\n        {{structure.text}}\n    </span>\n</a>\n'}),n("text!platform/forms/res/templates/controls/color.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="s-button s-menu-button menu-element t-color-palette {{structure.cssClass}}"\n    ng-controller="ClickAwayController as toggle">\n\n    <span class="l-click-area" ng-click="toggle.toggle()"></span>\n    <span class="color-swatch"\n          ng-style="{\n             background: ngModel[field]\n         }">\n    </span>\n    <span class="title-label" ng-if="structure.text">\n        {{structure.text}}\n    </span>\n\n    <div class="menu l-color-palette"\n        ng-controller="ColorController as colors"\n        ng-show="toggle.isActive()">\n        <div\n            class="l-palette-row l-option-row"\n            ng-if="!structure.mandatory">\n            <div class="l-palette-item s-palette-item {{ngModel[field] === \'transparent\' ? \'icon-check\' : \'\' }}"\n                ng-click="ngModel[field] = \'transparent\'">\n            </div>\n            <span class="l-palette-item-label">None</span>\n        </div>\n        <div\n            class="l-palette-row"\n            ng-repeat="group in colors.groups()">\n            <div class="l-palette-item s-palette-item {{ngModel[field] === color ? \'icon-check\' : \'\' }}"\n                ng-repeat="color in group"\n                ng-style="{ background: color }"\n                ng-click="ngModel[field] = color">\n            </div>\n        </div>\n    </div>\n</div>\n'}),n("text!platform/forms/res/templates/controls/composite.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="CompositeController as compositeCtrl">\n    <ng-form name="mctFormItem" ng-repeat="item in structure.items">\n        <div class="l-composite-control l-{{item.control}} {{item.cssClass}}">\n            <mct-control key="item.control"\n                         ng-model="ngModel[field]"\n                         ng-required="ngRequired || compositeCtrl.isNonEmpty(ngModel[field])"\n                         ng-pattern="ngPattern"\n                         options="item.options"\n                         structure="row"\n                         field="$index">\n            </mct-control>\n            <span class="composite-control-label">\n                {{item.name}}\n            </span>\n        </div>\n    </ng-form>\n</span>\n'}),n("text!platform/forms/res/templates/controls/menu-button.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="s-menu-button menu-element {{ structure.cssClass }}"\n     ng-controller="ClickAwayController as toggle">\n\n    <span class="l-click-area" ng-click="toggle.toggle()"></span>\n    <span class="title-label" ng-if="structure.text">\n        {{structure.text}}\n    </span>\n\n    <div class="menu" ng-show="toggle.isActive()">\n        <ul>\n            <li ng-click="structure.click(option.key); toggle.setState(false)"\n                ng-repeat="option in structure.options"\n                class="{{ option.cssClass }}">\n                    {{option.name}}\n            </li>\n        </ul>\n    </div>\n</div>'}),n("text!platform/forms/res/templates/controls/dialog.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="DialogButtonController as dialog">\n    <mct-control key="\'button\'"\n                 structure="dialog.getButtonStructure()">\n    </mct-control>\n</span>'}),n("text!platform/forms/res/templates/controls/radio.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<label class="radio custom no-text">\n    <input type="radio"\n           name="mctControl"\n           ng-model="ngModel[field]"\n           ng-disabled="ngDisabled"\n           ng-value="structure.value">\n    <em></em>\n</label>\n'}),n("platform/forms/bundle",["./src/MCTForm","./src/MCTToolbar","./src/MCTControl","./src/controllers/DateTimeController","./src/controllers/CompositeController","./src/controllers/ColorController","./src/controllers/DialogButtonController","text!./res/templates/controls/checkbox.html","text!./res/templates/controls/datetime.html","text!./res/templates/controls/select.html","text!./res/templates/controls/textfield.html","text!./res/templates/controls/textarea.html","text!./res/templates/controls/button.html","text!./res/templates/controls/color.html","text!./res/templates/controls/composite.html","text!./res/templates/controls/menu-button.html","text!./res/templates/controls/dialog.html","text!./res/templates/controls/radio.html","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d,p,f,h,m,g,y,v){v.register("platform/forms",{name:"MCT Forms",description:"Form generator; includes directive and some controls.",extensions:{directives:[{key:"mctForm",implementation:e},{key:"mctToolbar",implementation:t},{key:"mctControl",implementation:n,depends:["templateLinker","controls[]"]}],controls:[{key:"checkbox",template:a},{key:"radio",template:y},{key:"datetime",template:c},{key:"select",template:l},{key:"textfield",template:u},{key:"textarea",template:d},{key:"button",template:p},{key:"color",template:f},{key:"composite",template:h},{key:"menu-button",template:m},{key:"dialog-button",template:g}],controllers:[{key:"DateTimeController",implementation:i,depends:["$scope"]},{key:"CompositeController",implementation:r},{key:"ColorController",implementation:o},{key:"DialogButtonController",implementation:s,depends:["$scope","dialogService"]}]}})}),n("platform/framework/bundle",["legacyRegistry"],function(e){e.register("platform/framework",{name:"Open MCT Framework Component",description:"Framework layer for Open MCT; interprets bundle definitions and serves as an intermediary between Require and Angular",libraries:"lib",configuration:{paths:{angular:"angular.min"},shim:{angular:{exports:"angular"}}},extensions:{licenses:[{name:"Blanket.js",version:"1.1.5",description:"Code coverage measurement and reporting",author:"Alex Seville",website:"http://blanketjs.org/",copyright:"Copyright (c) 2013 Alex Seville",license:"license-mit",link:"http://opensource.org/licenses/MIT"},{name:"Jasmine",version:"1.3.1",description:"Unit testing",author:"Pivotal Labs",website:"http://jasmine.github.io/",copyright:"Copyright (c) 2008-2011 Pivotal Labs",license:"license-mit",link:"http://opensource.org/licenses/MIT"},{name:"RequireJS",version:"2.1.22",description:"Script loader",author:"The Dojo Foundation",website:"http://requirejs.org/",copyright:"Copyright (c) 2010-2015, The Dojo Foundation",license:"license-mit",link:"https://github.com/jrburke/requirejs/blob/master/LICENSE"},{name:"AngularJS",version:"1.4.4",description:"Client-side web application framework",author:"Google",website:"http://angularjs.org/",copyright:"Copyright (c) 2010-2015 Google, Inc. http://angularjs.org",license:"license-mit",link:"https://github.com/angular/angular.js/blob/v1.4.4/LICENSE"},{name:"Angular-Route",version:"1.4.4",description:"Client-side view routing",author:"Google",website:"http://angularjs.org/",copyright:"Copyright (c) 2010-2015 Google, Inc. http://angularjs.org",license:"license-mit",link:"https://github.com/angular/angular.js/blob/v1.4.4/LICENSE"},{name:"ES6-Promise",version:"3.0.2",description:"Promise polyfill for pre-ECMAScript 6 browsers",author:"Yehuda Katz, Tom Dale, Stefan Penner and contributors",website:"https://github.com/jakearchibald/es6-promise",copyright:"Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors",license:"license-mit",link:"https://github.com/jakearchibald/es6-promise/blob/master/LICENSE"}]}})}),n("platform/identity/src/IdentityAggregator",[],function(){function e(e,t){this.providers=t,this.$q=e}function t(e){return e.getUser()}function n(e){return e}function i(e){return e.filter(n)[0]}return e.prototype.getUser=function(){var e=this.$q,n=this.providers.map(t);return e.all(n).then(i)},e}),n("platform/identity/src/IdentityProvider",[],function(){function e(e){this.userPromise=e.when(void 0)}return e.prototype.getUser=function(){return this.userPromise},e}),n("platform/identity/src/IdentityCreationDecorator",[],function(){function e(e,t){this.identityService=e,this.creationService=t}return e.prototype.createObject=function(e,t){var n=this.creationService,i=this.identityService;return i.getUser().then(function(i){return i&&i.key&&(e.creator=i.key),n.createObject(e,t)})},e}),n("platform/identity/src/IdentityIndicator",[],function(){function e(e){var t=this;e.getUser().then(function(e){e&&e.key&&(t.text=e.name||e.key,t.description="Logged in as "+e.key)})}return e.prototype.getCssClass=function(){return this.text&&"icon-person"},e.prototype.getText=function(){return this.text},e.prototype.getDescription=function(){return this.description},e}),n("platform/identity/bundle",["./src/IdentityAggregator","./src/IdentityProvider","./src/IdentityCreationDecorator","./src/IdentityIndicator","legacyRegistry"],function(e,t,n,i,r){r.register("platform/identity",{extensions:{components:[{implementation:e,type:"aggregator",provides:"identityService",depends:["$q"]},{implementation:t,type:"provider",provides:"identityService",depends:["$q"],priority:"fallback"},{type:"decorator",provides:"creationService",implementation:n,depends:["identityService"]}],indicators:[{implementation:i,depends:["identityService"]}],types:[{properties:[{key:"creator",name:"Creator"}]}]}})}),n("platform/persistence/aggregator/src/PersistenceAggregator",[],function(){function e(e,t){function n(e){return e.listSpaces().then(function(t){t.forEach(function(t){i[t]=i[t]||e})})}var i={};this.providerMapPromise=e.all(t.map(n)).then(function(){return i})}var t={createObject:!1,readObject:void 0,listObjects:[],updateObject:!1,deleteObject:!1};return e.prototype.listSpaces=function(){return this.providerMapPromise.then(function(e){return Object.keys(e)})},Object.keys(t).forEach(function(n){e.prototype[n]=function(e){var i=Array.prototype.slice.apply(arguments,[]);return this.providerMapPromise.then(function(r){var o=r[e];return o?o[n].apply(o,i):t[n]})}}),e}),n("platform/persistence/aggregator/bundle",["./src/PersistenceAggregator","legacyRegistry"],function(e,t){t.register("platform/persistence/aggregator",{extensions:{components:[{provides:"persistenceService",type:"aggregator",depends:["$q"],implementation:e}]}})}),n("platform/persistence/couch/src/CouchDocument",[],function(){function e(e,t,n,i){return{_id:e,_rev:n,_deleted:i,metadata:{category:"domain object",type:t.type,owner:"admin",name:t.name,created:Date.now()},model:t}}return e}),n("platform/persistence/couch/src/CouchPersistenceProvider",["./CouchDocument"],function(e){function t(e,t,n,i){this.spaces=[n],this.revs={},this.$q=t,this.$http=e,this.path=i}function n(e){return e.rows.map(function(e){return e.id})}var i="_rev",r="_id";return t.prototype.checkResponse=function(e){return e&&e.ok?(this.revs[e.id]=e.rev,e.ok):!1},t.prototype.getModel=function(e){return e&&e.model?(this.revs[e[r]]=e[i],e.model):void 0},t.prototype.request=function(e,t,n){return this.$http({method:t,url:this.path+"/"+e,data:n}).then(function(e){return e.data},function(){})},t.prototype.get=function(e){return this.request(e,"GET")},t.prototype.put=function(e,t){return this.request(e,"PUT",t)},t.prototype.listSpaces=function(){return this.$q.when(this.spaces)},t.prototype.listObjects=function(){return this.get("_all_docs").then(n.bind(this))},t.prototype.createObject=function(t,n,i){return this.put(n,new e(n,i)).then(this.checkResponse.bind(this))},t.prototype.readObject=function(e,t){return this.get(t).then(this.getModel.bind(this))},t.prototype.updateObject=function(t,n,i){var r=this.revs[n];return this.put(n,new e(n,i,r)).then(this.checkResponse.bind(this))},t.prototype.deleteObject=function(t,n,i){var r=this.revs[n];return this.put(n,new e(n,i,r,!0)).then(this.checkResponse.bind(this))},t}),n("platform/persistence/couch/src/CouchIndicator",[],function(){function e(e,o,s,a){function c(){d.state=n}function l(e){var n=e.data;d.state=n.error?i:t}function u(){e.get(s).then(l,c)}var d=this;this.state=r,this.$http=e,this.$interval=o,this.path=s,this.interval=a,u(),o(u,a)}var t={text:"Connected",glyphClass:"ok",description:"Connected to the domain object database."},n={text:"Disconnected",glyphClass:"err",description:"Unable to connect to the domain object database."},i={text:"Unavailable",glyphClass:"caution",description:"Database does not exist or is unavailable."},r={text:"Checking connection..."};return e.prototype.getCssClass=function(){return"icon-database"},e.prototype.getGlyphClass=function(){return this.state.glyphClass},e.prototype.getText=function(){return this.state.text},e.prototype.getDescription=function(){return this.state.description},e}),n("platform/persistence/couch/bundle",["./src/CouchPersistenceProvider","./src/CouchIndicator","legacyRegistry"],function(e,t,n){n.register("platform/persistence/couch",{name:"Couch Persistence",description:"Adapter to read and write objects using a CouchDB instance.",extensions:{components:[{provides:"persistenceService",type:"provider",implementation:e,depends:["$http","$q","PERSISTENCE_SPACE","COUCHDB_PATH"]}],constants:[{key:"PERSISTENCE_SPACE",value:"mct"},{key:"COUCHDB_PATH",value:"/couch/openmct"},{key:"COUCHDB_INDICATOR_INTERVAL",value:15e3}],indicators:[{implementation:t,depends:["$http","$interval","COUCHDB_PATH","COUCHDB_INDICATOR_INTERVAL"]}]}})}),n("platform/persistence/elastic/src/ElasticPersistenceProvider",[],function(){function e(e,t,n,i,r){this.spaces=[n],this.revs={},this.$http=e,this.$q=t,this.root=i,this.path=r}var t="_source",n="_version",i="_id",r=409;return e.prototype.request=function(e,t,n,i){return this.$http({method:t,url:this.root+"/"+this.path+"/"+e,params:i,data:n}).then(function(e){return e.data},function(e){return(e||{}).data})},e.prototype.get=function(e){return this.request(e,"GET")},e.prototype.put=function(e,t,n){return this.request(e,"PUT",t,n)},e.prototype.del=function(e){return this.request(e,"DELETE")},e.prototype.handleError=function(e,n){var i=new Error("Persistence error."),o=this.$q;return(e||{}).status===r?(i.key="revision",this.get(n).then(function(e){return i.model=e[t],o.reject(i)})):this.$q.reject(i)},e.prototype.getModel=function(e){return e&&e[t]?(this.revs[e[i]]=e[n],e[t]):void 0},e.prototype.checkResponse=function(e,t){return e&&!e.error?(this.revs[t]=e[n],e):this.handleError(e,t)},e.prototype.listSpaces=function(){return this.$q.when(this.spaces)},e.prototype.listObjects=function(){return this.$q.when([])},e.prototype.createObject=function(e,t,n){return this.put(t,n).then(this.checkResponse.bind(this))},e.prototype.readObject=function(e,t){return this.get(t).then(this.getModel.bind(this))},e.prototype.updateObject=function(e,t,n){function i(e){return r.checkResponse(e,t)}var r=this;return this.put(t,n,{version:this.revs[t]}).then(i)},e.prototype.deleteObject=function(e,t){return this.del(t).then(this.checkResponse.bind(this))},e}),n("platform/persistence/elastic/src/ElasticSearchProvider",[],function(){function e(e,t){this.$http=e,this.root=t}var t="_id",n="_source",i="_score";return e.prototype.query=function(e,t){var n=this.root+"/_search/",i={},r=this;return e=this.cleanTerm(e),e=this.fuzzyMatchUnquotedTerms(e),i.q=e,i.size=t,this.$http({method:"GET",url:n,params:i}).then(function(e){return r.parseResponse(e)},function(){return{hits:[],total:0}})},e.prototype.cleanTerm=function(e){return e.trim().replace(/ +/g," ")},e.prototype.fuzzyMatchUnquotedTerms=function(e){var t='\\s+(?=([^"]*"[^"]*")*[^"]*$)',n=new RegExp(t,"g");return e.replace(n,"~ ").replace(/$/,"~").replace(/"~+/,'"')},e.prototype.parseResponse=function(e){var r=e.data.hits.hits,o=r.map(function(e){return{id:e[t],model:e[n],score:e[i]}});return{hits:o,total:e.data.hits.total}},e}),n("platform/persistence/elastic/src/ElasticIndicator",[],function(){function e(e,r,o,s){function a(){u.state=n}function c(){u.state=t}function l(){e.get(o).then(c,a)}var u=this;this.state=i,l(),r(l,s,0,!1)}var t={text:"Connected",glyphClass:"ok",description:"Connected to the domain object database."},n={text:"Disconnected",glyphClass:"err",description:"Unable to connect to the domain object database."},i={text:"Checking connection..."};return e.prototype.getCssClass=function(){return"icon-database"},e.prototype.getGlyphClass=function(){return this.state.glyphClass},e.prototype.getText=function(){return this.state.text},e.prototype.getDescription=function(){return this.state.description},e}),n("platform/persistence/elastic/bundle",["./src/ElasticPersistenceProvider","./src/ElasticSearchProvider","./src/ElasticIndicator","legacyRegistry"],function(e,t,n,i){i.register("platform/persistence/elastic",{name:"ElasticSearch Persistence",description:"Adapter to read and write objects using an ElasticSearch instance.",extensions:{components:[{provides:"persistenceService",type:"provider",implementation:e,depends:["$http","$q","PERSISTENCE_SPACE","ELASTIC_ROOT","ELASTIC_PATH"]},{provides:"searchService",type:"provider",implementation:t,depends:["$http","ELASTIC_ROOT"]}],constants:[{key:"PERSISTENCE_SPACE",value:"mct"},{key:"ELASTIC_ROOT",value:"http://localhost:9200",priority:"fallback"},{key:"ELASTIC_PATH",value:"mct/domain_object",priority:"fallback"},{key:"ELASTIC_INDICATOR_INTERVAL",value:15e3,priority:"fallback"}],indicators:[{implementation:n,depends:["$http","$interval","ELASTIC_ROOT","ELASTIC_INDICATOR_INTERVAL"]}]}})}),n("platform/persistence/local/src/LocalStoragePersistenceProvider",[],function(){function e(e,t,n){this.$q=t,this.space=n,this.spaces=n?[n]:[],this.localStorage=e.localStorage}return e.prototype.setValue=function(e,t){this.localStorage[e]=JSON.stringify(t)},e.prototype.getValue=function(e){return this.localStorage[e]?JSON.parse(this.localStorage[e]):{}},e.prototype.listSpaces=function(){return this.$q.when(this.spaces)},e.prototype.listObjects=function(e){return this.$q.when(Object.keys(this.getValue(e)))},e.prototype.createObject=function(e,t,n){var i=this.getValue(e);return i[t]=n,this.setValue(e,i),this.$q.when(!0)},e.prototype.readObject=function(e,t){var n=this.getValue(e);return this.$q.when(n[t])},e.prototype.deleteObject=function(e,t){var n=this.getValue(e);return delete n[t],this.setValue(e,n),this.$q.when(!0)},e.prototype.updateObject=e.prototype.createObject,e}),n("platform/persistence/local/src/LocalStorageIndicator",[],function(){function e(){}var t=["Using browser local storage for persistence.","Anything you create or change will be visible only","in this browser on this machine."].join(" ");return e.prototype.getCssClass=function(){return"icon-database"},e.prototype.getGlyphClass=function(){return"caution"},e.prototype.getText=function(){return"Off-line storage"},e.prototype.getDescription=function(){return t},e}),n("platform/persistence/local/bundle",["./src/LocalStoragePersistenceProvider","./src/LocalStorageIndicator","legacyRegistry"],function(e,t,n){n.register("platform/persistence/local",{extensions:{components:[{provides:"persistenceService",type:"provider",implementation:e,depends:["$window","$q","PERSISTENCE_SPACE"]}],constants:[{key:"PERSISTENCE_SPACE",value:"mct"}],indicators:[{implementation:t}]}})}),n("platform/persistence/queue/src/QueuingPersistenceCapability",[],function(){function e(e,t,n){var i=Object.create(t);return i.persist=function(){return e.put(n,t)},i}return e}),n("platform/persistence/queue/src/QueuingPersistenceCapabilityDecorator",["./QueuingPersistenceCapability"],function(e){function t(e,t){this.persistenceQueue=e,this.capabilityService=t}return t.prototype.getCapabilities=function(t,n){function i(t){var n=t.persistence;return n&&(t.persistence=function(t){var i="function"==typeof n?n(t):n;return new e(o,i,t)}),t}var r=this.capabilityService,o=this.persistenceQueue;return i(r.getCapabilities(t,n))},t}),n("platform/persistence/queue/src/PersistenceQueueImpl",[],function(){function e(e,t,n,i){this.persistences={},this.objects={},this.lastObservedSize=0,this.activeDefer=e.defer(),this.delay=i||0,this.handler=n,this.$timeout=t,this.$q=e}return e.prototype.scheduleFlush=function(){function e(){return Object.keys(i.persistences).length===i.lastObservedSize}function t(){function e(e){return i.flushPromise=void 0,t.resolve(e),e}var t=i.activeDefer;i.flushPromise=s.persist(i.persistences,i.objects,i).then(e,e),i.persistences={},i.objects={},i.lastObservedSize=0,i.pendingTimeout=void 0,i.activeDefer=o.defer()}function n(){i.pendingTimeout=void 0,e()?t():i.scheduleFlush(),i.lastObservedSize=Object.keys(i.persistences).length}var i=this,r=this.$timeout,o=this.$q,s=this.handler;return i.flushPromise?i.flushPromise.then(n):i.pendingTimeout=i.pendingTimeout||r(n,i.delay,!1),i.activeDefer.promise},e.prototype.put=function(e,t){var n=e.getId();return this.persistences[n]=t,this.objects[n]=e,this.scheduleFlush()},e}),n("platform/persistence/queue/src/PersistenceQueueHandler",[],function(){function e(e,t){this.$q=e,this.failureHandler=t}return e.prototype.persist=function(e,t,n){function i(e,t,n,i){function r(e){function r(){return i.put(l,a)}function o(e){return e}function s(t){return c.push({id:e,persistence:a,domainObject:l,requeue:r,error:t}),!1}var a=t[e],l=n[e];return a.persist().then(o,s)}function a(e){return c.length>0?s.handle(c):e}var c=[];return o.all(e.map(r)).then(a)}var r=Object.keys(e),o=this.$q,s=this.failureHandler;return i(r,e,t,n)},e}),n("platform/persistence/queue/src/PersistenceFailureConstants",{REVISION_ERROR_KEY:"revision",OVERWRITE_KEY:"overwrite",TIMESTAMP_FORMAT:"YYYY-MM-DD HH:mm:ss\\Z",UNKNOWN_USER:"unknown user"}),n("platform/persistence/queue/src/PersistenceFailureDialog",["./PersistenceFailureConstants"],function(e){function t(t){function r(t){var n=((t||{}).error||{}).key===e.REVISION_ERROR_KEY;(n?o:s).push(t)}var o=[],s=[];return t.forEach(r),{title:"Save Error",template:"persistence-failure-dialog",model:{revised:o,unrecoverable:s},options:o.length>0?n:i}}var n=[{name:"Overwrite",key:e.OVERWRITE_KEY},{name:"Discard",key:"cancel"}],i=[{name:"OK",key:"ok"}];return t}),n("platform/persistence/queue/src/PersistenceFailureHandler",["./PersistenceFailureDialog","./PersistenceFailureConstants"],function(e,t){function n(e,t){this.$q=e,this.dialogService=t}return n.prototype.handle=function(n){function i(e){return e.persistence.refresh()}function r(e){e.requeue()}function o(e){function t(e){o[e.id]=JSON.parse(JSON.stringify(e.domainObject.getModel()))}function n(e){var t=o[e.id];return e.domainObject.useCapability("mutation",function(){return t},t.modified)}var o={};return e.forEach(t),d.all(e.map(i)).then(function(){return d.all(e.map(n))}).then(function(){return d.all(e.map(r))})}function s(e){var t=e.domainObject.getCapability("persistence");return t.refresh()}function a(e){return d.all(e.map(s))}function c(e){return e===t.OVERWRITE_KEY?o(u):a(u)}var l=new e(n),u=l.model.revised,d=this.$q;
return this.dialogService.getUserChoice(l).then(c,c)},n}),n("platform/persistence/queue/src/PersistenceQueue",["./PersistenceQueueImpl","./PersistenceQueueHandler","./PersistenceFailureHandler"],function(e,t,n){function i(i,r,o,s){return new e(i,r,new t(i,new n(i,o)),s)}return i}),n("platform/persistence/queue/src/PersistenceFailureController",["moment","./PersistenceFailureConstants"],function(e,t){function n(){}return n.prototype.formatTimestamp=function(n){return e.utc(n).format(t.TIMESTAMP_FORMAT)},n.prototype.formatUsername=function(e){return e||t.UNKNOWN_USER},n}),n("text!platform/persistence/queue/res/templates/persistence-failure-dialog.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<span ng-controller="PersistenceFailureController as controller">\n\n<div ng-if="ngModel.revised.length > 0">\n    External changes have been made to the following objects:\n    <ul>\n        <li ng-repeat="failure in ngModel.revised">\n            <mct-representation key="\'label\'"\n                                mct-object="failure.domainObject">\n            </mct-representation>\n            was modified at\n            <b>{{controller.formatTimestamp(failure.error.model.modified)}}</b>\n            by\n            <i>{{controller.formatUsername(failure.error.model.modifier)}}</i>\n        </li>\n    </ul>\n    You may overwrite these objects, or discard your changes to keep\n    the updates that were made externally.\n</div>\n\n<div ng-if="ngModel.unrecoverable.length > 0">\n    Changes to these objects could not be saved for unknown reasons:\n    <ul>\n        <li ng-repeat="failure in ngModel.unrecoverable">\n            <mct-representation key="\'label\'"\n                                mct-object="failure.domainObject">\n            </mct-representation>\n        </li>\n    </ul>\n</div>\n\n</span>'}),n("platform/persistence/queue/bundle",["./src/QueuingPersistenceCapabilityDecorator","./src/PersistenceQueue","./src/PersistenceFailureController","text!./res/templates/persistence-failure-dialog.html","legacyRegistry"],function(e,t,n,i,r){r.register("platform/persistence/queue",{extensions:{components:[{type:"decorator",provides:"capabilityService",implementation:e,depends:["persistenceQueue"]}],services:[{key:"persistenceQueue",implementation:t,depends:["$q","$timeout","dialogService","PERSISTENCE_QUEUE_DELAY"]}],constants:[{key:"PERSISTENCE_QUEUE_DELAY",value:5}],templates:[{key:"persistence-failure-dialog",template:i}],controllers:[{key:"PersistenceFailureController",implementation:n}]}})}),n("platform/policy/src/PolicyActionDecorator",[],function(){function e(e,t){this.policyService=e,this.actionService=t}return e.prototype.getActions=function(e){function t(t){return n.allow("action",t,e)}var n=this.policyService;return this.actionService.getActions(e).filter(t)},e}),n("platform/policy/src/PolicyViewDecorator",[],function(){function e(e,t){this.policyService=e,this.viewService=t}return e.prototype.getViews=function(e){function t(t){return n.allow("view",t,e)}var n=this.policyService;return this.viewService.getViews(e).filter(t)},e}),n("platform/policy/src/PolicyProvider",[],function(){function e(e){function t(e){var t=Object.create(new e);return t.message=e.message,t}function n(e){var n=(e||{}).category;n&&(i[n]=i[n]||[],i[n].push(t(e)))}var i={};e.forEach(n),this.policyMap=i}return e.prototype.allow=function(e,t,n,i){var r,o=this.policyMap[e]||[];for(r=0;r<o.length;r+=1)if(!o[r].allow(t,n))return i&&i(o[r].message),!1;return!0},e}),n("platform/policy/bundle",["./src/PolicyActionDecorator","./src/PolicyViewDecorator","./src/PolicyProvider","legacyRegistry"],function(e,t,n,i){i.register("platform/policy",{name:"Policy Service",description:"Provides support for extension-driven decisions.",sources:"src",extensions:{components:[{type:"decorator",provides:"actionService",implementation:e,depends:["policyService"]},{type:"decorator",provides:"viewService",implementation:t,depends:["policyService"]},{type:"provider",provides:"policyService",implementation:n,depends:["policies[]"]}]}})}),n("platform/representation/src/MCTInclude",[],function(){function e(e,t){function n(e,n){var r=t.link(e,n,e.key&&i[e.key]);e.$watch("key",function(e){r(e&&i[e])})}var i={};return e.forEach(function(e){var t=e.key;i[t]=i[t]||e}),{restrict:"E",link:n,priority:-1e3,scope:{key:"=",ngModel:"=",parameters:"="}}}return e}),n("platform/representation/src/MCTRepresentation",[],function(){function e(e,t,n,i,r,o){function s(e,t){var n,i,r=c[e]||[];for(i=0;i<r.length;i+=1)if(n=r[i].type,!n||!t||t.getCapability("type").instanceOf(n))return r[i]}function a(e,t,a){function c(){var t=e.domainObject,n=s(e.key,t),r=(n||{}).uses||[],a=y;h&&(h(),h=void 0),t&&(h=t.getCapability("mutation").listen(c),e.model=t.getModel(),r.forEach(function(n){o.debug(["Requesting capability ",n," for representation ",e.key].join("")),i.when(t.useCapability(n)).then(function(t){y===a&&(e[n]=t)})}))}function l(){m.forEach(function(e){e.destroy()})}function u(e,t,n){return e===v&&n===f&&t.length===b.length&&t.every(function(e,t){return e===b[t]})}function d(e){return e?e.hasCapability("context")?e.getCapability("context").getPath().map(function(e){return e.getId()}):[e.getId()]:[]}function p(){var t=e.domainObject,n=s(e.key,t),i=(n||{}).uses||[],r=!(!n||!t),a=d(t),p=e.key;u(r,a,p)||(e.representation={},w(r?n:void 0),l(),!n&&e.key&&o.warn("No representation found for "+e.key),g.forEach(function(t){delete e[t]}),v=r,b=a,f=p,r&&(y+=1,c(),e.configuration=(e.model.configuration||{})[e.key]||{},m.forEach(function(e){e.represent(n,t)}),g=i.concat(["model"])))}var f,h,m=n.map(function(n){return new n(e,t,a)}),g=[],y=0,v=!1,b=[],w=r.link(e,t);e.$watch("key",p),e.$watch("domainObject",p),e.$on("$destroy",l),e.$on("$destroy",function(){h&&h()}),p()}var c={};return e.concat(t).forEach(function(e){var t=e.key;c[t]=c[t]||[],c[e.key].push(e)}),{restrict:"E",link:a,priority:-1e3,scope:{key:"=",domainObject:"=mctObject",ngModel:"=",parameters:"="}}}return e}),n("platform/representation/src/gestures/GestureConstants",{MCT_DRAG_TYPE:"mct-domain-object-id",MCT_EXTENDED_DRAG_TYPE:"mct-domain-object",MCT_MENU_DIMENSIONS:[170,200],MCT_DROP_EVENT:"mctDrop"}),n("platform/representation/src/gestures/DragGesture",["./GestureConstants"],function(e){function t(t,n,i,r){function o(i){var o=(i||{}).originalEvent||i;t.debug("Initiating drag");try{o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("text/plain",JSON.stringify({id:r.getId(),model:r.getModel()})),o.dataTransfer.setData(e.MCT_DRAG_TYPE,r.getId()),n.setData(e.MCT_EXTENDED_DRAG_TYPE,r),n.setData(e.MCT_DRAG_TYPE,r.getId())}catch(s){t.warn(["Could not initiate drag due to ",s.message].join(""))}}function s(){n.removeData(e.MCT_DRAG_TYPE),n.removeData(e.MCT_EXTENDED_DRAG_TYPE)}t.debug("Attaching drag gesture"),i.attr("draggable","true"),i.on("dragstart",o),i.on("dragend",s),this.element=i,this.startDragCallback=o,this.endDragCallback=s}return t.prototype.destroy=function(){this.element.removeAttr("draggable"),this.element.off("dragstart",this.startDragCallback),this.element.off("dragend",this.endDragCallback)},t}),n("platform/representation/src/gestures/DropGesture",["./GestureConstants"],function(e){function t(t,n,i,r){function o(t,n){var r,o=i.scope&&i.scope();o&&o.$broadcast&&(r=i[0].getBoundingClientRect(),o.$broadcast(e.MCT_DROP_EVENT,t,{x:n.pageX-r.left,y:n.pageY-r.top}))}function s(n){var i=(n||{}).originalEvent||n,r=t.getData(e.MCT_EXTENDED_DRAG_TYPE);return r&&(c=l.getActions({key:"compose",selectedObject:r})[0])?(i.dataTransfer.dropEffect="move",i.preventDefault(),!1):void 0}function a(t){var i=(t||{}).originalEvent||t,r=i.dataTransfer.getData(e.MCT_DRAG_TYPE);r&&(t.preventDefault(),n.when(c&&c.perform()).then(function(){o(r,i)}))}var c,l=r.getCapability("action");l&&(i.on("dragover",s),i.on("drop",a)),this.element=i,this.dragOverCallback=s,this.dropCallback=a}return t.prototype.destroy=function(){this.element.off("dragover",this.dragOverCallback),this.element.off("drop",this.dropCallback)},t}),n("platform/representation/src/gestures/ContextMenuGesture",[],function(){function e(e,t,n,i){function r(e){i.getCapability("action").perform({key:"menu",domainObject:i,event:e})}var o,s=500;t.isMobile()?t.isMobile()&&(n.on("touchstart",function(t){t.touches.length<2&&(o=!0,e(function(){o&&r(t)},s))}),n.on("touchend",function(){o=!1})):n.on("contextmenu",r),this.showMenuCallback=r,this.element=n}return e.prototype.destroy=function(){this.element.off("contextmenu",this.showMenu)},e}),n("platform/representation/src/gestures/GestureProvider",[],function(){function e(e){var t={};e.forEach(function(e){t[e.key]=t[e.key]||e}),this.gestureMap=t}function t(e){e&&e.destroy&&e.destroy()}return e.prototype.attachGestures=function(e,n,i){var r=this.gestureMap,o=i.map(function(e){return r[e]}).filter(function(e){return void 0!==e&&(e.appliesTo?e.appliesTo(n):!0)}).map(function(t){return new t(e,n)});return{destroy:function(){o.forEach(t)}}},e}),n("platform/representation/src/gestures/GestureRepresenter",[],function(){function e(e,t,n){this.gestureService=e,this.element=n}return e.prototype.represent=function(e,t){this.destroy(),this.gestureHandle=this.gestureService.attachGestures(this.element,t,(e||{}).gestures||[])},e.prototype.destroy=function(){this.gestureHandle&&this.gestureHandle.destroy()},e}),n("platform/representation/src/services/DndService",[],function(){function e(e){var t={};return{setData:function(n,i){e.debug("Setting drag data for "+n),t[n]=i},getData:function(e){return t[e]},removeData:function(n){e.debug("Clearing drag data for "+n),delete t[n]}}}return e}),n("platform/representation/src/TemplateLinker",[],function(){function e(e,t,n,i){this.$templateRequest=e,this.$sce=t,this.$compile=n,this.$log=i}return e.prototype.load=function(e){return this.$templateRequest(this.$sce.trustAsResourceUrl(e),!1)},e.prototype.getPath=function(e){return[e.bundle.path,e.bundle.resources,e.templateUrl].join("/")},e.prototype.link=function(e,t,n){function i(){p&&(p.$destroy(),p=void 0)}function r(){f!==h&&(i(),f.replaceWith(h),f=h)}function o(){f!==t&&(f.replaceWith(t),f=t,f.empty())}function s(n){i(),p=e.$new(!1),t.html(n),m.$compile(t.contents())(p)}function a(e){o(),s(e),d=void 0}function c(e){m.$log.warn("Couldn't load template at "+e),r()}function l(e){e?(i(),o(),m.load(e).then(function(t){e===d&&s(t)},function(){c(e)})):r(),d=e}function u(e){e=e||{},e.templateUrl?l(m.getPath(e)):e.template?a(e.template):r()}var d,p,f=t,h=this.$compile("<!-- hidden mct element -->")(e),m=this;return u(n),u},e}),n("platform/representation/src/actions/ContextMenuAction",["../gestures/GestureConstants"],function(e){function t(e,t,n,i,r,o){this.$compile=e,this.agentService=r,this.actionContext=o,this.popupService=i,this.getDocument=function(){return t},this.getRootScope=function(){return n}}var n,i='<mct-representation key="\'context-menu\'" mct-object="domainObject" ng-class="menuClass" ng-style="menuStyle"></mct-representation>';return t.prototype.perform=function(){function t(){o&&(o.dismiss(),o=void 0),f.$destroy(),p.off("mousedown",t),n=void 0}var r,o,s=this.$compile,a=this.getDocument(),c=this.getRootScope(),l=this.actionContext,u=[l.event.pageX,l.event.pageY],d=e.MCT_MENU_DIMENSIONS,p=a.find("body"),f=c.$new(),h=this.agentService.isMobile()?"touchstart":"mousedown";n&&n(),n=t,f.domainObject=l.domainObject,f.menuClass={"context-menu-holder":!0},r=s(i)(f),o=this.popupService.display(r,u,{marginX:-d[0],marginY:-d[1]}),f.menuClass["go-left"]=o.goesLeft(),f.menuClass["go-up"]=o.goesUp(),r.on(h,function(e){e.stopPropagation()}),p.on(h,t),r.on("click",t),l.event.preventDefault()},t}),n("platform/representation/src/TemplatePrefetcher",[],function(){function e(e){Array.prototype.slice.apply(arguments,[1]).reduce(function(e,t){return e.concat(t)},[]).forEach(function(t){t.templateUrl&&e.load(e.getPath(t))})}return e}),n("platform/representation/bundle",["./src/MCTInclude","./src/MCTRepresentation","./src/gestures/DragGesture","./src/gestures/DropGesture","./src/gestures/ContextMenuGesture","./src/gestures/GestureProvider","./src/gestures/GestureRepresenter","./src/services/DndService","./src/TemplateLinker","./src/actions/ContextMenuAction","./src/TemplatePrefetcher","legacyRegistry"],function(e,t,n,i,r,o,s,a,c,l,u,d){d.register("platform/representation",{extensions:{directives:[{key:"mctInclude",implementation:e,depends:["templates[]","templateLinker"]},{key:"mctRepresentation",implementation:t,depends:["representations[]","views[]","representers[]","$q","templateLinker","$log"]}],gestures:[{key:"drag",implementation:n,depends:["$log","dndService"]},{key:"drop",implementation:i,depends:["dndService","$q"]},{key:"menu",implementation:r,depends:["$timeout","agentService"]}],components:[{provides:"gestureService",type:"provider",implementation:o,depends:["gestures[]"]}],representers:[{implementation:s,depends:["gestureService"]}],services:[{key:"dndService",implementation:a,depends:["$log"]},{key:"templateLinker",implementation:c,depends:["$templateRequest","$sce","$compile","$log"],comment:"For internal use by mct-include and mct-representation."}],actions:[{key:"menu",implementation:l,depends:["$compile","$document","$rootScope","popupService","agentService"]}],runs:[{priority:"mandatory",implementation:u,depends:["templateLinker","templates[]","views[]","representations[]","controls[]","containers[]"]}]}})}),n("platform/search/src/controllers/SearchController",[],function(){function e(e,t){var n=this;this.$scope=e,this.searchService=t,this.numberToDisplay=this.RESULTS_PER_PAGE,this.availabileResults=0,this.$scope.results=[],this.$scope.loading=!1,this.pendingQuery=void 0,this.$scope.ngModel.filter=function(){return n.onFilterChange.apply(n,arguments)}}return e.prototype.RESULTS_PER_PAGE=20,e.prototype.areMore=function(){return this.$scope.results.length<this.availableResults},e.prototype.loadMore=function(){this.numberToDisplay+=this.RESULTS_PER_PAGE,this.dispatchSearch()},e.prototype.search=function(){var e=this.$scope.ngModel.input;return this.clearResults(),e?(this.$scope.loading=!0,this.$scope.ngModel.search=!0,void this.dispatchSearch()):(this.pendingQuery=void 0,this.$scope.ngModel.search=!1,void(this.$scope.loading=!1))},e.prototype.dispatchSearch=function(){var e=this.$scope.ngModel.input,t=this,n=e+this.numberToDisplay;this.pendingQuery!==n&&(this.pendingQuery=n,this.searchService.query(e,this.numberToDisplay,this.filterPredicate()).then(function(e){t.pendingQuery===n&&t.onSearchComplete(e)}))},e.prototype.filter=e.prototype.onFilterChange,e.prototype.onFilterChange=function(){this.pendingQuery=void 0,this.search()},e.prototype.filterPredicate=function(){if(this.$scope.ngModel.checkAll)return function(){return!0};var e=this.$scope.ngModel.checked;return function(t){return!!e[t.type]}},e.prototype.clearResults=function(){this.$scope.results=[],this.availableResults=0,this.numberToDisplay=this.RESULTS_PER_PAGE},e.prototype.onSearchComplete=function(e){this.availableResults=e.total,this.$scope.results=e.hits,this.$scope.loading=!1,this.pendingQuery=void 0},e}),n("platform/search/src/controllers/SearchMenuController",[],function(){function e(e,t){function n(){var t,n;if(e.ngModel.checkAll)for(t in e.ngModel.checked)e.ngModel.checked[t]&&(e.ngModel.checkAll=!1);if(e.ngModel.filtersString="",!e.ngModel.checkAll){for(n=0;n<e.ngModel.types.length;n+=1)e.ngModel.checked[e.ngModel.types[n].key]&&(""===e.ngModel.filtersString?e.ngModel.filtersString+=e.ngModel.types[n].name:e.ngModel.filtersString+=", "+e.ngModel.types[n].name);""===e.ngModel.filtersString&&(e.ngModel.checkAll=!0)}e.ngModel.filter()}function i(){Object.keys(e.ngModel.checked).forEach(function(t){e.ngModel.checked[t]=!1}),e.ngModel.filtersString="",e.ngModel.checkAll||(e.ngModel.checkAll=!0),e.ngModel.filter()}return e.ngModel.types=[],e.ngModel.checked={},e.ngModel.checkAll=!0,e.ngModel.filtersString="",t.forEach(function(t){t.key&&t.name&&"root"!==t.key&&(e.ngModel.types.push(t),e.ngModel.checked[t.key]=!1)}),{updateOptions:n,checkAll:i}}return e}),n("platform/search/src/services/GenericSearchProvider",[],function(){function e(e,t,n,i,r,o){var s=this;this.$q=e,this.$log=t,this.modelService=n,this.indexedIds={},this.idsToIndex=[],this.pendingIndex={},this.pendingRequests=0,this.pendingQueries={},this.worker=this.startWorker(i),this.indexOnMutation(r),o.forEach(function(e){s.scheduleForIndexing(e)})}return e.prototype.MAX_CONCURRENT_REQUESTS=100,e.prototype.query=function(e,t){var n=this.dispatchSearch(e,t),i=this.$q.defer();return this.pendingQueries[n]=i,i.promise},e.prototype.startWorker=function(e){var t=e.run("genericSearchWorker"),n=this;return t.addEventListener("message",function(e){n.onWorkerMessage(e)}),t},e.prototype.indexOnMutation=function(e){var t=e("mutation"),n=this;t.listen(function(e){var t=e.getCapability("editor");t&&t.inEditContext()||n.index(e.getId(),e.getModel())})},e.prototype.scheduleForIndexing=function(e){this.indexedIds[e]||this.pendingIndex[e]||(this.indexedIds[e]=!0,this.pendingIndex[e]=!0,this.idsToIndex.push(e)),this.keepIndexing()},e.prototype.keepIndexing=function(){for(;this.pendingRequests<this.MAX_CONCURRENT_REQUESTS&&this.idsToIndex.length;)this.beginIndexRequest()},e.prototype.index=function(e,t){var n=this;this.worker.postMessage({request:"index",model:t,id:e}),Array.isArray(t.composition)&&t.composition.forEach(function(e){n.scheduleForIndexing(e)})},e.prototype.beginIndexRequest=function(){var e=this.idsToIndex.shift(),t=this;this.pendingRequests+=1,this.modelService.getModels([e]).then(function(n){delete t.pendingIndex[e],n[e]&&t.index(e,n[e])},function(){t.$log.warn("Failed to index domain object "+e)}).then(function(){setTimeout(function(){t.pendingRequests-=1,t.keepIndexing()},0)})},e.prototype.onWorkerMessage=function(e){if("search"===e.data.request){var t=this.pendingQueries[e.data.queryId],n={total:e.data.total};n.hits=e.data.results.map(function(e){return{id:e.item.id,model:e.item.model,score:e.matchCount}}),t.resolve(n),delete this.pendingQueries[e.data.queryId]}},e.prototype.makeQueryId=function(){for(var e=Math.ceil(1e5*Math.random());this.pendingQueries[e];)e=Math.ceil(1e5*Math.random());return e},e.prototype.dispatchSearch=function(e,t){var n=this.makeQueryId();return this.worker.postMessage({request:"search",input:e,maxResults:t,queryId:n}),n},e}),n("platform/search/src/services/SearchAggregator",[],function(){function e(e,t,n){this.$q=e,this.objectService=t,this.providers=n}return e.prototype.DEFAULT_MAX_RESULTS=100,e.prototype.FUDGE_FACTOR=5,e.prototype.query=function(e,t,n){var i,r=this;return t||(t=this.DEFAULT_MAX_RESULTS),i=this.providers.map(function(n){return n.query(e,t*r.FUDGE_FACTOR)}),this.$q.all(i).then(function(e){var t={hits:[],total:0};return e.forEach(function(e){t.hits=t.hits.concat(e.hits),t.total+=e.total}),t=r.orderByScore(t),t=r.applyFilter(t,n),t=r.removeDuplicates(t),r.asObjectResults(t)})},e.prototype.orderByScore=function(e){return e.hits.sort(function(e,t){return e.score>t.score?-1:t.score>e.score?1:0}),e},e.prototype.applyFilter=function(e,t){if(!t)return e;var n,i,r=e.hits.length;return e.hits=e.hits.filter(function(e){return t(e.model)}),n=e.hits.length,i=r-n,e.total-=i,e},e.prototype.removeDuplicates=function(e){var t={};return e.hits=e.hits.filter(function(n){return t[n.id]?(e.total-=1,!1):(t[n.id]=!0,!0)}),e},e.prototype.asObjectResults=function(e){var t=e.hits.map(function(e){return e.id});return this.objectService.getObjects(t).then(function(t){var n={total:e.total};return n.hits=e.hits.map(function(e){return{id:e.id,object:t[e.id],score:e.score}}),n})},e}),n("text!platform/search/res/templates/search-item.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n\n<div class="search-result-item l-flex-row flex-elem grows"\n     ng-class="{selected: ngModel.selectedObject.getId() === domainObject.getId()}">\n    <mct-representation key="\'label\'"\n                        mct-object="domainObject"\n                        ng-model="ngModel"\n                        ng-click="ngModel.allowSelection(domainObject) && ngModel.onSelection(domainObject)"\n                        class="l-flex-row flex-elem grows">\n    </mct-representation>\n</div>\n'}),n("text!platform/search/res/templates/search.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n-->\n<div class="angular-w" ng-controller="SearchController as controller">\n    <div class="l-flex-col flex-elem grows holder holder-search" ng-controller="SearchMenuController as menuController">\n        <div class="search-bar flex-elem l-flex-row"\n             ng-controller="ToggleController as toggle"\n             ng-class="{ holder: !(ngModel.input === \'\' || ngModel.input === undefined) }">\n            <div class="holder flex-elem grows">\n                <input class="search-input"\n                       type="text"\n                       ng-model="ngModel.input"\n                       ng-keyup="controller.search()"/>\n                <a class="clear-icon clear-input icon-x-in-circle"\n                   ng-class="{show: !(ngModel.input === \'\' || ngModel.input === undefined)}"\n                   ng-click="ngModel.input = \'\'; controller.search()"></a>\n\n                <!-- To prevent double triggering of clicks on click away, render\n                non-clickable version of the button when menu active-->\n                <a ng-if="!toggle.isActive()" class="menu-icon context-available"\n                   ng-click="toggle.toggle()"></a>\n                <a ng-if="toggle.isActive()" class="menu-icon context-available"></a>\n\n                <mct-include key="\'search-menu\'"\n                             class="menu-element search-menu-holder"\n                             ng-class="{off: !toggle.isActive()}"\n                             ng-model="ngModel"\n                             parameters="{menuVisible: toggle.setState}">\n                </mct-include>\n            </div>\n\n            <a class="holder s-button flex-elem btn-cancel"\n               ng-show="!(ngModel.input === \'\' || ngModel.input === undefined)"\n               ng-click="ngModel.input = \'\'; ngModel.checkAll = true; menuController.checkAll(); controller.search()">\n                Cancel</a>\n        </div>\n\n        <div class="active-filter-display flex-elem holder"\n             ng-class="{off: ngModel.filtersString === \'\' || ngModel.filtersString === undefined || !ngModel.search}">\n            <a class="clear-filters icon-x-in-circle s-icon-button"\n               ng-click="ngModel.checkAll = true; menuController.checkAll()"></a>Filtered by: {{ ngModel.filtersString }}\n        </div>\n\n        <div class="flex-elem holder results-msg" ng-model="ngModel" ng-show="!loading && ngModel.search">\n            {{\n                !results.length > 0? \'No results found\':\n                    results.length + \' result\' + (results.length > 1? \'s\':\'\') + \' found\'\n            }}\n        </div>\n\n        <div class="search-results flex-elem holder grows vscroll"\n             ng-class="{ off: !(loading || results.length > 0), loading: loading }">\n            <mct-representation key="\'search-item\'"\n                                ng-repeat="result in results"\n                                mct-object="result.object"\n                                ng-model="ngModel"\n                                class="l-flex-row flex-elem grows">\n            </mct-representation>\n            <a class="load-more-button s-button vsm" ng-if="controller.areMore()" ng-click="controller.loadMore()">More Results</a>\n        </div>\n    </div>\n</div>'}),n("text!platform/search/res/templates/search-menu.html",[],function(){return'<!--\n Open MCT, Copyright (c) 2014-2016, United States Government\n as represented by the Administrator of the National Aeronautics and Space\n Administration. All rights reserved.\n\n Open MCT is licensed under the Apache License, Version 2.0 (the\n "License"); you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0.\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n License for the specific language governing permissions and limitations\n under the License.\n\n Open MCT includes source code licensed under additional open source\n licenses. See the Open Source Licenses file (LICENSES.md) included with\n this source code distribution or the Licensing information page available\n at runtime from the About dialog for additional information.\n--> \n\n<div ng-controller="SearchMenuController as controller">\n\n    <div class="menu checkbox-menu"\n         mct-click-elsewhere="parameters.menuVisible(false)">\n        <ul>\n            <!-- First element is special - it\'s a reset option -->\n            <li class="search-menu-item special icon-asterisk"\n                title="Select all filters"\n                ng-click="ngModel.checkAll = !ngModel.checkAll; controller.checkAll()">\n                <label class="checkbox custom no-text">\n                    <input type="checkbox"\n                           class="checkbox"\n                           ng-model="ngModel.checkAll"\n                           ng-change="controller.checkAll()" />\n                    <em></em>\n                </label>\n				All\n            </li>\n\n            <!-- The filter options, by type -->\n            <li class="search-menu-item {{ type.cssClass }}"\n                ng-repeat="type in ngModel.types"\n                ng-click="ngModel.checked[type.key] = !ngModel.checked[type.key]; controller.updateOptions()">\n\n                <label class="checkbox custom no-text">\n                    <input type="checkbox"\n                           class="checkbox"\n                           ng-model="ngModel.checked[type.key]"\n                           ng-change="controller.updateOptions()" />\n                    <em></em>\n                </label>\n				{{ type.name }}\n            </li>\n        </ul>\n    </div>\n</div>'}),n("text!platform/search/src/services/GenericSearchWorker.js",[],function(){return"/*****************************************************************************\n * Open MCT, Copyright (c) 2014-2016, United States Government\n * as represented by the Administrator of the National Aeronautics and Space\n * Administration. All rights reserved.\n *\n * Open MCT is licensed under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * http://www.apache.org/licenses/LICENSE-2.0.\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n *\n * Open MCT includes source code licensed under additional open source\n * licenses. See the Open Source Licenses file (LICENSES.md) included with\n * this source code distribution or the Licensing information page available\n * at runtime from the About dialog for additional information.\n *****************************************************************************/\n\n/*global self*/\n\n/**\n * Module defining GenericSearchWorker. Created by shale on 07/21/2015.\n */\n(function () {\n\n    // An array of objects composed of domain object IDs and models\n    // {id: domainObject's ID, model: domainObject's model}\n    var indexedItems = [],\n        TERM_SPLITTER = /[ _\\*]/;\n\n    function indexItem(id, model) {\n        var vector = {\n            name: model.name\n        };\n        vector.cleanName = model.name.trim();\n        vector.lowerCaseName = vector.cleanName.toLocaleLowerCase();\n        vector.terms = vector.lowerCaseName.split(TERM_SPLITTER);\n\n        indexedItems.push({\n            id: id,\n            vector: vector,\n            model: model\n        });\n    }\n\n    // Helper function for search()\n    function convertToTerms(input) {\n        var query = {\n                exactInput: input\n            };\n        query.inputClean = input.trim();\n        query.inputLowerCase = query.inputClean.toLocaleLowerCase();\n        query.terms = query.inputLowerCase.split(TERM_SPLITTER);\n        query.exactTerms = query.inputClean.split(TERM_SPLITTER);\n        return query;\n    }\n\n    /**\n     * Gets search results from the indexedItems based on provided search\n     *   input. Returns matching results from indexedItems\n     *\n     * @param data An object which contains:\n     *           * input: The original string which we are searching with\n     *           * maxResults: The maximum number of search results desired\n     *           * queryId: an id identifying this query, will be returned.\n     */\n    function search(data) {\n        // This results dictionary will have domain object ID keys which\n        // point to the value the domain object's score.\n        var results,\n            input = data.input,\n            query = convertToTerms(input),\n            message = {\n                request: 'search',\n                results: {},\n                total: 0,\n                queryId: data.queryId\n            },\n            matches = {};\n\n        if (!query.inputClean) {\n            // No search terms, no results;\n            return message;\n        }\n\n        // Two phases: find matches, then score matches.\n        // Idea being that match finding should be fast, so that future scoring\n        // operations process fewer objects.\n\n        query.terms.forEach(function findMatchingItems(term) {\n            indexedItems\n                .filter(function matchesItem(item) {\n                    return item.vector.lowerCaseName.indexOf(term) !== -1;\n                })\n                .forEach(function trackMatch(matchedItem) {\n                    if (!matches[matchedItem.id]) {\n                        matches[matchedItem.id] = {\n                            matchCount: 0,\n                            item: matchedItem\n                        };\n                    }\n                    matches[matchedItem.id].matchCount += 1;\n                });\n        });\n\n        // Then, score matching items.\n        results = Object\n            .keys(matches)\n            .map(function asMatches(matchId) {\n                return matches[matchId];\n            })\n            .map(function prioritizeExactMatches(match) {\n                if (match.item.vector.name === query.exactInput) {\n                    match.matchCount += 100;\n                } else if (match.item.vector.lowerCaseName ===\n                           query.inputLowerCase) {\n                    match.matchCount += 50;\n                }\n                return match;\n            })\n            .map(function prioritizeCompleteTermMatches(match) {\n                match.item.vector.terms.forEach(function (term) {\n                    if (query.terms.indexOf(term) !== -1) {\n                        match.matchCount += 0.5;\n                    }\n                });\n                return match;\n            })\n            .sort(function compare(a, b) {\n                if (a.matchCount > b.matchCount) {\n                    return -1;\n                }\n                if (a.matchCount < b.matchCount) {\n                    return 1;\n                }\n                return 0;\n            });\n\n        message.total = results.length;\n        message.results = results\n            .slice(0, data.maxResults);\n\n        return message;\n    }\n\n    self.onmessage = function (event) {\n        if (event.data.request === 'index') {\n            indexItem(event.data.id, event.data.model);\n        } else if (event.data.request === 'search') {\n            self.postMessage(search(event.data));\n        }\n    };\n}());\n";
}),n("platform/search/bundle",["./src/controllers/SearchController","./src/controllers/SearchMenuController","./src/services/GenericSearchProvider","./src/services/SearchAggregator","text!./res/templates/search-item.html","text!./res/templates/search.html","text!./res/templates/search-menu.html","text!./src/services/GenericSearchWorker.js","legacyRegistry"],function(e,t,n,i,r,o,s,a,c){c.register("platform/search",{name:"Search",description:"Allows the user to search through the file tree.",extensions:{constants:[{key:"GENERIC_SEARCH_ROOTS",value:["ROOT"],priority:"fallback"}],controllers:[{key:"SearchController",implementation:e,depends:["$scope","searchService"]},{key:"SearchMenuController",implementation:t,depends:["$scope","types[]"]}],representations:[{key:"search-item",template:r}],templates:[{key:"search",template:o},{key:"search-menu",template:s}],components:[{provides:"searchService",type:"provider",implementation:n,depends:["$q","$log","modelService","workerService","topic","GENERIC_SEARCH_ROOTS"]},{provides:"searchService",type:"aggregator",implementation:i,depends:["$q","objectService"]}],workers:[{key:"genericSearchWorker",scriptText:a}]}})}),n("platform/status/src/StatusConstants",{CSS_CLASS_PREFIX:"s-status-",TOPIC_PREFIX:"status:"}),n("platform/status/src/StatusRepresenter",["./StatusConstants"],function(e){function t(e,t){this.element=t,this.lastClasses=[]}var n=e.CSS_CLASS_PREFIX;return t.prototype.clearClasses=function(){var e=this.element;this.lastClasses.forEach(function(t){e.removeClass(t)})},t.prototype.represent=function(e,t){function i(e){var t=e.map(function(e){return n+e});r.clearClasses(),t.forEach(function(e){r.element.addClass(e)}),r.lastClasses=t}var r=this,o=t.getCapability("status");i(o.list()),this.unlisten=o.listen(i)},t.prototype.destroy=function(){this.clearClasses(),this.unlisten&&(this.unlisten(),this.unlisten=void 0)},t}),n("platform/status/src/StatusCapability",[],function(){function e(e,t){this.statusService=e,this.domainObject=t}return e.prototype.list=function(){return this.statusService.listStatuses(this.domainObject.getId())},e.prototype.get=function(e){return-1!==this.list().indexOf(e)},e.prototype.set=function(e,t){return this.statusService.setStatus(this.domainObject.getId(),e,t)},e.prototype.listen=function(e){return this.statusService.listen(this.domainObject.getId(),e)},e}),n("platform/status/src/StatusService",["./StatusConstants"],function(e){function t(e){this.statusTable={},this.topic=e}var n=e.TOPIC_PREFIX;return t.prototype.listStatuses=function(e){return this.statusTable[e]||[]},t.prototype.setStatus=function(e,t,i){this.statusTable[e]=this.statusTable[e]||[],this.statusTable[e]=this.statusTable[e].filter(function(e){return e!==t}),i&&this.statusTable[e].push(t),this.topic(n+e).notify(this.statusTable[e])},t.prototype.listen=function(e,t){return this.topic(n+e).listen(t)},t}),n("platform/status/bundle",["./src/StatusRepresenter","./src/StatusCapability","./src/StatusService","legacyRegistry"],function(e,t,n,i){i.register("platform/status",{extensions:{representers:[{implementation:e}],capabilities:[{key:"status",implementation:t,depends:["statusService"]}],services:[{key:"statusService",implementation:n,depends:["topic"]}]}})}),n("platform/telemetry/src/TelemetryAggregator",[],function(){function e(e,t){this.$q=e,this.telemetryProviders=t}function t(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}return e.prototype.requestTelemetry=function(e){return this.$q.all(this.telemetryProviders.map(function(t){return t.requestTelemetry(e)})).then(t)},e.prototype.subscribe=function(e,t){var n=this.telemetryProviders.map(function(n){return n.subscribe(e,t)});return function(){n.forEach(function(e){e&&e()})}},e}),n("platform/telemetry/src/TelemetryController",[],function(){function e(e,t,n,i){function r(){m.broadcasting||(m.broadcasting=!0,n(function(){m.broadcasting=!1,e.$broadcast("telemetryUpdate")}))}function o(e,n){function o(e){m.pending-=n?1:0,s.data=e,r()}var s=m.response[e],a=s.domainObject,c=a.getCapability("telemetry");return m.pending+=n?1:0,c?t.when(c.requestData(m.request)).then(o):(i.warn(["Expected telemetry capability for ",e," but found none. Cannot request data."].join("")),void(m.pending-=n?1:0))}function s(e){return t.all(m.ids.map(function(t){return o(t,e)}))}function a(e,t){return e.subscribe(function(){o(t,!1)})}function c(){m.subscriptions.forEach(function(e){return e&&e()}),m.subscriptions=[]}function l(e){return e?t.when(e.useCapability("delegation","telemetry")).then(function(t){var n=e.hasCapability("telemetry")?[e]:[],i=t||[];return n.concat(i)}):t.when([])}function u(e){var t,n,r=e&&e.getCapability("telemetry");r?(t=e.getId(),m.subscriptions.push(a(r,t)),n=r.getMetadata(),m.response[t]={name:e.getModel().name,domainObject:e,metadata:n,pending:0,data:{}}):(i.warn(["Expected telemetry capability for ",e.getId()," but none was found."].join("")),m.response[e.getId()]={name:e.getModel().name,domainObject:e,metadata:{},pending:0,data:{}})}function d(e){c(),e.forEach(u),m.telemetryObjects=e,m.ids=e.map(function(e){return e.getId()}),m.metadatas=m.ids.map(function(e){return m.response[e].metadata}),m.request&&s(!0)}function p(e){c(),l(e).then(d)}function f(){m.refreshing||void 0===m.interval||(m.refreshing=!0,n(function(){m.request&&s(!1),m.refreshing=!1,m.active&&f()},m.interval))}function h(){c(),m.active=!1}var m={ids:[],response:{},request:{},pending:0,metadatas:[],interval:1e3,refreshing:!1,broadcasting:!1,subscriptions:[],telemetryObjects:[],active:!0};return e.$watch("domainObject",p),e.$on("$destroy",h),f(),{getMetadata:function(){return m.metadatas},getTelemetryObjects:function(){return m.telemetryObjects},getResponse:function g(e){var t=e&&("string"==typeof e?e:e.getId());return t?(m.response[t]||{}).data:(m.ids||[]).map(g)},isRequestPending:function(){return m.pending>0},requestData:function(e){return m.request=e||{},s(!0)},setRefreshInterval:function(e){m.interval=e,f()}}}return e}),n("platform/telemetry/src/TelemetryCapability",["../../../src/api/objects/object-utils"],function(e){function t(e,t,n,i,r){this.initializeTelemetryService=function(){try{return this.telemetryService=t.get("telemetryService")}catch(e){return i.warn("Telemetry service unavailable"),this.telemetryService=null}},this.openmct=e,this.$q=n,this.$log=i,this.domainObject=r}function n(e,t,n){return{getRangeValue:function(t,i){return e[t][i||n]},getDomainValue:function(n,i){return e[n][i||t]},getPointCount:function(){return e.length}}}var i=function(){return 0},r={getPointCount:i,getDomainValue:i,getRangeValue:i};return t.prototype.buildRequest=function(e){var t=this.domainObject,n=t.getCapability("type"),i=n&&n.getDefinition().telemetry||{},r=t.getModel().telemetry,o=Object.create(i);return Object.keys(r).forEach(function(e){o[e]=r[e]}),Object.keys(e).forEach(function(t){o[t]=e[t]}),o.id||(o.id=t.getId()),o.key||(o.key=t.getId()),o},t.prototype.requestData=function(t){function i(e){return((e||{})[a]||{})[c]||r}function o(){return l.requestTelemetry([s])}var s=this.buildRequest(t||{}),a=s.source,c=s.key,l=this.telemetryService||this.initializeTelemetryService(),u=e.toNewFormat(this.domainObject.getModel(),this.domainObject.getId()),d=this.openmct.telemetry,p=d.getMetadata(u),f=(p.valuesForHints(["domain"])[0]||{}).key,h=(p.valuesForHints(["range"])[0]||{}).key,m=d.findRequestProvider(u)===d.legacyProvider;return m?l&&o().then(i):d.request(u,s).then(function(e){return n(e,f,h)})},t.prototype.getMetadata=function(){return this.metadata=this.metadata||this.buildRequest({})},t.prototype.subscribe=function(t,i){function r(e){t(n([e],d,p))}function o(e){var n=s.source,i=s.key,r=((e||{})[n]||{})[i];r&&t(r)}var s=this.buildRequest(i||{}),a=this.telemetryService||this.initializeTelemetryService(),c=e.toNewFormat(this.domainObject.getModel(),this.domainObject.getId()),l=this.openmct.telemetry,u=l.getMetadata(c),d=(u.valuesForHints(["domain"])[0]||{}).key,p=(u.valuesForHints(["range"])[0]||{}).key,f=l.findSubscriptionProvider(c)===l.legacyProvider;return f?a&&a.subscribe(o,[s]):l.subscribe(c,r,s)},t.appliesTo=function(e){return e&&e.telemetry?!0:!1},t}),n("platform/telemetry/src/TelemetryFormatter",[],function(){function e(e,t){this.formatService=e,this.defaultFormat=e.getFormat(t)}return e.prototype.formatDomainValue=function(e,t){var n=void 0===t?this.defaultFormat:this.formatService.getFormat(t);return isNaN(e)?"":n.format(e)},e.prototype.formatRangeValue=function(e,t){return String(e)},e}),n("platform/telemetry/src/TelemetryQueue",[],function(){function e(){this.queue=[],this.counts={}}return e.prototype.isEmpty=function(){return this.queue.length<1},e.prototype.poll=function(){function e(e){t[e]<2?delete t[e]:t[e]-=1}var t=this.counts;return Object.keys(t).forEach(e),this.queue.shift()},e.prototype.put=function(e,t){function n(e){var t,n=r[e]||0;return r[e]=n+1,n<i.length?i[n]:(t={},i.push(t),t)}var i=this.queue,r=this.counts;n(e)[e]=t},e}),n("platform/telemetry/src/TelemetryTable",[],function(){function e(){}return e.prototype.isEmpty=function(){return!this.table},e.prototype.poll=function(){var e=this.table;return this.table=void 0,e},e.prototype.put=function(e,t){this.table=this.table||{},this.table[e]=t},e}),n("platform/telemetry/src/TelemetryDelegator",[],function(){function e(e){this.$q=e}return e.prototype.promiseTelemetryObjects=function(e){var t=this.$q;return e?t.when(e.useCapability("delegation","telemetry")).then(function(t){var n=e.hasCapability("telemetry")?[e]:[],i=t||[];return n.concat(i)}):t.when([])},e}),n("platform/telemetry/src/TelemetrySubscription",["./TelemetryQueue","./TelemetryTable","./TelemetryDelegator"],function(e,t,n){function i(i,r,o,s,a){function c(e){return x.promiseTelemetryObjects(e)}function l(){var e=C.poll();Object.keys(e).forEach(function(t){S.latestValues[t]=e[t]})}function u(){for(;!C.isEmpty();)l(),s&&s();w=!1}function d(e){var t=e.getCapability("telemetry");return t&&t.getMetadata()}function p(e,t){var n=t&&t.getPointCount();!w&&n&&(w=!0,r(u,0)),n>0&&C.put(e.getId(),{domain:t.getDomainValue(n-1),range:t.getRangeValue(n-1),datum:S.makeDatum(e,t,n-1)})}function f(e){var t=e.getCapability("telemetry");return t.subscribe(function(t){p(e,t)})}function h(e){return e.map(f)}function m(e){return S.telemetryObjects=e,S.metadatas=e.map(d),S.metadataById={},e.forEach(function(e,t){S.metadataById[e.getId()]=S.metadatas[t]}),s&&s(),e}function g(){S.telemetryObjectPromise=c(o),S.unsubscribePromise=S.telemetryObjectPromise.then(m).then(h)}function y(e){return e.length===S.telemetryObjects.length&&e.every(function(e,t){return S.telemetryObjects[t].getId()===e})}function v(e){y((e||{}).composition||[])||S.unsubscribeAll().then(g)}function b(){var e=o&&o.getCapability("mutation");return e?e.listen(v):void 0}var w,S=this,x=new n(i),C=a?new e:new t;this.$q=i,this.latestValues={},this.telemetryObjects=[],this.metadatas=[],g(),this.unlistenToMutation=b()}return i.prototype.makeDatum=function(e,t,n){var i=e&&e.getId(),r=i&&this.metadataById[i]||{},o={};return(r.domains||[]).forEach(function(e){o[e.key]=t.getDomainValue(n,e.key)}),(r.ranges||[]).forEach(function(e){o[e.key]=t.getRangeValue(n,e.key)}),o},i.prototype.unsubscribeAll=function(){var e=this.$q;return this.unsubscribePromise.then(function(t){return e.all(t.map(function(e){return e()}))})},i.prototype.unsubscribe=function(){return this.unlistenToMutation&&this.unlistenToMutation(),this.unsubscribeAll()},i.prototype.getDomainValue=function(e,t){var n=e.getId(),i=this.latestValues[n];return i&&(t?i.datum[t]:i.domain)},i.prototype.getRangeValue=function(e,t){var n=e.getId(),i=this.latestValues[n];return i&&(t?i.datum[t]:i.range)},i.prototype.getDatum=function(e){var t=e.getId();return(this.latestValues[t]||{}).datum},i.prototype.getTelemetryObjects=function(){return this.telemetryObjects},i.prototype.getMetadata=function(){return this.metadatas},i.prototype.promiseTelemetryObjects=function(){return this.telemetryObjectPromise},i}),n("platform/telemetry/src/TelemetrySubscriber",["./TelemetrySubscription"],function(e){function t(e,t){this.$q=e,this.$timeout=t}return t.prototype.subscribe=function(t,n,i){return new e(this.$q,this.$timeout,t,n,i)},t}),n("platform/telemetry/src/TelemetryHandle",[],function(){function e(e,t){function n(e,t,n){function o(t){return i[s]=t,n&&r&&n(e,t),t}var s=e.getId(),a=e.getCapability("telemetry");return a.requestData(t).then(o)}var i={},r=!0,o=Object.create(t);return o.unsubscribe=function(){return r=!1,t.unsubscribe()},o.getSeries=function(e){var t=e.getId();return i[t]},o.request=function(i,r){function o(e){return n(e,i,r)}function s(t){return e.all(t.map(o))}return i="number"==typeof i?{duration:i}:i,t.promiseTelemetryObjects().then(s)},o.getDatum=function(e,n){function i(i){return i?i.getDatum?i.getDatum(n):t.makeDatum(e,i,n):void 0}return"number"!=typeof n?t.getDatum(e):i(this.getSeries(e))},o}return e}),n("platform/telemetry/src/TelemetryHandler",["./TelemetryHandle"],function(e){function t(e,t){this.$q=e,this.telemetrySubscriber=t}return t.prototype.handle=function(t,n,i){var r=this.telemetrySubscriber.subscribe(t,n,i);return new e(this.$q,r)},t}),n("platform/telemetry/bundle",["./src/TelemetryAggregator","./src/TelemetryController","./src/TelemetryCapability","./src/TelemetryFormatter","./src/TelemetrySubscriber","./src/TelemetryHandler","legacyRegistry"],function(e,t,n,i,r,o,s){s.register("platform/telemetry",{name:"Data bundle",description:"Interfaces and infrastructure for real-time and historical data",configuration:{paths:{moment:"moment.min"},shim:{moment:{exports:"moment"}}},extensions:{components:[{provides:"telemetryService",type:"aggregator",implementation:e,depends:["$q"]}],controllers:[{key:"TelemetryController",implementation:t,depends:["$scope","$q","$timeout","$log"]}],capabilities:[{key:"telemetry",implementation:n,depends:["openmct","$injector","$q","$log"]}],services:[{key:"telemetryFormatter",implementation:i,depends:["formatService","DEFAULT_TIME_FORMAT"]},{key:"telemetrySubscriber",implementation:r,depends:["$q","$timeout"]},{key:"telemetryHandler",implementation:o,depends:["$q","telemetrySubscriber"]}],licenses:[{name:"Moment.js",version:"2.11.1",author:"Tim Wood, Iskren Chernev, Moment.js contributors",description:"Time/date parsing/formatting",website:"http://momentjs.com",copyright:"Copyright (c) 2011-2014 Tim Wood, Iskren Chernev, Moment.js contributors",license:"license-mit",link:"https://raw.githubusercontent.com/moment/moment/develop/LICENSE"}]}})}),n("src/defaultRegistry",["legacyRegistry","../src/adapter/bundle","../src/api/objects/bundle","../src/api/telemetry/bundle","../example/builtins/bundle","../example/composite/bundle","../example/eventGenerator/bundle","../example/export/bundle","../example/extensions/bundle","../example/forms/bundle","../example/identity/bundle","../example/imagery/bundle","../example/mobile/bundle","../example/msl/bundle","../example/notifications/bundle","../example/persistence/bundle","../example/plotOptions/bundle","../example/policy/bundle","../example/profiling/bundle","../example/scratchpad/bundle","../example/taxonomy/bundle","../example/worker/bundle","../example/localTimeSystem/bundle","../platform/commonUI/about/bundle","../platform/commonUI/browse/bundle","../platform/commonUI/dialog/bundle","../platform/commonUI/edit/bundle","../platform/commonUI/formats/bundle","../platform/commonUI/general/bundle","../platform/commonUI/inspect/bundle","../platform/commonUI/mobile/bundle","../platform/commonUI/notification/bundle","../platform/commonUI/regions/bundle","../platform/commonUI/themes/espresso/bundle","../platform/commonUI/themes/snow/bundle","../platform/containment/bundle","../platform/core/bundle","../platform/entanglement/bundle","../platform/execution/bundle","../platform/exporters/bundle","../platform/features/clock/bundle","../platform/features/fixed/bundle","../platform/features/conductor/core/bundle","../platform/features/conductor/compatibility/bundle","../platform/features/conductor/utcTimeSystem/bundle","../platform/features/imagery/bundle","../platform/features/layout/bundle","../platform/features/my-items/bundle","../platform/features/pages/bundle","../platform/features/plot/bundle","../platform/features/static-markup/bundle","../platform/features/table/bundle","../platform/features/timeline/bundle","../platform/forms/bundle","../platform/framework/bundle","../platform/framework/src/load/Bundle","../platform/identity/bundle","../platform/persistence/aggregator/bundle","../platform/persistence/couch/bundle","../platform/persistence/elastic/bundle","../platform/persistence/local/bundle","../platform/persistence/queue/bundle","../platform/policy/bundle","../platform/representation/bundle","../platform/search/bundle","../platform/status/bundle","../platform/telemetry/bundle"],function(e){var t=["src/adapter","src/api/objects","src/api/telemetry","platform/framework","platform/core","platform/representation","platform/commonUI/about","platform/commonUI/browse","platform/commonUI/edit","platform/commonUI/dialog","platform/commonUI/formats","platform/commonUI/general","platform/commonUI/inspect","platform/commonUI/mobile","platform/commonUI/notification","platform/containment","platform/execution","platform/exporters","platform/telemetry","platform/features/clock","platform/features/fixed","platform/features/imagery","platform/features/layout","platform/features/pages","platform/features/plot","platform/features/timeline","platform/features/table","platform/forms","platform/identity","platform/persistence/aggregator","platform/persistence/queue","platform/policy","platform/entanglement","platform/search","platform/status","platform/commonUI/regions"];return t.forEach(function(t){e.enable(t)}),e}),n("src/api/TimeConductor",["EventEmitter"],function(e){function t(){e.call(this),this.system=void 0,this.toi=void 0,this.boundsVal={start:void 0,end:void 0},this.followMode=!1}return t.prototype=Object.create(e.prototype),t.prototype.validateBounds=function(e){return void 0===e.start||void 0===e.end||isNaN(e.start)||isNaN(e.end)?"Start and end must be specified as integer values":e.start>e.end?"Specified start date exceeds end bound":!0},t.prototype.follow=function(e){return arguments.length>0&&(this.followMode=e,this.emit("follow",this.followMode)),this.followMode},t.prototype.bounds=function(e){if(arguments.length>0){var t=this.validateBounds(e);if(t!==!0)throw new Error(t);this.boundsVal=JSON.parse(JSON.stringify(e)),this.emit("bounds",this.boundsVal),(this.toi<e.start||this.toi>e.end)&&this.timeOfInterest(void 0)}return JSON.parse(JSON.stringify(this.boundsVal))},t.prototype.timeSystem=function(e,t){if(arguments.length>=2)this.system=e,this.emit("timeSystem",this.system),this.bounds(t);else if(1===arguments.length)throw new Error("Must set bounds when changing time system");return this.system},t.prototype.timeOfInterest=function(e){return arguments.length>0&&(this.toi=e,this.emit("timeOfInterest",this.toi)),this.toi},t}),n("src/api/objects/MutableObject",["lodash"],function(e){function t(e,t){this.eventEmitter=e,this.object=t,this.unlisteners=[]}function n(e,t){return[e.identifier.key,t].join(":")}var i="mutation";return t.prototype.stopListening=function(){this.unlisteners.forEach(function(e){e()})},t.prototype.on=function(e,t){var i=n(this.object,e),r=this.eventEmitter.off.bind(this.eventEmitter,i,t);this.eventEmitter.on(i,t),this.unlisteners.push(r)},t.prototype.set=function(t,r){e.set(this.object,t,r),e.set(this.object,"modified",Date.now()),this.eventEmitter.emit(n(this.object,t),r),this.eventEmitter.emit(n(this.object,"*"),this.object),this.eventEmitter.emit(i,this.object)},t}),n("src/api/objects/RootRegistry",["lodash"],function(e){function t(){this.providers=[]}function n(t){return e.isObject(t)&&e.has(t,"key")&&e.has(t,"namespace")}return t.prototype.getRoots=function(){var t=this.providers.map(function(e){return e()});return Promise.all(t).then(e.flatten)},t.prototype.addRoot=function(t){n(t)||e.isArray(t)&&e.every(t,n)?this.providers.push(function(){return t}):e.isFunction(t)&&this.providers.push(t)},t}),n("src/api/objects/RootObjectProvider",[],function(){function e(e){this.rootRegistry=e}return e.prototype.get=function(){return this.rootRegistry.getRoots().then(function(e){return{identifier:{key:"ROOT",namespace:""},name:"The root object",type:"root",composition:e}})},e}),n("src/api/objects/ObjectAPI",["lodash","./object-utils","./MutableObject","./RootRegistry","./RootObjectProvider","EventEmitter"],function(e,t,n,i,r,o){function s(){this.eventEmitter=new o,this.providers={},this.rootRegistry=new i,this.rootProvider=new r(this.rootRegistry)}return s.prototype.supersecretSetFallbackProvider=function(e){this.fallbackProvider=e},s.prototype.getProvider=function(e){return"ROOT"===e.key?this.rootProvider:this.providers[e.namespace]||this.fallbackProvider},s.prototype.getRoot=function(){return this.rootProvider.get()},s.prototype.addProvider=function(e,t){this.providers[e]=t},["save","delete","get"].forEach(function(e){s.prototype[e]=function(){var t=arguments[0],n=this.getProvider(t);if(!n)throw new Error("No Provider Matched");if(!n[e])throw new Error("Provider does not support ["+e+"].");return n[e].apply(n,arguments)}}),s.prototype.addRoot=function(e){this.rootRegistry.addRoot(e)},s.prototype.mutate=function(e,t,i){var r=new n(this.eventEmitter,e);return r.set(t,i)},s.prototype.observe=function(e,t,i){var r=new n(this.eventEmitter,e);return r.on(t,i),r.stopListening.bind(r)},s}),n("src/api/composition/DefaultCompositionProvider",["lodash","../objects/object-utils"],function(e,t){function n(e){this.publicAPI=e,this.listeningTo={}}return n.prototype.appliesTo=function(e){return!!e.composition},n.prototype.load=function(e){return Promise.all(e.composition)},n.prototype.on=function(e,n,i,r){this.establishTopicListener();var o=t.makeKeyString(e.identifier),s=this.listeningTo[o];s||(s=this.listeningTo[o]={add:[],remove:[],composition:[].slice.apply(e.composition)}),s[n].push({callback:i,context:r})},n.prototype.off=function(n,i,r,o){var s=t.makeKeyString(n.identifier),a=this.listeningTo[s],c=e.findIndex(a[i],function(e){return e.callback===r&&e.context===o});a[i].splice(c,1),a.add.length||a.remove.length||delete this.listeningTo[s]},n.prototype.remove=function(e,t){throw new Error("Default Provider does not implement removal.")},n.prototype.add=function(e,t){throw new Error("Default Provider does not implement adding.")},n.prototype.establishTopicListener=function(){if(!this.topicListener){var e=this.publicAPI.$injector.get("topic"),t=e("mutation");this.topicListener=t.listen(this.onMutation.bind(this))}},n.prototype.onMutation=function(n){function i(e){return function(t){t.context?t.callback.call(t.context,e):t.callback(e)}}var r=n.getId(),o=this.listeningTo[r];if(o){var s=o.composition.map(t.makeKeyString),a=n.getModel().composition,c=e.difference(a,s).map(t.parseKeyString),l=e.difference(s,a).map(t.parseKeyString);c.forEach(function(e){o.add.forEach(i(e))}),l.forEach(function(e){o.remove.forEach(i(e))}),o.composition=a.map(t.parseKeyString)}},n}),n("src/api/composition/CompositionCollection",["lodash","../objects/object-utils"],function(e,t){function n(e,t,n){this.domainObject=e,this.provider=t,this.publicAPI=n,this.listeners={add:[],remove:[],load:[]},this.onProviderAdd=this.onProviderAdd.bind(this),this.onProviderRemove=this.onProviderRemove.bind(this)}return n.prototype.on=function(e,t,n){if(!this.listeners[e])throw new Error("Event not supported by composition: "+e);"add"===e&&this.provider.on(this.domainObject,"add",this.onProviderAdd,this),"remove"===e&&this.provider.on(this.domainObject,"remove",this.onProviderRemove,this),this.listeners[e].push({callback:t,context:n})},n.prototype.off=function(t,n,i){if(!this.listeners[t])throw new Error("Event not supported by composition: "+t);var r=e.findIndex(this.listeners[t],function(e){return e.callback===n&&e.context===i});if(-1===r)throw new Error("Tried to remove a listener that does not exist");this.listeners[t].splice(r,1),0===this.listeners[t].length&&("add"===t?this.provider.off(this.domainObject,"add",this.onProviderAdd,this):"remove"===t&&this.provider.off(this.domainObject,"remove",this.onProviderRemove,this))},n.prototype.add=function(e,t){t?this.emit("add",e):this.provider.add(this.domainObject,e.identifier)},n.prototype.load=function(){return this.provider.load(this.domainObject).then(function(e){return Promise.all(e.map(this.onProviderAdd,this))}.bind(this)).then(function(e){return this.emit("load"),e}.bind(this))},n.prototype.remove=function(e,t){t?this.emit("remove",e):this.provider.remove(this.domainObject,e.identifier)},n.prototype.onProviderAdd=function(e){return this.publicAPI.objects.get(e).then(function(e){return this.add(e,!0),e}.bind(this))},n.prototype.onProviderRemove=function(e){this.remove(e,!0)},n.prototype.emit=function(e,t){this.listeners[e].forEach(function(e){e.context?e.callback.call(e.context,t):e.callback(t)})},n}),n("src/api/composition/CompositionAPI",["lodash","EventEmitter","./DefaultCompositionProvider","./CompositionCollection"],function(e,t,n,i){function r(e){this.registry=[],this.policies=[],this.addProvider(new n(e)),this.publicAPI=e}return r.prototype.addProvider=function(e){this.registry.unshift(e)},r.prototype.get=function(t){var n=e.find(this.registry,function(e){return e.appliesTo(t)});if(n)return new i(t,n,this.publicAPI)},r.prototype.addPolicy=function(e){this.policies.push(e)},r.prototype.checkPolicy=function(e,t){return this.policies.every(function(n){return n(e,t)})},r}),n("src/api/types/Type",[],function(){function e(e){this.definition=e}return e.prototype.check=function(e){return e.type===this.key},e.prototype.toLegacyDefinition=function(){var e={};return e.name=this.definition.label,e.cssClass=this.definition.cssClass,e.description=this.definition.description,e.properties=this.definition.form,this.definition.initialize&&(e.model={},this.definition.initialize(e.model)),this.definition.creatable&&(e.features=["creation"]),e},e}),n("src/api/types/TypeRegistry",["./Type"],function(e){function t(){this.types={}}return t.prototype.addType=function(t,n){this.types[t]=new e(n)},t.prototype.listKeys=function(){return Object.keys(this.types)},t.prototype.get=function(e){return this.types[e]},t}),n("text!src/api/ui/dialog.html",[],function(){return'<div class="abs overlay">\n    <div class="abs blocker"></div>\n    <div class="abs holder">\n        <a class="clk-icon icon ui-symbol close">x</a>\n        <div class="abs contents">\n            <div class="abs top-bar">\n                <div class="title"></div>\n                <div class="hint"></div>\n            </div>\n            <div class=\'abs editor\'>\n            </div>\n            <div class="abs bottom-bar">\n                <a class=\'s-btn major ok\'>OK</a>\n                <a class=\'s-btn cancel\'>Cancel</a>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n'}),n("src/api/ui/Dialog",["text!./dialog.html","zepto"],function(e,t){function n(e,t){this.view=e,this.title=t,this.showing=!1,this.enabledState=!0}return n.prototype.show=function(){if(this.showing)throw new Error("Dialog already showing.");var n=t("body"),i=t(e),r=i.find(".contents .editor"),o=i.find(".close"),s=i.find(".ok"),a=i.find(".cancel");return this.title&&i.find(".title").text(this.title),n.append(i),this.view.show(r[0]),this.$dialog=i,this.$ok=s,this.showing=!0,[s,a,o].forEach(function(e){e.on("click",this.hide.bind(this))}.bind(this)),new Promise(function(e,t){s.on("click",e),a.on("click",t),o.on("click",t)})},n.prototype.hide=function(){this.showing&&(this.$dialog.remove(),this.view.destroy(),this.showing=!1)},n.prototype.enabled=function(e){return void 0!==e&&(this.enabledState=e,this.showing&&this.$ok.toggleClass("disabled",!e)),this.enabledState},n}),n("src/api/ui/GestureAPI",[],function(){function e(e,t){this.selectGesture=e,this.contextMenuGesture=t}return e.prototype.selectable=function(e,t){return this.selectGesture.apply(e,t)},e.prototype.contextMenu=function(e,t){return this.contextMenuGesture.apply(e,t)},e}),n("src/api/api",["./TimeConductor","./objects/ObjectAPI","./composition/CompositionAPI","./types/TypeRegistry","./ui/Dialog","./ui/GestureAPI","./telemetry/TelemetryAPI"],function(e,t,n,i,r,o,s){return{TimeConductor:e,ObjectAPI:t,CompositionAPI:n,Dialog:r,TypeRegistry:i,GestureAPI:o,TelemetryAPI:s}}),n("src/selection/Selection",["EventEmitter"],function(e){function t(){e.call(this),this.selected=[]}return t.prototype=Object.create(e.prototype),t.prototype.add=function(e){this.clear(),this.selected.push(e),this.emit("change")},t.prototype.remove=function(e){this.selected=this.selected.filter(function(t){return!e.matches(t)}),this.emit("change")},t.prototype.contains=function(e){return this.selected.some(function(t){return e.matches(t)})},t.prototype.clear=function(){this.selected=[],this.emit("change")},t.prototype.primary=function(){return this.selected[this.selected.length-1]},t.prototype.all=function(){return this.selected},t}),n("text!example/generator/generatorWorker.js",[],function(){return"/*****************************************************************************\n * Open MCT, Copyright (c) 2014-2016, United States Government\n * as represented by the Administrator of the National Aeronautics and Space\n * Administration. All rights reserved.\n *\n * Open MCT is licensed under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * http://www.apache.org/licenses/LICENSE-2.0.\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n *\n * Open MCT includes source code licensed under additional open source\n * licenses. See the Open Source Licenses file (LICENSES.md) included with\n * this source code distribution or the Licensing information page available\n * at runtime from the About dialog for additional information.\n *****************************************************************************/\n\n/*global self*/\n\n(function () {\n\n    var FIFTEEN_MINUTES = 15 * 60 * 1000;\n\n    var handlers = {\n        subscribe: onSubscribe,\n        unsubscribe: onUnsubscribe,\n        request: onRequest\n    };\n\n    var subscriptions = {};\n\n    function workSubscriptions(timestamp) {\n        var now = Date.now();\n        var nextWork = Math.min.apply(Math, Object.values(subscriptions).map(function (subscription) {\n            return subscription(now);\n        }));\n        var wait = nextWork - now;\n        if (wait < 0) {\n            wait = 0;\n        }\n\n        if (Number.isFinite(wait)) {\n            setTimeout(workSubscriptions, wait);\n        }\n    }\n\n    function onSubscribe(message) {\n        var data = message.data;\n\n        // Keep\n        var start = Date.now();\n        var step = 1000 / data.dataRateInHz;\n        var nextStep = start - (start % step) + step;\n\n        function work(now) {\n            while (nextStep < now) {\n                self.postMessage({\n                    id: message.id,\n                    data: {\n                        utc: nextStep,\n                        yesterday: nextStep - 60*60*24*1000,\n                        delta: 60*60*24*1000,\n                        sin: sin(nextStep, data.period, data.amplitude, data.offset),\n                        cos: cos(nextStep, data.period, data.amplitude, data.offset)\n                    }\n                });\n                nextStep += step;\n            }\n            return nextStep;\n        }\n\n        subscriptions[message.id] = work;\n        workSubscriptions();\n    }\n\n    function onUnsubscribe(message) {\n        delete subscriptions[message.data.id];\n    }\n\n    function onRequest(message) {\n        var data = message.data;\n        if (data.end == undefined) {\n            data.end = Date.now();\n        }\n        if (data.start == undefined){\n            data.start = data.end - FIFTEEN_MINUTES;\n        }\n\n        var now = Date.now();\n        var start = data.start;\n        var end = data.end > now ? now : data.end;\n        var amplitude = data.amplitude;\n        var period = data.period;\n        var offset = data.offset;\n        var dataRateInHz = data.dataRateInHz;\n\n        var step = 1000 / dataRateInHz;\n        var nextStep = start - (start % step) + step;\n\n        var data = [];\n\n        for (; nextStep < end; nextStep += step) {\n            data.push({\n                utc: nextStep,\n                yesterday: nextStep - 60*60*24*1000,\n                delta: 60*60*24*1000,\n                sin: sin(nextStep, period, amplitude, offset),\n                cos: cos(nextStep, period, amplitude, offset)\n            });\n        }\n        self.postMessage({\n            id: message.id,\n            data: data\n        });\n    }\n\n    function cos(timestamp, period, amplitude, offset) {\n        return amplitude *\n            Math.cos(timestamp / period / 1000 * Math.PI * 2) + offset;\n    }\n\n    function sin(timestamp, period, amplitude, offset) {\n        return amplitude *\n            Math.sin(timestamp / period / 1000 * Math.PI * 2) + offset;\n    }\n\n    function sendError(error, message) {\n        self.postMessage({\n            error: error.name + ': ' + error.message,\n            message: message,\n            id: message.id\n        });\n    }\n\n    self.onmessage = function handleMessage(event) {\n        var message = event.data;\n        var handler = handlers[message.request];\n\n        if (!handler) {\n            sendError(new Error('unknown message type'), message);\n        } else {\n            try {\n                handler(message);\n            } catch (e) {\n                sendError(e, message);\n            }\n        }\n    };\n\n}());\n";
}),n("example/generator/WorkerInterface",["text!./generatorWorker.js","uuid"],function(e,t){function n(){this.worker=new Worker(r),this.worker.onmessage=this.onMessage.bind(this),this.callbacks={}}var i=new Blob([e],{type:"application/javascript"}),r=URL.createObjectURL(i);return n.prototype.onMessage=function(e){e=e.data;var t=this.callbacks[e.id];t&&t(e)&&delete this.callbacks[e.id]},n.prototype.dispatch=function(e,n,i){var r={request:e,data:n,id:t()};return i&&(this.callbacks[r.id]=i),this.worker.postMessage(r),r.id},n.prototype.request=function(e){function t(e){return e.error?n.reject(e.error):n.resolve(e.data),!0}var n={},i=new Promise(function(e,t){n.resolve=e,n.reject=t});return this.dispatch("request",e,t),i},n.prototype.subscribe=function(e,t){var n=!1,i=function(e){return n?!0:void t(e.data)},r=this.dispatch("subscribe",e,i);return function(){n=!0,this.dispatch("unsubscribe",{id:r})}.bind(this)},n}),n("example/generator/GeneratorProvider",["./WorkerInterface"],function(e){function t(){this.workerInterface=new e}var n={amplitude:1,period:10,offset:0,dataRateInHz:1};return t.prototype.canProvideTelemetry=function(e){return"generator"===e.type},t.prototype.supportsRequest=t.prototype.supportsSubscribe=t.prototype.canProvideTelemetry,t.prototype.makeWorkerRequest=function(e,t){var i=["amplitude","period","offset","dataRateInHz"],r={};return i.forEach(function(i){e.telemetry&&e.telemetry.hasOwnProperty(i)&&(r[i]=e.telemetry[i]),t.hasOwnProperty(i)&&(r[i]=t[i]),r[i]||(r[i]=n[i]),r[i]=Number(r[i])}),r},t.prototype.request=function(e,t){var n=this.makeWorkerRequest(e,t);return n.start=t.start,n.end=t.end,this.workerInterface.request(n)},t.prototype.subscribe=function(e,t,n){var i=this.makeWorkerRequest(e,n);return this.workerInterface.subscribe(i,t)},t}),n("example/generator/SinewaveLimitCapability",[],function(){"use strict";function e(e){return{limits:function(e){return i},evaluate:function(e,r){return r=r||"sin",e[r]>t?i.rh:e[r]<-t?i.rl:e[r]>n?i.yh:e[r]<-n?i.yl:void 0}}}var t=.9,n=.5,i={rh:{cssClass:"s-limit-upr s-limit-red",low:t,high:Number.POSITIVE_INFINITY,name:"Red High"},rl:{cssClass:"s-limit-lwr s-limit-red",high:-t,low:Number.NEGATIVE_INFINITY,name:"Red Low"},yh:{cssClass:"s-limit-upr s-limit-yellow",low:n,high:t,name:"Yellow High"},yl:{cssClass:"s-limit-lwr s-limit-yellow",low:-t,high:-n,name:"Yellow Low"}};return e.appliesTo=function(e){return"generator"===e.type},e}),n("example/generator/SinewaveConstants",{START_TIME:Date.now()-864e5}),n("example/generator/SinewaveDeltaFormat",["./SinewaveConstants","moment"],function(e,t){function n(){}function i(e){return e>=10?String(e):"0"+e}var r=e.START_TIME,o=/^-?\d+:\d+:\d+$/,s=1e3,a=60*s,c=60*a;return n.prototype.format=function(e){var t=Math.abs(e-r),n=r>e,o=Math.floor(t/s)%60,l=Math.floor(t/a)%60,u=Math.floor(t/c);return(n?"-":"")+[u,l,o].map(i).join(":")},n.prototype.validate=function(e){return o.test(e)},n.prototype.parse=function(e){var t="-"===e[0],n=e.replace("-","").split(":");return[c,a,s].map(function(e,t){return parseInt(n[t],10)*e}).reduce(function(e,t){return e+t},0)*(t?-1:1)+r},n}),n("example/generator/plugin",["./GeneratorProvider","./SinewaveLimitCapability","./SinewaveDeltaFormat"],function(e,t,n){var i={capabilities:[{key:"limit",implementation:t}],formats:[{key:"example.delta",implementation:n}],constants:[{key:"TIME_CONDUCTOR_DOMAINS",value:[{key:"time",name:"Time"},{key:"yesterday",name:"Yesterday"},{key:"delta",name:"Delta"}],priority:-1}]};return function(t){Object.keys(i).forEach(function(e){var n=i[e];n.forEach(function(n){t.legacyExtension(e,n)})}),t.types.addType("generator",{label:"Sine Wave Generator",description:"For development use. Generates example streaming telemetry data using a simple sine wave algorithm.",cssClass:"icon-telemetry",creatable:!0,form:[{name:"Period",control:"textfield",cssClass:"l-input-sm l-numeric",key:"period",required:!0,property:["telemetry","period"],pattern:"^\\d*(\\.\\d*)?$"},{name:"Amplitude",control:"textfield",cssClass:"l-input-sm l-numeric",key:"amplitude",required:!0,property:["telemetry","amplitude"],pattern:"^\\d*(\\.\\d*)?$"},{name:"Offset",control:"textfield",cssClass:"l-input-sm l-numeric",key:"offset",required:!0,property:["telemetry","offset"],pattern:"^\\d*(\\.\\d*)?$"},{name:"Data Rate (hz)",control:"textfield",cssClass:"l-input-sm l-numeric",key:"dataRateInHz",required:!0,property:["telemetry","dataRateInHz"],pattern:"^\\d*(\\.\\d*)?$"}],initialize:function(e){e.telemetry={period:10,amplitude:1,offset:0,dataRateInHz:1,domains:[{key:"utc",name:"Time",format:"utc"},{key:"yesterday",name:"Yesterday",format:"utc"},{key:"delta",name:"Delta",format:"example.delta"}],ranges:[{key:"sin",name:"Sine"},{key:"cos",name:"Cosine"}]}}}),t.telemetry.addProvider(new e)}}),n("src/plugins/plugins",["lodash","../../platform/features/conductor/utcTimeSystem/src/UTCTimeSystem","../../example/generator/plugin"],function(e,t,n){var i={CouchDB:"platform/persistence/couch",Elasticsearch:"platform/persistence/elastic",Espresso:"platform/commonUI/themes/espresso",LocalStorage:"platform/persistence/local",MyItems:"platform/features/my-items",Snow:"platform/commonUI/themes/snow"},r=e.mapValues(i,function(e,t){return function(){return function(t){t.legacyRegistry.enable(e)}}});r.UTCTimeSystem=function(){return function(e){e.legacyExtension("timeSystems",{implementation:t,depends:["$timeout"]})}};var o=!1;return r.Conductor=function(e){function t(t,n){var i={},r=n.systems.find(function(t){return t.metadata.key===e.defaultTimeSystem});void 0!==r&&(i=r.defaults(),void 0!==e.defaultTimespan&&(i.deltas.start=e.defaultTimespan,i.bounds.start=i.bounds.end-e.defaultTimespan,r.defaults(i)),t.conductor.timeSystem(r,i.bounds))}return e||(e={}),function(n){n.legacyExtension("constants",{key:"DEFAULT_TIMECONDUCTOR_MODE",value:e.showConductor?"fixed":"realtime",priority:o?"mandatory":"fallback"}),void 0!==e.showConductor&&n.legacyExtension("constants",{key:"SHOW_TIMECONDUCTOR",value:e.showConductor,priority:o?"mandatory":"fallback"}),(void 0!==e.defaultTimeSystem||void 0!==e.defaultTimespan)&&n.legacyExtension("runs",{implementation:t,depends:["openmct","timeConductorViewService"]}),o||(n.legacyRegistry.enable("platform/features/conductor/core"),n.legacyRegistry.enable("platform/features/conductor/compatibility")),o=!0}},r.CouchDB=function(e){return function(t){if(e){var n="config/couch";t.legacyRegistry.register(n,{extensions:{constants:[{key:"COUCHDB_PATH",value:e,priority:"mandatory"}]}}),t.legacyRegistry.enable(n)}t.legacyRegistry.enable(i.CouchDB)}},r.Elasticsearch=function(e){return function(t){if(e){var n="config/elastic";t.legacyRegistry.register(n,{extensions:{constants:[{key:"ELASTIC_ROOT",value:e,priority:"mandatory"}]}}),t.legacyRegistry.enable(n)}t.legacyRegistry.enable(i.Elasticsearch)}},r.Generator=function(){return n},r}),n("src/ui/ViewRegistry",[],function(){function e(){this.providers=[]}return e.prototype.get=function(e){return this.providers.filter(function(t){return t.canView(e)})},e.prototype.addProvider=function(e){this.providers.push(e)},e}),n("src/MCT",["EventEmitter","legacyRegistry","uuid","./api/api","./selection/Selection","./api/objects/object-utils","./plugins/plugins","./ui/ViewRegistry"],function(e,t,n,i,r,o,s,a){function c(){e.call(this),this.legacyBundle={extensions:{services:[{key:"openmct",implementation:function(e){return this.$injector=e,this}.bind(this),depends:["$injector"]}]}},this.selection=new r,this.conductor=new i.TimeConductor,this.composition=new i.CompositionAPI(this),this.mainViews=new a,this.inspectors=new a,this.propertyEditors=new a,this.indicators=new a,this.toolbars=new a,this.types=new i.TypeRegistry,this.gestures=new i.GestureAPI,this.objects=new i.ObjectAPI,this.telemetry=new i.TelemetryAPI(this),this.TimeConductor=this.conductor,this.on("navigation",this.selection.clear.bind(this.selection))}return c.prototype=Object.create(e.prototype),Object.keys(i).forEach(function(e){c.prototype[e]=i[e]}),c.prototype.MCT=c,c.prototype.legacyExtension=function(e,t){this.legacyBundle.extensions[e]=this.legacyBundle.extensions[e]||[],this.legacyBundle.extensions[e].push(t)},c.prototype.setAssetPath=function(e){this.legacyExtension("constants",{key:"ASSETS_PATH",value:e})},c.prototype.start=function(e){e||(e=document.body);var n=document.createElement("div");n.setAttribute("ng-view",""),n.className="user-environ",e.appendChild(n),this.legacyExtension("runs",{depends:["navigationService"],implementation:function(e){e.addListener(this.emit.bind(this,"navigation"))}.bind(this)}),this.types.listKeys().forEach(function(e){var t=this.types.get(e),n=t.toLegacyDefinition();n.key=e,this.legacyExtension("types",n)}.bind(this)),t.register("adapter",this.legacyBundle),t.enable("adapter"),this.emit("start")},c.prototype.install=function(e){e(this)},c.prototype.plugins=s,c}),e.config({paths:{legacyRegistry:"src/legacyRegistry",angular:"bower_components/angular/angular.min","angular-route":"bower_components/angular-route/angular-route.min",csv:"bower_components/comma-separated-values/csv.min",EventEmitter:"bower_components/eventemitter3/index","es6-promise":"bower_components/es6-promise/es6-promise.min",html2canvas:"bower_components/html2canvas/build/html2canvas.min",moment:"bower_components/moment/moment","moment-duration-format":"bower_components/moment-duration-format/lib/moment-duration-format",saveAs:"bower_components/FileSaver.js/FileSaver.min",screenfull:"bower_components/screenfull/dist/screenfull.min",text:"bower_components/text/text",uuid:"bower_components/node-uuid/uuid",zepto:"bower_components/zepto/zepto.min",lodash:"bower_components/lodash/lodash",d3:"bower_components/d3/d3.min"},shim:{angular:{exports:"angular"},"angular-route":{deps:["angular"]},EventEmitter:{exports:"EventEmitter"},html2canvas:{exports:"html2canvas"},"moment-duration-format":{deps:["moment"]},screenfull:{exports:"screenfull"},zepto:{exports:"Zepto"},lodash:{exports:"lodash"},d3:{exports:"d3"}}}),n("openmct",["./platform/framework/src/Main","./src/defaultRegistry","./src/MCT"],function(e,t,n){var i=new n;return i.legacyRegistry=t,i.on("start",function(){return(new e).run(t)}),i.install(i.plugins.Conductor({showConductor:!1})),i}),t("openmct")});
//# sourceMappingURL=almond.js.build.js.map
//# sourceMappingURL=openmct.js.map
